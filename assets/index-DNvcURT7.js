var yR=Object.defineProperty;var V_=i=>{throw TypeError(i)};var _R=(i,e,t)=>e in i?yR(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var tt=(i,e,t)=>_R(i,typeof e!="symbol"?e+"":e,t),sg=(i,e,t)=>e.has(i)||V_("Cannot "+t);var k=(i,e,t)=>(sg(i,e,"read from private field"),t?t.call(i):e.get(i)),Be=(i,e,t)=>e.has(i)?V_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Re=(i,e,t,n)=>(sg(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),fe=(i,e,t)=>(sg(i,e,"access private method"),t);var jc=(i,e,t,n)=>({set _(r){Re(i,e,r,t)},get _(){return k(i,e,n)}});function vR(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const o=Object.getOwnPropertyDescriptor(n,r);o&&Object.defineProperty(i,r,o.get?o:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function jx(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var og={exports:{}},Ra={},lg={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function xR(){if(U_)return De;U_=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(M){return M===null||typeof M!="object"?null:(M=p&&M[p]||M["@@iterator"],typeof M=="function"?M:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function E(M,U,pe){this.props=M,this.context=U,this.refs=w,this.updater=pe||_}E.prototype.isReactComponent={},E.prototype.setState=function(M,U){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,U,"setState")},E.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function C(){}C.prototype=E.prototype;function S(M,U,pe){this.props=M,this.context=U,this.refs=w,this.updater=pe||_}var T=S.prototype=new C;T.constructor=S,v(T,E.prototype),T.isPureReactComponent=!0;var I=Array.isArray,L=Object.prototype.hasOwnProperty,N={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function D(M,U,pe){var K,ve={},_e=null,le=null;if(U!=null)for(K in U.ref!==void 0&&(le=U.ref),U.key!==void 0&&(_e=""+U.key),U)L.call(U,K)&&!b.hasOwnProperty(K)&&(ve[K]=U[K]);var he=arguments.length-2;if(he===1)ve.children=pe;else if(1<he){for(var Se=Array(he),xe=0;xe<he;xe++)Se[xe]=arguments[xe+2];ve.children=Se}if(M&&M.defaultProps)for(K in he=M.defaultProps,he)ve[K]===void 0&&(ve[K]=he[K]);return{$$typeof:i,type:M,key:_e,ref:le,props:ve,_owner:N.current}}function z(M,U){return{$$typeof:i,type:M.type,key:U,ref:M.ref,props:M.props,_owner:M._owner}}function q(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function Z(M){var U={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(pe){return U[pe]})}var X=/\/+/g;function ne(M,U){return typeof M=="object"&&M!==null&&M.key!=null?Z(""+M.key):U.toString(36)}function H(M,U,pe,K,ve){var _e=typeof M;(_e==="undefined"||_e==="boolean")&&(M=null);var le=!1;if(M===null)le=!0;else switch(_e){case"string":case"number":le=!0;break;case"object":switch(M.$$typeof){case i:case e:le=!0}}if(le)return le=M,ve=ve(le),M=K===""?"."+ne(le,0):K,I(ve)?(pe="",M!=null&&(pe=M.replace(X,"$&/")+"/"),H(ve,U,pe,"",function(xe){return xe})):ve!=null&&(q(ve)&&(ve=z(ve,pe+(!ve.key||le&&le.key===ve.key?"":(""+ve.key).replace(X,"$&/")+"/")+M)),U.push(ve)),1;if(le=0,K=K===""?".":K+":",I(M))for(var he=0;he<M.length;he++){_e=M[he];var Se=K+ne(_e,he);le+=H(_e,U,pe,Se,ve)}else if(Se=m(M),typeof Se=="function")for(M=Se.call(M),he=0;!(_e=M.next()).done;)_e=_e.value,Se=K+ne(_e,he++),le+=H(_e,U,pe,Se,ve);else if(_e==="object")throw U=String(M),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return le}function re(M,U,pe){if(M==null)return M;var K=[],ve=0;return H(M,K,"","",function(_e){return U.call(pe,_e,ve++)}),K}function B(M){if(M._status===-1){var U=M._result;U=U(),U.then(function(pe){(M._status===0||M._status===-1)&&(M._status=1,M._result=pe)},function(pe){(M._status===0||M._status===-1)&&(M._status=2,M._result=pe)}),M._status===-1&&(M._status=0,M._result=U)}if(M._status===1)return M._result.default;throw M._result}var ie={current:null},G={transition:null},Q={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:G,ReactCurrentOwner:N};function Y(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:re,forEach:function(M,U,pe){re(M,function(){U.apply(this,arguments)},pe)},count:function(M){var U=0;return re(M,function(){U++}),U},toArray:function(M){return re(M,function(U){return U})||[]},only:function(M){if(!q(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},De.Component=E,De.Fragment=t,De.Profiler=r,De.PureComponent=S,De.StrictMode=n,De.Suspense=c,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,De.act=Y,De.cloneElement=function(M,U,pe){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var K=v({},M.props),ve=M.key,_e=M.ref,le=M._owner;if(U!=null){if(U.ref!==void 0&&(_e=U.ref,le=N.current),U.key!==void 0&&(ve=""+U.key),M.type&&M.type.defaultProps)var he=M.type.defaultProps;for(Se in U)L.call(U,Se)&&!b.hasOwnProperty(Se)&&(K[Se]=U[Se]===void 0&&he!==void 0?he[Se]:U[Se])}var Se=arguments.length-2;if(Se===1)K.children=pe;else if(1<Se){he=Array(Se);for(var xe=0;xe<Se;xe++)he[xe]=arguments[xe+2];K.children=he}return{$$typeof:i,type:M.type,key:ve,ref:_e,props:K,_owner:le}},De.createContext=function(M){return M={$$typeof:a,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:o,_context:M},M.Consumer=M},De.createElement=D,De.createFactory=function(M){var U=D.bind(null,M);return U.type=M,U},De.createRef=function(){return{current:null}},De.forwardRef=function(M){return{$$typeof:u,render:M}},De.isValidElement=q,De.lazy=function(M){return{$$typeof:f,_payload:{_status:-1,_result:M},_init:B}},De.memo=function(M,U){return{$$typeof:d,type:M,compare:U===void 0?null:U}},De.startTransition=function(M){var U=G.transition;G.transition={};try{M()}finally{G.transition=U}},De.unstable_act=Y,De.useCallback=function(M,U){return ie.current.useCallback(M,U)},De.useContext=function(M){return ie.current.useContext(M)},De.useDebugValue=function(){},De.useDeferredValue=function(M){return ie.current.useDeferredValue(M)},De.useEffect=function(M,U){return ie.current.useEffect(M,U)},De.useId=function(){return ie.current.useId()},De.useImperativeHandle=function(M,U,pe){return ie.current.useImperativeHandle(M,U,pe)},De.useInsertionEffect=function(M,U){return ie.current.useInsertionEffect(M,U)},De.useLayoutEffect=function(M,U){return ie.current.useLayoutEffect(M,U)},De.useMemo=function(M,U){return ie.current.useMemo(M,U)},De.useReducer=function(M,U,pe){return ie.current.useReducer(M,U,pe)},De.useRef=function(M){return ie.current.useRef(M)},De.useState=function(M){return ie.current.useState(M)},De.useSyncExternalStore=function(M,U,pe){return ie.current.useSyncExternalStore(M,U,pe)},De.useTransition=function(){return ie.current.useTransition()},De.version="18.3.1",De}var X_;function Fp(){return X_||(X_=1,lg.exports=xR()),lg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function wR(){if(H_)return Ra;H_=1;var i=Fp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(u,c,d){var f,p={},m=null,_=null;d!==void 0&&(m=""+d),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(_=c.ref);for(f in c)n.call(c,f)&&!o.hasOwnProperty(f)&&(p[f]=c[f]);if(u&&u.defaultProps)for(f in c=u.defaultProps,c)p[f]===void 0&&(p[f]=c[f]);return{$$typeof:e,type:u,key:m,ref:_,props:p,_owner:r.current}}return Ra.Fragment=t,Ra.jsx=a,Ra.jsxs=a,Ra}var Y_;function ER(){return Y_||(Y_=1,og.exports=wR()),og.exports}var J=ER(),P=Fp();const Ye=jx(P),CR=vR({__proto__:null,default:Ye},[P]);var Gc={},ag={exports:{}},xn={},ug={exports:{}},cg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function SR(){return K_||(K_=1,function(i){function e(G,Q){var Y=G.length;G.push(Q);e:for(;0<Y;){var M=Y-1>>>1,U=G[M];if(0<r(U,Q))G[M]=Q,G[Y]=U,Y=M;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var Q=G[0],Y=G.pop();if(Y!==Q){G[0]=Y;e:for(var M=0,U=G.length,pe=U>>>1;M<pe;){var K=2*(M+1)-1,ve=G[K],_e=K+1,le=G[_e];if(0>r(ve,Y))_e<U&&0>r(le,ve)?(G[M]=le,G[_e]=Y,M=_e):(G[M]=ve,G[K]=Y,M=K);else if(_e<U&&0>r(le,Y))G[M]=le,G[_e]=Y,M=_e;else break e}}return Q}function r(G,Q){var Y=G.sortIndex-Q.sortIndex;return Y!==0?Y:G.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();i.unstable_now=function(){return a.now()-u}}var c=[],d=[],f=1,p=null,m=3,_=!1,v=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(G){for(var Q=t(d);Q!==null;){if(Q.callback===null)n(d);else if(Q.startTime<=G)n(d),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=t(d)}}function I(G){if(w=!1,T(G),!v)if(t(c)!==null)v=!0,B(L);else{var Q=t(d);Q!==null&&ie(I,Q.startTime-G)}}function L(G,Q){v=!1,w&&(w=!1,C(D),D=-1),_=!0;var Y=m;try{for(T(Q),p=t(c);p!==null&&(!(p.expirationTime>Q)||G&&!Z());){var M=p.callback;if(typeof M=="function"){p.callback=null,m=p.priorityLevel;var U=M(p.expirationTime<=Q);Q=i.unstable_now(),typeof U=="function"?p.callback=U:p===t(c)&&n(c),T(Q)}else n(c);p=t(c)}if(p!==null)var pe=!0;else{var K=t(d);K!==null&&ie(I,K.startTime-Q),pe=!1}return pe}finally{p=null,m=Y,_=!1}}var N=!1,b=null,D=-1,z=5,q=-1;function Z(){return!(i.unstable_now()-q<z)}function X(){if(b!==null){var G=i.unstable_now();q=G;var Q=!0;try{Q=b(!0,G)}finally{Q?ne():(N=!1,b=null)}}else N=!1}var ne;if(typeof S=="function")ne=function(){S(X)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,re=H.port2;H.port1.onmessage=X,ne=function(){re.postMessage(null)}}else ne=function(){E(X,0)};function B(G){b=G,N||(N=!0,ne())}function ie(G,Q){D=E(function(){G(i.unstable_now())},Q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_continueExecution=function(){v||_||(v=!0,B(L))},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return m},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(G){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var Y=m;m=Q;try{return G()}finally{m=Y}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(G,Q){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Y=m;m=G;try{return Q()}finally{m=Y}},i.unstable_scheduleCallback=function(G,Q,Y){var M=i.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?M+Y:M):Y=M,G){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Y+U,G={id:f++,callback:Q,priorityLevel:G,startTime:Y,expirationTime:U,sortIndex:-1},Y>M?(G.sortIndex=Y,e(d,G),t(c)===null&&G===t(d)&&(w?(C(D),D=-1):w=!0,ie(I,Y-M))):(G.sortIndex=U,e(c,G),v||_||(v=!0,B(L))),G},i.unstable_shouldYield=Z,i.unstable_wrapCallback=function(G){var Q=m;return function(){var Y=m;m=Q;try{return G.apply(this,arguments)}finally{m=Y}}}}(cg)),cg}var $_;function RR(){return $_||($_=1,ug.exports=SR()),ug.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function TR(){if(Z_)return xn;Z_=1;var i=Fp(),e=RR();function t(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function o(s,l){a(s,l),a(s+"Capture",l)}function a(s,l){for(r[s]=l,s=0;s<l.length;s++)n.add(l[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(s){return c.call(p,s)?!0:c.call(f,s)?!1:d.test(s)?p[s]=!0:(f[s]=!0,!1)}function _(s,l,h,g){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function v(s,l,h,g){if(l===null||typeof l>"u"||_(s,l,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function w(s,l,h,g,y,x,R){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=y,this.mustUseProperty=h,this.propertyName=s,this.type=l,this.sanitizeURL=x,this.removeEmptyString=R}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){E[s]=new w(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];E[l]=new w(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){E[s]=new w(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){E[s]=new w(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){E[s]=new w(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){E[s]=new w(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){E[s]=new w(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){E[s]=new w(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){E[s]=new w(s,5,!1,s.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function S(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(C,S);E[l]=new w(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(C,S);E[l]=new w(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(C,S);E[l]=new w(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){E[s]=new w(s,1,!1,s.toLowerCase(),null,!1,!1)}),E.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){E[s]=new w(s,1,!1,s.toLowerCase(),null,!0,!0)});function T(s,l,h,g){var y=E.hasOwnProperty(l)?E[l]:null;(y!==null?y.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(v(l,h,y,g)&&(h=null),g||y===null?m(l)&&(h===null?s.removeAttribute(l):s.setAttribute(l,""+h)):y.mustUseProperty?s[y.propertyName]=h===null?y.type===3?!1:"":h:(l=y.attributeName,g=y.attributeNamespace,h===null?s.removeAttribute(l):(y=y.type,h=y===3||y===4&&h===!0?"":""+h,g?s.setAttributeNS(g,l,h):s.setAttribute(l,h))))}var I=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),N=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),Z=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),G=Symbol.iterator;function Q(s){return s===null||typeof s!="object"?null:(s=G&&s[G]||s["@@iterator"],typeof s=="function"?s:null)}var Y=Object.assign,M;function U(s){if(M===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);M=l&&l[1]||""}return`
`+M+s}var pe=!1;function K(s,l){if(!s||pe)return"";pe=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(V){var g=V}Reflect.construct(s,[],l)}else{try{l.call()}catch(V){g=V}s.call(l.prototype)}else{try{throw Error()}catch(V){g=V}s()}}catch(V){if(V&&g&&typeof V.stack=="string"){for(var y=V.stack.split(`
`),x=g.stack.split(`
`),R=y.length-1,A=x.length-1;1<=R&&0<=A&&y[R]!==x[A];)A--;for(;1<=R&&0<=A;R--,A--)if(y[R]!==x[A]){if(R!==1||A!==1)do if(R--,A--,0>A||y[R]!==x[A]){var O=`
`+y[R].replace(" at new "," at ");return s.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",s.displayName)),O}while(1<=R&&0<=A);break}}}finally{pe=!1,Error.prepareStackTrace=h}return(s=s?s.displayName||s.name:"")?U(s):""}function ve(s){switch(s.tag){case 5:return U(s.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return s=K(s.type,!1),s;case 11:return s=K(s.type.render,!1),s;case 1:return s=K(s.type,!0),s;default:return""}}function _e(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case b:return"Fragment";case N:return"Portal";case z:return"Profiler";case D:return"StrictMode";case ne:return"Suspense";case H:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Z:return(s.displayName||"Context")+".Consumer";case q:return(s._context.displayName||"Context")+".Provider";case X:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case re:return l=s.displayName||null,l!==null?l:_e(s.type)||"Memo";case B:l=s._payload,s=s._init;try{return _e(s(l))}catch{}}return null}function le(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(l);case 8:return l===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function he(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Se(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function xe(s){var l=Se(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),g=""+s[l];if(!s.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,x=h.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return y.call(this)},set:function(R){g=""+R,x.call(this,R)}}),Object.defineProperty(s,l,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(R){g=""+R},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Ae(s){s._valueTracker||(s._valueTracker=xe(s))}function Ne(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var h=l.getValue(),g="";return s&&(g=Se(s)?s.checked?"true":"false":s.value),s=g,s!==h?(l.setValue(s),!0):!1}function lt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function kt(s,l){var h=l.checked;return Y({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??s._wrapperState.initialChecked})}function fn(s,l){var h=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;h=he(l.value!=null?l.value:h),s._wrapperState={initialChecked:g,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Xt(s,l){l=l.checked,l!=null&&T(s,"checked",l,!1)}function ft(s,l){Xt(s,l);var h=he(l.value),g=l.type;if(h!=null)g==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+h):s.value!==""+h&&(s.value=""+h);else if(g==="submit"||g==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?rn(s,l.type,h):l.hasOwnProperty("defaultValue")&&rn(s,l.type,he(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function nn(s,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,h||l===s.value||(s.value=l),s.defaultValue=l}h=s.name,h!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,h!==""&&(s.name=h)}function rn(s,l,h){(l!=="number"||lt(s.ownerDocument)!==s)&&(h==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+h&&(s.defaultValue=""+h))}var Xn=Array.isArray;function Hn(s,l,h,g){if(s=s.options,l){l={};for(var y=0;y<h.length;y++)l["$"+h[y]]=!0;for(h=0;h<s.length;h++)y=l.hasOwnProperty("$"+s[h].value),s[h].selected!==y&&(s[h].selected=y),y&&g&&(s[h].defaultSelected=!0)}else{for(h=""+he(h),l=null,y=0;y<s.length;y++){if(s[y].value===h){s[y].selected=!0,g&&(s[y].defaultSelected=!0);return}l!==null||s[y].disabled||(l=s[y])}l!==null&&(l.selected=!0)}}function ai(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return Y({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function tr(s,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(t(92));if(Xn(h)){if(1<h.length)throw Error(t(93));h=h[0]}l=h}l==null&&(l=""),h=l}s._wrapperState={initialValue:he(h)}}function nr(s,l){var h=he(l.value),g=he(l.defaultValue);h!=null&&(h=""+h,h!==s.value&&(s.value=h),l.defaultValue==null&&s.defaultValue!==h&&(s.defaultValue=h)),g!=null&&(s.defaultValue=""+g)}function yt(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function yo(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bs(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?yo(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ir,Os=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,g,y){MSApp.execUnsafeLocalFunction(function(){return s(l,h,g,y)})}:s}(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(ir=ir||document.createElement("div"),ir.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=ir.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function Fs(s,l){if(l){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=l;return}}s.textContent=l}var Or={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mu=["Webkit","ms","Moz","O"];Object.keys(Or).forEach(function(s){Mu.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),Or[l]=Or[s]})});function _o(s,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||Or.hasOwnProperty(s)&&Or[s]?(""+l).trim():l+"px"}function bu(s,l){s=s.style;for(var h in l)if(l.hasOwnProperty(h)){var g=h.indexOf("--")===0,y=_o(h,l[h],g);h==="float"&&(h="cssFloat"),g?s.setProperty(h,y):s[h]=y}}var Ed=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vo(s,l){if(l){if(Ed[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function xo(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ds=null;function wo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ns=null,Yn=null,Kn=null;function Fr(s){if(s=ca(s)){if(typeof Ns!="function")throw Error(t(280));var l=s.stateNode;l&&(l=ec(l),Ns(s.stateNode,s.type,l))}}function Ul(s){Yn?Kn?Kn.push(s):Kn=[s]:Yn=s}function Xl(){if(Yn){var s=Yn,l=Kn;if(Kn=Yn=null,Fr(s),l)for(s=0;s<l.length;s++)Fr(l[s])}}function sn(s,l){return s(l)}function bi(){}var Ht=!1;function Pn(s,l,h){if(Ht)return s(l,h);Ht=!0;try{return sn(s,l,h)}finally{Ht=!1,(Yn!==null||Kn!==null)&&(bi(),Xl())}}function At(s,l){var h=s.stateNode;if(h===null)return null;var g=ec(h);if(g===null)return null;h=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(t(231,l,typeof h));return h}var In=!1;if(u)try{var on={};Object.defineProperty(on,"passive",{get:function(){In=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{In=!1}function st(s,l,h,g,y,x,R,A,O){var V=Array.prototype.slice.call(arguments,3);try{l.apply(h,V)}catch(te){this.onError(te)}}var _t=!1,gn=null,Eo=!1,Cd=null,SC={onError:function(s){_t=!0,gn=s}};function RC(s,l,h,g,y,x,R,A,O){_t=!1,gn=null,st.apply(SC,arguments)}function TC(s,l,h,g,y,x,R,A,O){if(RC.apply(this,arguments),_t){if(_t){var V=gn;_t=!1,gn=null}else throw Error(t(198));Eo||(Eo=!0,Cd=V)}}function zs(s){var l=s,h=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,l.flags&4098&&(h=l.return),s=l.return;while(s)}return l.tag===3?h:null}function dy(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function fy(s){if(zs(s)!==s)throw Error(t(188))}function PC(s){var l=s.alternate;if(!l){if(l=zs(s),l===null)throw Error(t(188));return l!==s?null:s}for(var h=s,g=l;;){var y=h.return;if(y===null)break;var x=y.alternate;if(x===null){if(g=y.return,g!==null){h=g;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===h)return fy(y),s;if(x===g)return fy(y),l;x=x.sibling}throw Error(t(188))}if(h.return!==g.return)h=y,g=x;else{for(var R=!1,A=y.child;A;){if(A===h){R=!0,h=y,g=x;break}if(A===g){R=!0,g=y,h=x;break}A=A.sibling}if(!R){for(A=x.child;A;){if(A===h){R=!0,h=x,g=y;break}if(A===g){R=!0,g=x,h=y;break}A=A.sibling}if(!R)throw Error(t(189))}}if(h.alternate!==g)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?s:l}function gy(s){return s=PC(s),s!==null?py(s):null}function py(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=py(s);if(l!==null)return l;s=s.sibling}return null}var my=e.unstable_scheduleCallback,yy=e.unstable_cancelCallback,IC=e.unstable_shouldYield,LC=e.unstable_requestPaint,vt=e.unstable_now,kC=e.unstable_getCurrentPriorityLevel,Sd=e.unstable_ImmediatePriority,_y=e.unstable_UserBlockingPriority,Ou=e.unstable_NormalPriority,AC=e.unstable_LowPriority,vy=e.unstable_IdlePriority,Fu=null,Oi=null;function MC(s){if(Oi&&typeof Oi.onCommitFiberRoot=="function")try{Oi.onCommitFiberRoot(Fu,s,void 0,(s.current.flags&128)===128)}catch{}}var ui=Math.clz32?Math.clz32:FC,bC=Math.log,OC=Math.LN2;function FC(s){return s>>>=0,s===0?32:31-(bC(s)/OC|0)|0}var Du=64,Nu=4194304;function Hl(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function zu(s,l){var h=s.pendingLanes;if(h===0)return 0;var g=0,y=s.suspendedLanes,x=s.pingedLanes,R=h&268435455;if(R!==0){var A=R&~y;A!==0?g=Hl(A):(x&=R,x!==0&&(g=Hl(x)))}else R=h&~y,R!==0?g=Hl(R):x!==0&&(g=Hl(x));if(g===0)return 0;if(l!==0&&l!==g&&!(l&y)&&(y=g&-g,x=l&-l,y>=x||y===16&&(x&4194240)!==0))return l;if(g&4&&(g|=h&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=g;0<l;)h=31-ui(l),y=1<<h,g|=s[h],l&=~y;return g}function DC(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NC(s,l){for(var h=s.suspendedLanes,g=s.pingedLanes,y=s.expirationTimes,x=s.pendingLanes;0<x;){var R=31-ui(x),A=1<<R,O=y[R];O===-1?(!(A&h)||A&g)&&(y[R]=DC(A,l)):O<=l&&(s.expiredLanes|=A),x&=~A}}function Rd(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function xy(){var s=Du;return Du<<=1,!(Du&4194240)&&(Du=64),s}function Td(s){for(var l=[],h=0;31>h;h++)l.push(s);return l}function Yl(s,l,h){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-ui(l),s[l]=h}function zC(s,l){var h=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var g=s.eventTimes;for(s=s.expirationTimes;0<h;){var y=31-ui(h),x=1<<y;l[y]=0,g[y]=-1,s[y]=-1,h&=~x}}function Pd(s,l){var h=s.entangledLanes|=l;for(s=s.entanglements;h;){var g=31-ui(h),y=1<<g;y&l|s[g]&l&&(s[g]|=l),h&=~y}}var Ke=0;function wy(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Ey,Id,Cy,Sy,Ry,Ld=!1,ju=[],Dr=null,Nr=null,zr=null,Kl=new Map,$l=new Map,jr=[],jC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ty(s,l){switch(s){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":Kl.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(l.pointerId)}}function Zl(s,l,h,g,y,x){return s===null||s.nativeEvent!==x?(s={blockedOn:l,domEventName:h,eventSystemFlags:g,nativeEvent:x,targetContainers:[y]},l!==null&&(l=ca(l),l!==null&&Id(l)),s):(s.eventSystemFlags|=g,l=s.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),s)}function GC(s,l,h,g,y){switch(l){case"focusin":return Dr=Zl(Dr,s,l,h,g,y),!0;case"dragenter":return Nr=Zl(Nr,s,l,h,g,y),!0;case"mouseover":return zr=Zl(zr,s,l,h,g,y),!0;case"pointerover":var x=y.pointerId;return Kl.set(x,Zl(Kl.get(x)||null,s,l,h,g,y)),!0;case"gotpointercapture":return x=y.pointerId,$l.set(x,Zl($l.get(x)||null,s,l,h,g,y)),!0}return!1}function Py(s){var l=js(s.target);if(l!==null){var h=zs(l);if(h!==null){if(l=h.tag,l===13){if(l=dy(h),l!==null){s.blockedOn=l,Ry(s.priority,function(){Cy(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Gu(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var h=Ad(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(h===null){h=s.nativeEvent;var g=new h.constructor(h.type,h);Ds=g,h.target.dispatchEvent(g),Ds=null}else return l=ca(h),l!==null&&Id(l),s.blockedOn=h,!1;l.shift()}return!0}function Iy(s,l,h){Gu(s)&&h.delete(l)}function WC(){Ld=!1,Dr!==null&&Gu(Dr)&&(Dr=null),Nr!==null&&Gu(Nr)&&(Nr=null),zr!==null&&Gu(zr)&&(zr=null),Kl.forEach(Iy),$l.forEach(Iy)}function ql(s,l){s.blockedOn===l&&(s.blockedOn=null,Ld||(Ld=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,WC)))}function Ql(s){function l(y){return ql(y,s)}if(0<ju.length){ql(ju[0],s);for(var h=1;h<ju.length;h++){var g=ju[h];g.blockedOn===s&&(g.blockedOn=null)}}for(Dr!==null&&ql(Dr,s),Nr!==null&&ql(Nr,s),zr!==null&&ql(zr,s),Kl.forEach(l),$l.forEach(l),h=0;h<jr.length;h++)g=jr[h],g.blockedOn===s&&(g.blockedOn=null);for(;0<jr.length&&(h=jr[0],h.blockedOn===null);)Py(h),h.blockedOn===null&&jr.shift()}var Co=I.ReactCurrentBatchConfig,Wu=!0;function BC(s,l,h,g){var y=Ke,x=Co.transition;Co.transition=null;try{Ke=1,kd(s,l,h,g)}finally{Ke=y,Co.transition=x}}function VC(s,l,h,g){var y=Ke,x=Co.transition;Co.transition=null;try{Ke=4,kd(s,l,h,g)}finally{Ke=y,Co.transition=x}}function kd(s,l,h,g){if(Wu){var y=Ad(s,l,h,g);if(y===null)Kd(s,l,g,Bu,h),Ty(s,g);else if(GC(y,s,l,h,g))g.stopPropagation();else if(Ty(s,g),l&4&&-1<jC.indexOf(s)){for(;y!==null;){var x=ca(y);if(x!==null&&Ey(x),x=Ad(s,l,h,g),x===null&&Kd(s,l,g,Bu,h),x===y)break;y=x}y!==null&&g.stopPropagation()}else Kd(s,l,g,null,h)}}var Bu=null;function Ad(s,l,h,g){if(Bu=null,s=wo(g),s=js(s),s!==null)if(l=zs(s),l===null)s=null;else if(h=l.tag,h===13){if(s=dy(l),s!==null)return s;s=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return Bu=s,null}function Ly(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kC()){case Sd:return 1;case _y:return 4;case Ou:case AC:return 16;case vy:return 536870912;default:return 16}default:return 16}}var Gr=null,Md=null,Vu=null;function ky(){if(Vu)return Vu;var s,l=Md,h=l.length,g,y="value"in Gr?Gr.value:Gr.textContent,x=y.length;for(s=0;s<h&&l[s]===y[s];s++);var R=h-s;for(g=1;g<=R&&l[h-g]===y[x-g];g++);return Vu=y.slice(s,1<g?1-g:void 0)}function Uu(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Xu(){return!0}function Ay(){return!1}function Ln(s){function l(h,g,y,x,R){this._reactName=h,this._targetInst=y,this.type=g,this.nativeEvent=x,this.target=R,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(h=s[A],this[A]=h?h(x):x[A]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Xu:Ay,this.isPropagationStopped=Ay,this}return Y(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Xu)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Xu)},persist:function(){},isPersistent:Xu}),l}var So={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bd=Ln(So),Jl=Y({},So,{view:0,detail:0}),UC=Ln(Jl),Od,Fd,ea,Hu=Y({},Jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ea&&(ea&&s.type==="mousemove"?(Od=s.screenX-ea.screenX,Fd=s.screenY-ea.screenY):Fd=Od=0,ea=s),Od)},movementY:function(s){return"movementY"in s?s.movementY:Fd}}),My=Ln(Hu),XC=Y({},Hu,{dataTransfer:0}),HC=Ln(XC),YC=Y({},Jl,{relatedTarget:0}),Dd=Ln(YC),KC=Y({},So,{animationName:0,elapsedTime:0,pseudoElement:0}),$C=Ln(KC),ZC=Y({},So,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),qC=Ln(ZC),QC=Y({},So,{data:0}),by=Ln(QC),JC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nS(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=tS[s])?!!l[s]:!1}function Nd(){return nS}var iS=Y({},Jl,{key:function(s){if(s.key){var l=JC[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Uu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?eS[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nd,charCode:function(s){return s.type==="keypress"?Uu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Uu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),rS=Ln(iS),sS=Y({},Hu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oy=Ln(sS),oS=Y({},Jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nd}),lS=Ln(oS),aS=Y({},So,{propertyName:0,elapsedTime:0,pseudoElement:0}),uS=Ln(aS),cS=Y({},Hu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),hS=Ln(cS),dS=[9,13,27,32],zd=u&&"CompositionEvent"in window,ta=null;u&&"documentMode"in document&&(ta=document.documentMode);var fS=u&&"TextEvent"in window&&!ta,Fy=u&&(!zd||ta&&8<ta&&11>=ta),Dy=" ",Ny=!1;function zy(s,l){switch(s){case"keyup":return dS.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jy(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ro=!1;function gS(s,l){switch(s){case"compositionend":return jy(l);case"keypress":return l.which!==32?null:(Ny=!0,Dy);case"textInput":return s=l.data,s===Dy&&Ny?null:s;default:return null}}function pS(s,l){if(Ro)return s==="compositionend"||!zd&&zy(s,l)?(s=ky(),Vu=Md=Gr=null,Ro=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Fy&&l.locale!=="ko"?null:l.data;default:return null}}var mS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gy(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!mS[s.type]:l==="textarea"}function Wy(s,l,h,g){Ul(g),l=qu(l,"onChange"),0<l.length&&(h=new bd("onChange","change",null,h,g),s.push({event:h,listeners:l}))}var na=null,ia=null;function yS(s){s0(s,0)}function Yu(s){var l=ko(s);if(Ne(l))return s}function _S(s,l){if(s==="change")return l}var By=!1;if(u){var jd;if(u){var Gd="oninput"in document;if(!Gd){var Vy=document.createElement("div");Vy.setAttribute("oninput","return;"),Gd=typeof Vy.oninput=="function"}jd=Gd}else jd=!1;By=jd&&(!document.documentMode||9<document.documentMode)}function Uy(){na&&(na.detachEvent("onpropertychange",Xy),ia=na=null)}function Xy(s){if(s.propertyName==="value"&&Yu(ia)){var l=[];Wy(l,ia,s,wo(s)),Pn(yS,l)}}function vS(s,l,h){s==="focusin"?(Uy(),na=l,ia=h,na.attachEvent("onpropertychange",Xy)):s==="focusout"&&Uy()}function xS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Yu(ia)}function wS(s,l){if(s==="click")return Yu(l)}function ES(s,l){if(s==="input"||s==="change")return Yu(l)}function CS(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var ci=typeof Object.is=="function"?Object.is:CS;function ra(s,l){if(ci(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var h=Object.keys(s),g=Object.keys(l);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var y=h[g];if(!c.call(l,y)||!ci(s[y],l[y]))return!1}return!0}function Hy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Yy(s,l){var h=Hy(s);s=0;for(var g;h;){if(h.nodeType===3){if(g=s+h.textContent.length,s<=l&&g>=l)return{node:h,offset:l-s};s=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Hy(h)}}function Ky(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Ky(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function $y(){for(var s=window,l=lt();l instanceof s.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)s=l.contentWindow;else break;l=lt(s.document)}return l}function Wd(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function SS(s){var l=$y(),h=s.focusedElem,g=s.selectionRange;if(l!==h&&h&&h.ownerDocument&&Ky(h.ownerDocument.documentElement,h)){if(g!==null&&Wd(h)){if(l=g.start,s=g.end,s===void 0&&(s=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(s,h.value.length);else if(s=(l=h.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var y=h.textContent.length,x=Math.min(g.start,y);g=g.end===void 0?x:Math.min(g.end,y),!s.extend&&x>g&&(y=g,g=x,x=y),y=Yy(h,x);var R=Yy(h,g);y&&R&&(s.rangeCount!==1||s.anchorNode!==y.node||s.anchorOffset!==y.offset||s.focusNode!==R.node||s.focusOffset!==R.offset)&&(l=l.createRange(),l.setStart(y.node,y.offset),s.removeAllRanges(),x>g?(s.addRange(l),s.extend(R.node,R.offset)):(l.setEnd(R.node,R.offset),s.addRange(l)))}}for(l=[],s=h;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)s=l[h],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var RS=u&&"documentMode"in document&&11>=document.documentMode,To=null,Bd=null,sa=null,Vd=!1;function Zy(s,l,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Vd||To==null||To!==lt(g)||(g=To,"selectionStart"in g&&Wd(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),sa&&ra(sa,g)||(sa=g,g=qu(Bd,"onSelect"),0<g.length&&(l=new bd("onSelect","select",null,l,h),s.push({event:l,listeners:g}),l.target=To)))}function Ku(s,l){var h={};return h[s.toLowerCase()]=l.toLowerCase(),h["Webkit"+s]="webkit"+l,h["Moz"+s]="moz"+l,h}var Po={animationend:Ku("Animation","AnimationEnd"),animationiteration:Ku("Animation","AnimationIteration"),animationstart:Ku("Animation","AnimationStart"),transitionend:Ku("Transition","TransitionEnd")},Ud={},qy={};u&&(qy=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function $u(s){if(Ud[s])return Ud[s];if(!Po[s])return s;var l=Po[s],h;for(h in l)if(l.hasOwnProperty(h)&&h in qy)return Ud[s]=l[h];return s}var Qy=$u("animationend"),Jy=$u("animationiteration"),e0=$u("animationstart"),t0=$u("transitionend"),n0=new Map,i0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wr(s,l){n0.set(s,l),o(l,[s])}for(var Xd=0;Xd<i0.length;Xd++){var Hd=i0[Xd],TS=Hd.toLowerCase(),PS=Hd[0].toUpperCase()+Hd.slice(1);Wr(TS,"on"+PS)}Wr(Qy,"onAnimationEnd"),Wr(Jy,"onAnimationIteration"),Wr(e0,"onAnimationStart"),Wr("dblclick","onDoubleClick"),Wr("focusin","onFocus"),Wr("focusout","onBlur"),Wr(t0,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IS=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function r0(s,l,h){var g=s.type||"unknown-event";s.currentTarget=h,TC(g,l,void 0,s),s.currentTarget=null}function s0(s,l){l=(l&4)!==0;for(var h=0;h<s.length;h++){var g=s[h],y=g.event;g=g.listeners;e:{var x=void 0;if(l)for(var R=g.length-1;0<=R;R--){var A=g[R],O=A.instance,V=A.currentTarget;if(A=A.listener,O!==x&&y.isPropagationStopped())break e;r0(y,A,V),x=O}else for(R=0;R<g.length;R++){if(A=g[R],O=A.instance,V=A.currentTarget,A=A.listener,O!==x&&y.isPropagationStopped())break e;r0(y,A,V),x=O}}}if(Eo)throw s=Cd,Eo=!1,Cd=null,s}function Je(s,l){var h=l[ef];h===void 0&&(h=l[ef]=new Set);var g=s+"__bubble";h.has(g)||(o0(l,s,2,!1),h.add(g))}function Yd(s,l,h){var g=0;l&&(g|=4),o0(h,s,g,l)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function la(s){if(!s[Zu]){s[Zu]=!0,n.forEach(function(h){h!=="selectionchange"&&(IS.has(h)||Yd(h,!1,s),Yd(h,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Zu]||(l[Zu]=!0,Yd("selectionchange",!1,l))}}function o0(s,l,h,g){switch(Ly(l)){case 1:var y=BC;break;case 4:y=VC;break;default:y=kd}h=y.bind(null,l,h,s),y=void 0,!In||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),g?y!==void 0?s.addEventListener(l,h,{capture:!0,passive:y}):s.addEventListener(l,h,!0):y!==void 0?s.addEventListener(l,h,{passive:y}):s.addEventListener(l,h,!1)}function Kd(s,l,h,g,y){var x=g;if(!(l&1)&&!(l&2)&&g!==null)e:for(;;){if(g===null)return;var R=g.tag;if(R===3||R===4){var A=g.stateNode.containerInfo;if(A===y||A.nodeType===8&&A.parentNode===y)break;if(R===4)for(R=g.return;R!==null;){var O=R.tag;if((O===3||O===4)&&(O=R.stateNode.containerInfo,O===y||O.nodeType===8&&O.parentNode===y))return;R=R.return}for(;A!==null;){if(R=js(A),R===null)return;if(O=R.tag,O===5||O===6){g=x=R;continue e}A=A.parentNode}}g=g.return}Pn(function(){var V=x,te=wo(h),se=[];e:{var ee=n0.get(s);if(ee!==void 0){var ce=bd,ge=s;switch(s){case"keypress":if(Uu(h)===0)break e;case"keydown":case"keyup":ce=rS;break;case"focusin":ge="focus",ce=Dd;break;case"focusout":ge="blur",ce=Dd;break;case"beforeblur":case"afterblur":ce=Dd;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=My;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=HC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=lS;break;case Qy:case Jy:case e0:ce=$C;break;case t0:ce=uS;break;case"scroll":ce=UC;break;case"wheel":ce=hS;break;case"copy":case"cut":case"paste":ce=qC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Oy}var me=(l&4)!==0,xt=!me&&s==="scroll",j=me?ee!==null?ee+"Capture":null:ee;me=[];for(var F=V,W;F!==null;){W=F;var ae=W.stateNode;if(W.tag===5&&ae!==null&&(W=ae,j!==null&&(ae=At(F,j),ae!=null&&me.push(aa(F,ae,W)))),xt)break;F=F.return}0<me.length&&(ee=new ce(ee,ge,null,h,te),se.push({event:ee,listeners:me}))}}if(!(l&7)){e:{if(ee=s==="mouseover"||s==="pointerover",ce=s==="mouseout"||s==="pointerout",ee&&h!==Ds&&(ge=h.relatedTarget||h.fromElement)&&(js(ge)||ge[rr]))break e;if((ce||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,ce?(ge=h.relatedTarget||h.toElement,ce=V,ge=ge?js(ge):null,ge!==null&&(xt=zs(ge),ge!==xt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(ce=null,ge=V),ce!==ge)){if(me=My,ae="onMouseLeave",j="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(me=Oy,ae="onPointerLeave",j="onPointerEnter",F="pointer"),xt=ce==null?ee:ko(ce),W=ge==null?ee:ko(ge),ee=new me(ae,F+"leave",ce,h,te),ee.target=xt,ee.relatedTarget=W,ae=null,js(te)===V&&(me=new me(j,F+"enter",ge,h,te),me.target=W,me.relatedTarget=xt,ae=me),xt=ae,ce&&ge)t:{for(me=ce,j=ge,F=0,W=me;W;W=Io(W))F++;for(W=0,ae=j;ae;ae=Io(ae))W++;for(;0<F-W;)me=Io(me),F--;for(;0<W-F;)j=Io(j),W--;for(;F--;){if(me===j||j!==null&&me===j.alternate)break t;me=Io(me),j=Io(j)}me=null}else me=null;ce!==null&&l0(se,ee,ce,me,!1),ge!==null&&xt!==null&&l0(se,xt,ge,me,!0)}}e:{if(ee=V?ko(V):window,ce=ee.nodeName&&ee.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ee.type==="file")var ye=_S;else if(Gy(ee))if(By)ye=ES;else{ye=xS;var Ee=vS}else(ce=ee.nodeName)&&ce.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(ye=wS);if(ye&&(ye=ye(s,V))){Wy(se,ye,h,te);break e}Ee&&Ee(s,ee,V),s==="focusout"&&(Ee=ee._wrapperState)&&Ee.controlled&&ee.type==="number"&&rn(ee,"number",ee.value)}switch(Ee=V?ko(V):window,s){case"focusin":(Gy(Ee)||Ee.contentEditable==="true")&&(To=Ee,Bd=V,sa=null);break;case"focusout":sa=Bd=To=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,Zy(se,h,te);break;case"selectionchange":if(RS)break;case"keydown":case"keyup":Zy(se,h,te)}var Ce;if(zd)e:{switch(s){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Ro?zy(s,h)&&(Pe="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(Pe="onCompositionStart");Pe&&(Fy&&h.locale!=="ko"&&(Ro||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Ro&&(Ce=ky()):(Gr=te,Md="value"in Gr?Gr.value:Gr.textContent,Ro=!0)),Ee=qu(V,Pe),0<Ee.length&&(Pe=new by(Pe,s,null,h,te),se.push({event:Pe,listeners:Ee}),Ce?Pe.data=Ce:(Ce=jy(h),Ce!==null&&(Pe.data=Ce)))),(Ce=fS?gS(s,h):pS(s,h))&&(V=qu(V,"onBeforeInput"),0<V.length&&(te=new by("onBeforeInput","beforeinput",null,h,te),se.push({event:te,listeners:V}),te.data=Ce))}s0(se,l)})}function aa(s,l,h){return{instance:s,listener:l,currentTarget:h}}function qu(s,l){for(var h=l+"Capture",g=[];s!==null;){var y=s,x=y.stateNode;y.tag===5&&x!==null&&(y=x,x=At(s,h),x!=null&&g.unshift(aa(s,x,y)),x=At(s,l),x!=null&&g.push(aa(s,x,y))),s=s.return}return g}function Io(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function l0(s,l,h,g,y){for(var x=l._reactName,R=[];h!==null&&h!==g;){var A=h,O=A.alternate,V=A.stateNode;if(O!==null&&O===g)break;A.tag===5&&V!==null&&(A=V,y?(O=At(h,x),O!=null&&R.unshift(aa(h,O,A))):y||(O=At(h,x),O!=null&&R.push(aa(h,O,A)))),h=h.return}R.length!==0&&s.push({event:l,listeners:R})}var LS=/\r\n?/g,kS=/\u0000|\uFFFD/g;function a0(s){return(typeof s=="string"?s:""+s).replace(LS,`
`).replace(kS,"")}function Qu(s,l,h){if(l=a0(l),a0(s)!==l&&h)throw Error(t(425))}function Ju(){}var $d=null,Zd=null;function qd(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Qd=typeof setTimeout=="function"?setTimeout:void 0,AS=typeof clearTimeout=="function"?clearTimeout:void 0,u0=typeof Promise=="function"?Promise:void 0,MS=typeof queueMicrotask=="function"?queueMicrotask:typeof u0<"u"?function(s){return u0.resolve(null).then(s).catch(bS)}:Qd;function bS(s){setTimeout(function(){throw s})}function Jd(s,l){var h=l,g=0;do{var y=h.nextSibling;if(s.removeChild(h),y&&y.nodeType===8)if(h=y.data,h==="/$"){if(g===0){s.removeChild(y),Ql(l);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=y}while(h);Ql(l)}function Br(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function c0(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return s;l--}else h==="/$"&&l++}s=s.previousSibling}return null}var Lo=Math.random().toString(36).slice(2),Fi="__reactFiber$"+Lo,ua="__reactProps$"+Lo,rr="__reactContainer$"+Lo,ef="__reactEvents$"+Lo,OS="__reactListeners$"+Lo,FS="__reactHandles$"+Lo;function js(s){var l=s[Fi];if(l)return l;for(var h=s.parentNode;h;){if(l=h[rr]||h[Fi]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(s=c0(s);s!==null;){if(h=s[Fi])return h;s=c0(s)}return l}s=h,h=s.parentNode}return null}function ca(s){return s=s[Fi]||s[rr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ko(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function ec(s){return s[ua]||null}var tf=[],Ao=-1;function Vr(s){return{current:s}}function et(s){0>Ao||(s.current=tf[Ao],tf[Ao]=null,Ao--)}function Qe(s,l){Ao++,tf[Ao]=s.current,s.current=l}var Ur={},Yt=Vr(Ur),pn=Vr(!1),Gs=Ur;function Mo(s,l){var h=s.type.contextTypes;if(!h)return Ur;var g=s.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var y={},x;for(x in h)y[x]=l[x];return g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=y),y}function mn(s){return s=s.childContextTypes,s!=null}function tc(){et(pn),et(Yt)}function h0(s,l,h){if(Yt.current!==Ur)throw Error(t(168));Qe(Yt,l),Qe(pn,h)}function d0(s,l,h){var g=s.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var y in g)if(!(y in l))throw Error(t(108,le(s)||"Unknown",y));return Y({},h,g)}function nc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ur,Gs=Yt.current,Qe(Yt,s),Qe(pn,pn.current),!0}function f0(s,l,h){var g=s.stateNode;if(!g)throw Error(t(169));h?(s=d0(s,l,Gs),g.__reactInternalMemoizedMergedChildContext=s,et(pn),et(Yt),Qe(Yt,s)):et(pn),Qe(pn,h)}var sr=null,ic=!1,nf=!1;function g0(s){sr===null?sr=[s]:sr.push(s)}function DS(s){ic=!0,g0(s)}function Xr(){if(!nf&&sr!==null){nf=!0;var s=0,l=Ke;try{var h=sr;for(Ke=1;s<h.length;s++){var g=h[s];do g=g(!0);while(g!==null)}sr=null,ic=!1}catch(y){throw sr!==null&&(sr=sr.slice(s+1)),my(Sd,Xr),y}finally{Ke=l,nf=!1}}return null}var bo=[],Oo=0,rc=null,sc=0,$n=[],Zn=0,Ws=null,or=1,lr="";function Bs(s,l){bo[Oo++]=sc,bo[Oo++]=rc,rc=s,sc=l}function p0(s,l,h){$n[Zn++]=or,$n[Zn++]=lr,$n[Zn++]=Ws,Ws=s;var g=or;s=lr;var y=32-ui(g)-1;g&=~(1<<y),h+=1;var x=32-ui(l)+y;if(30<x){var R=y-y%5;x=(g&(1<<R)-1).toString(32),g>>=R,y-=R,or=1<<32-ui(l)+y|h<<y|g,lr=x+s}else or=1<<x|h<<y|g,lr=s}function rf(s){s.return!==null&&(Bs(s,1),p0(s,1,0))}function sf(s){for(;s===rc;)rc=bo[--Oo],bo[Oo]=null,sc=bo[--Oo],bo[Oo]=null;for(;s===Ws;)Ws=$n[--Zn],$n[Zn]=null,lr=$n[--Zn],$n[Zn]=null,or=$n[--Zn],$n[Zn]=null}var kn=null,An=null,ot=!1,hi=null;function m0(s,l){var h=ei(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=s,l=s.deletions,l===null?(s.deletions=[h],s.flags|=16):l.push(h)}function y0(s,l){switch(s.tag){case 5:var h=s.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,kn=s,An=Br(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,kn=s,An=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=Ws!==null?{id:or,overflow:lr}:null,s.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=ei(18,null,null,0),h.stateNode=l,h.return=s,s.child=h,kn=s,An=null,!0):!1;default:return!1}}function of(s){return(s.mode&1)!==0&&(s.flags&128)===0}function lf(s){if(ot){var l=An;if(l){var h=l;if(!y0(s,l)){if(of(s))throw Error(t(418));l=Br(h.nextSibling);var g=kn;l&&y0(s,l)?m0(g,h):(s.flags=s.flags&-4097|2,ot=!1,kn=s)}}else{if(of(s))throw Error(t(418));s.flags=s.flags&-4097|2,ot=!1,kn=s}}}function _0(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;kn=s}function oc(s){if(s!==kn)return!1;if(!ot)return _0(s),ot=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!qd(s.type,s.memoizedProps)),l&&(l=An)){if(of(s))throw v0(),Error(t(418));for(;l;)m0(s,l),l=Br(l.nextSibling)}if(_0(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"){if(l===0){An=Br(s.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}s=s.nextSibling}An=null}}else An=kn?Br(s.stateNode.nextSibling):null;return!0}function v0(){for(var s=An;s;)s=Br(s.nextSibling)}function Fo(){An=kn=null,ot=!1}function af(s){hi===null?hi=[s]:hi.push(s)}var NS=I.ReactCurrentBatchConfig;function ha(s,l,h){if(s=h.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var g=h.stateNode}if(!g)throw Error(t(147,s));var y=g,x=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===x?l.ref:(l=function(R){var A=y.refs;R===null?delete A[x]:A[x]=R},l._stringRef=x,l)}if(typeof s!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,s))}return s}function lc(s,l){throw s=Object.prototype.toString.call(l),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function x0(s){var l=s._init;return l(s._payload)}function w0(s){function l(j,F){if(s){var W=j.deletions;W===null?(j.deletions=[F],j.flags|=16):W.push(F)}}function h(j,F){if(!s)return null;for(;F!==null;)l(j,F),F=F.sibling;return null}function g(j,F){for(j=new Map;F!==null;)F.key!==null?j.set(F.key,F):j.set(F.index,F),F=F.sibling;return j}function y(j,F){return j=Jr(j,F),j.index=0,j.sibling=null,j}function x(j,F,W){return j.index=W,s?(W=j.alternate,W!==null?(W=W.index,W<F?(j.flags|=2,F):W):(j.flags|=2,F)):(j.flags|=1048576,F)}function R(j){return s&&j.alternate===null&&(j.flags|=2),j}function A(j,F,W,ae){return F===null||F.tag!==6?(F=Jf(W,j.mode,ae),F.return=j,F):(F=y(F,W),F.return=j,F)}function O(j,F,W,ae){var ye=W.type;return ye===b?te(j,F,W.props.children,ae,W.key):F!==null&&(F.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===B&&x0(ye)===F.type)?(ae=y(F,W.props),ae.ref=ha(j,F,W),ae.return=j,ae):(ae=Ac(W.type,W.key,W.props,null,j.mode,ae),ae.ref=ha(j,F,W),ae.return=j,ae)}function V(j,F,W,ae){return F===null||F.tag!==4||F.stateNode.containerInfo!==W.containerInfo||F.stateNode.implementation!==W.implementation?(F=eg(W,j.mode,ae),F.return=j,F):(F=y(F,W.children||[]),F.return=j,F)}function te(j,F,W,ae,ye){return F===null||F.tag!==7?(F=Zs(W,j.mode,ae,ye),F.return=j,F):(F=y(F,W),F.return=j,F)}function se(j,F,W){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Jf(""+F,j.mode,W),F.return=j,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case L:return W=Ac(F.type,F.key,F.props,null,j.mode,W),W.ref=ha(j,null,F),W.return=j,W;case N:return F=eg(F,j.mode,W),F.return=j,F;case B:var ae=F._init;return se(j,ae(F._payload),W)}if(Xn(F)||Q(F))return F=Zs(F,j.mode,W,null),F.return=j,F;lc(j,F)}return null}function ee(j,F,W,ae){var ye=F!==null?F.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return ye!==null?null:A(j,F,""+W,ae);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case L:return W.key===ye?O(j,F,W,ae):null;case N:return W.key===ye?V(j,F,W,ae):null;case B:return ye=W._init,ee(j,F,ye(W._payload),ae)}if(Xn(W)||Q(W))return ye!==null?null:te(j,F,W,ae,null);lc(j,W)}return null}function ce(j,F,W,ae,ye){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return j=j.get(W)||null,A(F,j,""+ae,ye);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case L:return j=j.get(ae.key===null?W:ae.key)||null,O(F,j,ae,ye);case N:return j=j.get(ae.key===null?W:ae.key)||null,V(F,j,ae,ye);case B:var Ee=ae._init;return ce(j,F,W,Ee(ae._payload),ye)}if(Xn(ae)||Q(ae))return j=j.get(W)||null,te(F,j,ae,ye,null);lc(F,ae)}return null}function ge(j,F,W,ae){for(var ye=null,Ee=null,Ce=F,Pe=F=0,Ot=null;Ce!==null&&Pe<W.length;Pe++){Ce.index>Pe?(Ot=Ce,Ce=null):Ot=Ce.sibling;var Ue=ee(j,Ce,W[Pe],ae);if(Ue===null){Ce===null&&(Ce=Ot);break}s&&Ce&&Ue.alternate===null&&l(j,Ce),F=x(Ue,F,Pe),Ee===null?ye=Ue:Ee.sibling=Ue,Ee=Ue,Ce=Ot}if(Pe===W.length)return h(j,Ce),ot&&Bs(j,Pe),ye;if(Ce===null){for(;Pe<W.length;Pe++)Ce=se(j,W[Pe],ae),Ce!==null&&(F=x(Ce,F,Pe),Ee===null?ye=Ce:Ee.sibling=Ce,Ee=Ce);return ot&&Bs(j,Pe),ye}for(Ce=g(j,Ce);Pe<W.length;Pe++)Ot=ce(Ce,j,Pe,W[Pe],ae),Ot!==null&&(s&&Ot.alternate!==null&&Ce.delete(Ot.key===null?Pe:Ot.key),F=x(Ot,F,Pe),Ee===null?ye=Ot:Ee.sibling=Ot,Ee=Ot);return s&&Ce.forEach(function(es){return l(j,es)}),ot&&Bs(j,Pe),ye}function me(j,F,W,ae){var ye=Q(W);if(typeof ye!="function")throw Error(t(150));if(W=ye.call(W),W==null)throw Error(t(151));for(var Ee=ye=null,Ce=F,Pe=F=0,Ot=null,Ue=W.next();Ce!==null&&!Ue.done;Pe++,Ue=W.next()){Ce.index>Pe?(Ot=Ce,Ce=null):Ot=Ce.sibling;var es=ee(j,Ce,Ue.value,ae);if(es===null){Ce===null&&(Ce=Ot);break}s&&Ce&&es.alternate===null&&l(j,Ce),F=x(es,F,Pe),Ee===null?ye=es:Ee.sibling=es,Ee=es,Ce=Ot}if(Ue.done)return h(j,Ce),ot&&Bs(j,Pe),ye;if(Ce===null){for(;!Ue.done;Pe++,Ue=W.next())Ue=se(j,Ue.value,ae),Ue!==null&&(F=x(Ue,F,Pe),Ee===null?ye=Ue:Ee.sibling=Ue,Ee=Ue);return ot&&Bs(j,Pe),ye}for(Ce=g(j,Ce);!Ue.done;Pe++,Ue=W.next())Ue=ce(Ce,j,Pe,Ue.value,ae),Ue!==null&&(s&&Ue.alternate!==null&&Ce.delete(Ue.key===null?Pe:Ue.key),F=x(Ue,F,Pe),Ee===null?ye=Ue:Ee.sibling=Ue,Ee=Ue);return s&&Ce.forEach(function(mR){return l(j,mR)}),ot&&Bs(j,Pe),ye}function xt(j,F,W,ae){if(typeof W=="object"&&W!==null&&W.type===b&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case L:e:{for(var ye=W.key,Ee=F;Ee!==null;){if(Ee.key===ye){if(ye=W.type,ye===b){if(Ee.tag===7){h(j,Ee.sibling),F=y(Ee,W.props.children),F.return=j,j=F;break e}}else if(Ee.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===B&&x0(ye)===Ee.type){h(j,Ee.sibling),F=y(Ee,W.props),F.ref=ha(j,Ee,W),F.return=j,j=F;break e}h(j,Ee);break}else l(j,Ee);Ee=Ee.sibling}W.type===b?(F=Zs(W.props.children,j.mode,ae,W.key),F.return=j,j=F):(ae=Ac(W.type,W.key,W.props,null,j.mode,ae),ae.ref=ha(j,F,W),ae.return=j,j=ae)}return R(j);case N:e:{for(Ee=W.key;F!==null;){if(F.key===Ee)if(F.tag===4&&F.stateNode.containerInfo===W.containerInfo&&F.stateNode.implementation===W.implementation){h(j,F.sibling),F=y(F,W.children||[]),F.return=j,j=F;break e}else{h(j,F);break}else l(j,F);F=F.sibling}F=eg(W,j.mode,ae),F.return=j,j=F}return R(j);case B:return Ee=W._init,xt(j,F,Ee(W._payload),ae)}if(Xn(W))return ge(j,F,W,ae);if(Q(W))return me(j,F,W,ae);lc(j,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,F!==null&&F.tag===6?(h(j,F.sibling),F=y(F,W),F.return=j,j=F):(h(j,F),F=Jf(W,j.mode,ae),F.return=j,j=F),R(j)):h(j,F)}return xt}var Do=w0(!0),E0=w0(!1),ac=Vr(null),uc=null,No=null,uf=null;function cf(){uf=No=uc=null}function hf(s){var l=ac.current;et(ac),s._currentValue=l}function df(s,l,h){for(;s!==null;){var g=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),s===h)break;s=s.return}}function zo(s,l){uc=s,uf=No=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&l&&(yn=!0),s.firstContext=null)}function qn(s){var l=s._currentValue;if(uf!==s)if(s={context:s,memoizedValue:l,next:null},No===null){if(uc===null)throw Error(t(308));No=s,uc.dependencies={lanes:0,firstContext:s}}else No=No.next=s;return l}var Vs=null;function ff(s){Vs===null?Vs=[s]:Vs.push(s)}function C0(s,l,h,g){var y=l.interleaved;return y===null?(h.next=h,ff(l)):(h.next=y.next,y.next=h),l.interleaved=h,ar(s,g)}function ar(s,l){s.lanes|=l;var h=s.alternate;for(h!==null&&(h.lanes|=l),h=s,s=s.return;s!==null;)s.childLanes|=l,h=s.alternate,h!==null&&(h.childLanes|=l),h=s,s=s.return;return h.tag===3?h.stateNode:null}var Hr=!1;function gf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function S0(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ur(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function Yr(s,l,h){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,We&2){var y=g.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),g.pending=l,ar(s,h)}return y=g.interleaved,y===null?(l.next=l,ff(g)):(l.next=y.next,y.next=l),g.interleaved=l,ar(s,h)}function cc(s,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var g=l.lanes;g&=s.pendingLanes,h|=g,l.lanes=h,Pd(s,h)}}function R0(s,l){var h=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var y=null,x=null;if(h=h.firstBaseUpdate,h!==null){do{var R={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};x===null?y=x=R:x=x.next=R,h=h.next}while(h!==null);x===null?y=x=l:x=x.next=l}else y=x=l;h={baseState:g.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:g.shared,effects:g.effects},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=l:s.next=l,h.lastBaseUpdate=l}function hc(s,l,h,g){var y=s.updateQueue;Hr=!1;var x=y.firstBaseUpdate,R=y.lastBaseUpdate,A=y.shared.pending;if(A!==null){y.shared.pending=null;var O=A,V=O.next;O.next=null,R===null?x=V:R.next=V,R=O;var te=s.alternate;te!==null&&(te=te.updateQueue,A=te.lastBaseUpdate,A!==R&&(A===null?te.firstBaseUpdate=V:A.next=V,te.lastBaseUpdate=O))}if(x!==null){var se=y.baseState;R=0,te=V=O=null,A=x;do{var ee=A.lane,ce=A.eventTime;if((g&ee)===ee){te!==null&&(te=te.next={eventTime:ce,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var ge=s,me=A;switch(ee=l,ce=h,me.tag){case 1:if(ge=me.payload,typeof ge=="function"){se=ge.call(ce,se,ee);break e}se=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=me.payload,ee=typeof ge=="function"?ge.call(ce,se,ee):ge,ee==null)break e;se=Y({},se,ee);break e;case 2:Hr=!0}}A.callback!==null&&A.lane!==0&&(s.flags|=64,ee=y.effects,ee===null?y.effects=[A]:ee.push(A))}else ce={eventTime:ce,lane:ee,tag:A.tag,payload:A.payload,callback:A.callback,next:null},te===null?(V=te=ce,O=se):te=te.next=ce,R|=ee;if(A=A.next,A===null){if(A=y.shared.pending,A===null)break;ee=A,A=ee.next,ee.next=null,y.lastBaseUpdate=ee,y.shared.pending=null}}while(!0);if(te===null&&(O=se),y.baseState=O,y.firstBaseUpdate=V,y.lastBaseUpdate=te,l=y.shared.interleaved,l!==null){y=l;do R|=y.lane,y=y.next;while(y!==l)}else x===null&&(y.shared.lanes=0);Hs|=R,s.lanes=R,s.memoizedState=se}}function T0(s,l,h){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var g=s[l],y=g.callback;if(y!==null){if(g.callback=null,g=h,typeof y!="function")throw Error(t(191,y));y.call(g)}}}var da={},Di=Vr(da),fa=Vr(da),ga=Vr(da);function Us(s){if(s===da)throw Error(t(174));return s}function pf(s,l){switch(Qe(ga,l),Qe(fa,s),Qe(Di,da),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:bs(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=bs(l,s)}et(Di),Qe(Di,l)}function jo(){et(Di),et(fa),et(ga)}function P0(s){Us(ga.current);var l=Us(Di.current),h=bs(l,s.type);l!==h&&(Qe(fa,s),Qe(Di,h))}function mf(s){fa.current===s&&(et(Di),et(fa))}var at=Vr(0);function dc(s){for(var l=s;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var yf=[];function _f(){for(var s=0;s<yf.length;s++)yf[s]._workInProgressVersionPrimary=null;yf.length=0}var fc=I.ReactCurrentDispatcher,vf=I.ReactCurrentBatchConfig,Xs=0,ut=null,Tt=null,Mt=null,gc=!1,pa=!1,ma=0,zS=0;function Kt(){throw Error(t(321))}function xf(s,l){if(l===null)return!1;for(var h=0;h<l.length&&h<s.length;h++)if(!ci(s[h],l[h]))return!1;return!0}function wf(s,l,h,g,y,x){if(Xs=x,ut=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,fc.current=s===null||s.memoizedState===null?BS:VS,s=h(g,y),pa){x=0;do{if(pa=!1,ma=0,25<=x)throw Error(t(301));x+=1,Mt=Tt=null,l.updateQueue=null,fc.current=US,s=h(g,y)}while(pa)}if(fc.current=yc,l=Tt!==null&&Tt.next!==null,Xs=0,Mt=Tt=ut=null,gc=!1,l)throw Error(t(300));return s}function Ef(){var s=ma!==0;return ma=0,s}function Ni(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?ut.memoizedState=Mt=s:Mt=Mt.next=s,Mt}function Qn(){if(Tt===null){var s=ut.alternate;s=s!==null?s.memoizedState:null}else s=Tt.next;var l=Mt===null?ut.memoizedState:Mt.next;if(l!==null)Mt=l,Tt=s;else{if(s===null)throw Error(t(310));Tt=s,s={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Mt===null?ut.memoizedState=Mt=s:Mt=Mt.next=s}return Mt}function ya(s,l){return typeof l=="function"?l(s):l}function Cf(s){var l=Qn(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=s;var g=Tt,y=g.baseQueue,x=h.pending;if(x!==null){if(y!==null){var R=y.next;y.next=x.next,x.next=R}g.baseQueue=y=x,h.pending=null}if(y!==null){x=y.next,g=g.baseState;var A=R=null,O=null,V=x;do{var te=V.lane;if((Xs&te)===te)O!==null&&(O=O.next={lane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),g=V.hasEagerState?V.eagerState:s(g,V.action);else{var se={lane:te,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null};O===null?(A=O=se,R=g):O=O.next=se,ut.lanes|=te,Hs|=te}V=V.next}while(V!==null&&V!==x);O===null?R=g:O.next=A,ci(g,l.memoizedState)||(yn=!0),l.memoizedState=g,l.baseState=R,l.baseQueue=O,h.lastRenderedState=g}if(s=h.interleaved,s!==null){y=s;do x=y.lane,ut.lanes|=x,Hs|=x,y=y.next;while(y!==s)}else y===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function Sf(s){var l=Qn(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=s;var g=h.dispatch,y=h.pending,x=l.memoizedState;if(y!==null){h.pending=null;var R=y=y.next;do x=s(x,R.action),R=R.next;while(R!==y);ci(x,l.memoizedState)||(yn=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),h.lastRenderedState=x}return[x,g]}function I0(){}function L0(s,l){var h=ut,g=Qn(),y=l(),x=!ci(g.memoizedState,y);if(x&&(g.memoizedState=y,yn=!0),g=g.queue,Rf(M0.bind(null,h,g,s),[s]),g.getSnapshot!==l||x||Mt!==null&&Mt.memoizedState.tag&1){if(h.flags|=2048,_a(9,A0.bind(null,h,g,y,l),void 0,null),bt===null)throw Error(t(349));Xs&30||k0(h,l,y)}return y}function k0(s,l,h){s.flags|=16384,s={getSnapshot:l,value:h},l=ut.updateQueue,l===null?(l={lastEffect:null,stores:null},ut.updateQueue=l,l.stores=[s]):(h=l.stores,h===null?l.stores=[s]:h.push(s))}function A0(s,l,h,g){l.value=h,l.getSnapshot=g,b0(l)&&O0(s)}function M0(s,l,h){return h(function(){b0(l)&&O0(s)})}function b0(s){var l=s.getSnapshot;s=s.value;try{var h=l();return!ci(s,h)}catch{return!0}}function O0(s){var l=ar(s,1);l!==null&&pi(l,s,1,-1)}function F0(s){var l=Ni();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:s},l.queue=s,s=s.dispatch=WS.bind(null,ut,s),[l.memoizedState,s]}function _a(s,l,h,g){return s={tag:s,create:l,destroy:h,deps:g,next:null},l=ut.updateQueue,l===null?(l={lastEffect:null,stores:null},ut.updateQueue=l,l.lastEffect=s.next=s):(h=l.lastEffect,h===null?l.lastEffect=s.next=s:(g=h.next,h.next=s,s.next=g,l.lastEffect=s)),s}function D0(){return Qn().memoizedState}function pc(s,l,h,g){var y=Ni();ut.flags|=s,y.memoizedState=_a(1|l,h,void 0,g===void 0?null:g)}function mc(s,l,h,g){var y=Qn();g=g===void 0?null:g;var x=void 0;if(Tt!==null){var R=Tt.memoizedState;if(x=R.destroy,g!==null&&xf(g,R.deps)){y.memoizedState=_a(l,h,x,g);return}}ut.flags|=s,y.memoizedState=_a(1|l,h,x,g)}function N0(s,l){return pc(8390656,8,s,l)}function Rf(s,l){return mc(2048,8,s,l)}function z0(s,l){return mc(4,2,s,l)}function j0(s,l){return mc(4,4,s,l)}function G0(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function W0(s,l,h){return h=h!=null?h.concat([s]):null,mc(4,4,G0.bind(null,l,s),h)}function Tf(){}function B0(s,l){var h=Qn();l=l===void 0?null:l;var g=h.memoizedState;return g!==null&&l!==null&&xf(l,g[1])?g[0]:(h.memoizedState=[s,l],s)}function V0(s,l){var h=Qn();l=l===void 0?null:l;var g=h.memoizedState;return g!==null&&l!==null&&xf(l,g[1])?g[0]:(s=s(),h.memoizedState=[s,l],s)}function U0(s,l,h){return Xs&21?(ci(h,l)||(h=xy(),ut.lanes|=h,Hs|=h,s.baseState=!0),l):(s.baseState&&(s.baseState=!1,yn=!0),s.memoizedState=h)}function jS(s,l){var h=Ke;Ke=h!==0&&4>h?h:4,s(!0);var g=vf.transition;vf.transition={};try{s(!1),l()}finally{Ke=h,vf.transition=g}}function X0(){return Qn().memoizedState}function GS(s,l,h){var g=qr(s);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},H0(s))Y0(l,h);else if(h=C0(s,l,h,g),h!==null){var y=an();pi(h,s,g,y),K0(h,l,g)}}function WS(s,l,h){var g=qr(s),y={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(H0(s))Y0(l,y);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var R=l.lastRenderedState,A=x(R,h);if(y.hasEagerState=!0,y.eagerState=A,ci(A,R)){var O=l.interleaved;O===null?(y.next=y,ff(l)):(y.next=O.next,O.next=y),l.interleaved=y;return}}catch{}finally{}h=C0(s,l,y,g),h!==null&&(y=an(),pi(h,s,g,y),K0(h,l,g))}}function H0(s){var l=s.alternate;return s===ut||l!==null&&l===ut}function Y0(s,l){pa=gc=!0;var h=s.pending;h===null?l.next=l:(l.next=h.next,h.next=l),s.pending=l}function K0(s,l,h){if(h&4194240){var g=l.lanes;g&=s.pendingLanes,h|=g,l.lanes=h,Pd(s,h)}}var yc={readContext:qn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},BS={readContext:qn,useCallback:function(s,l){return Ni().memoizedState=[s,l===void 0?null:l],s},useContext:qn,useEffect:N0,useImperativeHandle:function(s,l,h){return h=h!=null?h.concat([s]):null,pc(4194308,4,G0.bind(null,l,s),h)},useLayoutEffect:function(s,l){return pc(4194308,4,s,l)},useInsertionEffect:function(s,l){return pc(4,2,s,l)},useMemo:function(s,l){var h=Ni();return l=l===void 0?null:l,s=s(),h.memoizedState=[s,l],s},useReducer:function(s,l,h){var g=Ni();return l=h!==void 0?h(l):l,g.memoizedState=g.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},g.queue=s,s=s.dispatch=GS.bind(null,ut,s),[g.memoizedState,s]},useRef:function(s){var l=Ni();return s={current:s},l.memoizedState=s},useState:F0,useDebugValue:Tf,useDeferredValue:function(s){return Ni().memoizedState=s},useTransition:function(){var s=F0(!1),l=s[0];return s=jS.bind(null,s[1]),Ni().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,h){var g=ut,y=Ni();if(ot){if(h===void 0)throw Error(t(407));h=h()}else{if(h=l(),bt===null)throw Error(t(349));Xs&30||k0(g,l,h)}y.memoizedState=h;var x={value:h,getSnapshot:l};return y.queue=x,N0(M0.bind(null,g,x,s),[s]),g.flags|=2048,_a(9,A0.bind(null,g,x,h,l),void 0,null),h},useId:function(){var s=Ni(),l=bt.identifierPrefix;if(ot){var h=lr,g=or;h=(g&~(1<<32-ui(g)-1)).toString(32)+h,l=":"+l+"R"+h,h=ma++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=zS++,l=":"+l+"r"+h.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},VS={readContext:qn,useCallback:B0,useContext:qn,useEffect:Rf,useImperativeHandle:W0,useInsertionEffect:z0,useLayoutEffect:j0,useMemo:V0,useReducer:Cf,useRef:D0,useState:function(){return Cf(ya)},useDebugValue:Tf,useDeferredValue:function(s){var l=Qn();return U0(l,Tt.memoizedState,s)},useTransition:function(){var s=Cf(ya)[0],l=Qn().memoizedState;return[s,l]},useMutableSource:I0,useSyncExternalStore:L0,useId:X0,unstable_isNewReconciler:!1},US={readContext:qn,useCallback:B0,useContext:qn,useEffect:Rf,useImperativeHandle:W0,useInsertionEffect:z0,useLayoutEffect:j0,useMemo:V0,useReducer:Sf,useRef:D0,useState:function(){return Sf(ya)},useDebugValue:Tf,useDeferredValue:function(s){var l=Qn();return Tt===null?l.memoizedState=s:U0(l,Tt.memoizedState,s)},useTransition:function(){var s=Sf(ya)[0],l=Qn().memoizedState;return[s,l]},useMutableSource:I0,useSyncExternalStore:L0,useId:X0,unstable_isNewReconciler:!1};function di(s,l){if(s&&s.defaultProps){l=Y({},l),s=s.defaultProps;for(var h in s)l[h]===void 0&&(l[h]=s[h]);return l}return l}function Pf(s,l,h,g){l=s.memoizedState,h=h(g,l),h=h==null?l:Y({},l,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var _c={isMounted:function(s){return(s=s._reactInternals)?zs(s)===s:!1},enqueueSetState:function(s,l,h){s=s._reactInternals;var g=an(),y=qr(s),x=ur(g,y);x.payload=l,h!=null&&(x.callback=h),l=Yr(s,x,y),l!==null&&(pi(l,s,y,g),cc(l,s,y))},enqueueReplaceState:function(s,l,h){s=s._reactInternals;var g=an(),y=qr(s),x=ur(g,y);x.tag=1,x.payload=l,h!=null&&(x.callback=h),l=Yr(s,x,y),l!==null&&(pi(l,s,y,g),cc(l,s,y))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var h=an(),g=qr(s),y=ur(h,g);y.tag=2,l!=null&&(y.callback=l),l=Yr(s,y,g),l!==null&&(pi(l,s,g,h),cc(l,s,g))}};function $0(s,l,h,g,y,x,R){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,x,R):l.prototype&&l.prototype.isPureReactComponent?!ra(h,g)||!ra(y,x):!0}function Z0(s,l,h){var g=!1,y=Ur,x=l.contextType;return typeof x=="object"&&x!==null?x=qn(x):(y=mn(l)?Gs:Yt.current,g=l.contextTypes,x=(g=g!=null)?Mo(s,y):Ur),l=new l(h,x),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=_c,s.stateNode=l,l._reactInternals=s,g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=y,s.__reactInternalMemoizedMaskedChildContext=x),l}function q0(s,l,h,g){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,g),l.state!==s&&_c.enqueueReplaceState(l,l.state,null)}function If(s,l,h,g){var y=s.stateNode;y.props=h,y.state=s.memoizedState,y.refs={},gf(s);var x=l.contextType;typeof x=="object"&&x!==null?y.context=qn(x):(x=mn(l)?Gs:Yt.current,y.context=Mo(s,x)),y.state=s.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Pf(s,l,x,h),y.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(l=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),l!==y.state&&_c.enqueueReplaceState(y,y.state,null),hc(s,h,y,g),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308)}function Go(s,l){try{var h="",g=l;do h+=ve(g),g=g.return;while(g);var y=h}catch(x){y=`
Error generating stack: `+x.message+`
`+x.stack}return{value:s,source:l,stack:y,digest:null}}function Lf(s,l,h){return{value:s,source:null,stack:h??null,digest:l??null}}function kf(s,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var XS=typeof WeakMap=="function"?WeakMap:Map;function Q0(s,l,h){h=ur(-1,h),h.tag=3,h.payload={element:null};var g=l.value;return h.callback=function(){Rc||(Rc=!0,Xf=g),kf(s,l)},h}function J0(s,l,h){h=ur(-1,h),h.tag=3;var g=s.type.getDerivedStateFromError;if(typeof g=="function"){var y=l.value;h.payload=function(){return g(y)},h.callback=function(){kf(s,l)}}var x=s.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(h.callback=function(){kf(s,l),typeof g!="function"&&($r===null?$r=new Set([this]):$r.add(this));var R=l.stack;this.componentDidCatch(l.value,{componentStack:R!==null?R:""})}),h}function e_(s,l,h){var g=s.pingCache;if(g===null){g=s.pingCache=new XS;var y=new Set;g.set(l,y)}else y=g.get(l),y===void 0&&(y=new Set,g.set(l,y));y.has(h)||(y.add(h),s=sR.bind(null,s,l,h),l.then(s,s))}function t_(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function n_(s,l,h,g,y){return s.mode&1?(s.flags|=65536,s.lanes=y,s):(s===l?s.flags|=65536:(s.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=ur(-1,1),l.tag=2,Yr(h,l,1))),h.lanes|=1),s)}var HS=I.ReactCurrentOwner,yn=!1;function ln(s,l,h,g){l.child=s===null?E0(l,null,h,g):Do(l,s.child,h,g)}function i_(s,l,h,g,y){h=h.render;var x=l.ref;return zo(l,y),g=wf(s,l,h,g,x,y),h=Ef(),s!==null&&!yn?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~y,cr(s,l,y)):(ot&&h&&rf(l),l.flags|=1,ln(s,l,g,y),l.child)}function r_(s,l,h,g,y){if(s===null){var x=h.type;return typeof x=="function"&&!Qf(x)&&x.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=x,s_(s,l,x,g,y)):(s=Ac(h.type,null,g,l,l.mode,y),s.ref=l.ref,s.return=l,l.child=s)}if(x=s.child,!(s.lanes&y)){var R=x.memoizedProps;if(h=h.compare,h=h!==null?h:ra,h(R,g)&&s.ref===l.ref)return cr(s,l,y)}return l.flags|=1,s=Jr(x,g),s.ref=l.ref,s.return=l,l.child=s}function s_(s,l,h,g,y){if(s!==null){var x=s.memoizedProps;if(ra(x,g)&&s.ref===l.ref)if(yn=!1,l.pendingProps=g=x,(s.lanes&y)!==0)s.flags&131072&&(yn=!0);else return l.lanes=s.lanes,cr(s,l,y)}return Af(s,l,h,g,y)}function o_(s,l,h){var g=l.pendingProps,y=g.children,x=s!==null?s.memoizedState:null;if(g.mode==="hidden")if(!(l.mode&1))l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Bo,Mn),Mn|=h;else{if(!(h&1073741824))return s=x!==null?x.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,Qe(Bo,Mn),Mn|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=x!==null?x.baseLanes:h,Qe(Bo,Mn),Mn|=g}else x!==null?(g=x.baseLanes|h,l.memoizedState=null):g=h,Qe(Bo,Mn),Mn|=g;return ln(s,l,y,h),l.child}function l_(s,l){var h=l.ref;(s===null&&h!==null||s!==null&&s.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function Af(s,l,h,g,y){var x=mn(h)?Gs:Yt.current;return x=Mo(l,x),zo(l,y),h=wf(s,l,h,g,x,y),g=Ef(),s!==null&&!yn?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~y,cr(s,l,y)):(ot&&g&&rf(l),l.flags|=1,ln(s,l,h,y),l.child)}function a_(s,l,h,g,y){if(mn(h)){var x=!0;nc(l)}else x=!1;if(zo(l,y),l.stateNode===null)xc(s,l),Z0(l,h,g),If(l,h,g,y),g=!0;else if(s===null){var R=l.stateNode,A=l.memoizedProps;R.props=A;var O=R.context,V=h.contextType;typeof V=="object"&&V!==null?V=qn(V):(V=mn(h)?Gs:Yt.current,V=Mo(l,V));var te=h.getDerivedStateFromProps,se=typeof te=="function"||typeof R.getSnapshotBeforeUpdate=="function";se||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(A!==g||O!==V)&&q0(l,R,g,V),Hr=!1;var ee=l.memoizedState;R.state=ee,hc(l,g,R,y),O=l.memoizedState,A!==g||ee!==O||pn.current||Hr?(typeof te=="function"&&(Pf(l,h,te,g),O=l.memoizedState),(A=Hr||$0(l,h,A,g,ee,O,V))?(se||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(l.flags|=4194308)):(typeof R.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=O),R.props=g,R.state=O,R.context=V,g=A):(typeof R.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{R=l.stateNode,S0(s,l),A=l.memoizedProps,V=l.type===l.elementType?A:di(l.type,A),R.props=V,se=l.pendingProps,ee=R.context,O=h.contextType,typeof O=="object"&&O!==null?O=qn(O):(O=mn(h)?Gs:Yt.current,O=Mo(l,O));var ce=h.getDerivedStateFromProps;(te=typeof ce=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(A!==se||ee!==O)&&q0(l,R,g,O),Hr=!1,ee=l.memoizedState,R.state=ee,hc(l,g,R,y);var ge=l.memoizedState;A!==se||ee!==ge||pn.current||Hr?(typeof ce=="function"&&(Pf(l,h,ce,g),ge=l.memoizedState),(V=Hr||$0(l,h,V,g,ee,ge,O)||!1)?(te||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(g,ge,O),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(g,ge,O)),typeof R.componentDidUpdate=="function"&&(l.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof R.componentDidUpdate!="function"||A===s.memoizedProps&&ee===s.memoizedState||(l.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&ee===s.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=ge),R.props=g,R.state=ge,R.context=O,g=V):(typeof R.componentDidUpdate!="function"||A===s.memoizedProps&&ee===s.memoizedState||(l.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&ee===s.memoizedState||(l.flags|=1024),g=!1)}return Mf(s,l,h,g,x,y)}function Mf(s,l,h,g,y,x){l_(s,l);var R=(l.flags&128)!==0;if(!g&&!R)return y&&f0(l,h,!1),cr(s,l,x);g=l.stateNode,HS.current=l;var A=R&&typeof h.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,s!==null&&R?(l.child=Do(l,s.child,null,x),l.child=Do(l,null,A,x)):ln(s,l,A,x),l.memoizedState=g.state,y&&f0(l,h,!0),l.child}function u_(s){var l=s.stateNode;l.pendingContext?h0(s,l.pendingContext,l.pendingContext!==l.context):l.context&&h0(s,l.context,!1),pf(s,l.containerInfo)}function c_(s,l,h,g,y){return Fo(),af(y),l.flags|=256,ln(s,l,h,g),l.child}var bf={dehydrated:null,treeContext:null,retryLane:0};function Of(s){return{baseLanes:s,cachePool:null,transitions:null}}function h_(s,l,h){var g=l.pendingProps,y=at.current,x=!1,R=(l.flags&128)!==0,A;if((A=R)||(A=s!==null&&s.memoizedState===null?!1:(y&2)!==0),A?(x=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(y|=1),Qe(at,y&1),s===null)return lf(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(l.mode&1?s.data==="$!"?l.lanes=8:l.lanes=1073741824:l.lanes=1,null):(R=g.children,s=g.fallback,x?(g=l.mode,x=l.child,R={mode:"hidden",children:R},!(g&1)&&x!==null?(x.childLanes=0,x.pendingProps=R):x=Mc(R,g,0,null),s=Zs(s,g,h,null),x.return=l,s.return=l,x.sibling=s,l.child=x,l.child.memoizedState=Of(h),l.memoizedState=bf,s):Ff(l,R));if(y=s.memoizedState,y!==null&&(A=y.dehydrated,A!==null))return YS(s,l,R,g,A,y,h);if(x){x=g.fallback,R=l.mode,y=s.child,A=y.sibling;var O={mode:"hidden",children:g.children};return!(R&1)&&l.child!==y?(g=l.child,g.childLanes=0,g.pendingProps=O,l.deletions=null):(g=Jr(y,O),g.subtreeFlags=y.subtreeFlags&14680064),A!==null?x=Jr(A,x):(x=Zs(x,R,h,null),x.flags|=2),x.return=l,g.return=l,g.sibling=x,l.child=g,g=x,x=l.child,R=s.child.memoizedState,R=R===null?Of(h):{baseLanes:R.baseLanes|h,cachePool:null,transitions:R.transitions},x.memoizedState=R,x.childLanes=s.childLanes&~h,l.memoizedState=bf,g}return x=s.child,s=x.sibling,g=Jr(x,{mode:"visible",children:g.children}),!(l.mode&1)&&(g.lanes=h),g.return=l,g.sibling=null,s!==null&&(h=l.deletions,h===null?(l.deletions=[s],l.flags|=16):h.push(s)),l.child=g,l.memoizedState=null,g}function Ff(s,l){return l=Mc({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function vc(s,l,h,g){return g!==null&&af(g),Do(l,s.child,null,h),s=Ff(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function YS(s,l,h,g,y,x,R){if(h)return l.flags&256?(l.flags&=-257,g=Lf(Error(t(422))),vc(s,l,R,g)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(x=g.fallback,y=l.mode,g=Mc({mode:"visible",children:g.children},y,0,null),x=Zs(x,y,R,null),x.flags|=2,g.return=l,x.return=l,g.sibling=x,l.child=g,l.mode&1&&Do(l,s.child,null,R),l.child.memoizedState=Of(R),l.memoizedState=bf,x);if(!(l.mode&1))return vc(s,l,R,null);if(y.data==="$!"){if(g=y.nextSibling&&y.nextSibling.dataset,g)var A=g.dgst;return g=A,x=Error(t(419)),g=Lf(x,g,void 0),vc(s,l,R,g)}if(A=(R&s.childLanes)!==0,yn||A){if(g=bt,g!==null){switch(R&-R){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=y&(g.suspendedLanes|R)?0:y,y!==0&&y!==x.retryLane&&(x.retryLane=y,ar(s,y),pi(g,s,y,-1))}return qf(),g=Lf(Error(t(421))),vc(s,l,R,g)}return y.data==="$?"?(l.flags|=128,l.child=s.child,l=oR.bind(null,s),y._reactRetry=l,null):(s=x.treeContext,An=Br(y.nextSibling),kn=l,ot=!0,hi=null,s!==null&&($n[Zn++]=or,$n[Zn++]=lr,$n[Zn++]=Ws,or=s.id,lr=s.overflow,Ws=l),l=Ff(l,g.children),l.flags|=4096,l)}function d_(s,l,h){s.lanes|=l;var g=s.alternate;g!==null&&(g.lanes|=l),df(s.return,l,h)}function Df(s,l,h,g,y){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:y}:(x.isBackwards=l,x.rendering=null,x.renderingStartTime=0,x.last=g,x.tail=h,x.tailMode=y)}function f_(s,l,h){var g=l.pendingProps,y=g.revealOrder,x=g.tail;if(ln(s,l,g.children,h),g=at.current,g&2)g=g&1|2,l.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&d_(s,h,l);else if(s.tag===19)d_(s,h,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}if(Qe(at,g),!(l.mode&1))l.memoizedState=null;else switch(y){case"forwards":for(h=l.child,y=null;h!==null;)s=h.alternate,s!==null&&dc(s)===null&&(y=h),h=h.sibling;h=y,h===null?(y=l.child,l.child=null):(y=h.sibling,h.sibling=null),Df(l,!1,y,h,x);break;case"backwards":for(h=null,y=l.child,l.child=null;y!==null;){if(s=y.alternate,s!==null&&dc(s)===null){l.child=y;break}s=y.sibling,y.sibling=h,h=y,y=s}Df(l,!0,h,null,x);break;case"together":Df(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function xc(s,l){!(l.mode&1)&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function cr(s,l,h){if(s!==null&&(l.dependencies=s.dependencies),Hs|=l.lanes,!(h&l.childLanes))return null;if(s!==null&&l.child!==s.child)throw Error(t(153));if(l.child!==null){for(s=l.child,h=Jr(s,s.pendingProps),l.child=h,h.return=l;s.sibling!==null;)s=s.sibling,h=h.sibling=Jr(s,s.pendingProps),h.return=l;h.sibling=null}return l.child}function KS(s,l,h){switch(l.tag){case 3:u_(l),Fo();break;case 5:P0(l);break;case 1:mn(l.type)&&nc(l);break;case 4:pf(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,y=l.memoizedProps.value;Qe(ac,g._currentValue),g._currentValue=y;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(Qe(at,at.current&1),l.flags|=128,null):h&l.child.childLanes?h_(s,l,h):(Qe(at,at.current&1),s=cr(s,l,h),s!==null?s.sibling:null);Qe(at,at.current&1);break;case 19:if(g=(h&l.childLanes)!==0,s.flags&128){if(g)return f_(s,l,h);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Qe(at,at.current),g)break;return null;case 22:case 23:return l.lanes=0,o_(s,l,h)}return cr(s,l,h)}var g_,Nf,p_,m_;g_=function(s,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Nf=function(){},p_=function(s,l,h,g){var y=s.memoizedProps;if(y!==g){s=l.stateNode,Us(Di.current);var x=null;switch(h){case"input":y=kt(s,y),g=kt(s,g),x=[];break;case"select":y=Y({},y,{value:void 0}),g=Y({},g,{value:void 0}),x=[];break;case"textarea":y=ai(s,y),g=ai(s,g),x=[];break;default:typeof y.onClick!="function"&&typeof g.onClick=="function"&&(s.onclick=Ju)}vo(h,g);var R;h=null;for(V in y)if(!g.hasOwnProperty(V)&&y.hasOwnProperty(V)&&y[V]!=null)if(V==="style"){var A=y[V];for(R in A)A.hasOwnProperty(R)&&(h||(h={}),h[R]="")}else V!=="dangerouslySetInnerHTML"&&V!=="children"&&V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(r.hasOwnProperty(V)?x||(x=[]):(x=x||[]).push(V,null));for(V in g){var O=g[V];if(A=y!=null?y[V]:void 0,g.hasOwnProperty(V)&&O!==A&&(O!=null||A!=null))if(V==="style")if(A){for(R in A)!A.hasOwnProperty(R)||O&&O.hasOwnProperty(R)||(h||(h={}),h[R]="");for(R in O)O.hasOwnProperty(R)&&A[R]!==O[R]&&(h||(h={}),h[R]=O[R])}else h||(x||(x=[]),x.push(V,h)),h=O;else V==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,A=A?A.__html:void 0,O!=null&&A!==O&&(x=x||[]).push(V,O)):V==="children"?typeof O!="string"&&typeof O!="number"||(x=x||[]).push(V,""+O):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&(r.hasOwnProperty(V)?(O!=null&&V==="onScroll"&&Je("scroll",s),x||A===O||(x=[])):(x=x||[]).push(V,O))}h&&(x=x||[]).push("style",h);var V=x;(l.updateQueue=V)&&(l.flags|=4)}},m_=function(s,l,h,g){h!==g&&(l.flags|=4)};function va(s,l){if(!ot)switch(s.tailMode){case"hidden":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function $t(s){var l=s.alternate!==null&&s.alternate.child===s.child,h=0,g=0;if(l)for(var y=s.child;y!==null;)h|=y.lanes|y.childLanes,g|=y.subtreeFlags&14680064,g|=y.flags&14680064,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)h|=y.lanes|y.childLanes,g|=y.subtreeFlags,g|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=g,s.childLanes=h,l}function $S(s,l,h){var g=l.pendingProps;switch(sf(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(l),null;case 1:return mn(l.type)&&tc(),$t(l),null;case 3:return g=l.stateNode,jo(),et(pn),et(Yt),_f(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(oc(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024,hi!==null&&(Kf(hi),hi=null))),Nf(s,l),$t(l),null;case 5:mf(l);var y=Us(ga.current);if(h=l.type,s!==null&&l.stateNode!=null)p_(s,l,h,g,y),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(t(166));return $t(l),null}if(s=Us(Di.current),oc(l)){g=l.stateNode,h=l.type;var x=l.memoizedProps;switch(g[Fi]=l,g[ua]=x,s=(l.mode&1)!==0,h){case"dialog":Je("cancel",g),Je("close",g);break;case"iframe":case"object":case"embed":Je("load",g);break;case"video":case"audio":for(y=0;y<oa.length;y++)Je(oa[y],g);break;case"source":Je("error",g);break;case"img":case"image":case"link":Je("error",g),Je("load",g);break;case"details":Je("toggle",g);break;case"input":fn(g,x),Je("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!x.multiple},Je("invalid",g);break;case"textarea":tr(g,x),Je("invalid",g)}vo(h,x),y=null;for(var R in x)if(x.hasOwnProperty(R)){var A=x[R];R==="children"?typeof A=="string"?g.textContent!==A&&(x.suppressHydrationWarning!==!0&&Qu(g.textContent,A,s),y=["children",A]):typeof A=="number"&&g.textContent!==""+A&&(x.suppressHydrationWarning!==!0&&Qu(g.textContent,A,s),y=["children",""+A]):r.hasOwnProperty(R)&&A!=null&&R==="onScroll"&&Je("scroll",g)}switch(h){case"input":Ae(g),nn(g,x,!0);break;case"textarea":Ae(g),yt(g);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(g.onclick=Ju)}g=y,l.updateQueue=g,g!==null&&(l.flags|=4)}else{R=y.nodeType===9?y:y.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=yo(h)),s==="http://www.w3.org/1999/xhtml"?h==="script"?(s=R.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof g.is=="string"?s=R.createElement(h,{is:g.is}):(s=R.createElement(h),h==="select"&&(R=s,g.multiple?R.multiple=!0:g.size&&(R.size=g.size))):s=R.createElementNS(s,h),s[Fi]=l,s[ua]=g,g_(s,l,!1,!1),l.stateNode=s;e:{switch(R=xo(h,g),h){case"dialog":Je("cancel",s),Je("close",s),y=g;break;case"iframe":case"object":case"embed":Je("load",s),y=g;break;case"video":case"audio":for(y=0;y<oa.length;y++)Je(oa[y],s);y=g;break;case"source":Je("error",s),y=g;break;case"img":case"image":case"link":Je("error",s),Je("load",s),y=g;break;case"details":Je("toggle",s),y=g;break;case"input":fn(s,g),y=kt(s,g),Je("invalid",s);break;case"option":y=g;break;case"select":s._wrapperState={wasMultiple:!!g.multiple},y=Y({},g,{value:void 0}),Je("invalid",s);break;case"textarea":tr(s,g),y=ai(s,g),Je("invalid",s);break;default:y=g}vo(h,y),A=y;for(x in A)if(A.hasOwnProperty(x)){var O=A[x];x==="style"?bu(s,O):x==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&Os(s,O)):x==="children"?typeof O=="string"?(h!=="textarea"||O!=="")&&Fs(s,O):typeof O=="number"&&Fs(s,""+O):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(r.hasOwnProperty(x)?O!=null&&x==="onScroll"&&Je("scroll",s):O!=null&&T(s,x,O,R))}switch(h){case"input":Ae(s),nn(s,g,!1);break;case"textarea":Ae(s),yt(s);break;case"option":g.value!=null&&s.setAttribute("value",""+he(g.value));break;case"select":s.multiple=!!g.multiple,x=g.value,x!=null?Hn(s,!!g.multiple,x,!1):g.defaultValue!=null&&Hn(s,!!g.multiple,g.defaultValue,!0);break;default:typeof y.onClick=="function"&&(s.onclick=Ju)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return $t(l),null;case 6:if(s&&l.stateNode!=null)m_(s,l,s.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(t(166));if(h=Us(ga.current),Us(Di.current),oc(l)){if(g=l.stateNode,h=l.memoizedProps,g[Fi]=l,(x=g.nodeValue!==h)&&(s=kn,s!==null))switch(s.tag){case 3:Qu(g.nodeValue,h,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Qu(g.nodeValue,h,(s.mode&1)!==0)}x&&(l.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[Fi]=l,l.stateNode=g}return $t(l),null;case 13:if(et(at),g=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ot&&An!==null&&l.mode&1&&!(l.flags&128))v0(),Fo(),l.flags|=98560,x=!1;else if(x=oc(l),g!==null&&g.dehydrated!==null){if(s===null){if(!x)throw Error(t(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[Fi]=l}else Fo(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;$t(l),x=!1}else hi!==null&&(Kf(hi),hi=null),x=!0;if(!x)return l.flags&65536?l:null}return l.flags&128?(l.lanes=h,l):(g=g!==null,g!==(s!==null&&s.memoizedState!==null)&&g&&(l.child.flags|=8192,l.mode&1&&(s===null||at.current&1?Pt===0&&(Pt=3):qf())),l.updateQueue!==null&&(l.flags|=4),$t(l),null);case 4:return jo(),Nf(s,l),s===null&&la(l.stateNode.containerInfo),$t(l),null;case 10:return hf(l.type._context),$t(l),null;case 17:return mn(l.type)&&tc(),$t(l),null;case 19:if(et(at),x=l.memoizedState,x===null)return $t(l),null;if(g=(l.flags&128)!==0,R=x.rendering,R===null)if(g)va(x,!1);else{if(Pt!==0||s!==null&&s.flags&128)for(s=l.child;s!==null;){if(R=dc(s),R!==null){for(l.flags|=128,va(x,!1),g=R.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=h,h=l.child;h!==null;)x=h,s=g,x.flags&=14680066,R=x.alternate,R===null?(x.childLanes=0,x.lanes=s,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=R.childLanes,x.lanes=R.lanes,x.child=R.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=R.memoizedProps,x.memoizedState=R.memoizedState,x.updateQueue=R.updateQueue,x.type=R.type,s=R.dependencies,x.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),h=h.sibling;return Qe(at,at.current&1|2),l.child}s=s.sibling}x.tail!==null&&vt()>Vo&&(l.flags|=128,g=!0,va(x,!1),l.lanes=4194304)}else{if(!g)if(s=dc(R),s!==null){if(l.flags|=128,g=!0,h=s.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),va(x,!0),x.tail===null&&x.tailMode==="hidden"&&!R.alternate&&!ot)return $t(l),null}else 2*vt()-x.renderingStartTime>Vo&&h!==1073741824&&(l.flags|=128,g=!0,va(x,!1),l.lanes=4194304);x.isBackwards?(R.sibling=l.child,l.child=R):(h=x.last,h!==null?h.sibling=R:l.child=R,x.last=R)}return x.tail!==null?(l=x.tail,x.rendering=l,x.tail=l.sibling,x.renderingStartTime=vt(),l.sibling=null,h=at.current,Qe(at,g?h&1|2:h&1),l):($t(l),null);case 22:case 23:return Zf(),g=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==g&&(l.flags|=8192),g&&l.mode&1?Mn&1073741824&&($t(l),l.subtreeFlags&6&&(l.flags|=8192)):$t(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function ZS(s,l){switch(sf(l),l.tag){case 1:return mn(l.type)&&tc(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return jo(),et(pn),et(Yt),_f(),s=l.flags,s&65536&&!(s&128)?(l.flags=s&-65537|128,l):null;case 5:return mf(l),null;case 13:if(et(at),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Fo()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return et(at),null;case 4:return jo(),null;case 10:return hf(l.type._context),null;case 22:case 23:return Zf(),null;case 24:return null;default:return null}}var wc=!1,Zt=!1,qS=typeof WeakSet=="function"?WeakSet:Set,de=null;function Wo(s,l){var h=s.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){gt(s,l,g)}else h.current=null}function zf(s,l,h){try{h()}catch(g){gt(s,l,g)}}var y_=!1;function QS(s,l){if($d=Wu,s=$y(),Wd(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var y=g.anchorOffset,x=g.focusNode;g=g.focusOffset;try{h.nodeType,x.nodeType}catch{h=null;break e}var R=0,A=-1,O=-1,V=0,te=0,se=s,ee=null;t:for(;;){for(var ce;se!==h||y!==0&&se.nodeType!==3||(A=R+y),se!==x||g!==0&&se.nodeType!==3||(O=R+g),se.nodeType===3&&(R+=se.nodeValue.length),(ce=se.firstChild)!==null;)ee=se,se=ce;for(;;){if(se===s)break t;if(ee===h&&++V===y&&(A=R),ee===x&&++te===g&&(O=R),(ce=se.nextSibling)!==null)break;se=ee,ee=se.parentNode}se=ce}h=A===-1||O===-1?null:{start:A,end:O}}else h=null}h=h||{start:0,end:0}}else h=null;for(Zd={focusedElem:s,selectionRange:h},Wu=!1,de=l;de!==null;)if(l=de,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,de=s;else for(;de!==null;){l=de;try{var ge=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var me=ge.memoizedProps,xt=ge.memoizedState,j=l.stateNode,F=j.getSnapshotBeforeUpdate(l.elementType===l.type?me:di(l.type,me),xt);j.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var W=l.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){gt(l,l.return,ae)}if(s=l.sibling,s!==null){s.return=l.return,de=s;break}de=l.return}return ge=y_,y_=!1,ge}function xa(s,l,h){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var y=g=g.next;do{if((y.tag&s)===s){var x=y.destroy;y.destroy=void 0,x!==void 0&&zf(l,h,x)}y=y.next}while(y!==g)}}function Ec(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&s)===s){var g=h.create;h.destroy=g()}h=h.next}while(h!==l)}}function jf(s){var l=s.ref;if(l!==null){var h=s.stateNode;switch(s.tag){case 5:s=h;break;default:s=h}typeof l=="function"?l(s):l.current=s}}function __(s){var l=s.alternate;l!==null&&(s.alternate=null,__(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[Fi],delete l[ua],delete l[ef],delete l[OS],delete l[FS])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function v_(s){return s.tag===5||s.tag===3||s.tag===4}function x_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||v_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Gf(s,l,h){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(s,l):h.insertBefore(s,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(s,h)):(l=h,l.appendChild(s)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=Ju));else if(g!==4&&(s=s.child,s!==null))for(Gf(s,l,h),s=s.sibling;s!==null;)Gf(s,l,h),s=s.sibling}function Wf(s,l,h){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?h.insertBefore(s,l):h.appendChild(s);else if(g!==4&&(s=s.child,s!==null))for(Wf(s,l,h),s=s.sibling;s!==null;)Wf(s,l,h),s=s.sibling}var jt=null,fi=!1;function Kr(s,l,h){for(h=h.child;h!==null;)w_(s,l,h),h=h.sibling}function w_(s,l,h){if(Oi&&typeof Oi.onCommitFiberUnmount=="function")try{Oi.onCommitFiberUnmount(Fu,h)}catch{}switch(h.tag){case 5:Zt||Wo(h,l);case 6:var g=jt,y=fi;jt=null,Kr(s,l,h),jt=g,fi=y,jt!==null&&(fi?(s=jt,h=h.stateNode,s.nodeType===8?s.parentNode.removeChild(h):s.removeChild(h)):jt.removeChild(h.stateNode));break;case 18:jt!==null&&(fi?(s=jt,h=h.stateNode,s.nodeType===8?Jd(s.parentNode,h):s.nodeType===1&&Jd(s,h),Ql(s)):Jd(jt,h.stateNode));break;case 4:g=jt,y=fi,jt=h.stateNode.containerInfo,fi=!0,Kr(s,l,h),jt=g,fi=y;break;case 0:case 11:case 14:case 15:if(!Zt&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){y=g=g.next;do{var x=y,R=x.destroy;x=x.tag,R!==void 0&&(x&2||x&4)&&zf(h,l,R),y=y.next}while(y!==g)}Kr(s,l,h);break;case 1:if(!Zt&&(Wo(h,l),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(A){gt(h,l,A)}Kr(s,l,h);break;case 21:Kr(s,l,h);break;case 22:h.mode&1?(Zt=(g=Zt)||h.memoizedState!==null,Kr(s,l,h),Zt=g):Kr(s,l,h);break;default:Kr(s,l,h)}}function E_(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var h=s.stateNode;h===null&&(h=s.stateNode=new qS),l.forEach(function(g){var y=lR.bind(null,s,g);h.has(g)||(h.add(g),g.then(y,y))})}}function gi(s,l){var h=l.deletions;if(h!==null)for(var g=0;g<h.length;g++){var y=h[g];try{var x=s,R=l,A=R;e:for(;A!==null;){switch(A.tag){case 5:jt=A.stateNode,fi=!1;break e;case 3:jt=A.stateNode.containerInfo,fi=!0;break e;case 4:jt=A.stateNode.containerInfo,fi=!0;break e}A=A.return}if(jt===null)throw Error(t(160));w_(x,R,y),jt=null,fi=!1;var O=y.alternate;O!==null&&(O.return=null),y.return=null}catch(V){gt(y,l,V)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)C_(l,s),l=l.sibling}function C_(s,l){var h=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(gi(l,s),zi(s),g&4){try{xa(3,s,s.return),Ec(3,s)}catch(me){gt(s,s.return,me)}try{xa(5,s,s.return)}catch(me){gt(s,s.return,me)}}break;case 1:gi(l,s),zi(s),g&512&&h!==null&&Wo(h,h.return);break;case 5:if(gi(l,s),zi(s),g&512&&h!==null&&Wo(h,h.return),s.flags&32){var y=s.stateNode;try{Fs(y,"")}catch(me){gt(s,s.return,me)}}if(g&4&&(y=s.stateNode,y!=null)){var x=s.memoizedProps,R=h!==null?h.memoizedProps:x,A=s.type,O=s.updateQueue;if(s.updateQueue=null,O!==null)try{A==="input"&&x.type==="radio"&&x.name!=null&&Xt(y,x),xo(A,R);var V=xo(A,x);for(R=0;R<O.length;R+=2){var te=O[R],se=O[R+1];te==="style"?bu(y,se):te==="dangerouslySetInnerHTML"?Os(y,se):te==="children"?Fs(y,se):T(y,te,se,V)}switch(A){case"input":ft(y,x);break;case"textarea":nr(y,x);break;case"select":var ee=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!x.multiple;var ce=x.value;ce!=null?Hn(y,!!x.multiple,ce,!1):ee!==!!x.multiple&&(x.defaultValue!=null?Hn(y,!!x.multiple,x.defaultValue,!0):Hn(y,!!x.multiple,x.multiple?[]:"",!1))}y[ua]=x}catch(me){gt(s,s.return,me)}}break;case 6:if(gi(l,s),zi(s),g&4){if(s.stateNode===null)throw Error(t(162));y=s.stateNode,x=s.memoizedProps;try{y.nodeValue=x}catch(me){gt(s,s.return,me)}}break;case 3:if(gi(l,s),zi(s),g&4&&h!==null&&h.memoizedState.isDehydrated)try{Ql(l.containerInfo)}catch(me){gt(s,s.return,me)}break;case 4:gi(l,s),zi(s);break;case 13:gi(l,s),zi(s),y=s.child,y.flags&8192&&(x=y.memoizedState!==null,y.stateNode.isHidden=x,!x||y.alternate!==null&&y.alternate.memoizedState!==null||(Uf=vt())),g&4&&E_(s);break;case 22:if(te=h!==null&&h.memoizedState!==null,s.mode&1?(Zt=(V=Zt)||te,gi(l,s),Zt=V):gi(l,s),zi(s),g&8192){if(V=s.memoizedState!==null,(s.stateNode.isHidden=V)&&!te&&s.mode&1)for(de=s,te=s.child;te!==null;){for(se=de=te;de!==null;){switch(ee=de,ce=ee.child,ee.tag){case 0:case 11:case 14:case 15:xa(4,ee,ee.return);break;case 1:Wo(ee,ee.return);var ge=ee.stateNode;if(typeof ge.componentWillUnmount=="function"){g=ee,h=ee.return;try{l=g,ge.props=l.memoizedProps,ge.state=l.memoizedState,ge.componentWillUnmount()}catch(me){gt(g,h,me)}}break;case 5:Wo(ee,ee.return);break;case 22:if(ee.memoizedState!==null){T_(se);continue}}ce!==null?(ce.return=ee,de=ce):T_(se)}te=te.sibling}e:for(te=null,se=s;;){if(se.tag===5){if(te===null){te=se;try{y=se.stateNode,V?(x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(A=se.stateNode,O=se.memoizedProps.style,R=O!=null&&O.hasOwnProperty("display")?O.display:null,A.style.display=_o("display",R))}catch(me){gt(s,s.return,me)}}}else if(se.tag===6){if(te===null)try{se.stateNode.nodeValue=V?"":se.memoizedProps}catch(me){gt(s,s.return,me)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===s)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===s)break e;for(;se.sibling===null;){if(se.return===null||se.return===s)break e;te===se&&(te=null),se=se.return}te===se&&(te=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:gi(l,s),zi(s),g&4&&E_(s);break;case 21:break;default:gi(l,s),zi(s)}}function zi(s){var l=s.flags;if(l&2){try{e:{for(var h=s.return;h!==null;){if(v_(h)){var g=h;break e}h=h.return}throw Error(t(160))}switch(g.tag){case 5:var y=g.stateNode;g.flags&32&&(Fs(y,""),g.flags&=-33);var x=x_(s);Wf(s,x,y);break;case 3:case 4:var R=g.stateNode.containerInfo,A=x_(s);Gf(s,A,R);break;default:throw Error(t(161))}}catch(O){gt(s,s.return,O)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function JS(s,l,h){de=s,S_(s)}function S_(s,l,h){for(var g=(s.mode&1)!==0;de!==null;){var y=de,x=y.child;if(y.tag===22&&g){var R=y.memoizedState!==null||wc;if(!R){var A=y.alternate,O=A!==null&&A.memoizedState!==null||Zt;A=wc;var V=Zt;if(wc=R,(Zt=O)&&!V)for(de=y;de!==null;)R=de,O=R.child,R.tag===22&&R.memoizedState!==null?P_(y):O!==null?(O.return=R,de=O):P_(y);for(;x!==null;)de=x,S_(x),x=x.sibling;de=y,wc=A,Zt=V}R_(s)}else y.subtreeFlags&8772&&x!==null?(x.return=y,de=x):R_(s)}}function R_(s){for(;de!==null;){var l=de;if(l.flags&8772){var h=l.alternate;try{if(l.flags&8772)switch(l.tag){case 0:case 11:case 15:Zt||Ec(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!Zt)if(h===null)g.componentDidMount();else{var y=l.elementType===l.type?h.memoizedProps:di(l.type,h.memoizedProps);g.componentDidUpdate(y,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var x=l.updateQueue;x!==null&&T0(l,x,g);break;case 3:var R=l.updateQueue;if(R!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}T0(l,R,h)}break;case 5:var A=l.stateNode;if(h===null&&l.flags&4){h=A;var O=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&h.focus();break;case"img":O.src&&(h.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var V=l.alternate;if(V!==null){var te=V.memoizedState;if(te!==null){var se=te.dehydrated;se!==null&&Ql(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Zt||l.flags&512&&jf(l)}catch(ee){gt(l,l.return,ee)}}if(l===s){de=null;break}if(h=l.sibling,h!==null){h.return=l.return,de=h;break}de=l.return}}function T_(s){for(;de!==null;){var l=de;if(l===s){de=null;break}var h=l.sibling;if(h!==null){h.return=l.return,de=h;break}de=l.return}}function P_(s){for(;de!==null;){var l=de;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{Ec(4,l)}catch(O){gt(l,h,O)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var y=l.return;try{g.componentDidMount()}catch(O){gt(l,y,O)}}var x=l.return;try{jf(l)}catch(O){gt(l,x,O)}break;case 5:var R=l.return;try{jf(l)}catch(O){gt(l,R,O)}}}catch(O){gt(l,l.return,O)}if(l===s){de=null;break}var A=l.sibling;if(A!==null){A.return=l.return,de=A;break}de=l.return}}var eR=Math.ceil,Cc=I.ReactCurrentDispatcher,Bf=I.ReactCurrentOwner,Jn=I.ReactCurrentBatchConfig,We=0,bt=null,Et=null,Gt=0,Mn=0,Bo=Vr(0),Pt=0,wa=null,Hs=0,Sc=0,Vf=0,Ea=null,_n=null,Uf=0,Vo=1/0,hr=null,Rc=!1,Xf=null,$r=null,Tc=!1,Zr=null,Pc=0,Ca=0,Hf=null,Ic=-1,Lc=0;function an(){return We&6?vt():Ic!==-1?Ic:Ic=vt()}function qr(s){return s.mode&1?We&2&&Gt!==0?Gt&-Gt:NS.transition!==null?(Lc===0&&(Lc=xy()),Lc):(s=Ke,s!==0||(s=window.event,s=s===void 0?16:Ly(s.type)),s):1}function pi(s,l,h,g){if(50<Ca)throw Ca=0,Hf=null,Error(t(185));Yl(s,h,g),(!(We&2)||s!==bt)&&(s===bt&&(!(We&2)&&(Sc|=h),Pt===4&&Qr(s,Gt)),vn(s,g),h===1&&We===0&&!(l.mode&1)&&(Vo=vt()+500,ic&&Xr()))}function vn(s,l){var h=s.callbackNode;NC(s,l);var g=zu(s,s===bt?Gt:0);if(g===0)h!==null&&yy(h),s.callbackNode=null,s.callbackPriority=0;else if(l=g&-g,s.callbackPriority!==l){if(h!=null&&yy(h),l===1)s.tag===0?DS(L_.bind(null,s)):g0(L_.bind(null,s)),MS(function(){!(We&6)&&Xr()}),h=null;else{switch(wy(g)){case 1:h=Sd;break;case 4:h=_y;break;case 16:h=Ou;break;case 536870912:h=vy;break;default:h=Ou}h=N_(h,I_.bind(null,s))}s.callbackPriority=l,s.callbackNode=h}}function I_(s,l){if(Ic=-1,Lc=0,We&6)throw Error(t(327));var h=s.callbackNode;if(Uo()&&s.callbackNode!==h)return null;var g=zu(s,s===bt?Gt:0);if(g===0)return null;if(g&30||g&s.expiredLanes||l)l=kc(s,g);else{l=g;var y=We;We|=2;var x=A_();(bt!==s||Gt!==l)&&(hr=null,Vo=vt()+500,Ks(s,l));do try{iR();break}catch(A){k_(s,A)}while(!0);cf(),Cc.current=x,We=y,Et!==null?l=0:(bt=null,Gt=0,l=Pt)}if(l!==0){if(l===2&&(y=Rd(s),y!==0&&(g=y,l=Yf(s,y))),l===1)throw h=wa,Ks(s,0),Qr(s,g),vn(s,vt()),h;if(l===6)Qr(s,g);else{if(y=s.current.alternate,!(g&30)&&!tR(y)&&(l=kc(s,g),l===2&&(x=Rd(s),x!==0&&(g=x,l=Yf(s,x))),l===1))throw h=wa,Ks(s,0),Qr(s,g),vn(s,vt()),h;switch(s.finishedWork=y,s.finishedLanes=g,l){case 0:case 1:throw Error(t(345));case 2:$s(s,_n,hr);break;case 3:if(Qr(s,g),(g&130023424)===g&&(l=Uf+500-vt(),10<l)){if(zu(s,0)!==0)break;if(y=s.suspendedLanes,(y&g)!==g){an(),s.pingedLanes|=s.suspendedLanes&y;break}s.timeoutHandle=Qd($s.bind(null,s,_n,hr),l);break}$s(s,_n,hr);break;case 4:if(Qr(s,g),(g&4194240)===g)break;for(l=s.eventTimes,y=-1;0<g;){var R=31-ui(g);x=1<<R,R=l[R],R>y&&(y=R),g&=~x}if(g=y,g=vt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*eR(g/1960))-g,10<g){s.timeoutHandle=Qd($s.bind(null,s,_n,hr),g);break}$s(s,_n,hr);break;case 5:$s(s,_n,hr);break;default:throw Error(t(329))}}}return vn(s,vt()),s.callbackNode===h?I_.bind(null,s):null}function Yf(s,l){var h=Ea;return s.current.memoizedState.isDehydrated&&(Ks(s,l).flags|=256),s=kc(s,l),s!==2&&(l=_n,_n=h,l!==null&&Kf(l)),s}function Kf(s){_n===null?_n=s:_n.push.apply(_n,s)}function tR(s){for(var l=s;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var y=h[g],x=y.getSnapshot;y=y.value;try{if(!ci(x(),y))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Qr(s,l){for(l&=~Vf,l&=~Sc,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var h=31-ui(l),g=1<<h;s[h]=-1,l&=~g}}function L_(s){if(We&6)throw Error(t(327));Uo();var l=zu(s,0);if(!(l&1))return vn(s,vt()),null;var h=kc(s,l);if(s.tag!==0&&h===2){var g=Rd(s);g!==0&&(l=g,h=Yf(s,g))}if(h===1)throw h=wa,Ks(s,0),Qr(s,l),vn(s,vt()),h;if(h===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,$s(s,_n,hr),vn(s,vt()),null}function $f(s,l){var h=We;We|=1;try{return s(l)}finally{We=h,We===0&&(Vo=vt()+500,ic&&Xr())}}function Ys(s){Zr!==null&&Zr.tag===0&&!(We&6)&&Uo();var l=We;We|=1;var h=Jn.transition,g=Ke;try{if(Jn.transition=null,Ke=1,s)return s()}finally{Ke=g,Jn.transition=h,We=l,!(We&6)&&Xr()}}function Zf(){Mn=Bo.current,et(Bo)}function Ks(s,l){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;if(h!==-1&&(s.timeoutHandle=-1,AS(h)),Et!==null)for(h=Et.return;h!==null;){var g=h;switch(sf(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&tc();break;case 3:jo(),et(pn),et(Yt),_f();break;case 5:mf(g);break;case 4:jo();break;case 13:et(at);break;case 19:et(at);break;case 10:hf(g.type._context);break;case 22:case 23:Zf()}h=h.return}if(bt=s,Et=s=Jr(s.current,null),Gt=Mn=l,Pt=0,wa=null,Vf=Sc=Hs=0,_n=Ea=null,Vs!==null){for(l=0;l<Vs.length;l++)if(h=Vs[l],g=h.interleaved,g!==null){h.interleaved=null;var y=g.next,x=h.pending;if(x!==null){var R=x.next;x.next=y,g.next=R}h.pending=g}Vs=null}return s}function k_(s,l){do{var h=Et;try{if(cf(),fc.current=yc,gc){for(var g=ut.memoizedState;g!==null;){var y=g.queue;y!==null&&(y.pending=null),g=g.next}gc=!1}if(Xs=0,Mt=Tt=ut=null,pa=!1,ma=0,Bf.current=null,h===null||h.return===null){Pt=1,wa=l,Et=null;break}e:{var x=s,R=h.return,A=h,O=l;if(l=Gt,A.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var V=O,te=A,se=te.tag;if(!(te.mode&1)&&(se===0||se===11||se===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var ce=t_(R);if(ce!==null){ce.flags&=-257,n_(ce,R,A,x,l),ce.mode&1&&e_(x,V,l),l=ce,O=V;var ge=l.updateQueue;if(ge===null){var me=new Set;me.add(O),l.updateQueue=me}else ge.add(O);break e}else{if(!(l&1)){e_(x,V,l),qf();break e}O=Error(t(426))}}else if(ot&&A.mode&1){var xt=t_(R);if(xt!==null){!(xt.flags&65536)&&(xt.flags|=256),n_(xt,R,A,x,l),af(Go(O,A));break e}}x=O=Go(O,A),Pt!==4&&(Pt=2),Ea===null?Ea=[x]:Ea.push(x),x=R;do{switch(x.tag){case 3:x.flags|=65536,l&=-l,x.lanes|=l;var j=Q0(x,O,l);R0(x,j);break e;case 1:A=O;var F=x.type,W=x.stateNode;if(!(x.flags&128)&&(typeof F.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&($r===null||!$r.has(W)))){x.flags|=65536,l&=-l,x.lanes|=l;var ae=J0(x,A,l);R0(x,ae);break e}}x=x.return}while(x!==null)}b_(h)}catch(ye){l=ye,Et===h&&h!==null&&(Et=h=h.return);continue}break}while(!0)}function A_(){var s=Cc.current;return Cc.current=yc,s===null?yc:s}function qf(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),bt===null||!(Hs&268435455)&&!(Sc&268435455)||Qr(bt,Gt)}function kc(s,l){var h=We;We|=2;var g=A_();(bt!==s||Gt!==l)&&(hr=null,Ks(s,l));do try{nR();break}catch(y){k_(s,y)}while(!0);if(cf(),We=h,Cc.current=g,Et!==null)throw Error(t(261));return bt=null,Gt=0,Pt}function nR(){for(;Et!==null;)M_(Et)}function iR(){for(;Et!==null&&!IC();)M_(Et)}function M_(s){var l=D_(s.alternate,s,Mn);s.memoizedProps=s.pendingProps,l===null?b_(s):Et=l,Bf.current=null}function b_(s){var l=s;do{var h=l.alternate;if(s=l.return,l.flags&32768){if(h=ZS(h,l),h!==null){h.flags&=32767,Et=h;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Pt=6,Et=null;return}}else if(h=$S(h,l,Mn),h!==null){Et=h;return}if(l=l.sibling,l!==null){Et=l;return}Et=l=s}while(l!==null);Pt===0&&(Pt=5)}function $s(s,l,h){var g=Ke,y=Jn.transition;try{Jn.transition=null,Ke=1,rR(s,l,h,g)}finally{Jn.transition=y,Ke=g}return null}function rR(s,l,h,g){do Uo();while(Zr!==null);if(We&6)throw Error(t(327));h=s.finishedWork;var y=s.finishedLanes;if(h===null)return null;if(s.finishedWork=null,s.finishedLanes=0,h===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var x=h.lanes|h.childLanes;if(zC(s,x),s===bt&&(Et=bt=null,Gt=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||Tc||(Tc=!0,N_(Ou,function(){return Uo(),null})),x=(h.flags&15990)!==0,h.subtreeFlags&15990||x){x=Jn.transition,Jn.transition=null;var R=Ke;Ke=1;var A=We;We|=4,Bf.current=null,QS(s,h),C_(h,s),SS(Zd),Wu=!!$d,Zd=$d=null,s.current=h,JS(h),LC(),We=A,Ke=R,Jn.transition=x}else s.current=h;if(Tc&&(Tc=!1,Zr=s,Pc=y),x=s.pendingLanes,x===0&&($r=null),MC(h.stateNode),vn(s,vt()),l!==null)for(g=s.onRecoverableError,h=0;h<l.length;h++)y=l[h],g(y.value,{componentStack:y.stack,digest:y.digest});if(Rc)throw Rc=!1,s=Xf,Xf=null,s;return Pc&1&&s.tag!==0&&Uo(),x=s.pendingLanes,x&1?s===Hf?Ca++:(Ca=0,Hf=s):Ca=0,Xr(),null}function Uo(){if(Zr!==null){var s=wy(Pc),l=Jn.transition,h=Ke;try{if(Jn.transition=null,Ke=16>s?16:s,Zr===null)var g=!1;else{if(s=Zr,Zr=null,Pc=0,We&6)throw Error(t(331));var y=We;for(We|=4,de=s.current;de!==null;){var x=de,R=x.child;if(de.flags&16){var A=x.deletions;if(A!==null){for(var O=0;O<A.length;O++){var V=A[O];for(de=V;de!==null;){var te=de;switch(te.tag){case 0:case 11:case 15:xa(8,te,x)}var se=te.child;if(se!==null)se.return=te,de=se;else for(;de!==null;){te=de;var ee=te.sibling,ce=te.return;if(__(te),te===V){de=null;break}if(ee!==null){ee.return=ce,de=ee;break}de=ce}}}var ge=x.alternate;if(ge!==null){var me=ge.child;if(me!==null){ge.child=null;do{var xt=me.sibling;me.sibling=null,me=xt}while(me!==null)}}de=x}}if(x.subtreeFlags&2064&&R!==null)R.return=x,de=R;else e:for(;de!==null;){if(x=de,x.flags&2048)switch(x.tag){case 0:case 11:case 15:xa(9,x,x.return)}var j=x.sibling;if(j!==null){j.return=x.return,de=j;break e}de=x.return}}var F=s.current;for(de=F;de!==null;){R=de;var W=R.child;if(R.subtreeFlags&2064&&W!==null)W.return=R,de=W;else e:for(R=F;de!==null;){if(A=de,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:Ec(9,A)}}catch(ye){gt(A,A.return,ye)}if(A===R){de=null;break e}var ae=A.sibling;if(ae!==null){ae.return=A.return,de=ae;break e}de=A.return}}if(We=y,Xr(),Oi&&typeof Oi.onPostCommitFiberRoot=="function")try{Oi.onPostCommitFiberRoot(Fu,s)}catch{}g=!0}return g}finally{Ke=h,Jn.transition=l}}return!1}function O_(s,l,h){l=Go(h,l),l=Q0(s,l,1),s=Yr(s,l,1),l=an(),s!==null&&(Yl(s,1,l),vn(s,l))}function gt(s,l,h){if(s.tag===3)O_(s,s,h);else for(;l!==null;){if(l.tag===3){O_(l,s,h);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&($r===null||!$r.has(g))){s=Go(h,s),s=J0(l,s,1),l=Yr(l,s,1),s=an(),l!==null&&(Yl(l,1,s),vn(l,s));break}}l=l.return}}function sR(s,l,h){var g=s.pingCache;g!==null&&g.delete(l),l=an(),s.pingedLanes|=s.suspendedLanes&h,bt===s&&(Gt&h)===h&&(Pt===4||Pt===3&&(Gt&130023424)===Gt&&500>vt()-Uf?Ks(s,0):Vf|=h),vn(s,l)}function F_(s,l){l===0&&(s.mode&1?(l=Nu,Nu<<=1,!(Nu&130023424)&&(Nu=4194304)):l=1);var h=an();s=ar(s,l),s!==null&&(Yl(s,l,h),vn(s,h))}function oR(s){var l=s.memoizedState,h=0;l!==null&&(h=l.retryLane),F_(s,h)}function lR(s,l){var h=0;switch(s.tag){case 13:var g=s.stateNode,y=s.memoizedState;y!==null&&(h=y.retryLane);break;case 19:g=s.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(l),F_(s,h)}var D_;D_=function(s,l,h){if(s!==null)if(s.memoizedProps!==l.pendingProps||pn.current)yn=!0;else{if(!(s.lanes&h)&&!(l.flags&128))return yn=!1,KS(s,l,h);yn=!!(s.flags&131072)}else yn=!1,ot&&l.flags&1048576&&p0(l,sc,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;xc(s,l),s=l.pendingProps;var y=Mo(l,Yt.current);zo(l,h),y=wf(null,l,g,s,y,h);var x=Ef();return l.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,mn(g)?(x=!0,nc(l)):x=!1,l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,gf(l),y.updater=_c,l.stateNode=y,y._reactInternals=l,If(l,g,s,h),l=Mf(null,l,g,!0,x,h)):(l.tag=0,ot&&x&&rf(l),ln(null,l,y,h),l=l.child),l;case 16:g=l.elementType;e:{switch(xc(s,l),s=l.pendingProps,y=g._init,g=y(g._payload),l.type=g,y=l.tag=uR(g),s=di(g,s),y){case 0:l=Af(null,l,g,s,h);break e;case 1:l=a_(null,l,g,s,h);break e;case 11:l=i_(null,l,g,s,h);break e;case 14:l=r_(null,l,g,di(g.type,s),h);break e}throw Error(t(306,g,""))}return l;case 0:return g=l.type,y=l.pendingProps,y=l.elementType===g?y:di(g,y),Af(s,l,g,y,h);case 1:return g=l.type,y=l.pendingProps,y=l.elementType===g?y:di(g,y),a_(s,l,g,y,h);case 3:e:{if(u_(l),s===null)throw Error(t(387));g=l.pendingProps,x=l.memoizedState,y=x.element,S0(s,l),hc(l,g,null,h);var R=l.memoizedState;if(g=R.element,x.isDehydrated)if(x={element:g,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){y=Go(Error(t(423)),l),l=c_(s,l,g,h,y);break e}else if(g!==y){y=Go(Error(t(424)),l),l=c_(s,l,g,h,y);break e}else for(An=Br(l.stateNode.containerInfo.firstChild),kn=l,ot=!0,hi=null,h=E0(l,null,g,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Fo(),g===y){l=cr(s,l,h);break e}ln(s,l,g,h)}l=l.child}return l;case 5:return P0(l),s===null&&lf(l),g=l.type,y=l.pendingProps,x=s!==null?s.memoizedProps:null,R=y.children,qd(g,y)?R=null:x!==null&&qd(g,x)&&(l.flags|=32),l_(s,l),ln(s,l,R,h),l.child;case 6:return s===null&&lf(l),null;case 13:return h_(s,l,h);case 4:return pf(l,l.stateNode.containerInfo),g=l.pendingProps,s===null?l.child=Do(l,null,g,h):ln(s,l,g,h),l.child;case 11:return g=l.type,y=l.pendingProps,y=l.elementType===g?y:di(g,y),i_(s,l,g,y,h);case 7:return ln(s,l,l.pendingProps,h),l.child;case 8:return ln(s,l,l.pendingProps.children,h),l.child;case 12:return ln(s,l,l.pendingProps.children,h),l.child;case 10:e:{if(g=l.type._context,y=l.pendingProps,x=l.memoizedProps,R=y.value,Qe(ac,g._currentValue),g._currentValue=R,x!==null)if(ci(x.value,R)){if(x.children===y.children&&!pn.current){l=cr(s,l,h);break e}}else for(x=l.child,x!==null&&(x.return=l);x!==null;){var A=x.dependencies;if(A!==null){R=x.child;for(var O=A.firstContext;O!==null;){if(O.context===g){if(x.tag===1){O=ur(-1,h&-h),O.tag=2;var V=x.updateQueue;if(V!==null){V=V.shared;var te=V.pending;te===null?O.next=O:(O.next=te.next,te.next=O),V.pending=O}}x.lanes|=h,O=x.alternate,O!==null&&(O.lanes|=h),df(x.return,h,l),A.lanes|=h;break}O=O.next}}else if(x.tag===10)R=x.type===l.type?null:x.child;else if(x.tag===18){if(R=x.return,R===null)throw Error(t(341));R.lanes|=h,A=R.alternate,A!==null&&(A.lanes|=h),df(R,h,l),R=x.sibling}else R=x.child;if(R!==null)R.return=x;else for(R=x;R!==null;){if(R===l){R=null;break}if(x=R.sibling,x!==null){x.return=R.return,R=x;break}R=R.return}x=R}ln(s,l,y.children,h),l=l.child}return l;case 9:return y=l.type,g=l.pendingProps.children,zo(l,h),y=qn(y),g=g(y),l.flags|=1,ln(s,l,g,h),l.child;case 14:return g=l.type,y=di(g,l.pendingProps),y=di(g.type,y),r_(s,l,g,y,h);case 15:return s_(s,l,l.type,l.pendingProps,h);case 17:return g=l.type,y=l.pendingProps,y=l.elementType===g?y:di(g,y),xc(s,l),l.tag=1,mn(g)?(s=!0,nc(l)):s=!1,zo(l,h),Z0(l,g,y),If(l,g,y,h),Mf(null,l,g,!0,s,h);case 19:return f_(s,l,h);case 22:return o_(s,l,h)}throw Error(t(156,l.tag))};function N_(s,l){return my(s,l)}function aR(s,l,h,g){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(s,l,h,g){return new aR(s,l,h,g)}function Qf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function uR(s){if(typeof s=="function")return Qf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===X)return 11;if(s===re)return 14}return 2}function Jr(s,l){var h=s.alternate;return h===null?(h=ei(s.tag,l,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=l,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&14680064,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,l=s.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h}function Ac(s,l,h,g,y,x){var R=2;if(g=s,typeof s=="function")Qf(s)&&(R=1);else if(typeof s=="string")R=5;else e:switch(s){case b:return Zs(h.children,y,x,l);case D:R=8,y|=8;break;case z:return s=ei(12,h,l,y|2),s.elementType=z,s.lanes=x,s;case ne:return s=ei(13,h,l,y),s.elementType=ne,s.lanes=x,s;case H:return s=ei(19,h,l,y),s.elementType=H,s.lanes=x,s;case ie:return Mc(h,y,x,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case q:R=10;break e;case Z:R=9;break e;case X:R=11;break e;case re:R=14;break e;case B:R=16,g=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return l=ei(R,h,l,y),l.elementType=s,l.type=g,l.lanes=x,l}function Zs(s,l,h,g){return s=ei(7,s,g,l),s.lanes=h,s}function Mc(s,l,h,g){return s=ei(22,s,g,l),s.elementType=ie,s.lanes=h,s.stateNode={isHidden:!1},s}function Jf(s,l,h){return s=ei(6,s,null,l),s.lanes=h,s}function eg(s,l,h){return l=ei(4,s.children!==null?s.children:[],s.key,l),l.lanes=h,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function cR(s,l,h,g,y){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Td(0),this.expirationTimes=Td(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Td(0),this.identifierPrefix=g,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function tg(s,l,h,g,y,x,R,A,O){return s=new cR(s,l,h,A,O),l===1?(l=1,x===!0&&(l|=8)):l=0,x=ei(3,null,null,l),s.current=x,x.stateNode=s,x.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},gf(x),s}function hR(s,l,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:g==null?null:""+g,children:s,containerInfo:l,implementation:h}}function z_(s){if(!s)return Ur;s=s._reactInternals;e:{if(zs(s)!==s||s.tag!==1)throw Error(t(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(mn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(s.tag===1){var h=s.type;if(mn(h))return d0(s,h,l)}return l}function j_(s,l,h,g,y,x,R,A,O){return s=tg(h,g,!0,s,y,x,R,A,O),s.context=z_(null),h=s.current,g=an(),y=qr(h),x=ur(g,y),x.callback=l??null,Yr(h,x,y),s.current.lanes=y,Yl(s,y,g),vn(s,g),s}function bc(s,l,h,g){var y=l.current,x=an(),R=qr(y);return h=z_(h),l.context===null?l.context=h:l.pendingContext=h,l=ur(x,R),l.payload={element:s},g=g===void 0?null:g,g!==null&&(l.callback=g),s=Yr(y,l,R),s!==null&&(pi(s,y,R,x),cc(s,y,R)),R}function Oc(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function G_(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<l?h:l}}function ng(s,l){G_(s,l),(s=s.alternate)&&G_(s,l)}function dR(){return null}var W_=typeof reportError=="function"?reportError:function(s){console.error(s)};function ig(s){this._internalRoot=s}Fc.prototype.render=ig.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(t(409));bc(s,l,null,null)},Fc.prototype.unmount=ig.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Ys(function(){bc(null,s,null,null)}),l[rr]=null}};function Fc(s){this._internalRoot=s}Fc.prototype.unstable_scheduleHydration=function(s){if(s){var l=Sy();s={blockedOn:null,target:s,priority:l};for(var h=0;h<jr.length&&l!==0&&l<jr[h].priority;h++);jr.splice(h,0,s),h===0&&Py(s)}};function rg(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Dc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function B_(){}function fR(s,l,h,g,y){if(y){if(typeof g=="function"){var x=g;g=function(){var V=Oc(R);x.call(V)}}var R=j_(l,g,s,0,null,!1,!1,"",B_);return s._reactRootContainer=R,s[rr]=R.current,la(s.nodeType===8?s.parentNode:s),Ys(),R}for(;y=s.lastChild;)s.removeChild(y);if(typeof g=="function"){var A=g;g=function(){var V=Oc(O);A.call(V)}}var O=tg(s,0,!1,null,null,!1,!1,"",B_);return s._reactRootContainer=O,s[rr]=O.current,la(s.nodeType===8?s.parentNode:s),Ys(function(){bc(l,O,h,g)}),O}function Nc(s,l,h,g,y){var x=h._reactRootContainer;if(x){var R=x;if(typeof y=="function"){var A=y;y=function(){var O=Oc(R);A.call(O)}}bc(l,R,s,y)}else R=fR(h,l,s,y,g);return Oc(R)}Ey=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var h=Hl(l.pendingLanes);h!==0&&(Pd(l,h|1),vn(l,vt()),!(We&6)&&(Vo=vt()+500,Xr()))}break;case 13:Ys(function(){var g=ar(s,1);if(g!==null){var y=an();pi(g,s,1,y)}}),ng(s,1)}},Id=function(s){if(s.tag===13){var l=ar(s,134217728);if(l!==null){var h=an();pi(l,s,134217728,h)}ng(s,134217728)}},Cy=function(s){if(s.tag===13){var l=qr(s),h=ar(s,l);if(h!==null){var g=an();pi(h,s,l,g)}ng(s,l)}},Sy=function(){return Ke},Ry=function(s,l){var h=Ke;try{return Ke=s,l()}finally{Ke=h}},Ns=function(s,l,h){switch(l){case"input":if(ft(s,h),l=h.name,h.type==="radio"&&l!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var g=h[l];if(g!==s&&g.form===s.form){var y=ec(g);if(!y)throw Error(t(90));Ne(g),ft(g,y)}}}break;case"textarea":nr(s,h);break;case"select":l=h.value,l!=null&&Hn(s,!!h.multiple,l,!1)}},sn=$f,bi=Ys;var gR={usingClientEntryPoint:!1,Events:[ca,ko,ec,Ul,Xl,$f]},Sa={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pR={bundleType:Sa.bundleType,version:Sa.version,rendererPackageName:Sa.rendererPackageName,rendererConfig:Sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=gy(s),s===null?null:s.stateNode},findFiberByHostInstance:Sa.findFiberByHostInstance||dR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{Fu=zc.inject(pR),Oi=zc}catch{}}return xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gR,xn.createPortal=function(s,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rg(l))throw Error(t(200));return hR(s,l,null,h)},xn.createRoot=function(s,l){if(!rg(s))throw Error(t(299));var h=!1,g="",y=W_;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(y=l.onRecoverableError)),l=tg(s,1,!1,null,null,h,!1,g,y),s[rr]=l.current,la(s.nodeType===8?s.parentNode:s),new ig(l)},xn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=gy(l),s=s===null?null:s.stateNode,s},xn.flushSync=function(s){return Ys(s)},xn.hydrate=function(s,l,h){if(!Dc(l))throw Error(t(200));return Nc(null,s,l,!0,h)},xn.hydrateRoot=function(s,l,h){if(!rg(s))throw Error(t(405));var g=h!=null&&h.hydratedSources||null,y=!1,x="",R=W_;if(h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onRecoverableError!==void 0&&(R=h.onRecoverableError)),l=j_(l,null,s,1,h??null,y,!1,x,R),s[rr]=l.current,la(s),g)for(s=0;s<g.length;s++)h=g[s],y=h._getVersion,y=y(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,y]:l.mutableSourceEagerHydrationData.push(h,y);return new Fc(l)},xn.render=function(s,l,h){if(!Dc(l))throw Error(t(200));return Nc(null,s,l,!1,h)},xn.unmountComponentAtNode=function(s){if(!Dc(s))throw Error(t(40));return s._reactRootContainer?(Ys(function(){Nc(null,null,s,!1,function(){s._reactRootContainer=null,s[rr]=null})}),!0):!1},xn.unstable_batchedUpdates=$f,xn.unstable_renderSubtreeIntoContainer=function(s,l,h,g){if(!Dc(h))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Nc(s,l,h,!1,g)},xn.version="18.3.1-next-f1338f8080-20240426",xn}var q_;function Gx(){if(q_)return ag.exports;q_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ag.exports=TR(),ag.exports}var Q_;function PR(){if(Q_)return Gc;Q_=1;var i=Gx();return Gc.createRoot=i.createRoot,Gc.hydrateRoot=i.hydrateRoot,Gc}var Wx=PR(),Ta={},J_;function IR(){if(J_)return Ta;J_=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.parse=a,Ta.serialize=d;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,o=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function a(m,_){const v=new o,w=m.length;if(w<2)return v;const E=(_==null?void 0:_.decode)||f;let C=0;do{const S=m.indexOf("=",C);if(S===-1)break;const T=m.indexOf(";",C),I=T===-1?w:T;if(S>I){C=m.lastIndexOf(";",S-1)+1;continue}const L=u(m,C,S),N=c(m,S,L),b=m.slice(L,N);if(v[b]===void 0){let D=u(m,S+1,I),z=c(m,I,D);const q=E(m.slice(D,z));v[b]=q}C=I+1}while(C<w);return v}function u(m,_,v){do{const w=m.charCodeAt(_);if(w!==32&&w!==9)return _}while(++_<v);return v}function c(m,_,v){for(;_>v;){const w=m.charCodeAt(--_);if(w!==32&&w!==9)return _+1}return v}function d(m,_,v){const w=(v==null?void 0:v.encode)||encodeURIComponent;if(!i.test(m))throw new TypeError(`argument name is invalid: ${m}`);const E=w(_);if(!e.test(E))throw new TypeError(`argument val is invalid: ${_}`);let C=m+"="+E;if(!v)return C;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);C+="; Max-Age="+v.maxAge}if(v.domain){if(!t.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);C+="; Domain="+v.domain}if(v.path){if(!n.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);C+="; Path="+v.path}if(v.expires){if(!p(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);C+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(C+="; HttpOnly"),v.secure&&(C+="; Secure"),v.partitioned&&(C+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return C}function f(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function p(m){return r.call(m)==="[object Date]"}return Ta}IR();/**
 * react-router v7.0.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ev="popstate";function LR(i={}){function e(n,r){let{pathname:o,search:a,hash:u}=n.location;return Zg("",{pathname:o,search:a,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:Ya(r)}return AR(e,t,null,i)}function dt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Ps(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kR(){return Math.random().toString(36).substring(2,10)}function tv(i,e){return{usr:i.state,key:i.key,idx:e}}function Zg(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?bl(e):e,state:t,key:e&&e.key||n||kR()}}function Ya({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function bl(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function AR(i,e,t,n={}){let{window:r=document.defaultView,v5Compat:o=!1}=n,a=r.history,u="POP",c=null,d=f();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function f(){return(a.state||{idx:null}).idx}function p(){u="POP";let E=f(),C=E==null?null:E-d;d=E,c&&c({action:u,location:w.location,delta:C})}function m(E,C){u="PUSH";let S=Zg(w.location,E,C);d=f()+1;let T=tv(S,d),I=w.createHref(S);try{a.pushState(T,"",I)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;r.location.assign(I)}o&&c&&c({action:u,location:w.location,delta:1})}function _(E,C){u="REPLACE";let S=Zg(w.location,E,C);d=f();let T=tv(S,d),I=w.createHref(S);a.replaceState(T,"",I),o&&c&&c({action:u,location:w.location,delta:0})}function v(E){let C=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof E=="string"?E:Ya(E);return S=S.replace(/ $/,"%20"),dt(C,`No window.location.(origin|href) available to create URL for href: ${S}`),new URL(S,C)}let w={get action(){return u},get location(){return i(r,a)},listen(E){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(ev,p),c=E,()=>{r.removeEventListener(ev,p),c=null}},createHref(E){return e(r,E)},createURL:v,encodeLocation(E){let C=v(E);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:m,replace:_,go(E){return a.go(E)}};return w}function Bx(i,e,t="/"){return MR(i,e,t,!1)}function MR(i,e,t,n){let r=typeof e=="string"?bl(e):e,o=xs(r.pathname||"/",t);if(o==null)return null;let a=Vx(i);bR(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let d=UR(o);u=BR(a[c],d,n)}return u}function Vx(i,e=[],t=[],n=""){let r=(o,a,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(dt(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let d=vr([n,c.relativePath]),f=t.concat(c);o.children&&o.children.length>0&&(dt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Vx(o.children,e,f,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:GR(d,o.index),routesMeta:f})};return i.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let c of Ux(o.path))r(o,a,c)}),e}function Ux(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return r?[o,""]:[o];let a=Ux(n.join("/")),u=[];return u.push(...a.map(c=>c===""?o:[o,c].join("/"))),r&&u.push(...a),u.map(c=>i.startsWith("/")&&c===""?"/":c)}function bR(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:WR(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var OR=/^:[\w-]+$/,FR=3,DR=2,NR=1,zR=10,jR=-2,nv=i=>i==="*";function GR(i,e){let t=i.split("/"),n=t.length;return t.some(nv)&&(n+=jR),e&&(n+=DR),t.filter(r=>!nv(r)).reduce((r,o)=>r+(OR.test(o)?FR:o===""?NR:zR),n)}function WR(i,e){return i.length===e.length&&i.slice(0,-1).every((n,r)=>n===e[r])?i[i.length-1]-e[e.length-1]:0}function BR(i,e,t=!1){let{routesMeta:n}=i,r={},o="/",a=[];for(let u=0;u<n.length;++u){let c=n[u],d=u===n.length-1,f=o==="/"?e:e.slice(o.length)||"/",p=wh({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),m=c.route;if(!p&&d&&t&&!n[n.length-1].route.index&&(p=wh({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(r,p.params),a.push({params:r,pathname:vr([o,p.pathname]),pathnameBase:KR(vr([o,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(o=vr([o,p.pathnameBase]))}return a}function wh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=VR(i.path,i.caseSensitive,i.end),r=e.match(t);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:n.reduce((d,{paramName:f,isOptional:p},m)=>{if(f==="*"){let v=u[m]||"";a=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const _=u[m];return p&&!_?d[f]=void 0:d[f]=(_||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:i}}function VR(i,e=!1,t=!0){Ps(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(n.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function UR(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ps(!1,`The URL path "${i}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function xs(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function XR(i,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof i=="string"?bl(i):i;return{pathname:t?t.startsWith("/")?t:HR(t,e):e,search:$R(n),hash:ZR(r)}}function HR(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function hg(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YR(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Xx(i){let e=YR(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function Hx(i,e,t,n=!1){let r;typeof i=="string"?r=bl(i):(r={...i},dt(!r.pathname||!r.pathname.includes("?"),hg("?","pathname","search",r)),dt(!r.pathname||!r.pathname.includes("#"),hg("#","pathname","hash",r)),dt(!r.search||!r.search.includes("#"),hg("#","search","hash",r)));let o=i===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=t;else{let p=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;r.pathname=m.join("/")}u=p>=0?e[p]:"/"}let c=XR(r,u),d=a&&a!=="/"&&a.endsWith("/"),f=(o||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}var vr=i=>i.join("/").replace(/\/\/+/g,"/"),KR=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),$R=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,ZR=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function qR(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Yx=["POST","PUT","PATCH","DELETE"];new Set(Yx);var QR=["GET",...Yx];new Set(QR);var Ol=P.createContext(null);Ol.displayName="DataRouter";var Hh=P.createContext(null);Hh.displayName="DataRouterState";var Kx=P.createContext({isTransitioning:!1});Kx.displayName="ViewTransition";var JR=P.createContext(new Map);JR.displayName="Fetchers";var eT=P.createContext(null);eT.displayName="Await";var Qi=P.createContext(null);Qi.displayName="Navigation";var gu=P.createContext(null);gu.displayName="Location";var Ar=P.createContext({outlet:null,matches:[],isDataRoute:!1});Ar.displayName="Route";var Dp=P.createContext(null);Dp.displayName="RouteError";function tT(i,{relative:e}={}){dt(pu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=P.useContext(Qi),{hash:r,pathname:o,search:a}=mu(i,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:vr([t,o])),n.createHref({pathname:u,search:a,hash:r})}function pu(){return P.useContext(gu)!=null}function fo(){return dt(pu(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(gu).location}var $x="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Zx(i){P.useContext(Qi).static||P.useLayoutEffect(i)}function nT(){let{isDataRoute:i}=P.useContext(Ar);return i?pT():iT()}function iT(){dt(pu(),"useNavigate() may be used only in the context of a <Router> component.");let i=P.useContext(Ol),{basename:e,navigator:t}=P.useContext(Qi),{matches:n}=P.useContext(Ar),{pathname:r}=fo(),o=JSON.stringify(Xx(n)),a=P.useRef(!1);return Zx(()=>{a.current=!0}),P.useCallback((c,d={})=>{if(Ps(a.current,$x),!a.current)return;if(typeof c=="number"){t.go(c);return}let f=Hx(c,JSON.parse(o),r,d.relative==="path");i==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:vr([e,f.pathname])),(d.replace?t.replace:t.push)(f,d.state,d)},[e,t,o,r,i])}P.createContext(null);function mu(i,{relative:e}={}){let{matches:t}=P.useContext(Ar),{pathname:n}=fo(),r=JSON.stringify(Xx(t));return P.useMemo(()=>Hx(i,JSON.parse(r),n,e==="path"),[i,r,n,e])}function rT(i,e){return qx(i,e)}function qx(i,e,t,n){var w;dt(pu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=P.useContext(Qi),{matches:o}=P.useContext(Ar),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=fo(),f;if(e){let E=typeof e=="string"?bl(e):e;dt(c==="/"||((w=E.pathname)==null?void 0:w.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${E.pathname}" was given in the \`location\` prop.`),f=E}else f=d;let p=f.pathname||"/",m=p;if(c!=="/"){let E=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(E.length).join("/")}let _=Bx(i,{pathname:m}),v=uT(_&&_.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:vr([c,r.encodeLocation?r.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:vr([c,r.encodeLocation?r.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,t,n);return e&&v?P.createElement(gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},v):v}function sT(){let i=gT(),e=qR(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:r},t):null,null)}var oT=P.createElement(sT,null),lT=class extends P.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?P.createElement(Ar.Provider,{value:this.props.routeContext},P.createElement(Dp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function aT({routeContext:i,match:e,children:t}){let n=P.useContext(Ol);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Ar.Provider,{value:i},t)}function uT(i,e=[],t=null,n=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let r=i,o=t==null?void 0:t.errors;if(o!=null){let c=r.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);dt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let a=!1,u=-1;if(t)for(let c=0;c<r.length;c++){let d=r[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:p}=t,m=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){a=!0,u>=0?r=r.slice(0,u+1):r=[r[0]];break}}}return r.reduceRight((c,d,f)=>{let p,m=!1,_=null,v=null;t&&(p=o&&d.route.id?o[d.route.id]:void 0,_=d.route.errorElement||oT,a&&(u<0&&f===0?(mT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):u===f&&(m=!0,v=d.route.hydrateFallbackElement||null)));let w=e.concat(r.slice(0,f+1)),E=()=>{let C;return p?C=_:m?C=v:d.route.Component?C=P.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=c,P.createElement(aT,{match:d,routeContext:{outlet:c,matches:w,isDataRoute:t!=null},children:C})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?P.createElement(lT,{location:t.location,revalidation:t.revalidation,component:_,error:p,children:E(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):E()},null)}function Np(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cT(i){let e=P.useContext(Ol);return dt(e,Np(i)),e}function hT(i){let e=P.useContext(Hh);return dt(e,Np(i)),e}function dT(i){let e=P.useContext(Ar);return dt(e,Np(i)),e}function zp(i){let e=dT(i),t=e.matches[e.matches.length-1];return dt(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function fT(){return zp("useRouteId")}function gT(){var n;let i=P.useContext(Dp),e=hT("useRouteError"),t=zp("useRouteError");return i!==void 0?i:(n=e.errors)==null?void 0:n[t]}function pT(){let{router:i}=cT("useNavigate"),e=zp("useNavigate"),t=P.useRef(!1);return Zx(()=>{t.current=!0}),P.useCallback(async(r,o={})=>{Ps(t.current,$x),t.current&&(typeof r=="number"?i.navigate(r):await i.navigate(r,{fromRouteId:e,...o}))},[i,e])}var iv={};function mT(i,e,t){iv[i]||(iv[i]=!0,Ps(!1,t))}P.memo(yT);function yT({routes:i,future:e,state:t}){return qx(i,void 0,t,e)}function Qx(i){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _T({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:o=!1}){dt(!pu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=i.replace(/^\/*/,"/"),u=P.useMemo(()=>({basename:a,navigator:r,static:o,future:{}}),[a,r,o]);typeof t=="string"&&(t=bl(t));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:m="default"}=t,_=P.useMemo(()=>{let v=xs(c,a);return v==null?null:{location:{pathname:v,search:d,hash:f,state:p,key:m},navigationType:n}},[a,c,d,f,p,m,n]);return Ps(_!=null,`<Router basename="${a}"> is not able to match the URL "${c}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:P.createElement(Qi.Provider,{value:u},P.createElement(gu.Provider,{children:e,value:_}))}function vT({children:i,location:e}){return rT(qg(i),e)}function qg(i,e=[]){let t=[];return P.Children.forEach(i,(n,r)=>{if(!P.isValidElement(n))return;let o=[...e,r];if(n.type===P.Fragment){t.push.apply(t,qg(n.props.children,o));return}dt(n.type===Qx,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=qg(n.props.children,o)),t.push(a)}),t}var hh="get",dh="application/x-www-form-urlencoded";function Yh(i){return i!=null&&typeof i.tagName=="string"}function xT(i){return Yh(i)&&i.tagName.toLowerCase()==="button"}function wT(i){return Yh(i)&&i.tagName.toLowerCase()==="form"}function ET(i){return Yh(i)&&i.tagName.toLowerCase()==="input"}function CT(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function ST(i,e){return i.button===0&&(!e||e==="_self")&&!CT(i)}var Wc=null;function RT(){if(Wc===null)try{new FormData(document.createElement("form"),0),Wc=!1}catch{Wc=!0}return Wc}var TT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dg(i){return i!=null&&!TT.has(i)?(Ps(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dh}"`),null):i}function PT(i,e){let t,n,r,o,a;if(wT(i)){let u=i.getAttribute("action");n=u?xs(u,e):null,t=i.getAttribute("method")||hh,r=dg(i.getAttribute("enctype"))||dh,o=new FormData(i)}else if(xT(i)||ET(i)&&(i.type==="submit"||i.type==="image")){let u=i.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=i.getAttribute("formaction")||u.getAttribute("action");if(n=c?xs(c,e):null,t=i.getAttribute("formmethod")||u.getAttribute("method")||hh,r=dg(i.getAttribute("formenctype"))||dg(u.getAttribute("enctype"))||dh,o=new FormData(u,i),!RT()){let{name:d,type:f,value:p}=i;if(f==="image"){let m=d?`${d}.`:"";o.append(`${m}x`,"0"),o.append(`${m}y`,"0")}else d&&o.append(d,p)}}else{if(Yh(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=hh,n=null,r=dh,a=i}return o&&r==="text/plain"&&(a=o,o=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:o,body:a}}function jp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function IT(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function LT(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function kT(i,e,t){let n=await Promise.all(i.map(async r=>{let o=e.routes[r.route.id];if(o){let a=await IT(o,t);return a.links?a.links():[]}return[]}));return OT(n.flat(1).filter(LT).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function rv(i,e,t,n,r,o){let a=(c,d)=>t[d]?c.route.id!==t[d].route.id:!0,u=(c,d)=>{var f;return t[d].pathname!==c.pathname||((f=t[d].route.path)==null?void 0:f.endsWith("*"))&&t[d].params["*"]!==c.params["*"]};return o==="assets"?e.filter((c,d)=>a(c,d)||u(c,d)):o==="data"?e.filter((c,d)=>{var p;let f=n.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(a(c,d)||u(c,d))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(i,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function AT(i,e){return MT(i.map(t=>{let n=e.routes[t.route.id];if(!n)return[];let r=[n.module];return n.imports&&(r=r.concat(n.imports)),r}).flat(1))}function MT(i){return[...new Set(i)]}function bT(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function OT(i,e){let t=new Set;return new Set(e),i.reduce((n,r)=>{let o=JSON.stringify(bT(r));return t.has(o)||(t.add(o),n.push({key:o,link:r})),n},[])}function FT(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function DT(){let i=P.useContext(Ol);return jp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function NT(){let i=P.useContext(Hh);return jp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Gp=P.createContext(void 0);Gp.displayName="FrameworkContext";function Jx(){let i=P.useContext(Gp);return jp(i,"You must render this element inside a <HydratedRouter> element"),i}function zT(i,e){let t=P.useContext(Gp),[n,r]=P.useState(!1),[o,a]=P.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=e,m=P.useRef(null);P.useEffect(()=>{if(i==="render"&&a(!0),i==="viewport"){let w=C=>{C.forEach(S=>{a(S.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return m.current&&E.observe(m.current),()=>{E.disconnect()}}},[i]),P.useEffect(()=>{if(n){let w=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(w)}}},[n]);let _=()=>{r(!0)},v=()=>{r(!1),a(!1)};return t?i!=="intent"?[o,m,{}]:[o,m,{onFocus:Pa(u,_),onBlur:Pa(c,v),onMouseEnter:Pa(d,_),onMouseLeave:Pa(f,v),onTouchStart:Pa(p,_)}]:[!1,m,{}]}function Pa(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function jT({page:i,...e}){let{router:t}=DT(),n=P.useMemo(()=>Bx(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?P.createElement(WT,{page:i,matches:n,...e}):(console.warn(`Tried to prefetch ${i} but no routes matched.`),null)}function GT(i){let{manifest:e,routeModules:t}=Jx(),[n,r]=P.useState([]);return P.useEffect(()=>{let o=!1;return kT(i,e,t).then(a=>{o||r(a)}),()=>{o=!0}},[i,e,t]),n}function WT({page:i,matches:e,...t}){let n=fo(),{manifest:r,routeModules:o}=Jx(),{loaderData:a,matches:u}=NT(),c=P.useMemo(()=>rv(i,e,u,r,n,"data"),[i,e,u,r,n]),d=P.useMemo(()=>rv(i,e,u,r,n,"assets"),[i,e,u,r,n]),f=P.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let _=new Set,v=!1;if(e.forEach(E=>{var S;let C=r.routes[E.route.id];!C||!C.hasLoader||(!c.some(T=>T.route.id===E.route.id)&&E.route.id in a&&((S=o[E.route.id])!=null&&S.shouldRevalidate)||C.hasClientLoader?v=!0:_.add(E.route.id))}),_.size===0)return[];let w=FT(i);return v&&_.size>0&&w.searchParams.set("_routes",e.filter(E=>_.has(E.route.id)).map(E=>E.route.id).join(",")),[w.pathname+w.search]},[a,n,r,c,e,i,o]),p=P.useMemo(()=>AT(d,r),[d,r]),m=GT(d);return P.createElement(P.Fragment,null,f.map(_=>P.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...t})),p.map(_=>P.createElement("link",{key:_,rel:"modulepreload",href:_,...t})),m.map(({key:_,link:v})=>P.createElement("link",{key:_,...v})))}function BT(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ew=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ew&&(window.__reactRouterVersion="7.0.1")}catch{}function VT({basename:i,children:e,window:t}){let n=P.useRef();n.current==null&&(n.current=LR({window:t,v5Compat:!0}));let r=n.current,[o,a]=P.useState({action:r.action,location:r.location}),u=P.useCallback(c=>{P.startTransition(()=>a(c))},[a]);return P.useLayoutEffect(()=>r.listen(u),[r,u]),P.createElement(_T,{basename:i,children:e,location:o.location,navigationType:o.action,navigator:r})}var tw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nw=P.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:o,replace:a,state:u,target:c,to:d,preventScrollReset:f,viewTransition:p,...m},_){let{basename:v}=P.useContext(Qi),w=typeof d=="string"&&tw.test(d),E,C=!1;if(typeof d=="string"&&w&&(E=d,ew))try{let z=new URL(window.location.href),q=d.startsWith("//")?new URL(z.protocol+d):new URL(d),Z=xs(q.pathname,v);q.origin===z.origin&&Z!=null?d=Z+q.search+q.hash:C=!0}catch{Ps(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=tT(d,{relative:r}),[T,I,L]=zT(n,m),N=YT(d,{replace:a,state:u,target:c,preventScrollReset:f,relative:r,viewTransition:p});function b(z){e&&e(z),z.defaultPrevented||N(z)}let D=P.createElement("a",{...m,...L,href:E||S,onClick:C||o?e:b,ref:BT(_,I),target:c,"data-discover":!w&&t==="render"?"true":void 0});return T&&!w?P.createElement(P.Fragment,null,D,P.createElement(jT,{page:S})):D});nw.displayName="Link";var UT=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:o,to:a,viewTransition:u,children:c,...d},f){let p=mu(a,{relative:d.relative}),m=fo(),_=P.useContext(Hh),{navigator:v,basename:w}=P.useContext(Qi),E=_!=null&&QT(p)&&u===!0,C=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,S=m.pathname,T=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;t||(S=S.toLowerCase(),T=T?T.toLowerCase():null,C=C.toLowerCase()),T&&w&&(T=xs(T,w)||T);const I=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let L=S===C||!r&&S.startsWith(C)&&S.charAt(I)==="/",N=T!=null&&(T===C||!r&&T.startsWith(C)&&T.charAt(C.length)==="/"),b={isActive:L,isPending:N,isTransitioning:E},D=L?e:void 0,z;typeof n=="function"?z=n(b):z=[n,L?"active":null,N?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let q=typeof o=="function"?o(b):o;return P.createElement(nw,{...d,"aria-current":D,className:z,ref:f,style:q,to:a,viewTransition:u},typeof c=="function"?c(b):c)});UT.displayName="NavLink";var XT=P.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:o,method:a=hh,action:u,onSubmit:c,relative:d,preventScrollReset:f,viewTransition:p,...m},_)=>{let v=ZT(),w=qT(u,{relative:d}),E=a.toLowerCase()==="get"?"get":"post",C=typeof u=="string"&&tw.test(u),S=T=>{if(c&&c(T),T.defaultPrevented)return;T.preventDefault();let I=T.nativeEvent.submitter,L=(I==null?void 0:I.getAttribute("formmethod"))||a;v(I||T.currentTarget,{fetcherKey:e,method:L,navigate:t,replace:r,state:o,relative:d,preventScrollReset:f,viewTransition:p})};return P.createElement("form",{ref:_,method:E,action:w,onSubmit:n?c:S,...m,"data-discover":!C&&i==="render"?"true":void 0})});XT.displayName="Form";function HT(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iw(i){let e=P.useContext(Ol);return dt(e,HT(i)),e}function YT(i,{target:e,replace:t,state:n,preventScrollReset:r,relative:o,viewTransition:a}={}){let u=nT(),c=fo(),d=mu(i,{relative:o});return P.useCallback(f=>{if(ST(f,e)){f.preventDefault();let p=t!==void 0?t:Ya(c)===Ya(d);u(i,{replace:p,state:n,preventScrollReset:r,relative:o,viewTransition:a})}},[c,u,d,t,n,e,i,r,o,a])}var KT=0,$T=()=>`__${String(++KT)}__`;function ZT(){let{router:i}=iw("useSubmit"),{basename:e}=P.useContext(Qi),t=fT();return P.useCallback(async(n,r={})=>{let{action:o,method:a,encType:u,formData:c,body:d}=PT(n,e);if(r.navigate===!1){let f=r.fetcherKey||$T();await i.fetch(f,t,r.action||o,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||a,formEncType:r.encType||u,flushSync:r.flushSync})}else await i.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||a,formEncType:r.encType||u,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,e,t])}function qT(i,{relative:e}={}){let{basename:t}=P.useContext(Qi),n=P.useContext(Ar);dt(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),o={...mu(i||".",{relative:e})},a=fo();if(i==null){o.search=a.search;let u=new URLSearchParams(o.search),c=u.getAll("index");if(c.some(f=>f==="")){u.delete("index"),c.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();o.search=f?`?${f}`:""}}return(!i||i===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:vr([t,o.pathname])),Ya(o)}function QT(i,e={}){let t=P.useContext(Kx);dt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=iw("useViewTransitionState"),r=mu(i,{relative:e.relative});if(!t.isTransitioning)return!1;let o=xs(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=xs(t.nextLocation.pathname,n)||t.nextLocation.pathname;return wh(r.pathname,a)!=null||wh(r.pathname,o)!=null}new TextEncoder;class li{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const El={PROPERTYCHANGE:"propertychange"};class Kh{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function JT(i,e,t){let n,r;t=t||Ui;let o=0,a=i.length,u=!1;for(;o<a;)n=o+(a-o>>1),r=+t(i[n],e),r<0?o=n+1:(a=n,u=!r);return u?o:~o}function Ui(i,e){return i>e?1:i<e?-1:0}function Wp(i,e,t){if(i[0]<=e)return 0;const n=i.length;if(e<=i[n-1])return n-1;if(typeof t=="function"){for(let r=1;r<n;++r){const o=i[r];if(o===e)return r;if(o<e)return t(e,i[r-1],o)>0?r-1:r}return n-1}if(t>0){for(let r=1;r<n;++r)if(i[r]<e)return r-1;return n-1}if(t<0){for(let r=1;r<n;++r)if(i[r]<=e)return r;return n-1}for(let r=1;r<n;++r){if(i[r]==e)return r;if(i[r]<e)return i[r-1]-e<e-i[r]?r-1:r}return n-1}function eP(i,e,t){for(;e<t;){const n=i[e];i[e]=i[t],i[t]=n,++e,--t}}function Xi(i,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let r=0;r<n;r++)i[i.length]=t[r]}function Mr(i,e){const t=i.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0}function tP(i,e,t){const n=e||Ui;return i.every(function(r,o){if(o===0)return!0;const a=n(i[o-1],r);return!(a>0||a===0)})}function ws(){return!0}function Fl(){return!1}function Cl(){}function rw(i){let e,t,n;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==n||!Mr(r,t))&&(n=this,t=r,e=i.apply(this,arguments)),e}}function nP(i){function e(){let t;try{t=i()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function yu(i){for(const e in i)delete i[e]}function lo(i){let e;for(e in i)return!1;return!e}class $h extends Kh{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),r=n[e]||(n[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,r=this.listeners_&&this.listeners_[n];if(!r)return;const o=t?new li(e):e;o.target||(o.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});n in a||(a[n]=0,u[n]=0),++a[n];let c;for(let d=0,f=r.length;d<f;++d)if("handleEvent"in r[d]?c=r[d].handleEvent(o):c=r[d].call(this,o),c===!1||o.propagationStopped){c=!1;break}if(--a[n]===0){let d=u[n];for(delete u[n];d--;)this.removeEventListener(n,Cl);delete a[n]}return c}disposeInternal(){this.listeners_&&yu(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const r=n.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[r]=Cl,++this.pendingRemovals_[e]):(n.splice(r,1),n.length===0&&delete this.listeners_[e]))}}const Te={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Ge(i,e,t,n,r){if(r){const a=t;t=function(){i.removeEventListener(e,t),a.apply(n??this,arguments)}}else n&&n!==i&&(t=t.bind(n));const o={target:i,type:e,listener:t};return i.addEventListener(e,t),o}function Eh(i,e,t,n){return Ge(i,e,t,n,!0)}function qe(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),yu(i))}class _u extends $h{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Te.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,r=new Array(n);for(let o=0;o<n;++o)r[o]=Ge(this,e[o],t);return r}return Ge(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const r=e.length;n=new Array(r);for(let o=0;o<r;++o)n[o]=Eh(this,e[o],t)}else n=Eh(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)iP(n);else if(Array.isArray(e))for(let r=0,o=e.length;r<o;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}_u.prototype.on;_u.prototype.once;_u.prototype.un;function iP(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)qe(i[e]);else qe(i)}function Oe(){throw new Error("Unimplemented abstract method.")}let rP=0;function Le(i){return i.ol_uid||(i.ol_uid=String(++rP))}class sv extends li{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class Ji extends _u{constructor(e){super(),this.on,this.once,this.un,Le(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new sv(n,e,t)),n=El.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new sv(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const r=this.values_||(this.values_={});if(n)r[e]=t;else{const o=r[e];r[e]=t,o!==t&&this.notify(e,o)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],lo(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}const Jt={ADD:"add",REMOVE:"remove"},ov={LENGTH:"length"};class Bc extends li{constructor(e,t,n){super(e),this.element=t,this.index=n}}let dn=class extends Ji{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,r=this.array_.length;n<r;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,r=t.length;n<r;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(ov.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Bc(Jt.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,r=t.length;n<r;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Bc(Jt.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Bc(Jt.REMOVE,r,e)),this.dispatchEvent(new Bc(Jt.ADD,t,e))}updateLength_(){this.set(ov.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}};function Ve(i,e){if(!i)throw new Error(e)}class ti extends Ji{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new ti(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(qe(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ge(e,Te.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?sP(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function sP(i){if(typeof i=="function")return i;let e;return Array.isArray(i)?e=i:(Ve(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[i]),function(){return e}}const sw=new Array(6);function ri(){return[1,0,0,1,0,0]}function lv(i){return Vp(i,1,0,0,1,0,0)}function Bp(i,e){const t=i[0],n=i[1],r=i[2],o=i[3],a=i[4],u=i[5],c=e[0],d=e[1],f=e[2],p=e[3],m=e[4],_=e[5];return i[0]=t*c+r*d,i[1]=n*c+o*d,i[2]=t*f+r*p,i[3]=n*f+o*p,i[4]=t*m+r*_+a,i[5]=n*m+o*_+u,i}function Vp(i,e,t,n,r,o,a){return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i[4]=o,i[5]=a,i}function oP(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function zt(i,e){const t=e[0],n=e[1];return e[0]=i[0]*t+i[2]*n+i[4],e[1]=i[1]*t+i[3]*n+i[5],e}function fg(i,e,t){return Bp(i,Vp(sw,e,0,0,t,0,0))}function lP(i,e,t){return Bp(i,Vp(sw,1,0,0,1,e,t))}function Rr(i,e,t,n,r,o,a,u){const c=Math.sin(o),d=Math.cos(o);return i[0]=n*d,i[1]=r*c,i[2]=-n*c,i[3]=r*d,i[4]=a*n*d-u*n*c+e,i[5]=a*r*c+u*r*d+t,i}function ow(i,e){const t=aP(e);Ve(t!==0,"Transformation matrix cannot be inverted");const n=e[0],r=e[1],o=e[2],a=e[3],u=e[4],c=e[5];return i[0]=a/t,i[1]=-r/t,i[2]=-o/t,i[3]=n/t,i[4]=(o*c-a*u)/t,i[5]=-(n*c-r*u)/t,i}function aP(i){return i[0]*i[3]-i[1]*i[2]}const av=[1e6,1e6,1e6,1e6,2,2];function uP(i){return"matrix("+i.map((t,n)=>Math.round(t*av[n])/av[n]).join(", ")+")"}const Nt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Nn(i){const e=si();for(let t=0,n=i.length;t<n;++t)Ua(e,i[t]);return e}function xr(i,e,t){return t?(t[0]=i[0]-e,t[1]=i[1]-e,t[2]=i[2]+e,t[3]=i[3]+e,t):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function lw(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function go(i,e,t){let n,r;return e<i[0]?n=i[0]-e:i[2]<e?n=e-i[2]:n=0,t<i[1]?r=i[1]-t:i[3]<t?r=t-i[3]:r=0,n*n+r*r}function Sl(i,e){return Up(i,e[0],e[1])}function to(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function Up(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function Qg(i,e){const t=i[0],n=i[1],r=i[2],o=i[3],a=e[0],u=e[1];let c=Nt.UNKNOWN;return a<t?c=c|Nt.LEFT:a>r&&(c=c|Nt.RIGHT),u<n?c=c|Nt.BELOW:u>o&&(c=c|Nt.ABOVE),c===Nt.UNKNOWN&&(c=Nt.INTERSECTING),c}function si(){return[1/0,1/0,-1/0,-1/0]}function Tr(i,e,t,n,r){return r?(r[0]=i,r[1]=e,r[2]=t,r[3]=n,r):[i,e,t,n]}function vu(i){return Tr(1/0,1/0,-1/0,-1/0,i)}function Va(i,e){const t=i[0],n=i[1];return Tr(t,n,t,n,e)}function Xp(i,e,t,n,r){const o=vu(r);return uw(o,i,e,t,n)}function Rl(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function aw(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function Ua(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function uw(i,e,t,n,r){for(;t<n;t+=r)cP(i,e[t],e[t+1]);return i}function cP(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function Hp(i,e){let t;return t=e(Zh(i)),t||(t=e(qh(i)),t)||(t=e(Qh(i)),t)||(t=e(Is(i)),t)?t:!1}function Ka(i){let e=0;return Jh(i)||(e=He(i)*en(i)),e}function Zh(i){return[i[0],i[1]]}function qh(i){return[i[2],i[1]]}function Pr(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function hP(i,e){let t;if(e==="bottom-left")t=Zh(i);else if(e==="bottom-right")t=qh(i);else if(e==="top-left")t=Is(i);else if(e==="top-right")t=Qh(i);else throw new Error("Invalid corner");return t}function Jg(i,e,t,n,r){const[o,a,u,c,d,f,p,m]=dP(i,e,t,n);return Tr(Math.min(o,u,d,p),Math.min(a,c,f,m),Math.max(o,u,d,p),Math.max(a,c,f,m),r)}function dP(i,e,t,n){const r=e*n[0]/2,o=e*n[1]/2,a=Math.cos(t),u=Math.sin(t),c=r*a,d=r*u,f=o*a,p=o*u,m=i[0],_=i[1];return[m-c+p,_-d-f,m-c-p,_-d+f,m+c-p,_+d+f,m+c+p,_+d-f,m-c+p,_-d-f]}function en(i){return i[3]-i[1]}function Bn(i,e,t){const n=t||si();return wt(i,e)?(i[0]>e[0]?n[0]=i[0]:n[0]=e[0],i[1]>e[1]?n[1]=i[1]:n[1]=e[1],i[2]<e[2]?n[2]=i[2]:n[2]=e[2],i[3]<e[3]?n[3]=i[3]:n[3]=e[3]):vu(n),n}function Is(i){return[i[0],i[3]]}function Qh(i){return[i[2],i[3]]}function He(i){return i[2]-i[0]}function wt(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function Jh(i){return i[2]<i[0]||i[3]<i[1]}function fP(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function gP(i,e,t){let n=!1;const r=Qg(i,e),o=Qg(i,t);if(r===Nt.INTERSECTING||o===Nt.INTERSECTING)n=!0;else{const a=i[0],u=i[1],c=i[2],d=i[3],f=e[0],p=e[1],m=t[0],_=t[1],v=(_-p)/(m-f);let w,E;o&Nt.ABOVE&&!(r&Nt.ABOVE)&&(w=m-(_-d)/v,n=w>=a&&w<=c),!n&&o&Nt.RIGHT&&!(r&Nt.RIGHT)&&(E=_-(m-c)*v,n=E>=u&&E<=d),!n&&o&Nt.BELOW&&!(r&Nt.BELOW)&&(w=m-(_-u)/v,n=w>=a&&w<=c),!n&&o&Nt.LEFT&&!(r&Nt.LEFT)&&(E=_-(m-a)*v,n=E>=u&&E<=d)}return n}function cw(i,e){const t=e.getExtent(),n=Pr(i);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const r=He(t),a=Math.floor((n[0]-t[0])/r)*r;i[0]-=a,i[2]-=a}return i}function Yp(i,e,t){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[n[0],i[1],n[2],i[3]]];cw(i,e);const r=He(n);if(He(i)>r&&!t)return[[n[0],i[1],n[2],i[3]]];if(i[0]<n[0])return[[i[0]+r,i[1],n[2],i[3]],[n[0],i[1],i[2],i[3]]];if(i[2]>n[2])return[[i[0],i[1],n[2],i[3]],[n[0],i[1],i[2]-r,i[3]]]}return[i]}const Kp={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class $p{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Kp[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const xu=6378137,al=Math.PI*xu,pP=[-al,-al,al,al],mP=[-180,-85,180,85],Vc=xu*Math.log(Math.tan(Math.PI/2));class Xo extends $p{constructor(e){super({code:e,units:"m",extent:pP,global:!0,worldExtent:mP,getPointResolution:function(t,n){return t/Math.cosh(n[1]/xu)}})}}const uv=[new Xo("EPSG:3857"),new Xo("EPSG:102100"),new Xo("EPSG:102113"),new Xo("EPSG:900913"),new Xo("http://www.opengis.net/def/crs/EPSG/0/3857"),new Xo("http://www.opengis.net/gml/srs/epsg.xml#3857")];function yP(i,e,t,n){const r=i.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=i.slice():e=new Array(r));for(let o=0;o<r;o+=n){e[o]=al*i[o]/180;let a=xu*Math.log(Math.tan(Math.PI*(+i[o+1]+90)/360));a>Vc?a=Vc:a<-Vc&&(a=-Vc),e[o+1]=a}return e}function _P(i,e,t,n){const r=i.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=i.slice():e=new Array(r));for(let o=0;o<r;o+=n)e[o]=180*i[o]/al,e[o+1]=360*Math.atan(Math.exp(i[o+1]/xu))/Math.PI-90;return e}const vP=6378137,cv=[-180,-90,180,90],xP=Math.PI*vP/180;class qs extends $p{constructor(e,t){super({code:e,units:"degrees",extent:cv,axisOrientation:t,global:!0,metersPerUnit:xP,worldExtent:cv})}}const hv=[new qs("CRS:84"),new qs("EPSG:4326","neu"),new qs("urn:ogc:def:crs:OGC:1.3:CRS84"),new qs("urn:ogc:def:crs:OGC:2:84"),new qs("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new qs("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new qs("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let ep={};function wP(i){return ep[i]||ep[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function EP(i,e){ep[i]=e}let dl={};function Ch(i,e,t){const n=i.getCode(),r=e.getCode();n in dl||(dl[n]={}),dl[n][r]=t}function CP(i,e){let t;return i in dl&&e in dl[i]&&(t=dl[i][e]),t}function ht(i,e,t){return Math.min(Math.max(i,e),t)}function SP(i,e,t,n,r,o){const a=r-t,u=o-n;if(a!==0||u!==0){const c=((i-t)*a+(e-n)*u)/(a*a+u*u);c>1?(t=r,n=o):c>0&&(t+=a*c,n+=u*c)}return wr(i,e,t,n)}function wr(i,e,t,n){const r=t-i,o=n-e;return r*r+o*o}function RP(i){const e=i.length;for(let n=0;n<e;n++){let r=n,o=Math.abs(i[n][n]);for(let u=n+1;u<e;u++){const c=Math.abs(i[u][n]);c>o&&(o=c,r=u)}if(o===0)return null;const a=i[r];i[r]=i[n],i[n]=a;for(let u=n+1;u<e;u++){const c=-i[u][n]/i[n][n];for(let d=n;d<e+1;d++)n==d?i[u][d]=0:i[u][d]+=c*i[n][d]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=i[n][e]/i[n][n];for(let r=n-1;r>=0;r--)i[r][e]-=i[r][n]*t[n]}return t}function fh(i){return i*Math.PI/180}function fl(i,e){const t=i%e;return t*e<0?t+e:t}function zn(i,e,t){return i+t*(e-i)}function ed(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function Uc(i,e){return Math.floor(ed(i,e))}function Xc(i,e){return Math.ceil(ed(i,e))}function TP(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function hw(i,e){const t=i[0],n=i[1],r=e[0],o=e[1],a=r[0],u=r[1],c=o[0],d=o[1],f=c-a,p=d-u,m=f===0&&p===0?0:(f*(t-a)+p*(n-u))/(f*f+p*p||0);let _,v;return m<=0?(_=a,v=u):m>=1?(_=c,v=d):(_=a+m*f,v=u+m*p),[_,v]}function Ti(i,e){let t=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=e[n]){t=!1;break}return t}function Zp(i,e){const t=Math.cos(e),n=Math.sin(e),r=i[0]*t-i[1]*n,o=i[1]*t+i[0]*n;return i[0]=r,i[1]=o,i}function PP(i,e){return i[0]*=e,i[1]*=e,i}function Tl(i,e){const t=i[0]-e[0],n=i[1]-e[1];return t*t+n*n}function Sh(i,e){return Math.sqrt(Tl(i,e))}function IP(i,e){return Tl(i,hw(i,e))}function qp(i,e){if(e.canWrapX()){const t=He(e.getExtent()),n=LP(i,e,t);n&&(i[0]-=n*t)}return i}function LP(i,e,t){const n=e.getExtent();let r=0;return e.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(t=t||He(n),r=Math.floor((i[0]-n[0])/t)),r}const kP=63710088e-1;function dv(i,e,t){t=t||kP;const n=fh(i[1]),r=fh(e[1]),o=(r-n)/2,a=fh(e[0]-i[0])/2,u=Math.sin(o)*Math.sin(o)+Math.sin(a)*Math.sin(a)*Math.cos(n)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function dw(...i){console.warn(...i)}let tp=!0;function AP(i){tp=!1}function Qp(i,e){if(e!==void 0){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];e=e}else e=i.slice();return e}function fw(i,e){if(e!==void 0&&i!==e){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];i=e}return i}function MP(i){EP(i.getCode(),i),Ch(i,i,Qp)}function bP(i){i.forEach(MP)}function Vt(i){return typeof i=="string"?wP(i):i||null}function fv(i,e,t,n){i=Vt(i);let r;const o=i.getPointResolutionFunc();if(o)r=o(e,t);else{const a=i.getUnits();if(a=="degrees"&&!n||n=="degrees")r=e;else{const u=td(i,Vt("EPSG:4326"));if(u===fw&&a!=="degrees")r=e*i.getMetersPerUnit();else{let d=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];d=u(d,d,2);const f=dv(d.slice(0,2),d.slice(2,4)),p=dv(d.slice(4,6),d.slice(6,8));r=(f+p)/2}const c=i.getMetersPerUnit();c!==void 0&&(r/=c)}}return r}function gv(i){bP(i),i.forEach(function(e){i.forEach(function(t){e!==t&&Ch(e,t,Qp)})})}function OP(i,e,t,n){i.forEach(function(r){e.forEach(function(o){Ch(r,o,t),Ch(o,r,n)})})}function Jp(i,e){return i?typeof i=="string"?Vt(i):i:Vt(e)}function gh(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||td(i,e)===Qp)&&t}function td(i,e){const t=i.getCode(),n=e.getCode();let r=CP(t,n);return r||(r=fw),r}function $a(i,e){const t=Vt(i),n=Vt(e);return td(t,n)}function FP(i,e,t){return $a(e,t)(i,void 0,i.length)}let DP=null;function NP(){return DP}function Pl(i,e){return i}function ct(i,e){return tp&&!Ti(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(tp=!1,dw("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function nd(i,e){return i}function _r(i,e){return i}function zP(){gv(uv),gv(hv),OP(hv,uv,yP,_P)}zP();function vs(i,e,t,n,r,o,a){o=o||[],a=a||2;let u=0;for(let c=e;c<t;c+=n){const d=i[c],f=i[c+1];o[u++]=r[0]*d+r[2]*f+r[4],o[u++]=r[1]*d+r[3]*f+r[5];for(let p=2;p<a;p++)o[u++]=i[c+p]}return o&&o.length!=u&&(o.length=u),o}function em(i,e,t,n,r,o,a){a=a||[];const u=Math.cos(r),c=Math.sin(r),d=o[0],f=o[1];let p=0;for(let m=e;m<t;m+=n){const _=i[m]-d,v=i[m+1]-f;a[p++]=d+_*u-v*c,a[p++]=f+_*c+v*u;for(let w=m+2;w<m+n;++w)a[p++]=i[w]}return a&&a.length!=p&&(a.length=p),a}function jP(i,e,t,n,r,o,a,u){u=u||[];const c=a[0],d=a[1];let f=0;for(let p=e;p<t;p+=n){const m=i[p]-c,_=i[p+1]-d;u[f++]=c+r*m,u[f++]=d+o*_;for(let v=p+2;v<p+n;++v)u[f++]=i[v]}return u&&u.length!=f&&(u.length=f),u}function GP(i,e,t,n,r,o,a){a=a||[];let u=0;for(let c=e;c<t;c+=n){a[u++]=i[c]+r,a[u++]=i[c+1]+o;for(let d=c+2;d<c+n;++d)a[u++]=i[d]}return a&&a.length!=u&&(a.length=u),a}const pv=ri();class gw extends Ji{constructor(){super(),this.extent_=si(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=rw((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Oe()}closestPointXY(e,t,n,r){return Oe()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Oe()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&vu(t),this.extentRevision_=this.getRevision()}return fP(this.extent_,e)}rotate(e,t){Oe()}scale(e,t,n){Oe()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Oe()}getType(){return Oe()}applyTransform(e){Oe()}intersectsExtent(e){return Oe()}translate(e,t){Oe()}transform(e,t){const n=Vt(e),r=n.getUnits()=="tile-pixels"?function(o,a,u){const c=n.getExtent(),d=n.getWorldExtent(),f=en(d)/en(c);return Rr(pv,d[0],d[3],f,-f,0,0,0),vs(o,0,o.length,u,pv,a),$a(n,t)(o,a,u)}:$a(n,t);return this.applyTransform(r),this}}class Ls extends gw{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return Xp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Oe()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Rh(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Oe()}setLayout(e,t,n){let r;if(e)r=Rh(e);else{for(let o=0;o<n;++o){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=WP(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const r=this.getStride();em(n,0,n.length,r,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=Pr(this.getExtent()));const r=this.getFlatCoordinates();if(r){const o=this.getStride();jP(r,0,r.length,o,e,t,n,r),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const r=this.getStride();GP(n,0,n.length,r,e,t,n),this.changed()}}}function WP(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function Rh(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function BP(i,e,t){const n=i.getFlatCoordinates();if(!n)return null;const r=i.getStride();return vs(n,0,n.length,r,e,t)}function mv(i,e,t,n,r,o,a){const u=i[e],c=i[e+1],d=i[t]-u,f=i[t+1]-c;let p;if(d===0&&f===0)p=e;else{const m=((r-u)*d+(o-c)*f)/(d*d+f*f);if(m>1)p=t;else if(m>0){for(let _=0;_<n;++_)a[_]=zn(i[e+_],i[t+_],m);a.length=n;return}else p=e}for(let m=0;m<n;++m)a[m]=i[p+m];a.length=n}function tm(i,e,t,n,r){let o=i[e],a=i[e+1];for(e+=n;e<t;e+=n){const u=i[e],c=i[e+1],d=wr(o,a,u,c);d>r&&(r=d),o=u,a=c}return r}function nm(i,e,t,n,r){for(let o=0,a=t.length;o<a;++o){const u=t[o];r=tm(i,e,u,n,r),e=u}return r}function VP(i,e,t,n,r){for(let o=0,a=t.length;o<a;++o){const u=t[o];r=nm(i,e,u,n,r),e=u[u.length-1]}return r}function im(i,e,t,n,r,o,a,u,c,d,f){if(e==t)return d;let p,m;if(r===0){if(m=wr(a,u,i[e],i[e+1]),m<d){for(p=0;p<n;++p)c[p]=i[e+p];return c.length=n,m}return d}f=f||[NaN,NaN];let _=e+n;for(;_<t;)if(mv(i,_-n,_,n,a,u,f),m=wr(a,u,f[0],f[1]),m<d){for(d=m,p=0;p<n;++p)c[p]=f[p];c.length=n,_+=n}else _+=n*Math.max((Math.sqrt(m)-Math.sqrt(d))/r|0,1);if(o&&(mv(i,t-n,e,n,a,u,f),m=wr(a,u,f[0],f[1]),m<d)){for(d=m,p=0;p<n;++p)c[p]=f[p];c.length=n}return d}function rm(i,e,t,n,r,o,a,u,c,d,f){f=f||[NaN,NaN];for(let p=0,m=t.length;p<m;++p){const _=t[p];d=im(i,e,_,n,r,o,a,u,c,d,f),e=_}return d}function UP(i,e,t,n,r,o,a,u,c,d,f){f=f||[NaN,NaN];for(let p=0,m=t.length;p<m;++p){const _=t[p];d=rm(i,e,_,n,r,o,a,u,c,d,f),e=_[_.length-1]}return d}function pw(i,e,t,n){for(let r=0,o=t.length;r<o;++r)i[e++]=t[r];return e}function id(i,e,t,n){for(let r=0,o=t.length;r<o;++r){const a=t[r];for(let u=0;u<n;++u)i[e++]=a[u]}return e}function sm(i,e,t,n,r){r=r||[];let o=0;for(let a=0,u=t.length;a<u;++a){const c=id(i,e,t[a],n);r[o++]=c,e=c}return r.length=o,r}function XP(i,e,t,n,r){r=r||[];let o=0;for(let a=0,u=t.length;a<u;++a){const c=sm(i,e,t[a],n,r[o]);c.length===0&&(c[0]=e),r[o++]=c,e=c[c.length-1]}return r.length=o,r}function rd(i,e,t,n,r,o,a){const u=(t-e)/n;if(u<3){for(;e<t;e+=n)o[a++]=i[e],o[a++]=i[e+1];return a}const c=new Array(u);c[0]=1,c[u-1]=1;const d=[e,t-n];let f=0;for(;d.length>0;){const p=d.pop(),m=d.pop();let _=0;const v=i[m],w=i[m+1],E=i[p],C=i[p+1];for(let S=m+n;S<p;S+=n){const T=i[S],I=i[S+1],L=SP(T,I,v,w,E,C);L>_&&(f=S,_=L)}_>r&&(c[(f-e)/n]=1,m+n<f&&d.push(m,f),f+n<p&&d.push(f,p))}for(let p=0;p<u;++p)c[p]&&(o[a++]=i[e+p*n],o[a++]=i[e+p*n+1]);return a}function mw(i,e,t,n,r,o,a,u){for(let c=0,d=t.length;c<d;++c){const f=t[c];a=rd(i,e,f,n,r,o,a),u.push(a),e=f}return a}function Js(i,e){return e*Math.round(i/e)}function HP(i,e,t,n,r,o,a){if(e==t)return a;let u=Js(i[e],r),c=Js(i[e+1],r);e+=n,o[a++]=u,o[a++]=c;let d,f;do if(d=Js(i[e],r),f=Js(i[e+1],r),e+=n,e==t)return o[a++]=d,o[a++]=f,a;while(d==u&&f==c);for(;e<t;){const p=Js(i[e],r),m=Js(i[e+1],r);if(e+=n,p==d&&m==f)continue;const _=d-u,v=f-c,w=p-u,E=m-c;if(_*E==v*w&&(_<0&&w<_||_==w||_>0&&w>_)&&(v<0&&E<v||v==E||v>0&&E>v)){d=p,f=m;continue}o[a++]=d,o[a++]=f,u=d,c=f,d=p,f=m}return o[a++]=d,o[a++]=f,a}function om(i,e,t,n,r,o,a,u){for(let c=0,d=t.length;c<d;++c){const f=t[c];a=HP(i,e,f,n,r,o,a),u.push(a),e=f}return a}function YP(i,e,t,n,r,o,a,u){for(let c=0,d=t.length;c<d;++c){const f=t[c],p=[];a=om(i,e,f,n,r,o,a,p),u.push(p),e=f[f.length-1]}return a}function ms(i,e,t,n,r){r=r!==void 0?r:[];let o=0;for(let a=e;a<t;a+=n)r[o++]=i.slice(a,a+n);return r.length=o,r}function Za(i,e,t,n,r){r=r!==void 0?r:[];let o=0;for(let a=0,u=t.length;a<u;++a){const c=t[a];r[o++]=ms(i,e,c,n,r[o]),e=c}return r.length=o,r}function np(i,e,t,n,r){r=r!==void 0?r:[];let o=0;for(let a=0,u=t.length;a<u;++a){const c=t[a];r[o++]=c.length===1&&c[0]===e?[]:Za(i,e,c,n,r[o]),e=c[c.length-1]}return r.length=o,r}function yw(i,e,t,n){let r=0;const o=i[t-n],a=i[t-n+1];let u=0,c=0;for(;e<t;e+=n){const d=i[e]-o,f=i[e+1]-a;r+=c*d-u*f,u=d,c=f}return r/2}function _w(i,e,t,n){let r=0;for(let o=0,a=t.length;o<a;++o){const u=t[o];r+=yw(i,e,u,n),e=u}return r}function KP(i,e,t,n){let r=0;for(let o=0,a=t.length;o<a;++o){const u=t[o];r+=_w(i,e,u,n),e=u[u.length-1]}return r}class qa extends Ls{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new qa(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,r){return r<go(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(tm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),im(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,r))}getArea(){return yw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return ms(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=rd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new qa(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=id(this.flatCoordinates,0,e,this.stride),this.changed()}}class Ii extends Ls{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Ii(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){const o=this.flatCoordinates,a=wr(e,t,o[0],o[1]);if(a<r){const u=this.stride;for(let c=0;c<u;++c)n[c]=o[c];return n.length=u,a}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Va(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Up(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=pw(this.flatCoordinates,0,e,this.stride),this.changed()}}function $P(i,e,t,n,r){return!Hp(r,function(a){return!no(i,e,t,n,a[0],a[1])})}function no(i,e,t,n,r,o){let a=0,u=i[t-n],c=i[t-n+1];for(;e<t;e+=n){const d=i[e],f=i[e+1];c<=o?f>o&&(d-u)*(o-c)-(r-u)*(f-c)>0&&a++:f<=o&&(d-u)*(o-c)-(r-u)*(f-c)<0&&a--,u=d,c=f}return a!==0}function lm(i,e,t,n,r,o){if(t.length===0||!no(i,e,t[0],n,r,o))return!1;for(let a=1,u=t.length;a<u;++a)if(no(i,t[a-1],t[a],n,r,o))return!1;return!0}function ZP(i,e,t,n,r,o){if(t.length===0)return!1;for(let a=0,u=t.length;a<u;++a){const c=t[a];if(lm(i,e,c,n,r,o))return!0;e=c[c.length-1]}return!1}function am(i,e,t,n,r,o,a){let u,c,d,f,p,m,_;const v=r[o+1],w=[];for(let S=0,T=t.length;S<T;++S){const I=t[S];for(f=i[I-n],m=i[I-n+1],u=e;u<I;u+=n)p=i[u],_=i[u+1],(v<=m&&_<=v||m<=v&&v<=_)&&(d=(v-m)/(_-m)*(p-f)+f,w.push(d)),f=p,m=_}let E=NaN,C=-1/0;for(w.sort(Ui),f=w[0],u=1,c=w.length;u<c;++u){p=w[u];const S=Math.abs(p-f);S>C&&(d=(f+p)/2,lm(i,e,t,n,d,v)&&(E=d,C=S)),f=p}return isNaN(E)&&(E=r[o]),a?(a.push(E,v,C),a):[E,v,C]}function vw(i,e,t,n,r){let o=[];for(let a=0,u=t.length;a<u;++a){const c=t[a];o=am(i,e,c,n,r,2*a,o),e=c[c.length-1]}return o}function xw(i,e,t,n,r){let o;for(e+=n;e<t;e+=n)if(o=r(i.slice(e-n,e),i.slice(e,e+n)),o)return o;return!1}function sd(i,e,t,n,r){const o=uw(si(),i,e,t,n);return wt(r,o)?to(r,o)||o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]?!0:xw(i,e,t,n,function(a,u){return gP(r,a,u)}):!1}function qP(i,e,t,n,r){for(let o=0,a=t.length;o<a;++o){if(sd(i,e,t[o],n,r))return!0;e=t[o]}return!1}function ww(i,e,t,n,r){return!!(sd(i,e,t,n,r)||no(i,e,t,n,r[0],r[1])||no(i,e,t,n,r[0],r[3])||no(i,e,t,n,r[2],r[1])||no(i,e,t,n,r[2],r[3]))}function Ew(i,e,t,n,r){if(!ww(i,e,t[0],n,r))return!1;if(t.length===1)return!0;for(let o=1,a=t.length;o<a;++o)if($P(i,t[o-1],t[o],n,r)&&!sd(i,t[o-1],t[o],n,r))return!1;return!0}function QP(i,e,t,n,r){for(let o=0,a=t.length;o<a;++o){const u=t[o];if(Ew(i,e,u,n,r))return!0;e=u[u.length-1]}return!1}function JP(i,e,t,n){for(;e<t-n;){for(let r=0;r<n;++r){const o=i[e+r];i[e+r]=i[t-n+r],i[t-n+r]=o}e+=n,t-=n}}function um(i,e,t,n){let r=0,o=i[t-n],a=i[t-n+1];for(;e<t;e+=n){const u=i[e],c=i[e+1];r+=(u-o)*(c+a),o=u,a=c}return r===0?void 0:r>0}function Cw(i,e,t,n,r){r=r!==void 0?r:!1;for(let o=0,a=t.length;o<a;++o){const u=t[o],c=um(i,e,u,n);if(o===0){if(r&&c||!r&&!c)return!1}else if(r&&!c||!r&&c)return!1;e=u}return!0}function eI(i,e,t,n,r){for(let o=0,a=t.length;o<a;++o){const u=t[o];if(!Cw(i,e,u,n,r))return!1;u.length&&(e=u[u.length-1])}return!0}function ip(i,e,t,n,r){r=r!==void 0?r:!1;for(let o=0,a=t.length;o<a;++o){const u=t[o],c=um(i,e,u,n);(o===0?r&&c||!r&&!c:r&&!c||!r&&c)&&JP(i,e,u,n),e=u}return e}function yv(i,e,t,n,r){for(let o=0,a=t.length;o<a;++o)e=ip(i,e,t[o],n,r);return e}function Sw(i,e){const t=[];let n=0,r=0,o;for(let a=0,u=e.length;a<u;++a){const c=e[a],d=um(i,n,c,2);if(o===void 0&&(o=d),d===o)t.push(e.slice(r,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=a+1,n=c}return t}class $i extends Ls{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Xi(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new $i(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<go(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(nm(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),rm(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,r))}containsXY(e,t){return lm(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return _w(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),ip(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Za(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Pr(this.getExtent());this.flatInteriorPoint_=am(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ii(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new qa(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,r=[];let o=0;for(let a=0,u=n.length;a<u;++a){const c=n[a],d=new qa(t.slice(o,c),e);r.push(d),o=c}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Cw(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=ip(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=om(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new $i(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return Ew(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=sm(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function _v(i){if(Jh(i))throw new Error("Cannot create polygon from empty extent");const e=i[0],t=i[1],n=i[2],r=i[3],o=[e,t,e,r,n,r,n,t,e,t];return new $i(o,"XY",[o.length])}const ni={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Fe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Qa={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Wt={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Wt.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Wt.max=Wt.whitepoint[2].D65;Wt.rgb=function(i,e){e=e||Wt.whitepoint[2].E;var t=i[0]/e[0],n=i[1]/e[1],r=i[2]/e[2],o,a,u;return o=t*3.240969941904521+n*-1.537383177570093+r*-.498610760293,a=t*-.96924363628087+n*1.87596750150772+r*.041555057407175,u=t*.055630079696993+n*-.20397695888897+r*1.056971514242878,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u=u*12.92,o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),u=Math.min(Math.max(0,u),1),[o*255,a*255,u*255]};Qa.xyz=function(i,e){var t=i[0]/255,n=i[1]/255,r=i[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var o=t*.41239079926595+n*.35758433938387+r*.18048078840183,a=t*.21263900587151+n*.71516867876775+r*.072192315360733,u=t*.019330818715591+n*.11919477979462+r*.95053215224966;return e=e||Wt.whitepoint[2].E,[o*e[0],a*e[1],u*e[2]]};const cm={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(i,e,t){var n,r,o,a,u,c,d,f,p,m,_,v,w;if(o=i[0],a=i[1],u=i[2],o===0)return[0,0,0];var E=.0011070564598794539;return e=e||"D65",t=t||2,p=Wt.whitepoint[t][e][0],m=Wt.whitepoint[t][e][1],_=Wt.whitepoint[t][e][2],v=4*p/(p+15*m+3*_),w=9*m/(p+15*m+3*_),n=a/(13*o)+v||0,r=u/(13*o)+w||0,d=o>8?m*Math.pow((o+16)/116,3):m*o*E,c=d*9*n/(4*r)||0,f=d*(12-3*n-20*r)/(4*r)||0,[c,d,f]}};Wt.luv=function(i,e,t){var n,r,o,a,u,c,d,f,p,m,_,v,w,E=.008856451679035631,C=903.2962962962961;e=e||"D65",t=t||2,p=Wt.whitepoint[t][e][0],m=Wt.whitepoint[t][e][1],_=Wt.whitepoint[t][e][2],v=4*p/(p+15*m+3*_),w=9*m/(p+15*m+3*_),c=i[0],d=i[1],f=i[2],n=4*c/(c+15*d+3*f)||0,r=9*d/(c+15*d+3*f)||0;var S=d/m;return o=S<=E?C*S:116*Math.pow(S,1/3)-16,a=13*o*(n-v),u=13*o*(r-w),[o,a,u]};var Rw={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(i){var e=i[0],t=i[1],n=i[2],r,o,a;return a=n/360*2*Math.PI,r=t*Math.cos(a),o=t*Math.sin(a),[e,r,o]},xyz:function(i){return cm.xyz(Rw.luv(i))}};cm.lchuv=function(i){var e=i[0],t=i[1],n=i[2],r=Math.sqrt(t*t+n*n),o=Math.atan2(n,t),a=o*360/2/Math.PI;return a<0&&(a+=360),[e,r,a]};Wt.lchuv=function(i){return cm.lchuv(Wt.luv(i))};const vv={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var xv={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function tI(i){var f,p;var e,t=[],n=1,r;if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(i=String(i).toLowerCase(),vv[i])t=vv[i].slice(),r="rgb";else if(i==="transparent")n=0,r="rgb",t=[0,0,0];else if(i[0]==="#"){var o=i.slice(1),a=o.length,u=a<=4;n=1,u?(t=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],a===4&&(n=parseInt(o[3]+o[3],16)/255)):(t=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],a===8&&(n=parseInt(o[6]+o[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),r="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(i)){var c=e[1];r=c.replace(/a$/,"");var d=r==="cmyk"?4:r==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),r==="color"&&(r=t.shift()),t=t.map(function(m,_){if(m[m.length-1]==="%")return m=parseFloat(m)/100,_===3?m:r==="rgb"?m*255:r[0]==="h"||r[0]==="l"&&!_?m*100:r==="lab"?m*125:r==="lch"?_<2?m*150:m*360:r[0]==="o"&&!_?m:r==="oklab"?m*.4:r==="oklch"?_<2?m*.4:m*360:m;if(r[_]==="h"||_===2&&r[r.length-1]==="h"){if(xv[m]!==void 0)return xv[m];if(m.endsWith("deg"))return parseFloat(m);if(m.endsWith("turn"))return parseFloat(m)*360;if(m.endsWith("grad"))return parseFloat(m)*360/400;if(m.endsWith("rad"))return parseFloat(m)*180/Math.PI}return m==="none"?0:parseFloat(m)}),n=t.length>d?t.pop():1}else/[0-9](?:\s|\/|,)/.test(i)&&(t=i.match(/([0-9]+)/g).map(function(m){return parseFloat(m)}),r=((p=(f=i.match(/([a-z])/ig))==null?void 0:f.join(""))==null?void 0:p.toLowerCase())||"rgb");return{space:r,values:t,alpha:n}}const gg={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(i){var e=i[0]/360,t=i[1]/100,n=i[2]/100,r,o,a,u,c,d=0;if(t===0)return c=n*255,[c,c,c];for(o=n<.5?n*(1+t):n+t-n*t,r=2*n-o,u=[0,0,0];d<3;)a=e+1/3*-(d-1),a<0?a++:a>1&&a--,c=6*a<1?r+(o-r)*6*a:2*a<1?o:3*a<2?r+(o-r)*(2/3-a)*6:r,u[d++]=c*255;return u}};Qa.hsl=function(i){var e=i[0]/255,t=i[1]/255,n=i[2]/255,r=Math.min(e,t,n),o=Math.max(e,t,n),a=o-r,u,c,d;return o===r?u=0:e===o?u=(t-n)/a:t===o?u=2+(n-e)/a:n===o&&(u=4+(e-t)/a),u=Math.min(u*60,360),u<0&&(u+=360),d=(r+o)/2,o===r?c=0:d<=.5?c=a/(o+r):c=a/(2-o-r),[u,c*100,d*100]};function nI(i){Array.isArray(i)&&i.raw&&(i=String.raw(...arguments)),i instanceof Number&&(i=+i);var e,t=tI(i);if(!t.space)return[];const n=t.space[0]==="h"?gg.min:Qa.min,r=t.space[0]==="h"?gg.max:Qa.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],n[0]),r[0]),e[1]=Math.min(Math.max(t.values[1],n[1]),r[1]),e[2]=Math.min(Math.max(t.values[2],n[2]),r[2]),t.space[0]==="h"&&(e=gg.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}const hm=[NaN,NaN,NaN,0];function iI(i){return typeof i=="string"?i:fm(i)}const rI=1024,Ia={};let pg=0;function sI(i){if(i.length===4)return i;const e=i.slice();return e[3]=1,e}function wv(i){const e=Wt.lchuv(Qa.xyz(i));return e[3]=i[3],e}function oI(i){const e=Wt.rgb(Rw.xyz(i));return e[3]=i[3],e}function dm(i){if(i==="none")return hm;if(Ia.hasOwnProperty(i))return Ia[i];if(pg>=rI){let t=0;for(const n in Ia)t++&3||(delete Ia[n],--pg)}const e=nI(i);if(e.length!==4)throw new Error('failed to parse "'+i+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+i+'" as color');return Tw(e),Ia[i]=e,++pg,e}function Ja(i){return Array.isArray(i)?i:dm(i)}function Tw(i){return i[0]=ht(i[0]+.5|0,0,255),i[1]=ht(i[1]+.5|0,0,255),i[2]=ht(i[2]+.5|0,0,255),i[3]=ht(i[3],0,1),i}function fm(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let t=i[1];t!=(t|0)&&(t=t+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const r=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+e+","+t+","+n+","+r+")"}const Es=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",lI=Es.includes("firefox"),aI=Es.includes("safari")&&!Es.includes("chrom");aI&&(Es.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Es));const uI=Es.includes("webkit")&&!Es.includes("edge"),Pw=Es.includes("macintosh"),Iw=typeof devicePixelRatio<"u"?devicePixelRatio:1,Lw=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,kw=typeof Image<"u"&&Image.prototype.decode,Aw=function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i}();function mt(i,e,t,n){let r;return t&&t.length?r=t.shift():Lw?r=new OffscreenCanvas(i||300,e||300):r=document.createElement("canvas"),i&&(r.width=i),e&&(r.height=e),r.getContext("2d",n)}let mg;function Th(){return mg||(mg=mt(1,1)),mg}function ao(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function Ev(i,e){const t=e.parentNode;t&&t.replaceChild(i,e)}function cI(i){for(;i.lastChild;)i.lastChild.remove()}function hI(i,e){const t=i.childNodes;for(let n=0;;++n){const r=t[n],o=e[n];if(!r&&!o)break;if(r!==o){if(!r){i.appendChild(o);continue}if(!o){i.removeChild(r),--n;continue}i.insertBefore(o,r)}}}function dI(i,e,t){const n=i;let r=!0,o=!1,a=!1;const u=[Eh(n,Te.LOAD,function(){a=!0,o||e()})];return n.src&&kw?(o=!0,n.decode().then(function(){r&&e()}).catch(function(c){r&&(a?e():t())})):u.push(Eh(n,Te.ERROR,t)),function(){r=!1,u.forEach(qe)}}function fI(i,e){return new Promise((t,n)=>{function r(){a(),t(i)}function o(){a(),n(new Error("Image load error"))}function a(){i.removeEventListener("load",r),i.removeEventListener("error",o)}i.addEventListener("load",r),i.addEventListener("error",o)})}function gI(i,e){return e&&(i.src=e),i.src&&kw?new Promise((t,n)=>i.decode().then(()=>t(i)).catch(r=>i.complete&&i.width?t(i):n(r))):fI(i)}class pI{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const r=yg(e,t,n);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,n){const r=yg(e,t,n);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,n,r,o){const a=yg(e,t,n),u=a in this.cache_;this.cache_[a]=r,o&&(r.getImageState()===Fe.IDLE&&r.load(),r.getImageState()===Fe.LOADING?r.ready().then(()=>{this.patternCache_[a]=Th().createPattern(r.getImage(1),"repeat")}):this.patternCache_[a]=Th().createPattern(r.getImage(1),"repeat")),u||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function yg(i,e,t){const n=t?Ja(t):"null";return e+":"+i+":"+n}const Bi=new pI;let La=null;class mI extends $h{constructor(e,t,n,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=o,this.imageState_=r===void 0?Fe.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Fe.LOADED){La||(La=mt(1,1,void 0,{willReadFrequently:!0})),La.drawImage(this.image_,0,0);try{La.getImageData(0,0,1,1),this.tainted_=!1}catch{La=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Te.CHANGE)}handleImageError_(){this.imageState_=Fe.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Fe.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=mt(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Fe.IDLE){this.image_||this.initializeImage_(),this.imageState_=Fe.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&gI(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Fe.LOADED)return;const t=this.image_,n=mt(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=n.canvas;n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=iI(this.color_),n.fillRect(0,0,r.width/e,r.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Fe.LOADED||this.imageState_===Fe.ERROR)e();else{const t=()=>{(this.imageState_===Fe.LOADED||this.imageState_===Fe.ERROR)&&(this.removeEventListener(Te.CHANGE,t),e())};this.addEventListener(Te.CHANGE,t)}})),this.ready_}}function gm(i,e,t,n,r,o){let a=e===void 0?void 0:Bi.get(e,t,r);return a||(a=new mI(i,i&&"src"in i?i.src||void 0:e,t,n,r),Bi.set(e,t,r,a,o)),o&&a&&!Bi.getPattern(e,t,r)&&Bi.set(e,t,r,a,o),a}class Zi{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Zi({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=gm(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Fe.IDLE&&t.load(),t.getImageState()===Fe.LOADING&&(this.patternImage_=t)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function Ph(i,e,t,n,r,o,a){let u,c;const d=(t-e)/n;if(d===1)u=e;else if(d===2)u=e,c=r;else if(d!==0){let f=i[e],p=i[e+1],m=0;const _=[0];for(let E=e+n;E<t;E+=n){const C=i[E],S=i[E+1];m+=Math.sqrt((C-f)*(C-f)+(S-p)*(S-p)),_.push(m),f=C,p=S}const v=r*m,w=JT(_,v);w<0?(c=(v-_[-w-2])/(_[-w-1]-_[-w-2]),u=e+(-w-2)*n):u=e+w*n}a=a>1?a:2,o=o||new Array(a);for(let f=0;f<a;++f)o[f]=u===void 0?NaN:c===void 0?i[u+f]:zn(i[u+f],i[u+n+f],c);return o}function rp(i,e,t,n,r,o){if(t==e)return null;let a;if(r<i[e+n-1])return o?(a=i.slice(e,e+n),a[n-1]=r,a):null;if(i[t-1]<r)return o?(a=i.slice(t-n,t),a[n-1]=r,a):null;if(r==i[e+n-1])return i.slice(e,e+n);let u=e/n,c=t/n;for(;u<c;){const m=u+c>>1;r<i[(m+1)*n-1]?c=m:u=m+1}const d=i[u*n-1];if(r==d)return i.slice((u-1)*n,(u-1)*n+n);const f=i[(u+1)*n-1],p=(r-d)/(f-d);a=[];for(let m=0;m<n-1;++m)a.push(zn(i[(u-1)*n+m],i[u*n+m],p));return a.push(r),a}function yI(i,e,t,n,r,o,a){if(a)return rp(i,e,t[t.length-1],n,r,o);let u;if(r<i[n-1])return o?(u=i.slice(0,n),u[n-1]=r,u):null;if(i[i.length-1]<r)return o?(u=i.slice(i.length-n),u[n-1]=r,u):null;for(let c=0,d=t.length;c<d;++c){const f=t[c];if(e!=f){if(r<i[e+n-1])return null;if(r<=i[f-1])return rp(i,e,f,n,r,!1);e=f}}return null}function Mw(i,e,t,n){let r=i[e],o=i[e+1],a=0;for(let u=e+n;u<t;u+=n){const c=i[u],d=i[u+1];a+=Math.sqrt((c-r)*(c-r)+(d-o)*(d-o)),r=c,o=d}return a}class Hi extends Ls{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Xi(this.flatCoordinates,e),this.changed()}clone(){const e=new Hi(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<go(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(tm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),im(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,r))}forEachSegment(e){return xw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,rp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return ms(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Ph(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return Mw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=rd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Hi(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return sd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=id(this.flatCoordinates,0,e,this.stride),this.changed()}}class Yi{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Yi({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function Cv(i){return i[0]>0&&i[1]>0}function _I(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function tn(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}class od{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=tn(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new od({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Oe()}getImage(e){return Oe()}getHitDetectionImage(){return Oe()}getPixelRatio(e){return 1}getImageState(){return Oe()}getImageSize(){return Oe()}getOrigin(){return Oe()}getSize(){return Oe()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=tn(e)}listenImageChange(e){Oe()}load(){Oe()}unlistenImageChange(e){Oe()}ready(){return Promise.resolve()}}function Vi(i){return i?Array.isArray(i)?fm(i):typeof i=="object"&&"src"in i?vI(i):i:null}function vI(i){if(!i.offset||!i.size)return Bi.getPattern(i.src,"anonymous",i.color);const e=i.src+":"+i.offset,t=Bi.getPattern(e,void 0,i.color);if(t)return t;const n=Bi.get(i.src,"anonymous",null);if(n.getImageState()!==Fe.LOADED)return null;const r=mt(i.size[0],i.size[1]);return r.drawImage(n.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),gm(r.canvas,e,void 0,Fe.LOADED,i.color,!0),Bi.getPattern(e,void 0,i.color)}const Hc="ol-hidden",ld="ol-unselectable",pm="ol-control",Sv="ol-collapsed",xI=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Rv=["style","variant","weight","size","lineHeight","family"],bw=function(i){const e=i.match(xI);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,r=Rv.length;n<r;++n){const o=e[n+1];o!==void 0&&(t[Rv[n]]=o)}return t.families=t.family.split(/,\s?/),t},Ow="10px sans-serif",Cn="#000",Il="round",Er=[],Cr=0,Ll="round",eu=10,tu="#000",nu="center",Ih="middle",io=[0,0,0,0],iu=1,pr=new Ji;let rl=null,sp;const op={},wI=function(){const e="32px ",t=["monospace","serif"],n=t.length,r="wmytzilWMYTZIL@#/&?$%10";let o,a;function u(d,f,p){let m=!0;for(let _=0;_<n;++_){const v=t[_];if(a=Lh(d+" "+f+" "+e+v,r),p!=v){const w=Lh(d+" "+f+" "+e+p+","+v,r);m=m&&w!=a}}return!!m}function c(){let d=!0;const f=pr.getKeys();for(let p=0,m=f.length;p<m;++p){const _=f[p];if(pr.get(_)<100){const[v,w,E]=_.split(`
`);u(v,w,E)?(yu(op),rl=null,sp=void 0,pr.set(_,100)):(pr.set(_,pr.get(_)+1,!0),d=!1)}}d&&(clearInterval(o),o=void 0)}return function(d){const f=bw(d);if(!f)return;const p=f.families;for(let m=0,_=p.length;m<_;++m){const v=p[m],w=f.style+`
`+f.weight+`
`+v;pr.get(w)===void 0&&(pr.set(w,100,!0),u(f.style,f.weight,v)||(pr.set(w,0,!0),o===void 0&&(o=setInterval(c,32))))}}}(),EI=function(){let i;return function(e){let t=op[e];if(t==null){if(Lw){const n=bw(e),r=Fw(e,"Žg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);op[e]=t}return t}}();function Fw(i,e){return rl||(rl=mt(1,1)),i!=sp&&(rl.font=i,sp=rl.font),rl.measureText(e)}function Lh(i,e){return Fw(i,e).width}function Tv(i,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((r,o)=>Math.max(r,Lh(i,o)),0);return t[e]=n,n}function CI(i,e){const t=[],n=[],r=[];let o=0,a=0,u=0,c=0;for(let d=0,f=e.length;d<=f;d+=2){const p=e[d];if(p===`
`||d===f){o=Math.max(o,a),r.push(a),a=0,u+=c,c=0;continue}const m=e[d+1]||i.font,_=Lh(m,p);t.push(_),a+=_;const v=EI(m);n.push(v),c=Math.max(c,v)}return{width:o,height:u,widths:t,heights:n,lineWidths:r}}function SI(i,e,t,n,r,o,a,u,c,d,f){i.save(),t!==1&&(i.globalAlpha===void 0?i.globalAlpha=p=>p.globalAlpha*=t:i.globalAlpha*=t),e&&i.transform.apply(i,e),n.contextInstructions?(i.translate(c,d),i.scale(f[0],f[1]),RI(n,i)):f[0]<0||f[1]<0?(i.translate(c,d),i.scale(f[0],f[1]),i.drawImage(n,r,o,a,u,0,0,a,u)):i.drawImage(n,r,o,a,u,c,d,a*f[0],u*f[1]),i.restore()}function RI(i,e){const t=i.contextInstructions;for(let n=0,r=t.length;n<r;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class wu extends od{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Fe.LOADING:Fe.LOADED,this.imageState_===Fe.LOADING&&this.ready().then(()=>this.imageState_=Fe.LOADED),this.render()}clone(){const e=this.getScale(),t=new wu({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.canvases_[e];if(!t){const n=this.renderOptions_,r=mt(n.size*e,n.size*e);this.draw_(n,r,e),t=r.canvas,this.canvases_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,o=this.radius2_===void 0?r:this.radius2_;if(r<o){const N=r;r=o,o=N}const a=this.radius2_===void 0?this.points_:this.points_*2,u=2*Math.PI/a,c=o*Math.sin(u),d=Math.sqrt(o*o-c*c),f=r-d,p=Math.sqrt(c*c+f*f),m=p/c;if(e==="miter"&&m<=n)return m*t;const _=t/2/m,v=t/2*(f/p),E=Math.sqrt((r+_)*(r+_)+v*v)-r;if(this.radius2_===void 0||e==="bevel")return E*2;const C=r*Math.sin(u),S=Math.sqrt(r*r-C*C),T=o-S,L=Math.sqrt(C*C+T*T)/C;if(L<=n){const N=L*t/2-o-r;return 2*Math.max(E,N)}return E*2}createRenderOptions(){let e=Il,t=Ll,n=0,r=null,o=0,a,u=0;this.stroke_&&(a=Vi(this.stroke_.getColor()??tu),u=this.stroke_.getWidth()??iu,r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Ll,e=this.stroke_.getLineCap()??Il,n=this.stroke_.getMiterLimit()??eu);const c=this.calculateLineJoinSize_(t,u,n),d=Math.max(this.radius,this.radius2_||0),f=Math.ceil(2*d+c);return{strokeStyle:a,strokeWidth:u,size:f,lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=Cn),t.fillStyle=Vi(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),r=0;typeof n=="string"&&(n=Ja(n)),n===null?r=1:Array.isArray(n)&&(r=n.length===4?n[3]:1),r===0&&(t=mt(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const r=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const o=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let u=0;u<t;u++){const c=o+u*a,d=u%2===0?n:r;e.lineTo(d*Math.cos(c),d*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Cn,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Dl extends wu{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Dl({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}let Tn=class Dw{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Pv,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Dw({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Pv,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function TI(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:(Ve(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[i]),e=function(){return t}}return e}let _g=null;function Nw(i,e){if(!_g){const t=new Zi({color:"rgba(255,255,255,0.4)"}),n=new Yi({color:"#3399CC",width:1.25});_g=[new Tn({image:new Dl({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return _g}function zw(){const i={},e=[255,255,255,1],t=[0,153,255,1],n=3;return i.Polygon=[new Tn({fill:new Zi({color:[255,255,255,.5]})})],i.MultiPolygon=i.Polygon,i.LineString=[new Tn({stroke:new Yi({color:e,width:n+2})}),new Tn({stroke:new Yi({color:t,width:n})})],i.MultiLineString=i.LineString,i.Circle=i.Polygon.concat(i.LineString),i.Point=[new Tn({image:new Dl({radius:n*2,fill:new Zi({color:t}),stroke:new Yi({color:e,width:n/2})}),zIndex:1/0})],i.MultiPoint=i.Point,i.GeometryCollection=i.Polygon.concat(i.LineString,i.Point),i}function Pv(i){return i.getGeometry()}const PI="#333";class ad{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=tn(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Zi({color:PI}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ad({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=tn(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const $e={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class jw extends Ji{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[$e.OPACITY]=e.opacity!==void 0?e.opacity:1,Ve(typeof t[$e.OPACITY]=="number","Layer opacity must be a number"),t[$e.VISIBLE]=e.visible!==void 0?e.visible:!0,t[$e.Z_INDEX]=e.zIndex,t[$e.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[$e.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[$e.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[$e.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=ht(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Oe()}getLayerStatesArray(e){return Oe()}getExtent(){return this.get($e.EXTENT)}getMaxResolution(){return this.get($e.MAX_RESOLUTION)}getMinResolution(){return this.get($e.MIN_RESOLUTION)}getMinZoom(){return this.get($e.MIN_ZOOM)}getMaxZoom(){return this.get($e.MAX_ZOOM)}getOpacity(){return this.get($e.OPACITY)}getSourceState(){return Oe()}getVisible(){return this.get($e.VISIBLE)}getZIndex(){return this.get($e.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set($e.EXTENT,e)}setMaxResolution(e){this.set($e.MAX_RESOLUTION,e)}setMinResolution(e){this.set($e.MIN_RESOLUTION,e)}setMaxZoom(e){this.set($e.MAX_ZOOM,e)}setMinZoom(e){this.set($e.MIN_ZOOM,e)}setOpacity(e){Ve(typeof e=="number","Layer opacity must be a number"),this.set($e.OPACITY,e)}setVisible(e){this.set($e.VISIBLE,e)}setZIndex(e){this.set($e.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const pt={ANIMATING:0,INTERACTING:1},mi={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Gw=42,mm=256;function Iv(i,e,t){return function(n,r,o,a,u){if(!n)return;if(!r&&!e)return n;const c=e?0:o[0]*r,d=e?0:o[1]*r,f=u?u[0]:0,p=u?u[1]:0;let m=i[0]+c/2+f,_=i[2]-c/2+f,v=i[1]+d/2+p,w=i[3]-d/2+p;m>_&&(m=(_+m)/2,_=m),v>w&&(v=(w+v)/2,w=v);let E=ht(n[0],m,_),C=ht(n[1],v,w);if(a&&t&&r){const S=30*r;E+=-S*Math.log(1+Math.max(0,m-n[0])/S)+S*Math.log(1+Math.max(0,n[0]-_)/S),C+=-S*Math.log(1+Math.max(0,v-n[1])/S)+S*Math.log(1+Math.max(0,n[1]-w)/S)}return[E,C]}}function II(i){return i}function ym(i,e,t,n){const r=He(e)/t[0],o=en(e)/t[1];return n?Math.min(i,Math.max(r,o)):Math.min(i,Math.min(r,o))}function _m(i,e,t){let n=Math.min(i,e);const r=50;return n*=Math.log(1+r*Math.max(0,i/e-1))/r+1,t&&(n=Math.max(n,t),n/=Math.log(1+r*Math.max(0,t/i-1))/r+1),ht(n,t/2,e*2)}function LI(i,e,t,n){return e=e!==void 0?e:!0,function(r,o,a,u){if(r!==void 0){const c=i[0],d=i[i.length-1],f=t?ym(c,t,a,n):c;if(u)return e?_m(r,f,d):ht(r,d,f);const p=Math.min(f,r),m=Math.floor(Wp(i,p,o));return i[m]>f&&m<i.length-1?i[m+1]:i[m]}}}function kI(i,e,t,n,r,o){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(a,u,c,d){if(a!==void 0){const f=r?ym(e,r,c,o):e;if(d)return n?_m(a,f,t):ht(a,t,f);const p=1e-9,m=Math.ceil(Math.log(e/f)/Math.log(i)-p),_=-u*(.5-p)+.5,v=Math.min(f,a),w=Math.floor(Math.log(e/v)/Math.log(i)+_),E=Math.max(m,w),C=e/Math.pow(i,E);return ht(C,t,f)}}}function Lv(i,e,t,n,r){return t=t!==void 0?t:!0,function(o,a,u,c){if(o!==void 0){const d=n?ym(i,n,u,r):i;return!t||!c?ht(o,e,d):_m(o,d,e)}}}function vm(i){if(i!==void 0)return 0}function kv(i){if(i!==void 0)return i}function AI(i){const e=2*Math.PI/i;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function MI(i){const e=fh(5);return function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t}}function Ww(i){return Math.pow(i,3)}function Nl(i){return 1-Ww(1-i)}function bI(i){return 3*i*i-2*i*i*i}function OI(i){return i}const vg=0;class Gi extends Ji{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Jp(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&AP(),e.center&&(e.center=ct(e.center,this.projection_)),e.extent&&(e.extent=_r(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const u in mi)delete t[u];this.setProperties(t,!0);const n=DI(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const r=FI(e),o=n.constraint,a=NI(e);this.constraints_={center:r,resolution:o,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const r=e||[0,0,0,0];t=t||[0,0,0,0];const o=this.getResolution(),a=o/2*(r[3]-t[3]+t[1]-r[1]),u=o/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([n[0]+a,n[1]-u])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let r=arguments[n];r.center&&(r=Object.assign({},r),r.center=ct(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=ct(r.anchor,this.getProjection())),t[n]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const f=arguments[r];f.center&&this.setCenterInternal(f.center),f.zoom!==void 0?this.setZoom(f.zoom):f.resolution&&this.setResolution(f.resolution),f.rotation!==void 0&&this.setRotation(f.rotation)}if(r===t){n&&Yc(n,!0);return}let o=Date.now(),a=this.targetCenter_.slice(),u=this.targetResolution_,c=this.targetRotation_;const d=[];for(;r<t;++r){const f=arguments[r],p={start:o,complete:!1,anchor:f.anchor,duration:f.duration!==void 0?f.duration:1e3,easing:f.easing||bI,callback:n};if(f.center&&(p.sourceCenter=a,p.targetCenter=f.center.slice(),a=p.targetCenter),f.zoom!==void 0?(p.sourceResolution=u,p.targetResolution=this.getResolutionForZoom(f.zoom),u=p.targetResolution):f.resolution&&(p.sourceResolution=u,p.targetResolution=f.resolution,u=p.targetResolution),f.rotation!==void 0){p.sourceRotation=c;const m=fl(f.rotation-c+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=c+m,c=p.targetRotation}zI(p)?p.complete=!0:o+=p.duration,d.push(p)}this.animations_.push(d),this.setHint(pt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[pt.ANIMATING]>0}getInteracting(){return this.hints_[pt.INTERACTING]>0}cancelAnimations(){this.setHint(pt.ANIMATING,-this.hints_[pt.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const r=this.animations_[t];if(r[0].callback&&Yc(r[0].callback,!1),!e)for(let o=0,a=r.length;o<a;++o){const u=r[o];if(!u.complete){e=u.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const r=this.animations_[n];let o=!0;for(let a=0,u=r.length;a<u;++a){const c=r[a];if(c.complete)continue;const d=e-c.start;let f=c.duration>0?d/c.duration:1;f>=1?(c.complete=!0,f=1):o=!1;const p=c.easing(f);if(c.sourceCenter){const m=c.sourceCenter[0],_=c.sourceCenter[1],v=c.targetCenter[0],w=c.targetCenter[1];this.nextCenter_=c.targetCenter;const E=m+p*(v-m),C=_+p*(w-_);this.targetCenter_=[E,C]}if(c.sourceResolution&&c.targetResolution){const m=p===1?c.targetResolution:c.sourceResolution+p*(c.targetResolution-c.sourceResolution);if(c.anchor){const _=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(m,0,_,!0);this.targetCenter_=this.calculateCenterZoom(v,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=m,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const m=p===1?fl(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+p*(c.targetRotation-c.sourceRotation);if(c.anchor){const _=this.constraints_.rotation(m,!0);this.targetCenter_=this.calculateCenterRotate(_,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=m}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(o){this.animations_[n]=null,this.setHint(pt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=r[0].callback;a&&Yc(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const r=this.getCenterInternal();return r!==void 0&&(n=[r[0]-t[0],r[1]-t[1]],Zp(n,e-this.getRotation()),TP(n,t)),n}calculateCenterZoom(e,t){let n;const r=this.getCenterInternal(),o=this.getResolution();if(r!==void 0&&o!==void 0){const a=t[0]-e*(t[0]-r[0])/o,u=t[1]-e*(t[1]-r[1])/o;n=[a,u]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],r=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Pl(e,this.getProjection())}getCenterInternal(){return this.get(mi.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return nd(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Ve(t,"The view center is not defined");const n=this.getResolution();Ve(n!==void 0,"The view resolution is not defined");const r=this.getRotation();return Ve(r!==void 0,"The view rotation is not defined"),Jg(t,n,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(mi.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(_r(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=He(e)/t[0],r=en(e)/t[1];return Math.max(n,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(t/n)/Math.log(e);return function(o){return t/Math.pow(e,o*r)}}getRotation(){return this.get(mi.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,o=Math.log(n/r)/t;return function(a){return Math.log(n/a)/t/o}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let r=this.getCenterInternal();const o=this.padding_;if(o){const a=this.getViewportSizeMinusPadding_();r=xg(r,this.getViewportSize_(),[a[0]/2+o[3],a[1]/2+o[0]],t,n)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,r;if(this.resolutions_){const o=Wp(this.resolutions_,e,1);t=o,n=this.resolutions_[o],o==this.resolutions_.length-1?r=2:r=n/this.resolutions_[o+1]}else n=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(n/e)/Math.log(r)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const n=ht(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(r,ht(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(Ve(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Ve(!Jh(e),"Cannot fit empty extent provided as `geometry`");const r=_r(e,this.getProjection());n=_v(r)}else if(e.getType()==="Circle"){const r=_r(e.getExtent(),this.getProjection());n=_v(r),n.rotate(this.getRotation(),Pr(r))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),r=Math.sin(-t),o=e.getFlatCoordinates(),a=e.getStride();let u=1/0,c=1/0,d=-1/0,f=-1/0;for(let p=0,m=o.length;p<m;p+=a){const _=o[p]*n-o[p+1]*r,v=o[p]*r+o[p+1]*n;u=Math.min(u,_),c=Math.min(c,v),d=Math.max(d,_),f=Math.max(f,v)}return[u,c,d,f]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],o=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const u=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(u,[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);c=isNaN(c)?a:Math.max(c,a),c=this.getConstrainedResolution(c,o?0:1);const d=this.getRotation(),f=Math.sin(d),p=Math.cos(d),m=Pr(u);m[0]+=(r[1]-r[3])/2*c,m[1]+=(r[0]-r[2])/2*c;const _=m[0]*p-m[1]*f,v=m[1]*p+m[0]*f,w=this.getConstrainedCenter([_,v],c),E=t.callback?t.callback:Cl;t.duration!==void 0?this.animateInternal({resolution:c,center:w,duration:t.duration,easing:t.easing},E):(this.targetResolution_=c,this.targetCenter_=w,this.applyTargetState_(!1,!0),Yc(E,!0))}centerOn(e,t,n){this.centerOnInternal(ct(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(xg(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,r){let o;const a=this.padding_;if(a&&e){const u=this.getViewportSizeMinusPadding_(-n),c=xg(e,r,[u[0]/2+a[3],u[1]/2+a[0]],t,n);o=[e[0]-c[0],e[1]-c[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Pl(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&ct(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,r,n);t&&(this.targetCenter_=this.calculateCenterZoom(o,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=ct(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&ct(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,n),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,0,o,n),u=this.constraints_.center(this.targetCenter_,a,o,n,this.calculateCenterShift(this.targetCenter_,a,r,o));this.get(mi.ROTATION)!==r&&this.set(mi.ROTATION,r),this.get(mi.RESOLUTION)!==a&&(this.set(mi.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!u||!this.get(mi.CENTER)||!Ti(this.get(mi.CENTER),u))&&this.set(mi.CENTER,u),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const r=t||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(o),u=this.constraints_.resolution(this.targetResolution_,r,a),c=this.constraints_.center(this.targetCenter_,u,a,!1,this.calculateCenterShift(this.targetCenter_,u,o,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=u,this.targetRotation_=o,this.targetCenter_=c,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==u||this.getRotation()!==o||!this.getCenterInternal()||!Ti(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:c,resolution:u,duration:e,easing:Nl,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(pt.INTERACTING,1)}endInteraction(e,t,n){n=n&&ct(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(pt.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function Yc(i,e){setTimeout(function(){i(e)},0)}function FI(i){if(i.extent!==void 0){const t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return Iv(i.extent,i.constrainOnlyCenter,t)}const e=Jp(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Iv(t,!1,!1)}return II}function DI(i){let e,t,n,a=i.minZoom!==void 0?i.minZoom:vg,u=i.maxZoom!==void 0?i.maxZoom:28;const c=i.zoomFactor!==void 0?i.zoomFactor:2,d=i.multiWorld!==void 0?i.multiWorld:!1,f=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,p=i.showFullExtent!==void 0?i.showFullExtent:!1,m=Jp(i.projection,"EPSG:3857"),_=m.getExtent();let v=i.constrainOnlyCenter,w=i.extent;if(!d&&!w&&m.isGlobal()&&(v=!1,w=_),i.resolutions!==void 0){const E=i.resolutions;t=E[a],n=E[u]!==void 0?E[u]:E[E.length-1],i.constrainResolution?e=LI(E,f,!v&&w,p):e=Lv(t,n,f,!v&&w,p)}else{const C=(_?Math.max(He(_),en(_)):360*Kp.degrees/m.getMetersPerUnit())/mm/Math.pow(2,vg),S=C/Math.pow(2,28-vg);t=i.maxResolution,t!==void 0?a=0:t=C/Math.pow(c,a),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=t/Math.pow(c,u):n=C/Math.pow(c,u):n=S),u=a+Math.floor(Math.log(t/n)/Math.log(c)),n=t/Math.pow(c,u-a),i.constrainResolution?e=kI(c,t,n,f,!v&&w,p):e=Lv(t,n,f,!v&&w,p)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:a,zoomFactor:c}}function NI(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const t=i.constrainRotation;return t===void 0||t===!0?MI():t===!1?kv:typeof t=="number"?AI(t):kv}return vm}function zI(i){return!(i.sourceCenter&&i.targetCenter&&!Ti(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function xg(i,e,t,n,r){const o=Math.cos(-r);let a=Math.sin(-r),u=i[0]*o-i[1]*a,c=i[1]*o+i[0]*a;u+=(e[0]/2-t[0])*n,c+=(t[1]-e[1]/2)*n,a=-a;const d=u*o-c*a,f=c*o+u*a;return[d,f]}class ud extends jw{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener($e.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get($e.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(qe(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ge(e,Te.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof Gi?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let r;t.layerStatesArray?r=t.layerStatesArray.find(a=>a.layer===this):r=this.getLayerState();const o=this.getExtent();return xm(r,t.viewState)&&(!o||wt(o,t.extent))}getAttributions(e){var o;if(!this.isVisible(e))return[];const t=(o=this.getSource())==null?void 0:o.getAttributions();if(!t)return[];const n=e instanceof Gi?e.getViewStateAndExtent():e;let r=t(n);return Array.isArray(r)||(r=[r]),r}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set($e.MAP,e)}getMapInternal(){return this.get($e.MAP)}setMap(e){this.mapPrecomposeKey_&&(qe(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(qe(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ge(e,ni.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Ge(this,Te.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,n=this.getLayerState(!1);Ve(!t.some(r=>r.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(n)}setSource(e){this.set($e.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function xm(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const n=e.zoom;return n>i.minZoom&&n<=i.maxZoom}function Bw(i,e,t=0,n=i.length-1,r=jI){for(;n>t;){if(n-t>600){const c=n-t+1,d=e-t+1,f=Math.log(c),p=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*p*(c-p)/c)*(d-c/2<0?-1:1),_=Math.max(t,Math.floor(e-d*p/c+m)),v=Math.min(n,Math.floor(e+(c-d)*p/c+m));Bw(i,e,_,v,r)}const o=i[e];let a=t,u=n;for(ka(i,t,e),r(i[n],o)>0&&ka(i,t,n);a<u;){for(ka(i,a,u),a++,u--;r(i[a],o)<0;)a++;for(;r(i[u],o)>0;)u--}r(i[t],o)===0?ka(i,t,u):(u++,ka(i,u,n)),u<=e&&(t=u+1),e<=u&&(n=u-1)}}function ka(i,e,t){const n=i[e];i[e]=i[t],i[t]=n}function jI(i,e){return i<e?-1:i>e?1:0}let Vw=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!$c(e,t))return n;const r=this.toBBox,o=[];for(;t;){for(let a=0;a<t.children.length;a++){const u=t.children[a],c=t.leaf?r(u):u;$c(e,c)&&(t.leaf?n.push(u):Eg(e,c)?this._all(u,n):o.push(u))}t=o.pop()}return n}collides(e){let t=this.data;if(!$c(e,t))return!1;const n=[];for(;t;){for(let r=0;r<t.children.length;r++){const o=t.children[r],a=t.leaf?this.toBBox(o):o;if($c(e,a)){if(t.leaf||Eg(e,a))return!0;n.push(o)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=sl([]),this}remove(e,t){if(!e)return this;let n=this.data;const r=this.toBBox(e),o=[],a=[];let u,c,d;for(;n||o.length;){if(n||(n=o.pop(),c=o[o.length-1],u=a.pop(),d=!0),n.leaf){const f=GI(e,n.children,t);if(f!==-1)return n.children.splice(f,1),o.push(n),this._condense(o),this}!d&&!n.leaf&&Eg(n,r)?(o.push(n),a.push(u),u=0,c=n,n=n.children[0]):c?(u++,n=c.children[u],d=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,r){const o=n-t+1;let a=this._maxEntries,u;if(o<=a)return u=sl(e.slice(t,n+1)),Ho(u,this.toBBox),u;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),u=sl([]),u.leaf=!1,u.height=r;const c=Math.ceil(o/a),d=c*Math.ceil(Math.sqrt(a));Av(e,t,n,d,this.compareMinX);for(let f=t;f<=n;f+=d){const p=Math.min(f+d-1,n);Av(e,f,p,c,this.compareMinY);for(let m=f;m<=p;m+=c){const _=Math.min(m+c-1,p);u.children.push(this._build(e,m,_,r-1))}}return Ho(u,this.toBBox),u}_chooseSubtree(e,t,n,r){for(;r.push(t),!(t.leaf||r.length-1===n);){let o=1/0,a=1/0,u;for(let c=0;c<t.children.length;c++){const d=t.children[c],f=wg(d),p=VI(e,d)-f;p<a?(a=p,o=f<o?f:o,u=d):p===a&&f<o&&(o=f,u=d)}t=u||t.children[0]}return t}_insert(e,t,n){const r=n?e:this.toBBox(e),o=[],a=this._chooseSubtree(r,this.data,t,o);for(a.children.push(e),Da(a,r);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(r,o,t)}_split(e,t){const n=e[t],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);const a=this._chooseSplitIndex(n,o,r),u=sl(n.children.splice(a,n.children.length-a));u.height=n.height,u.leaf=n.leaf,Ho(n,this.toBBox),Ho(u,this.toBBox),t?e[t-1].children.push(u):this._splitRoot(n,u)}_splitRoot(e,t){this.data=sl([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Ho(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let r,o=1/0,a=1/0;for(let u=t;u<=n-t;u++){const c=Fa(e,0,u,this.toBBox),d=Fa(e,u,n,this.toBBox),f=UI(c,d),p=wg(c)+wg(d);f<o?(o=f,r=u,a=p<a?p:a):f===o&&p<a&&(a=p,r=u)}return r||n-t}_chooseSplitAxis(e,t,n){const r=e.leaf?this.compareMinX:WI,o=e.leaf?this.compareMinY:BI,a=this._allDistMargin(e,t,n,r),u=this._allDistMargin(e,t,n,o);a<u&&e.children.sort(r)}_allDistMargin(e,t,n,r){e.children.sort(r);const o=this.toBBox,a=Fa(e,0,t,o),u=Fa(e,n-t,n,o);let c=Kc(a)+Kc(u);for(let d=t;d<n-t;d++){const f=e.children[d];Da(a,e.leaf?o(f):f),c+=Kc(a)}for(let d=n-t-1;d>=t;d--){const f=e.children[d];Da(u,e.leaf?o(f):f),c+=Kc(u)}return c}_adjustParentBBoxes(e,t,n){for(let r=n;r>=0;r--)Da(t[r],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():Ho(e[t],this.toBBox)}};function GI(i,e,t){if(!t)return e.indexOf(i);for(let n=0;n<e.length;n++)if(t(i,e[n]))return n;return-1}function Ho(i,e){Fa(i,0,i.children.length,e,i)}function Fa(i,e,t,n,r){r||(r=sl(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=e;o<t;o++){const a=i.children[o];Da(r,i.leaf?n(a):a)}return r}function Da(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function WI(i,e){return i.minX-e.minX}function BI(i,e){return i.minY-e.minY}function wg(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function Kc(i){return i.maxX-i.minX+(i.maxY-i.minY)}function VI(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function UI(i,e){const t=Math.max(i.minX,e.minX),n=Math.max(i.minY,e.minY),r=Math.min(i.maxX,e.maxX),o=Math.min(i.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,o-n)}function Eg(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function $c(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function sl(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Av(i,e,t,n,r){const o=[e,t];for(;o.length;){if(t=o.pop(),e=o.pop(),t-e<=n)continue;const a=e+Math.ceil((t-e)/n/2)*n;Bw(i,a,e,t,r),o.push(e,a,a,t)}}function Mv(i,e,t,n){return t!==void 0&&n!==void 0?[t/i,n/e]:t!==void 0?t/i:n!==void 0?n/e:1}let wm=class Uw extends od{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let u=e.src;Ve(!(u!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(u===void 0||u.length===0)&&a&&(u=a.src||Le(a)),Ve(u!==void 0&&u.length>0,"A defined and non-empty `src` or `image` must be provided"),Ve(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let c;if(e.src!==void 0?c=Fe.IDLE:a!==void 0&&("complete"in a?a.complete?c=a.src?Fe.LOADED:Fe.IDLE:c=Fe.LOADING:c=Fe.LOADED),this.color_=e.color!==void 0?Ja(e.color):null,this.iconImage_=gm(a,u,this.crossOrigin_,c,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let d,f;if(e.size)[d,f]=e.size;else{const p=this.getImage(1);if(p.width&&p.height)d=p.width,f=p.height;else if(p instanceof HTMLImageElement){this.initialOptions_=e;const m=()=>{if(this.unlistenImageChange(m),!this.initialOptions_)return;const _=this.iconImage_.getSize();this.setScale(Mv(_[0],_[1],e.width,e.height))};this.listenImageChange(m);return}}d!==void 0&&this.setScale(Mv(d,f,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Uw({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Fe.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Fe.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Te.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Te.CHANGE,e)}ready(){return this.iconImage_.ready()}},po=0;const hn=1<<po++,ze=1<<po++,Sn=1<<po++,Pi=1<<po++,uo=1<<po++,Na=1<<po++,Zc=Math.pow(2,po)-1,Em={[hn]:"boolean",[ze]:"number",[Sn]:"string",[Pi]:"color",[uo]:"number[]",[Na]:"size"},XI=Object.keys(Em).map(Number).sort(Ui);function HI(i){return i in Em}function za(i){const e=[];for(const t of XI)ja(i,t)&&e.push(Em[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function ja(i,e){return(i&e)===e}function ts(i,e){return i===e}class Lt{constructor(e,t){if(!HI(e))throw new Error(`literal expressions must have a specific type, got ${za(e)}`);this.type=e,this.value=t}}class YI{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function Xw(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function Bt(i,e,t){switch(typeof i){case"boolean":{if(ts(e,Sn))return new Lt(Sn,i?"true":"false");if(!ja(e,hn))throw new Error(`got a boolean, but expected ${za(e)}`);return new Lt(hn,i)}case"number":{if(ts(e,Na))return new Lt(Na,tn(i));if(ts(e,hn))return new Lt(hn,!!i);if(ts(e,Sn))return new Lt(Sn,i.toString());if(!ja(e,ze))throw new Error(`got a number, but expected ${za(e)}`);return new Lt(ze,i)}case"string":{if(ts(e,Pi))return new Lt(Pi,dm(i));if(ts(e,hn))return new Lt(hn,!!i);if(!ja(e,Sn))throw new Error(`got a string, but expected ${za(e)}`);return new Lt(Sn,i)}}if(!Array.isArray(i))throw new Error("expression must be an array or a primitive value");if(i.length===0)throw new Error("empty expression");if(typeof i[0]=="string")return r2(i,e,t);for(const n of i)if(typeof n!="number")throw new Error("expected an array of numbers");if(ts(e,Na)){if(i.length!==2)throw new Error(`expected an array of two values for a size, got ${i.length}`);return new Lt(Na,i)}if(ts(e,Pi)){if(i.length===3)return new Lt(Pi,[...i,1]);if(i.length===4)return new Lt(Pi,i);throw new Error(`expected an array of 3 or 4 values for a color, got ${i.length}`)}if(!ja(e,uo))throw new Error(`got an array of numbers, but expected ${za(e)}`);return new Lt(uo,i)}const $={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},KI={[$.Get]:Ie(Me(1,1/0),bv),[$.Var]:Ie(Me(1,1),$I),[$.Has]:Ie(Me(1,1/0),bv),[$.Id]:Ie(ZI,Yo),[$.Concat]:Ie(Me(2,1/0),Xe(Sn)),[$.GeometryType]:Ie(qI,Yo),[$.LineMetric]:Ie(Yo),[$.Resolution]:Ie(Yo),[$.Zoom]:Ie(Yo),[$.Time]:Ie(Yo),[$.Any]:Ie(Me(2,1/0),Xe(hn)),[$.All]:Ie(Me(2,1/0),Xe(hn)),[$.Not]:Ie(Me(1,1),Xe(hn)),[$.Equal]:Ie(Me(2,2),Xe(Zc)),[$.NotEqual]:Ie(Me(2,2),Xe(Zc)),[$.GreaterThan]:Ie(Me(2,2),Xe(ze)),[$.GreaterThanOrEqualTo]:Ie(Me(2,2),Xe(ze)),[$.LessThan]:Ie(Me(2,2),Xe(ze)),[$.LessThanOrEqualTo]:Ie(Me(2,2),Xe(ze)),[$.Multiply]:Ie(Me(2,1/0),Ov),[$.Coalesce]:Ie(Me(2,1/0),Ov),[$.Divide]:Ie(Me(2,2),Xe(ze)),[$.Add]:Ie(Me(2,1/0),Xe(ze)),[$.Subtract]:Ie(Me(2,2),Xe(ze)),[$.Clamp]:Ie(Me(3,3),Xe(ze)),[$.Mod]:Ie(Me(2,2),Xe(ze)),[$.Pow]:Ie(Me(2,2),Xe(ze)),[$.Abs]:Ie(Me(1,1),Xe(ze)),[$.Floor]:Ie(Me(1,1),Xe(ze)),[$.Ceil]:Ie(Me(1,1),Xe(ze)),[$.Round]:Ie(Me(1,1),Xe(ze)),[$.Sin]:Ie(Me(1,1),Xe(ze)),[$.Cos]:Ie(Me(1,1),Xe(ze)),[$.Atan]:Ie(Me(1,2),Xe(ze)),[$.Sqrt]:Ie(Me(1,1),Xe(ze)),[$.Match]:Ie(Me(4,1/0),Fv,JI),[$.Between]:Ie(Me(3,3),Xe(ze)),[$.Interpolate]:Ie(Me(6,1/0),Fv,e2),[$.Case]:Ie(Me(3,1/0),QI,t2),[$.In]:Ie(Me(2,2),n2),[$.Number]:Ie(Me(1,1/0),Xe(Zc)),[$.String]:Ie(Me(1,1/0),Xe(Zc)),[$.Array]:Ie(Me(1,1/0),Xe(ze)),[$.Color]:Ie(Me(1,4),Xe(ze)),[$.Band]:Ie(Me(1,3),Xe(ze)),[$.Palette]:Ie(Me(2,2),i2),[$.ToString]:Ie(Me(1,1),Xe(hn|ze|Sn|Pi))};function bv(i,e,t){const n=i.length-1,r=new Array(n);for(let o=0;o<n;++o){const a=i[o+1];switch(typeof a){case"number":{r[o]=new Lt(ze,a);break}case"string":{r[o]=new Lt(Sn,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}o===0&&t.properties.add(String(a))}return r}function $I(i,e,t){const n=i[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return t.variables.add(n),[new Lt(Sn,n)]}function ZI(i,e,t){t.featureId=!0}function qI(i,e,t){t.geometryType=!0}function Yo(i,e,t){const n=i[0];if(i.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function Me(i,e){return function(t,n,r){const o=t[0],a=t.length-1;if(i===e){if(a!==i){const u=i===1?"":"s";throw new Error(`expected ${i} argument${u} for ${o}, got ${a}`)}}else if(a<i||a>e){const u=e===1/0?`${i} or more`:`${i} to ${e}`;throw new Error(`expected ${u} arguments for ${o}, got ${a}`)}}}function Ov(i,e,t){const n=i.length-1,r=new Array(n);for(let o=0;o<n;++o){const a=Bt(i[o+1],e,t);r[o]=a}return r}function Xe(i){return function(e,t,n){const r=e.length-1,o=new Array(r);for(let a=0;a<r;++a){const u=Bt(e[a+1],i,n);o[a]=u}return o}}function QI(i,e,t){const n=i[0],r=i.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${r} instead`)}function Fv(i,e,t){const n=i[0],r=i.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${r} instead`)}function JI(i,e,t){const n=i.length-1,r=Sn|ze|hn,o=Bt(i[1],r,t),a=Bt(i[i.length-1],e,t),u=new Array(n-2);for(let c=0;c<n-2;c+=2){try{const d=Bt(i[c+2],o.type,t);u[c]=d}catch(d){throw new Error(`failed to parse argument ${c+1} of match expression: ${d.message}`)}try{const d=Bt(i[c+3],a.type,t);u[c+1]=d}catch(d){throw new Error(`failed to parse argument ${c+2} of match expression: ${d.message}`)}}return[o,...u,a]}function e2(i,e,t){const n=i[1];let r;switch(n[0]){case"linear":r=1;break;case"exponential":const c=n[1];if(typeof c!="number"||c<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);r=c;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const o=new Lt(ze,r);let a;try{a=Bt(i[2],ze,t)}catch(c){throw new Error(`failed to parse argument 1 in interpolate expression: ${c.message}`)}const u=new Array(i.length-3);for(let c=0;c<u.length;c+=2){try{const d=Bt(i[c+3],ze,t);u[c]=d}catch(d){throw new Error(`failed to parse argument ${c+2} for interpolate expression: ${d.message}`)}try{const d=Bt(i[c+4],e,t);u[c+1]=d}catch(d){throw new Error(`failed to parse argument ${c+3} for interpolate expression: ${d.message}`)}}return[o,a,...u]}function t2(i,e,t){const n=Bt(i[i.length-1],e,t),r=new Array(i.length-1);for(let o=0;o<r.length-1;o+=2){try{const a=Bt(i[o+1],hn,t);r[o]=a}catch(a){throw new Error(`failed to parse argument ${o} of case expression: ${a.message}`)}try{const a=Bt(i[o+2],n.type,t);r[o+1]=a}catch(a){throw new Error(`failed to parse argument ${o+1} of case expression: ${a.message}`)}}return r[r.length-1]=n,r}function n2(i,e,t){let n=i[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],r=Sn}else r=ze;const o=new Array(n.length);for(let u=0;u<o.length;u++)try{const c=Bt(n[u],r,t);o[u]=c}catch(c){throw new Error(`failed to parse haystack item ${u} for "in" expression: ${c.message}`)}return[Bt(i[1],r,t),...o]}function i2(i,e,t){let n;try{n=Bt(i[1],ze,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const r=i[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const o=new Array(r.length);for(let a=0;a<o.length;a++){let u;try{u=Bt(r[a],Pi,t)}catch(c){throw new Error(`failed to parse color at index ${a} in palette expression: ${c.message}`)}if(!(u instanceof Lt))throw new Error(`the palette color at index ${a} must be a literal value`);o[a]=u}return[n,...o]}function Ie(...i){return function(e,t,n){const r=e[0];let o;for(let a=0;a<i.length;a++){const u=i[a](e,t,n);if(a==i.length-1){if(!u)throw new Error("expected last argument validator to return the parsed args");o=u}}return new YI(t,r,...o)}}function r2(i,e,t){const n=i[0],r=KI[n];if(!r)throw new Error(`unknown operator: ${n}`);return r(i,e,t)}function Hw(i){if(!i)return"";const e=i.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Hw(i.getGeometries()[0]);default:return""}}function Yw(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function br(i,e,t){const n=Bt(i,e,t);return Li(n)}function Li(i,e){if(i instanceof Lt){if(i.type===Pi&&typeof i.value=="string"){const n=dm(i.value);return function(){return n}}return function(){return i.value}}const t=i.operator;switch(t){case $.Number:case $.String:case $.Coalesce:return s2(i);case $.Get:case $.Var:case $.Has:return o2(i);case $.Id:return n=>n.featureId;case $.GeometryType:return n=>n.geometryType;case $.Concat:{const n=i.args.map(r=>Li(r));return r=>"".concat(...n.map(o=>o(r).toString()))}case $.Resolution:return n=>n.resolution;case $.Any:case $.All:case $.Between:case $.In:case $.Not:return a2(i);case $.Equal:case $.NotEqual:case $.LessThan:case $.LessThanOrEqualTo:case $.GreaterThan:case $.GreaterThanOrEqualTo:return l2(i);case $.Multiply:case $.Divide:case $.Add:case $.Subtract:case $.Clamp:case $.Mod:case $.Pow:case $.Abs:case $.Floor:case $.Ceil:case $.Round:case $.Sin:case $.Cos:case $.Atan:case $.Sqrt:return u2(i);case $.Case:return c2(i);case $.Match:return h2(i);case $.Interpolate:return d2(i);case $.ToString:return f2(i);default:throw new Error(`Unsupported operator ${t}`)}}function s2(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let o=0;o<n;++o)r[o]=Li(i.args[o]);switch(t){case $.Coalesce:return o=>{for(let a=0;a<n;++a){const u=r[a](o);if(typeof u<"u"&&u!==null)return u}throw new Error("Expected one of the values to be non-null")};case $.Number:case $.String:return o=>{for(let a=0;a<n;++a){const u=r[a](o);if(typeof u===t)return u}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function o2(i,e){const n=i.args[0].value;switch(i.operator){case $.Get:return r=>{const o=i.args;let a=r.properties[n];for(let u=1,c=o.length;u<c;++u){const f=o[u].value;a=a[f]}return a};case $.Var:return r=>r.variables[n];case $.Has:return r=>{const o=i.args;if(!(n in r.properties))return!1;let a=r.properties[n];for(let u=1,c=o.length;u<c;++u){const f=o[u].value;if(!a||!Object.hasOwn(a,f))return!1;a=a[f]}return!0};default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function l2(i,e){const t=i.operator,n=Li(i.args[0]),r=Li(i.args[1]);switch(t){case $.Equal:return o=>n(o)===r(o);case $.NotEqual:return o=>n(o)!==r(o);case $.LessThan:return o=>n(o)<r(o);case $.LessThanOrEqualTo:return o=>n(o)<=r(o);case $.GreaterThan:return o=>n(o)>r(o);case $.GreaterThanOrEqualTo:return o=>n(o)>=r(o);default:throw new Error(`Unsupported comparison operator ${t}`)}}function a2(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let o=0;o<n;++o)r[o]=Li(i.args[o]);switch(t){case $.Any:return o=>{for(let a=0;a<n;++a)if(r[a](o))return!0;return!1};case $.All:return o=>{for(let a=0;a<n;++a)if(!r[a](o))return!1;return!0};case $.Between:return o=>{const a=r[0](o),u=r[1](o),c=r[2](o);return a>=u&&a<=c};case $.In:return o=>{const a=r[0](o);for(let u=1;u<n;++u)if(a===r[u](o))return!0;return!1};case $.Not:return o=>!r[0](o);default:throw new Error(`Unsupported logical operator ${t}`)}}function u2(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let o=0;o<n;++o)r[o]=Li(i.args[o]);switch(t){case $.Multiply:return o=>{let a=1;for(let u=0;u<n;++u)a*=r[u](o);return a};case $.Divide:return o=>r[0](o)/r[1](o);case $.Add:return o=>{let a=0;for(let u=0;u<n;++u)a+=r[u](o);return a};case $.Subtract:return o=>r[0](o)-r[1](o);case $.Clamp:return o=>{const a=r[0](o),u=r[1](o);if(a<u)return u;const c=r[2](o);return a>c?c:a};case $.Mod:return o=>r[0](o)%r[1](o);case $.Pow:return o=>Math.pow(r[0](o),r[1](o));case $.Abs:return o=>Math.abs(r[0](o));case $.Floor:return o=>Math.floor(r[0](o));case $.Ceil:return o=>Math.ceil(r[0](o));case $.Round:return o=>Math.round(r[0](o));case $.Sin:return o=>Math.sin(r[0](o));case $.Cos:return o=>Math.cos(r[0](o));case $.Atan:return n===2?o=>Math.atan2(r[0](o),r[1](o)):o=>Math.atan(r[0](o));case $.Sqrt:return o=>Math.sqrt(r[0](o));default:throw new Error(`Unsupported numeric operator ${t}`)}}function c2(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=Li(i.args[r]);return r=>{for(let o=0;o<t-1;o+=2)if(n[o](r))return n[o+1](r);return n[t-1](r)}}function h2(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=Li(i.args[r]);return r=>{const o=n[0](r);for(let a=1;a<t;a+=2)if(o===n[a](r))return n[a+1](r);return n[t-1](r)}}function d2(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=Li(i.args[r]);return r=>{const o=n[0](r),a=n[1](r);let u,c;for(let d=2;d<t;d+=2){const f=n[d](r);let p=n[d+1](r);const m=Array.isArray(p);if(m&&(p=sI(p)),f>=a)return d===2?p:m?g2(o,a,u,c,f,p):Ga(o,a,u,c,f,p);u=f,c=p}return c}}function f2(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let o=0;o<n;++o)r[o]=Li(i.args[o]);switch(t){case $.ToString:return o=>{const a=r[0](o);return i.args[0].type===Pi?fm(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Ga(i,e,t,n,r,o){const a=r-t;if(a===0)return n;const u=e-t,c=i===1?u/a:(Math.pow(i,u)-1)/(Math.pow(i,a)-1);return n+c*(o-n)}function g2(i,e,t,n,r,o){if(r-t===0)return n;const u=wv(n),c=wv(o);let d=c[2]-u[2];d>180?d-=360:d<-180&&(d+=360);const f=[Ga(i,e,t,u[0],r,c[0]),Ga(i,e,t,u[1],r,c[1]),u[2]+Ga(i,e,t,0,r,d),Ga(i,e,t,n[3],r,o[3])];return Tw(oI(f))}function p2(i){return!0}function m2(i){const e=Xw(),t=y2(i,e),n=Yw();return function(r,o){if(n.properties=r.getPropertiesInternal(),n.resolution=o,e.featureId){const a=r.getId();a!==void 0?n.featureId=a:n.featureId=null}return e.geometryType&&(n.geometryType=Hw(r.getGeometry())),t(n)}}function Dv(i){const e=Xw(),t=i.length,n=new Array(t);for(let a=0;a<t;++a)n[a]=lp(i[a],e);const r=Yw(),o=new Array(t);return function(a,u){if(r.properties=a.getPropertiesInternal(),r.resolution=u,e.featureId){const d=a.getId();d!==void 0?r.featureId=d:r.featureId=null}let c=0;for(let d=0;d<t;++d){const f=n[d](r);f&&(o[c]=f,c+=1)}return o.length=c,o}}function y2(i,e){const t=i.length,n=new Array(t);for(let r=0;r<t;++r){const o=i[r],a="filter"in o?br(o.filter,hn,e):p2;let u;if(Array.isArray(o.style)){const c=o.style.length;u=new Array(c);for(let d=0;d<c;++d)u[d]=lp(o.style[d],e)}else u=[lp(o.style,e)];n[r]={filter:a,styles:u}}return function(r){const o=[];let a=!1;for(let u=0;u<t;++u){const c=n[u].filter;if(c(r)&&!(i[u].else&&a)){a=!0;for(const d of n[u].styles){const f=d(r);f&&o.push(f)}}}return o}}function lp(i,e){const t=ru(i,"",e),n=su(i,"",e),r=_2(i,e),o=v2(i,e),a=Rn(i,"z-index",e);if(!t&&!n&&!r&&!o&&!lo(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const u=new Tn;return function(c){let d=!0;if(t){const f=t(c);f&&(d=!1),u.setFill(f)}if(n){const f=n(c);f&&(d=!1),u.setStroke(f)}if(r){const f=r(c);f&&(d=!1),u.setText(f)}if(o){const f=o(c);f&&(d=!1),u.setImage(f)}return a&&u.setZIndex(a(c)),d?null:u}}function ru(i,e,t){let n;if(e+"fill-pattern-src"in i)n=C2(i,e+"fill-",t);else{if(i[e+"fill-color"]==="none")return o=>null;n=Cm(i,e+"fill-color",t)}if(!n)return null;const r=new Zi;return function(o){const a=n(o);return a===hm?null:(r.setColor(a),r)}}function su(i,e,t){const n=Rn(i,e+"stroke-width",t),r=Cm(i,e+"stroke-color",t);if(!n&&!r)return null;const o=mr(i,e+"stroke-line-cap",t),a=mr(i,e+"stroke-line-join",t),u=Kw(i,e+"stroke-line-dash",t),c=Rn(i,e+"stroke-line-dash-offset",t),d=Rn(i,e+"stroke-miter-limit",t),f=new Yi;return function(p){if(r){const m=r(p);if(m===hm)return null;f.setColor(m)}if(n&&f.setWidth(n(p)),o){const m=o(p);if(m!=="butt"&&m!=="round"&&m!=="square")throw new Error("Expected butt, round, or square line cap");f.setLineCap(m)}if(a){const m=a(p);if(m!=="bevel"&&m!=="round"&&m!=="miter")throw new Error("Expected bevel, round, or miter line join");f.setLineJoin(m)}return u&&f.setLineDash(u(p)),c&&f.setLineDashOffset(c(p)),d&&f.setMiterLimit(d(p)),f}}function _2(i,e){const t="text-",n=mr(i,t+"value",e);if(!n)return null;const r=ru(i,t,e),o=ru(i,t+"background-",e),a=su(i,t,e),u=su(i,t+"background-",e),c=mr(i,t+"font",e),d=Rn(i,t+"max-angle",e),f=Rn(i,t+"offset-x",e),p=Rn(i,t+"offset-y",e),m=ou(i,t+"overflow",e),_=mr(i,t+"placement",e),v=Rn(i,t+"repeat",e),w=cd(i,t+"scale",e),E=ou(i,t+"rotate-with-view",e),C=Rn(i,t+"rotation",e),S=mr(i,t+"align",e),T=mr(i,t+"justify",e),I=mr(i,t+"baseline",e),L=Kw(i,t+"padding",e),N=hd(i,t+"declutter-mode"),b=new ad({declutterMode:N});return function(D){if(b.setText(n(D)),r&&b.setFill(r(D)),o&&b.setBackgroundFill(o(D)),a&&b.setStroke(a(D)),u&&b.setBackgroundStroke(u(D)),c&&b.setFont(c(D)),d&&b.setMaxAngle(d(D)),f&&b.setOffsetX(f(D)),p&&b.setOffsetY(p(D)),m&&b.setOverflow(m(D)),_){const z=_(D);if(z!=="point"&&z!=="line")throw new Error("Expected point or line for text-placement");b.setPlacement(z)}if(v&&b.setRepeat(v(D)),w&&b.setScale(w(D)),E&&b.setRotateWithView(E(D)),C&&b.setRotation(C(D)),S){const z=S(D);if(z!=="left"&&z!=="center"&&z!=="right"&&z!=="end"&&z!=="start")throw new Error("Expected left, right, center, start, or end for text-align");b.setTextAlign(z)}if(T){const z=T(D);if(z!=="left"&&z!=="right"&&z!=="center")throw new Error("Expected left, right, or center for text-justify");b.setJustify(z)}if(I){const z=I(D);if(z!=="bottom"&&z!=="top"&&z!=="middle"&&z!=="alphabetic"&&z!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");b.setTextBaseline(z)}return L&&b.setPadding(L(D)),b}}function v2(i,e){return"icon-src"in i?x2(i,e):"shape-points"in i?w2(i,e):"circle-radius"in i?E2(i,e):null}function x2(i,e){const t="icon-",n=t+"src",r=$w(i[n],n),o=kh(i,t+"anchor",e),a=cd(i,t+"scale",e),u=Rn(i,t+"opacity",e),c=kh(i,t+"displacement",e),d=Rn(i,t+"rotation",e),f=ou(i,t+"rotate-with-view",e),p=zv(i,t+"anchor-origin"),m=jv(i,t+"anchor-x-units"),_=jv(i,t+"anchor-y-units"),v=P2(i,t+"color"),w=R2(i,t+"cross-origin"),E=T2(i,t+"offset"),C=zv(i,t+"offset-origin"),S=Ah(i,t+"width"),T=Ah(i,t+"height"),I=S2(i,t+"size"),L=hd(i,t+"declutter-mode"),N=new wm({src:r,anchorOrigin:p,anchorXUnits:m,anchorYUnits:_,color:v,crossOrigin:w,offset:E,offsetOrigin:C,height:T,width:S,size:I,declutterMode:L});return function(b){return u&&N.setOpacity(u(b)),c&&N.setDisplacement(c(b)),d&&N.setRotation(d(b)),f&&N.setRotateWithView(f(b)),a&&N.setScale(a(b)),o&&N.setAnchor(o(b)),N}}function w2(i,e){const t="shape-",n=t+"points",r=t+"radius",o=ap(i[n],n),a=ap(i[r],r),u=ru(i,t,e),c=su(i,t,e),d=cd(i,t+"scale",e),f=kh(i,t+"displacement",e),p=Rn(i,t+"rotation",e),m=ou(i,t+"rotate-with-view",e),_=Ah(i,t+"radius2"),v=Ah(i,t+"angle"),w=hd(i,t+"declutter-mode"),E=new wu({points:o,radius:a,radius2:_,angle:v,declutterMode:w});return function(C){return u&&E.setFill(u(C)),c&&E.setStroke(c(C)),f&&E.setDisplacement(f(C)),p&&E.setRotation(p(C)),m&&E.setRotateWithView(m(C)),d&&E.setScale(d(C)),E}}function E2(i,e){const t="circle-",n=ru(i,t,e),r=su(i,t,e),o=Rn(i,t+"radius",e),a=cd(i,t+"scale",e),u=kh(i,t+"displacement",e),c=Rn(i,t+"rotation",e),d=ou(i,t+"rotate-with-view",e),f=hd(i,t+"declutter-mode"),p=new Dl({radius:5,declutterMode:f});return function(m){return o&&p.setRadius(o(m)),n&&p.setFill(n(m)),r&&p.setStroke(r(m)),u&&p.setDisplacement(u(m)),c&&p.setRotation(c(m)),d&&p.setRotateWithView(d(m)),a&&p.setScale(a(m)),p}}function Rn(i,e,t){if(!(e in i))return;const n=br(i[e],ze,t);return function(r){return ap(n(r),e)}}function mr(i,e,t){if(!(e in i))return null;const n=br(i[e],Sn,t);return function(r){return $w(n(r),e)}}function C2(i,e,t){const n=mr(i,e+"pattern-src",t),r=Nv(i,e+"pattern-offset",t),o=Nv(i,e+"pattern-size",t),a=Cm(i,e+"color",t);return function(u){return{src:n(u),offset:r&&r(u),size:o&&o(u),color:a&&a(u)}}}function ou(i,e,t){if(!(e in i))return null;const n=br(i[e],hn,t);return function(r){const o=n(r);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function Cm(i,e,t){if(!(e in i))return null;const n=br(i[e],Pi,t);return function(r){return Zw(n(r),e)}}function Kw(i,e,t){if(!(e in i))return null;const n=br(i[e],uo,t);return function(r){return Eu(n(r),e)}}function kh(i,e,t){if(!(e in i))return null;const n=br(i[e],uo,t);return function(r){const o=Eu(n(r),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function Nv(i,e,t){if(!(e in i))return null;const n=br(i[e],uo,t);return function(r){return qw(n(r),e)}}function cd(i,e,t){if(!(e in i))return null;const n=br(i[e],uo|ze,t);return function(r){return I2(n(r),e)}}function Ah(i,e){const t=i[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function S2(i,e){const t=i[e];if(t!==void 0){if(typeof t=="number")return tn(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function R2(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function zv(i,e){const t=i[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function jv(i,e){const t=i[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function T2(i,e){const t=i[e];if(t!==void 0)return Eu(t,e)}function hd(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function P2(i,e){const t=i[e];if(t!==void 0)return Zw(t,e)}function Eu(i,e){if(!Array.isArray(i))throw new Error(`Expected an array for ${e}`);const t=i.length;for(let n=0;n<t;++n)if(typeof i[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return i}function $w(i,e){if(typeof i!="string")throw new Error(`Expected a string for ${e}`);return i}function ap(i,e){if(typeof i!="number")throw new Error(`Expected a number for ${e}`);return i}function Zw(i,e){if(typeof i=="string")return i;const t=Eu(i,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function qw(i,e){const t=Eu(i,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function I2(i,e){return typeof i=="number"?i:qw(i,e)}const Gv={RENDER_ORDER:"renderOrder"};class Sm extends ud{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Gv.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new Vw(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Gv.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?Nw:e;const t=L2(e);this.styleFunction_=e===null?void 0:TI(t),this.changed()}}function L2(i){if(i===void 0)return Nw;if(!i)return null;if(typeof i=="function"||i instanceof Tn)return i;if(!Array.isArray(i))return Dv([i]);if(i.length===0)return[];const e=i.length,t=i[0];if(t instanceof Tn){const r=new Array(e);for(let o=0;o<e;++o){const a=i[o];if(!(a instanceof Tn))throw new Error("Expected a list of style instances");r[o]=a}return r}if("style"in t){const r=new Array(e);for(let o=0;o<e;++o){const a=i[o];if(!("style"in a))throw new Error("Expected a list of rules with a style property");r[o]=a}return m2(r)}return Dv(i)}const we={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},qc=[we.FILL],ys=[we.STROKE],ro=[we.BEGIN_PATH],Wv=[we.CLOSE_PATH];class Qw{drawCustom(e,t,n,r,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class Cu extends Qw{constructor(e,t,n,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,o=this.coordinates;let a=o.length;for(let u=0,c=e.length;u<c;u+=t)r[0]=e[u],r[1]=e[u+1],Sl(n,r)&&(o[a++]=r[0],o[a++]=r[1]);return a}appendFlatLineCoordinates(e,t,n,r,o,a){const u=this.coordinates;let c=u.length;const d=this.getBufferedMaxExtent();a&&(t+=r);let f=e[t],p=e[t+1];const m=this.tmpCoordinate_;let _=!0,v,w,E;for(v=t+r;v<n;v+=r)m[0]=e[v],m[1]=e[v+1],E=Qg(d,m),E!==w?(_&&(u[c++]=f,u[c++]=p,_=!1),u[c++]=m[0],u[c++]=m[1]):E===Nt.INTERSECTING?(u[c++]=m[0],u[c++]=m[1],_=!1):_=!0,f=m[0],p=m[1],w=E;return(o&&_||v===t+r)&&(u[c++]=f,u[c++]=p),c}drawCustomCoordinates_(e,t,n,r,o){for(let a=0,u=n.length;a<u;++a){const c=n[a],d=this.appendFlatLineCoordinates(e,t,c,r,!1,!1);o.push(d),t=c}return t}drawCustom(e,t,n,r,o){this.beginGeometry(e,t,o);const a=e.getType(),u=e.getStride(),c=this.coordinates.length;let d,f,p,m,_;switch(a){case"MultiPolygon":d=e.getOrientedFlatCoordinates(),m=[];const v=e.getEndss();_=0;for(let w=0,E=v.length;w<E;++w){const C=[];_=this.drawCustomCoordinates_(d,_,v[w],u,C),m.push(C)}this.instructions.push([we.CUSTOM,c,m,e,n,np,o]),this.hitDetectionInstructions.push([we.CUSTOM,c,m,e,r||n,np,o]);break;case"Polygon":case"MultiLineString":p=[],d=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),_=this.drawCustomCoordinates_(d,0,e.getEnds(),u,p),this.instructions.push([we.CUSTOM,c,p,e,n,Za,o]),this.hitDetectionInstructions.push([we.CUSTOM,c,p,e,r||n,Za,o]);break;case"LineString":case"Circle":d=e.getFlatCoordinates(),f=this.appendFlatLineCoordinates(d,0,d.length,u,!1,!1),this.instructions.push([we.CUSTOM,c,f,e,n,ms,o]),this.hitDetectionInstructions.push([we.CUSTOM,c,f,e,r||n,ms,o]);break;case"MultiPoint":d=e.getFlatCoordinates(),f=this.appendFlatPointCoordinates(d,u),f>c&&(this.instructions.push([we.CUSTOM,c,f,e,n,ms,o]),this.hitDetectionInstructions.push([we.CUSTOM,c,f,e,r||n,ms,o]));break;case"Point":d=e.getFlatCoordinates(),this.coordinates.push(d[0],d[1]),f=this.coordinates.length,this.instructions.push([we.CUSTOM,c,f,e,n,void 0,o]),this.hitDetectionInstructions.push([we.CUSTOM,c,f,e,r||n,void 0,o]);break}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[we.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[we.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let r,o,a=-1;for(t=0;t<n;++t)r=e[t],o=r[0],o==we.END_GEOMETRY?a=t:o==we.BEGIN_GEOMETRY&&(r[2]=t,eP(this.hitDetectionInstructions,a,t),a=-1)}setFillStrokeStyle(e,t){const n=this.state;if(e){const r=e.getColor();n.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,n.fillStyle=Vi(r||Cn)}else n.fillStyle=void 0;if(t){const r=t.getColor();n.strokeStyle=Vi(r||tu);const o=t.getLineCap();n.lineCap=o!==void 0?o:Il;const a=t.getLineDash();n.lineDash=a?a.slice():Er;const u=t.getLineDashOffset();n.lineDashOffset=u||Cr;const c=t.getLineJoin();n.lineJoin=c!==void 0?c:Ll;const d=t.getWidth();n.lineWidth=d!==void 0?d:iu;const f=t.getMiterLimit();n.miterLimit=f!==void 0?f:eu,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[we.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[we.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,r=e.lineCap,o=e.lineDash,a=e.lineDashOffset,u=e.lineJoin,c=e.lineWidth,d=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=r||o!=e.currentLineDash&&!Mr(e.currentLineDash,o)||e.currentLineDashOffset!=a||e.currentLineJoin!=u||e.currentLineWidth!=c||e.currentMiterLimit!=d)&&(n!==void 0&&t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=r,e.currentLineDash=o,e.currentLineDashOffset=a,e.currentLineJoin=u,e.currentLineWidth=c,e.currentMiterLimit=d)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[we.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=lw(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;xr(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class k2 extends Cu{constructor(e,t,n,r){super(e,t,n,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!Sl(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);const r=e.getFlatCoordinates(),o=e.getStride(),a=this.coordinates.length,u=this.appendFlatPointCoordinates(r,o);this.instructions.push([we.DRAW_IMAGE,a,u,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([we.DRAW_IMAGE,a,u,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);const r=e.getFlatCoordinates(),o=[];for(let c=0,d=r.length;c<d;c+=e.getStride())(!this.maxExtent||Sl(this.maxExtent,r.slice(c,c+2)))&&o.push(r[c],r[c+1]);const a=this.coordinates.length,u=this.appendFlatPointCoordinates(o,2);this.instructions.push([we.DRAW_IMAGE,a,u,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([we.DRAW_IMAGE,a,u,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),r=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class A2 extends Cu{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinates_(e,t,n,r){const o=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,n,r,!1,!1),u=[we.MOVE_TO_LINE_TO,o,a];return this.instructions.push(u),this.hitDetectionInstructions.push(u),n}drawLineString(e,t,n){const r=this.state,o=r.strokeStyle,a=r.lineWidth;if(o===void 0||a===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([we.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Er,Cr],ro);const u=e.getFlatCoordinates(),c=e.getStride();this.drawFlatCoordinates_(u,0,u.length,c),this.hitDetectionInstructions.push(ys),this.endGeometry(t)}drawMultiLineString(e,t,n){const r=this.state,o=r.strokeStyle,a=r.lineWidth;if(o===void 0||a===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([we.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Er,Cr],ro);const u=e.getEnds(),c=e.getFlatCoordinates(),d=e.getStride();let f=0;for(let p=0,m=u.length;p<m;++p)f=this.drawFlatCoordinates_(c,f,u[p],d);this.hitDetectionInstructions.push(ys),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(ys),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(ys),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(ro)}}class Bv extends Cu{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinatess_(e,t,n,r){const o=this.state,a=o.fillStyle!==void 0,u=o.strokeStyle!==void 0,c=n.length;this.instructions.push(ro),this.hitDetectionInstructions.push(ro);for(let d=0;d<c;++d){const f=n[d],p=this.coordinates.length,m=this.appendFlatLineCoordinates(e,t,f,r,!0,!u),_=[we.MOVE_TO_LINE_TO,p,m];this.instructions.push(_),this.hitDetectionInstructions.push(_),u&&(this.instructions.push(Wv),this.hitDetectionInstructions.push(Wv)),t=f}return a&&(this.instructions.push(qc),this.hitDetectionInstructions.push(qc)),u&&(this.instructions.push(ys),this.hitDetectionInstructions.push(ys)),t}drawCircle(e,t,n){const r=this.state,o=r.fillStyle,a=r.strokeStyle;if(o===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([we.SET_FILL_STYLE,Cn]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([we.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Er,Cr]);const u=e.getFlatCoordinates(),c=e.getStride(),d=this.coordinates.length;this.appendFlatLineCoordinates(u,0,u.length,c,!1,!1);const f=[we.CIRCLE,d];this.instructions.push(ro,f),this.hitDetectionInstructions.push(ro,f),r.fillStyle!==void 0&&(this.instructions.push(qc),this.hitDetectionInstructions.push(qc)),r.strokeStyle!==void 0&&(this.instructions.push(ys),this.hitDetectionInstructions.push(ys)),this.endGeometry(t)}drawPolygon(e,t,n){const r=this.state,o=r.fillStyle,a=r.strokeStyle;if(o===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([we.SET_FILL_STYLE,Cn]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([we.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Er,Cr]);const u=e.getEnds(),c=e.getOrientedFlatCoordinates(),d=e.getStride();this.drawFlatCoordinatess_(c,0,u,d),this.endGeometry(t)}drawMultiPolygon(e,t,n){const r=this.state,o=r.fillStyle,a=r.strokeStyle;if(o===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([we.SET_FILL_STYLE,Cn]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([we.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Er,Cr]);const u=e.getEndss(),c=e.getOrientedFlatCoordinates(),d=e.getStride();let f=0;for(let p=0,m=u.length;p<m;++p)f=this.drawFlatCoordinatess_(c,f,u[p],d);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,r=t.length;n<r;++n)t[n]=Js(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function M2(i,e,t,n,r){const o=[];let a=t,u=0,c=e.slice(t,2);for(;u<i&&a+r<n;){const[d,f]=c.slice(-2),p=e[a+r],m=e[a+r+1],_=Math.sqrt((p-d)*(p-d)+(m-f)*(m-f));if(u+=_,u>=i){const v=(i-u+_)/_,w=zn(d,p,v),E=zn(f,m,v);c.push(w,E),o.push(c),c=[w,E],u==i&&(a+=r),u=0}else if(u<i)c.push(e[a+r],e[a+r+1]),a+=r;else{const v=_-u,w=zn(d,p,v/_),E=zn(f,m,v/_);c.push(w,E),o.push(c),c=[w,E],u=0,a+=r}}return u>0&&o.push(c),o}function b2(i,e,t,n,r){let o=t,a=t,u=0,c=0,d=t,f,p,m,_,v,w,E,C,S,T;for(p=t;p<n;p+=r){const I=e[p],L=e[p+1];v!==void 0&&(S=I-v,T=L-w,_=Math.sqrt(S*S+T*T),E!==void 0&&(c+=m,f=Math.acos((E*S+C*T)/(m*_)),f>i&&(c>u&&(u=c,o=d,a=p),c=0,d=p-r)),m=_,E=S,C=T),v=I,w=L}return c+=_,c>u?[d,p]:[o,a]}const Mh={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class O2 extends Cu{constructor(e,t,n,r){super(e,t,n,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Cn]={fillStyle:Cn},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){const r=this.textFillState_,o=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!r&&!o)return;const u=this.coordinates;let c=u.length;const d=e.getType();let f=null,p=e.getStride();if(a.placement==="line"&&(d=="LineString"||d=="MultiLineString"||d=="Polygon"||d=="MultiPolygon")){if(!wt(this.maxExtent,e.getExtent()))return;let m;if(f=e.getFlatCoordinates(),d=="LineString")m=[f.length];else if(d=="MultiLineString")m=e.getEnds();else if(d=="Polygon")m=e.getEnds().slice(0,1);else if(d=="MultiPolygon"){const E=e.getEndss();m=[];for(let C=0,S=E.length;C<S;++C)m.push(E[C][0])}this.beginGeometry(e,t,n);const _=a.repeat,v=_?void 0:a.textAlign;let w=0;for(let E=0,C=m.length;E<C;++E){let S;_?S=M2(_*this.resolution,f,w,m[E],p):S=[f.slice(w,m[E])];for(let T=0,I=S.length;T<I;++T){const L=S[T];let N=0,b=L.length;if(v==null){const z=b2(a.maxAngle,L,0,L.length,2);N=z[0],b=z[1]}for(let z=N;z<b;z+=p)u.push(L[z],L[z+1]);const D=u.length;w=m[E],this.drawChars_(c,D),c=D}}this.endGeometry(t)}else{let m=a.overflow?null:[];switch(d){case"Point":case"MultiPoint":f=e.getFlatCoordinates();break;case"LineString":f=e.getFlatMidpoint();break;case"Circle":f=e.getCenter();break;case"MultiLineString":f=e.getFlatMidpoints(),p=2;break;case"Polygon":f=e.getFlatInteriorPoint(),a.overflow||m.push(f[2]/this.resolution),p=3;break;case"MultiPolygon":const S=e.getFlatInteriorPoints();f=[];for(let T=0,I=S.length;T<I;T+=3)a.overflow||m.push(S[T+2]/this.resolution),f.push(S[T],S[T+1]);if(f.length===0)return;p=2;break}const _=this.appendFlatPointCoordinates(f,p);if(_===c)return;if(m&&(_-c)/2!==f.length/p){let S=c/2;m=m.filter((T,I)=>{const L=u[(S+I)*2]===f[I*p]&&u[(S+I)*2+1]===f[I*p+1];return L||--S,L})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&this.updateFillStyle(this.state,this.createFill),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,n);let v=a.padding;if(v!=io&&(a.scale[0]<0||a.scale[1]<0)){let S=a.padding[0],T=a.padding[1],I=a.padding[2],L=a.padding[3];a.scale[0]<0&&(T=-T,L=-L),a.scale[1]<0&&(S=-S,I=-I),v=[S,T,I,L]}const w=this.pixelRatio;this.instructions.push([we.DRAW_IMAGE,c,_,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,v==io?io:v.map(function(S){return S*w}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,m]);const E=1/w,C=this.state.fillStyle;a.backgroundFill&&(this.state.fillStyle=Cn,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([we.DRAW_IMAGE,c,_,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[E,E],NaN,this.declutterMode_,this.declutterImageWithText_,v,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Cn:this.fillKey_,this.textOffsetX_,this.textOffsetY_,m]),a.backgroundFill&&(this.state.fillStyle=C,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:t.font,textAlign:t.textAlign||nu,justify:t.justify,textBaseline:t.textBaseline||Ih,scale:t.scale});const a=this.fillKey_;n&&(a in this.fillStates||(this.fillStates[a]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,r=this.textState_,o=this.strokeKey_,a=this.textKey_,u=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,d=Mh[r.textBaseline],f=this.textOffsetY_*c,p=this.text_,m=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([we.DRAW_CHARS,e,t,d,r.overflow,u,r.maxAngle,c,f,o,m*c,p,a,1,this.declutterMode_]),this.hitDetectionInstructions.push([we.DRAW_CHARS,e,t,d,r.overflow,u&&Cn,r.maxAngle,c,f,o,m*c,p,a,1/c,this.declutterMode_])}setTextStyle(e,t){let n,r,o;if(!e)this.text_="";else{const a=e.getFill();a?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Vi(a.getColor()||Cn)):(r=null,this.textFillState_=r);const u=e.getStroke();if(!u)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const v=u.getLineDash(),w=u.getLineDashOffset(),E=u.getWidth(),C=u.getMiterLimit();o.lineCap=u.getLineCap()||Il,o.lineDash=v?v.slice():Er,o.lineDashOffset=w===void 0?Cr:w,o.lineJoin=u.getLineJoin()||Ll,o.lineWidth=E===void 0?iu:E,o.miterLimit=C===void 0?eu:C,o.strokeStyle=Vi(u.getColor()||tu)}n=this.textState_;const c=e.getFont()||Ow;wI(c);const d=e.getScaleArray();n.overflow=e.getOverflow(),n.font=c,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||Ih,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||io,n.scale=d===void 0?[1,1]:d;const f=e.getOffsetX(),p=e.getOffsetY(),m=e.getRotateWithView(),_=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=f===void 0?0:f,this.textOffsetY_=p===void 0?0:p,this.textRotateWithView_=m===void 0?!1:m,this.textRotation_=_===void 0?0:_,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:Le(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+Le(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const F2={Circle:Bv,Default:Cu,Image:k2,LineString:A2,Polygon:Bv,Text:O2};class Jw{constructor(e,t,n,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const r in n){const o=n[r].finish();e[t][r]=o}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[n];r===void 0&&(r={},this.buildersByZIndex_[n]=r);let o=r[t];if(o===void 0){const a=F2[t];o=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=o}return o}}const D2=5;class N2 extends _u{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=D2}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Oe()}getData(e){return null}prepareFrame(e){return Oe()}renderFrame(e,t){return Oe()}forEachFeatureAtCoordinate(e,t,n,r,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Fe.LOADED||t.getState()===Fe.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Fe.LOADED&&t!=Fe.ERROR&&e.addEventListener(Te.CHANGE,this.boundHandleImageChange_),t==Fe.IDLE&&(e.load(),t=e.getState()),t==Fe.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class e1 extends li{constructor(e,t,n,r){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=r}}class Rm{constructor(){tt(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Th(),{get:(e,t)=>{if(typeof Th()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,n),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,r=t.length;n<r;++n){const o=t[n];if(typeof o=="function"){o(e);continue}const a=t[++n];if(typeof e[o]=="function")e[o](...a);else{if(typeof a=="function"){e[o]=a(e);continue}e[o]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Vv=[];let ol=null;function z2(){ol=mt(1,1,void 0,{willReadFrequently:!0})}class t1 extends N2{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=ri(),this.pixelTransform=ri(),this.inversePixelTransform=ri(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){ol||z2(),ol.clearRect(0,0,1,1);let r;try{ol.drawImage(e,t,n,1,1,0,0,1,1),r=ol.getImageData(0,0,1,1).data}catch{return ol=null,null}return r}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const r=this.getLayer().getClassName();let o,a;if(e&&e.className===r&&(!n||e&&e.style.backgroundColor&&Mr(Ja(e.style.backgroundColor),Ja(n)))){const u=e.firstElementChild;u instanceof HTMLCanvasElement&&(a=u.getContext("2d"))}if(a&&a.canvas.style.transform===t?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=r;let u=o.style;u.position="absolute",u.width="100%",u.height="100%",a=mt();const c=a.canvas;o.appendChild(c),u=c.style,u.position="absolute",u.left="0",u.transformOrigin="top left",this.container=o,this.context=a}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const r=Is(n),o=Qh(n),a=qh(n),u=Zh(n);zt(t.coordinateToPixelTransform,r),zt(t.coordinateToPixelTransform,o),zt(t.coordinateToPixelTransform,a),zt(t.coordinateToPixelTransform,u);const c=this.inversePixelTransform;zt(c,r),zt(c,o),zt(c,a),zt(c,u),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(u[0]),Math.round(u[1])),e.clip()}prepareContainer(e,t){const n=e.extent,r=e.viewState.resolution,o=e.viewState.rotation,a=e.pixelRatio,u=Math.round(He(n)/r*a),c=Math.round(en(n)/r*a);Rr(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,o,-u/2,-c/2),ow(this.inversePixelTransform,this.pixelTransform);const d=uP(this.pixelTransform);if(this.useContainer(t,d,this.getBackground(e)),!this.containerReused){const f=this.context.canvas;f.width!=u||f.height!=c?(f.width=u,f.height=c):this.context.clearRect(0,0,u,c),d!==f.style.transform&&(f.style.transform=d)}}dispatchRenderEvent_(e,t,n){const r=this.getLayer();if(r.hasListener(e)){const o=new e1(e,this.inversePixelTransform,n,t);r.dispatchEvent(o)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(ni.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(ni.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new Rm),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(ni.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(ni.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,r,o,a,u){const c=o/2,d=a/2,f=r/t,p=-f,m=-e[0]+u,_=-e[1];return Rr(this.tempTransform,c,d,f,p,-n,m,_)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function j2(i,e,t,n,r,o,a,u,c,d,f,p){let m=i[e],_=i[e+1],v=0,w=0,E=0,C=0;function S(){v=m,w=_,e+=n,m=i[e],_=i[e+1],C+=E,E=Math.sqrt((m-v)*(m-v)+(_-w)*(_-w))}do S();while(e<t-n&&C+E<o);let T=E===0?0:(o-C)/E;const I=zn(v,m,T),L=zn(w,_,T),N=e-n,b=C,D=o+u*c(d,r,f);for(;e<t-n&&C+E<D;)S();T=E===0?0:(D-C)/E;const z=zn(v,m,T),q=zn(w,_,T);let Z;if(p){const B=[I,L,z,q];em(B,0,4,2,p,B,B),Z=B[0]>B[2]}else Z=I>z;const X=Math.PI,ne=[],H=N+n===e;e=N,E=0,C=b,m=i[e],_=i[e+1];let re;if(H){S(),re=Math.atan2(_-w,m-v),Z&&(re+=re>0?-X:X);const B=(z+I)/2,ie=(q+L)/2;return ne[0]=[B,ie,(D-o)/2,re,r],ne}r=r.replace(/\n/g," ");for(let B=0,ie=r.length;B<ie;){S();let G=Math.atan2(_-w,m-v);if(Z&&(G+=G>0?-X:X),re!==void 0){let K=G-re;if(K+=K>X?-2*X:K<-X?2*X:0,Math.abs(K)>a)return null}re=G;const Q=B;let Y=0;for(;B<ie;++B){const K=Z?ie-B-1:B,ve=u*c(d,r[K],f);if(e+n<t&&C+E<o+Y+ve/2)break;Y+=ve}if(B===Q)continue;const M=Z?r.substring(ie-Q,ie-B):r.substring(Q,B);T=E===0?0:(o+Y/2-C)/E;const U=zn(v,m,T),pe=zn(w,_,T);ne.push([U,pe,Y/2,G,M]),o+=Y}return ne}const Ko=si(),ns=[],dr=[],fr=[],is=[];function Uv(i){return i[3].declutterBox}const Xv=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function Cg(i,e){return e==="start"?e=Xv.test(i)?"right":"left":e==="end"&&(e=Xv.test(i)?"left":"right"),Mh[e]}function G2(i,e,t){return t>0&&i.push(`
`,""),i.push(e,""),i}class W2{constructor(e,t,n,r,o){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=ri(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new Rm:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,r){const o=e+t+n+r;if(this.labels_[o])return this.labels_[o];const a=r?this.strokeStates[r]:null,u=n?this.fillStates[n]:null,c=this.textStates[t],d=this.pixelRatio,f=[c.scale[0]*d,c.scale[1]*d],p=c.justify?Mh[c.justify]:Cg(Array.isArray(e)?e[0]:e,c.textAlign||nu),m=r&&a.lineWidth?a.lineWidth:0,_=Array.isArray(e)?e:String(e).split(`
`).reduce(G2,[]),{width:v,height:w,widths:E,heights:C,lineWidths:S}=CI(c,_),T=v+m,I=[],L=(T+2)*f[0],N=(w+m)*f[1],b={width:L<0?Math.floor(L):Math.ceil(L),height:N<0?Math.floor(N):Math.ceil(N),contextInstructions:I};(f[0]!=1||f[1]!=1)&&I.push("scale",f),r&&(I.push("strokeStyle",a.strokeStyle),I.push("lineWidth",m),I.push("lineCap",a.lineCap),I.push("lineJoin",a.lineJoin),I.push("miterLimit",a.miterLimit),I.push("setLineDash",[a.lineDash]),I.push("lineDashOffset",a.lineDashOffset)),n&&I.push("fillStyle",u.fillStyle),I.push("textBaseline","middle"),I.push("textAlign","center");const D=.5-p;let z=p*T+D*m;const q=[],Z=[];let X=0,ne=0,H=0,re=0,B;for(let ie=0,G=_.length;ie<G;ie+=2){const Q=_[ie];if(Q===`
`){ne+=X,X=0,z=p*T+D*m,++re;continue}const Y=_[ie+1]||c.font;Y!==B&&(r&&q.push("font",Y),n&&Z.push("font",Y),B=Y),X=Math.max(X,C[H]);const M=[Q,z+D*E[H]+p*(E[H]-S[re]),.5*(m+X)+ne];z+=E[H],r&&q.push("strokeText",M),n&&Z.push("fillText",M),++H}return Array.prototype.push.apply(I,q),Array.prototype.push.apply(I,Z),this.labels_[o]=b,b}replayTextBackground_(e,t,n,r,o,a,u){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,o),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],this.fill_(e)),u&&(this.setStrokeStyle_(e,u),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,r,o,a,u,c,d,f,p,m,_,v,w,E){u*=m[0],c*=m[1];let C=n-u,S=r-c;const T=o+d>e?e-d:o,I=a+f>t?t-f:a,L=v[3]+T*m[0]+v[1],N=v[0]+I*m[1]+v[2],b=C-v[3],D=S-v[0];(w||p!==0)&&(ns[0]=b,is[0]=b,ns[1]=D,dr[1]=D,dr[0]=b+L,fr[0]=dr[0],fr[1]=D+N,is[1]=fr[1]);let z;return p!==0?(z=Rr(ri(),n,r,1,1,p,-n,-r),zt(z,ns),zt(z,dr),zt(z,fr),zt(z,is),Tr(Math.min(ns[0],dr[0],fr[0],is[0]),Math.min(ns[1],dr[1],fr[1],is[1]),Math.max(ns[0],dr[0],fr[0],is[0]),Math.max(ns[1],dr[1],fr[1],is[1]),Ko)):Tr(Math.min(b,b+L),Math.min(D,D+N),Math.max(b,b+L),Math.max(D,D+N),Ko),_&&(C=Math.round(C),S=Math.round(S)),{drawImageX:C,drawImageY:S,drawImageW:T,drawImageH:I,originX:d,originY:f,declutterBox:{minX:Ko[0],minY:Ko[1],maxX:Ko[2],maxY:Ko[3],value:E},canvasTransform:z,scale:m}}replayImageOrLabel_(e,t,n,r,o,a,u){const c=!!(a||u),d=r.declutterBox,f=u?u[2]*r.scale[0]/2:0;return d.minX-f<=t[0]&&d.maxX+f>=0&&d.minY-f<=t[1]&&d.maxY+f>=0&&(c&&this.replayTextBackground_(e,ns,dr,fr,is,a,u),SI(e,r.canvasTransform,o,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const n=zt(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(n[0]%r,n[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,n,r){const o=this.textStates[t],a=this.createLabel(e,t,r,n),u=this.strokeStates[n],c=this.pixelRatio,d=Cg(Array.isArray(e)?e[0]:e,o.textAlign||nu),f=Mh[o.textBaseline||Ih],p=u&&u.lineWidth?u.lineWidth:0,m=a.width/c-2*o.scale[0],_=d*m+2*(.5-d)*p,v=f*a.height/c+2*(.5-f)*p;return{label:a,anchorX:_,anchorY:v}}execute_(e,t,n,r,o,a,u,c){const d=this.zIndexContext_;let f;this.pixelCoordinates_&&Mr(n,this.renderedTransform_)?f=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),f=vs(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),oP(this.renderedTransform_,n));let p=0;const m=r.length;let _=0,v,w,E,C,S,T,I,L,N,b,D,z,q,Z=0,X=0,ne=null,H=null;const re=this.coordinateCache_,B=this.viewRotation_,ie=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,G={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:B},Q=this.instructions!=r||this.overlaps?0:200;let Y,M,U,pe;for(;p<m;){const K=r[p];switch(K[0]){case we.BEGIN_GEOMETRY:Y=K[1],pe=K[3],Y.getGeometry()?u!==void 0&&!wt(u,pe.getExtent())?p=K[2]+1:++p:p=K[2],d&&(d.zIndex=K[4]);break;case we.BEGIN_PATH:Z>Q&&(this.fill_(e),Z=0),X>Q&&(e.stroke(),X=0),!Z&&!X&&(e.beginPath(),S=NaN,T=NaN),++p;break;case we.CIRCLE:_=K[1];const _e=f[_],le=f[_+1],he=f[_+2],Se=f[_+3],xe=he-_e,Ae=Se-le,Ne=Math.sqrt(xe*xe+Ae*Ae);e.moveTo(_e+Ne,le),e.arc(_e,le,Ne,0,2*Math.PI,!0),++p;break;case we.CLOSE_PATH:e.closePath(),++p;break;case we.CUSTOM:_=K[1],v=K[2];const lt=K[3],kt=K[4],fn=K[5];G.geometry=lt,G.feature=Y,p in re||(re[p]=[]);const Xt=re[p];fn?fn(f,_,v,2,Xt):(Xt[0]=f[_],Xt[1]=f[_+1],Xt.length=2),d&&(d.zIndex=K[6]),kt(Xt,G),++p;break;case we.DRAW_IMAGE:_=K[1],v=K[2],N=K[3],w=K[4],E=K[5];let ft=K[6];const nn=K[7],rn=K[8],Xn=K[9],Hn=K[10];let ai=K[11];const tr=K[12];let nr=K[13];C=K[14]||"declutter";const yt=K[15];if(!N&&K.length>=20){b=K[19],D=K[20],z=K[21],q=K[22];const sn=this.drawLabelWithPointPlacement_(b,D,z,q);N=sn.label,K[3]=N;const bi=K[23];w=(sn.anchorX-bi)*this.pixelRatio,K[4]=w;const Ht=K[24];E=(sn.anchorY-Ht)*this.pixelRatio,K[5]=E,ft=N.height,K[6]=ft,nr=N.width,K[13]=nr}let yo;K.length>25&&(yo=K[25]);let bs,ir,Os;K.length>17?(bs=K[16],ir=K[17],Os=K[18]):(bs=io,ir=!1,Os=!1),Hn&&ie?ai+=B:!Hn&&!ie&&(ai-=B);let Fs=0;for(;_<v;_+=2){if(yo&&yo[Fs++]<nr/this.pixelRatio)continue;const sn=this.calculateImageOrLabelDimensions_(N.width,N.height,f[_],f[_+1],nr,ft,w,E,rn,Xn,ai,tr,o,bs,ir||Os,Y),bi=[e,t,N,sn,nn,ir?ne:null,Os?H:null];if(c){let Ht,Pn,At;if(yt){const st=v-_;if(!yt[st]){yt[st]={args:bi,declutterMode:C};continue}const _t=yt[st];Ht=_t.args,Pn=_t.declutterMode,delete yt[st],At=Uv(Ht)}let In,on;if(Ht&&(Pn!=="declutter"||!c.collides(At))&&(In=!0),(C!=="declutter"||!c.collides(sn.declutterBox))&&(on=!0),Pn==="declutter"&&C==="declutter"){const st=In&&on;In=st,on=st}In&&(Pn!=="none"&&c.insert(At),this.replayImageOrLabel_.apply(this,Ht)),on&&(C!=="none"&&c.insert(sn.declutterBox),this.replayImageOrLabel_.apply(this,bi))}else this.replayImageOrLabel_.apply(this,bi)}++p;break;case we.DRAW_CHARS:const Or=K[1],Mu=K[2],_o=K[3],bu=K[4];q=K[5];const Ed=K[6],vo=K[7],xo=K[8];z=K[9];const Ds=K[10];b=K[11],D=K[12];const wo=[K[13],K[13]];C=K[14]||"declutter";const Ns=this.textStates[D],Yn=Ns.font,Kn=[Ns.scale[0]*vo,Ns.scale[1]*vo];let Fr;Yn in this.widths_?Fr=this.widths_[Yn]:(Fr={},this.widths_[Yn]=Fr);const Ul=Mw(f,Or,Mu,2),Xl=Math.abs(Kn[0])*Tv(Yn,b,Fr);if(bu||Xl<=Ul){const sn=this.textStates[D].textAlign,bi=(Ul-Xl)*Cg(b,sn),Ht=j2(f,Or,Mu,2,b,bi,Ed,Math.abs(Kn[0]),Tv,Yn,Fr,ie?0:this.viewRotation_);e:if(Ht){const Pn=[];let At,In,on,st,_t;if(z)for(At=0,In=Ht.length;At<In;++At){_t=Ht[At],on=_t[4],st=this.createLabel(on,D,"",z),w=_t[2]+(Kn[0]<0?-Ds:Ds),E=_o*st.height+(.5-_o)*2*Ds*Kn[1]/Kn[0]-xo;const gn=this.calculateImageOrLabelDimensions_(st.width,st.height,_t[0],_t[1],st.width,st.height,w,E,0,0,_t[3],wo,!1,io,!1,Y);if(c&&C==="declutter"&&c.collides(gn.declutterBox))break e;Pn.push([e,t,st,gn,1,null,null])}if(q)for(At=0,In=Ht.length;At<In;++At){_t=Ht[At],on=_t[4],st=this.createLabel(on,D,q,""),w=_t[2],E=_o*st.height-xo;const gn=this.calculateImageOrLabelDimensions_(st.width,st.height,_t[0],_t[1],st.width,st.height,w,E,0,0,_t[3],wo,!1,io,!1,Y);if(c&&C==="declutter"&&c.collides(gn.declutterBox))break e;Pn.push([e,t,st,gn,1,null,null])}c&&C!=="none"&&c.load(Pn.map(Uv));for(let gn=0,Eo=Pn.length;gn<Eo;++gn)this.replayImageOrLabel_.apply(this,Pn[gn])}}++p;break;case we.END_GEOMETRY:if(a!==void 0){Y=K[1];const sn=a(Y,pe,C);if(sn)return sn}++p;break;case we.FILL:Q?Z++:this.fill_(e),++p;break;case we.MOVE_TO_LINE_TO:for(_=K[1],v=K[2],M=f[_],U=f[_+1],e.moveTo(M,U),S=M+.5|0,T=U+.5|0,_+=2;_<v;_+=2)M=f[_],U=f[_+1],I=M+.5|0,L=U+.5|0,(_==v-2||I!==S||L!==T)&&(e.lineTo(M,U),S=I,T=L);++p;break;case we.SET_FILL_STYLE:ne=K,this.alignAndScaleFill_=K[2],Z&&(this.fill_(e),Z=0,X&&(e.stroke(),X=0)),e.fillStyle=K[1],++p;break;case we.SET_STROKE_STYLE:H=K,X&&(e.stroke(),X=0),this.setStrokeStyle_(e,K),++p;break;case we.STROKE:Q?X++:e.stroke(),++p;break;default:++p;break}}Z&&this.fill_(e),X&&e.stroke()}execute(e,t,n,r,o,a){this.viewRotation_=r,this.execute_(e,t,n,this.instructions,o,void 0,void 0,a)}executeHitDetection(e,t,n,r,o){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,o)}}const ul=["Polygon","Circle","LineString","Image","Text","Default"],bh=["Image","Text"],B2=ul.filter(i=>!bh.includes(i));class n1{constructor(e,t,n,r,o,a,u){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=ri(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,u)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(const n in e){let r=this.executorsByZIndex_[n];r===void 0&&(r={},this.executorsByZIndex_[n]=r);const o=e[n];for(const a in o){const u=o[a];r[a]=new W2(this.resolution_,this.pixelRatio_,this.overlaps_,u,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let r=0,o=e.length;r<o;++r)if(e[r]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,r,o,a){r=Math.round(r);const u=r*2+1,c=Rr(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-n,-e[0],-e[1]),d=!this.hitDetectionContext_;d&&(this.hitDetectionContext_=mt(u,u,void 0,{willReadFrequently:!0}));const f=this.hitDetectionContext_;f.canvas.width!==u||f.canvas.height!==u?(f.canvas.width=u,f.canvas.height=u):d||f.clearRect(0,0,u,u);let p;this.renderBuffer_!==void 0&&(p=si(),Ua(p,e),xr(p,t*(this.renderBuffer_+r),p));const m=V2(r);let _;function v(L,N,b){const D=f.getImageData(0,0,u,u).data;for(let z=0,q=m.length;z<q;z++)if(D[m[z]]>0){if(!a||b==="none"||_!=="Image"&&_!=="Text"||a.includes(L)){const Z=(m[z]-3)/4,X=r-Z%u,ne=r-(Z/u|0),H=o(L,N,X*X+ne*ne);if(H)return H}f.clearRect(0,0,u,u);break}}const w=Object.keys(this.executorsByZIndex_).map(Number);w.sort(Ui);let E,C,S,T,I;for(E=w.length-1;E>=0;--E){const L=w[E].toString();for(S=this.executorsByZIndex_[L],C=ul.length-1;C>=0;--C)if(_=ul[C],T=S[_],T!==void 0&&(I=T.executeHitDetection(f,c,n,v,p),I))return I}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],r=t[1],o=t[2],a=t[3],u=[n,r,n,a,o,a,o,r];return vs(u,0,8,2,e,u),u}isEmpty(){return lo(this.executorsByZIndex_)}execute(e,t,n,r,o,a,u){const c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(Ui),a=a||ul;const d=ul.length;let f,p,m,_,v;for(u&&c.reverse(),f=0,p=c.length;f<p;++f){const w=c[f].toString();for(v=this.executorsByZIndex_[w],m=0,_=a.length;m<_;++m){const E=a[m],C=v[E];if(C!==void 0){const S=u===null?void 0:C.getZIndexContext(),T=S?S.getContext():e,I=this.maxExtent_&&E!=="Image"&&E!=="Text";if(I&&(T.save(),this.clip(T,n)),!S||E==="Text"||E==="Image"?C.execute(T,t,n,r,o,u):S.pushFunction(L=>C.execute(L,t,n,r,o,u)),I&&T.restore(),S){S.offset();const L=c[f]*d+m;this.deferredZIndexContexts_[L]||(this.deferredZIndexContexts_[L]=[]),this.deferredZIndexContexts_[L].push(S)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Ui);for(let n=0,r=t.length;n<r;++n)e[t[n]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[t[n]].length=0}}const Sg={};function V2(i){if(Sg[i]!==void 0)return Sg[i];const e=i*2+1,t=i*i,n=new Array(t+1);for(let o=0;o<=i;++o)for(let a=0;a<=i;++a){const u=o*o+a*a;if(u>t)break;let c=n[u];c||(c=[],n[u]=c),c.push(((i+o)*e+(i+a))*4+3),o>0&&c.push(((i-o)*e+(i+a))*4+3),a>0&&(c.push(((i+o)*e+(i-a))*4+3),o>0&&c.push(((i-o)*e+(i-a))*4+3))}const r=[];for(let o=0,a=n.length;o<a;++o)n[o]&&r.push(...n[o]);return Sg[i]=r,r}class U2 extends Qw{constructor(e,t,n,r,o,a,u){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=r,this.transformRotation_=r?ed(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=a,this.userTransform_=u,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=ri()}drawImages_(e,t,n,r){if(!this.image_)return;const o=vs(e,t,n,r,this.transform_,this.pixelCoordinates_),a=this.context_,u=this.tmpLocalTransform_,c=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=c*this.imageOpacity_);let d=this.imageRotation_;this.transformRotation_===0&&(d-=this.viewRotation_),this.imageRotateWithView_&&(d+=this.viewRotation_);for(let f=0,p=o.length;f<p;f+=2){const m=o[f]-this.imageAnchorX_,_=o[f+1]-this.imageAnchorY_;if(d!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const v=m+this.imageAnchorX_,w=_+this.imageAnchorY_;Rr(u,v,w,1,1,d,-v,-w),a.save(),a.transform.apply(a,u),a.translate(v,w),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,m,_,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=c)}drawText_(e,t,n,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=vs(e,t,n,r,this.transform_,this.pixelCoordinates_),a=this.context_;let u=this.textRotation_;for(this.transformRotation_===0&&(u-=this.viewRotation_),this.textRotateWithView_&&(u+=this.viewRotation_);t<n;t+=r){const c=o[t]+this.textOffsetX_,d=o[t+1]+this.textOffsetY_;u!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(c-this.textOffsetX_,d-this.textOffsetY_),a.rotate(u),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,c,d),this.textFillState_&&a.fillText(this.text_,c,d))}}moveToLineTo_(e,t,n,r,o){const a=this.context_,u=vs(e,t,n,r,this.transform_,this.pixelCoordinates_);a.moveTo(u[0],u[1]);let c=u.length;o&&(c-=2);for(let d=2;d<c;d+=2)a.lineTo(u[d],u[d+1]);return o&&a.closePath(),n}drawRings_(e,t,n,r){for(let o=0,a=n.length;o<a;++o)t=this.moveToLineTo_(e,t,n[o],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!wt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=BP(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],r=t[3]-t[1],o=Math.sqrt(n*n+r*r),a=this.context_;a.beginPath(),a.arc(t[0],t[1],o,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,r=t.length;n<r;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!wt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(wt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getFlatCoordinates();let o=0;const a=e.getEnds(),u=e.getStride();n.beginPath();for(let c=0,d=a.length;c<d;++c)o=this.moveToLineTo_(r,o,a[c],u,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!wt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!wt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let r=0;const o=e.getEndss(),a=e.getStride();t.beginPath();for(let u=0,c=o.length;u<c;++u){const d=o[u];r=this.drawRings_(n,r,d,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),Mr(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,r=e.textAlign?e.textAlign:nu;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=r&&(n.textAlign=r,t.textAlign=r),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:Vi(n||Cn)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),r=t.getLineCap(),o=t.getLineDash(),a=t.getLineDashOffset(),u=t.getLineJoin(),c=t.getWidth(),d=t.getMiterLimit(),f=o||Er;this.strokeState_={lineCap:r!==void 0?r:Il,lineDash:this.pixelRatio_===1?f:f.map(p=>p*this.pixelRatio_),lineDashOffset:(a||Cr)*this.pixelRatio_,lineJoin:u!==void 0?u:Ll,lineWidth:(c!==void 0?c:iu)*this.pixelRatio_,miterLimit:d!==void 0?d:eu,strokeStyle:Vi(n||tu)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*n,this.imageAnchorY_=r[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/n,a[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const _=t.getColor();this.textFillState_={fillStyle:Vi(_||Cn)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const _=n.getColor(),v=n.getLineCap(),w=n.getLineDash(),E=n.getLineDashOffset(),C=n.getLineJoin(),S=n.getWidth(),T=n.getMiterLimit();this.textStrokeState_={lineCap:v!==void 0?v:Il,lineDash:w||Er,lineDashOffset:E||Cr,lineJoin:C!==void 0?C:Ll,lineWidth:S!==void 0?S:iu,miterLimit:T!==void 0?T:eu,strokeStyle:Vi(_||tu)}}const r=e.getFont(),o=e.getOffsetX(),a=e.getOffsetY(),u=e.getRotateWithView(),c=e.getRotation(),d=e.getScaleArray(),f=e.getText(),p=e.getTextAlign(),m=e.getTextBaseline();this.textState_={font:r!==void 0?r:Ow,textAlign:p!==void 0?p:nu,textBaseline:m!==void 0?m:Ih},this.text_=f!==void 0?Array.isArray(f)?f.reduce((_,v,w)=>_+=w%2?" ":v,""):f:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=u!==void 0?u:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*d[0],this.pixelRatio_*d[1]]}}}const Wn=.5;function i1(i,e,t,n,r,o,a,u,c){const d=c?nd(r):r,f=i[0]*Wn,p=i[1]*Wn,m=mt(f,p);m.imageSmoothingEnabled=!1;const _=m.canvas,v=new U2(m,Wn,r,null,a,u,c?td(NP(),c):null),w=t.length,E=Math.floor((256*256*256-1)/w),C={};for(let T=1;T<=w;++T){const I=t[T-1],L=I.getStyleFunction()||n;if(!L)continue;let N=L(I,o);if(!N)continue;Array.isArray(N)||(N=[N]);const D=(T*E).toString(16).padStart(7,"#00000");for(let z=0,q=N.length;z<q;++z){const Z=N[z],X=Z.getGeometryFunction()(I);if(!X||!wt(d,X.getExtent()))continue;const ne=Z.clone(),H=ne.getFill();H&&H.setColor(D);const re=ne.getStroke();re&&(re.setColor(D),re.setLineDash(null)),ne.setText(void 0);const B=Z.getImage();if(B){const Y=B.getImageSize();if(!Y)continue;const M=mt(Y[0],Y[1],void 0,{alpha:!1}),U=M.canvas;M.fillStyle=D,M.fillRect(0,0,U.width,U.height),ne.setImage(new wm({img:U,anchor:B.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:B.getOrigin(),opacity:1,size:B.getSize(),scale:B.getScale(),rotation:B.getRotation(),rotateWithView:B.getRotateWithView()}))}const ie=ne.getZIndex()||0;let G=C[ie];G||(G={},C[ie]=G,G.Polygon=[],G.Circle=[],G.LineString=[],G.Point=[]);const Q=X.getType();if(Q==="GeometryCollection"){const Y=X.getGeometriesArrayRecursive();for(let M=0,U=Y.length;M<U;++M){const pe=Y[M];G[pe.getType().replace("Multi","")].push(pe,ne)}}else G[Q.replace("Multi","")].push(X,ne)}}const S=Object.keys(C).map(Number).sort(Ui);for(let T=0,I=S.length;T<I;++T){const L=C[S[T]];for(const N in L){const b=L[N];for(let D=0,z=b.length;D<z;D+=2){v.setStyle(b[D+1]);for(let q=0,Z=e.length;q<Z;++q)v.setTransform(e[q]),v.drawGeometry(b[D])}}}return m.getImageData(0,0,_.width,_.height)}function r1(i,e,t){const n=[];if(t){const r=Math.floor(Math.round(i[0])*Wn),o=Math.floor(Math.round(i[1])*Wn),a=(ht(r,0,t.width-1)+ht(o,0,t.height-1)*t.width)*4,u=t.data[a],c=t.data[a+1],f=t.data[a+2]+256*(c+256*u),p=Math.floor((256*256*256-1)/e.length);f&&f%p===0&&n.push(e[f/p-1])}return n}const X2=.5,s1={Point:J2,LineString:Z2,Polygon:tL,MultiPoint:eL,MultiLineString:q2,MultiPolygon:Q2,GeometryCollection:$2,Circle:Y2};function H2(i,e){return parseInt(Le(i),10)-parseInt(Le(e),10)}function up(i,e){const t=o1(i,e);return t*t}function o1(i,e){return X2*i/e}function Y2(i,e,t,n,r){const o=t.getFill(),a=t.getStroke();if(o||a){const c=i.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(o,a),c.drawCircle(e,n,r)}const u=t.getText();if(u&&u.getText()){const c=i.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,n)}}function Oh(i,e,t,n,r,o,a,u){const c=[],d=t.getImage();if(d){let m=!0;const _=d.getImageState();_==Fe.LOADED||_==Fe.ERROR?m=!1:_==Fe.IDLE&&d.load(),m&&c.push(d.ready())}const f=t.getFill();f&&f.loading()&&c.push(f.ready());const p=c.length>0;return p&&Promise.all(c).then(()=>r(null)),K2(i,e,t,n,o,a,u),p}function K2(i,e,t,n,r,o,a){const u=t.getGeometryFunction()(e);if(!u)return;const c=u.simplifyTransformed(n,r);if(t.getRenderer())l1(i,c,t,e,a);else{const f=s1[c.getType()];f(i,c,t,e,a,o)}}function l1(i,e,t,n,r){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let u=0,c=a.length;u<c;++u)l1(i,a[u],t,n,r);return}i.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer(),r)}function $2(i,e,t,n,r,o){const a=e.getGeometriesArray();let u,c;for(u=0,c=a.length;u<c;++u){const d=s1[a[u].getType()];d(i,a[u],t,n,r,o)}}function Z2(i,e,t,n,r){const o=t.getStroke();if(o){const u=i.getBuilder(t.getZIndex(),"LineString");u.setFillStrokeStyle(null,o),u.drawLineString(e,n,r)}const a=t.getText();if(a&&a.getText()){const u=i.getBuilder(t.getZIndex(),"Text");u.setTextStyle(a),u.drawText(e,n,r)}}function q2(i,e,t,n,r){const o=t.getStroke();if(o){const u=i.getBuilder(t.getZIndex(),"LineString");u.setFillStrokeStyle(null,o),u.drawMultiLineString(e,n,r)}const a=t.getText();if(a&&a.getText()){const u=i.getBuilder(t.getZIndex(),"Text");u.setTextStyle(a),u.drawText(e,n,r)}}function Q2(i,e,t,n,r){const o=t.getFill(),a=t.getStroke();if(a||o){const c=i.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,a),c.drawMultiPolygon(e,n,r)}const u=t.getText();if(u&&u.getText()){const c=i.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,n,r)}}function J2(i,e,t,n,r,o){const a=t.getImage(),u=t.getText(),c=u&&u.getText(),d=o&&a&&c?{}:void 0;if(a){if(a.getImageState()!=Fe.LOADED)return;const f=i.getBuilder(t.getZIndex(),"Image");f.setImageStyle(a,d),f.drawPoint(e,n,r)}if(c){const f=i.getBuilder(t.getZIndex(),"Text");f.setTextStyle(u,d),f.drawText(e,n,r)}}function eL(i,e,t,n,r,o){const a=t.getImage(),u=a&&a.getOpacity()!==0,c=t.getText(),d=c&&c.getText(),f=o&&u&&d?{}:void 0;if(u){if(a.getImageState()!=Fe.LOADED)return;const p=i.getBuilder(t.getZIndex(),"Image");p.setImageStyle(a,f),p.drawMultiPoint(e,n,r)}if(d){const p=i.getBuilder(t.getZIndex(),"Text");p.setTextStyle(c,f),p.drawText(e,n,r)}}function tL(i,e,t,n,r){const o=t.getFill(),a=t.getStroke();if(o||a){const c=i.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,a),c.drawPolygon(e,n,r)}const u=t.getText();if(u&&u.getText()){const c=i.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,n,r)}}class nL extends t1{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=si(),this.wrappedRenderedExtent_=si(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){const r=t.extent,o=t.viewState,a=o.center,u=o.resolution,c=o.projection,d=o.rotation,f=c.getExtent(),p=this.getLayer().getSource(),m=this.getLayer().getDeclutter(),_=t.pixelRatio,v=t.viewHints,w=!(v[pt.ANIMATING]||v[pt.INTERACTING]),E=this.context,C=Math.round(He(r)/u*_),S=Math.round(en(r)/u*_),T=p.getWrapX()&&c.canWrapX(),I=T?He(f):null,L=T?Math.ceil((r[2]-f[2])/I)+1:1;let N=T?Math.floor((r[0]-f[0])/I):0;do{let b=this.getRenderTransform(a,u,0,_,C,S,N*I);t.declutter&&(b=b.slice(0)),e.execute(E,[E.canvas.width,E.canvas.height],b,d,w,n===void 0?ul:n?bh:B2,n?m&&t.declutter[m]:void 0)}while(++N<L)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=mt(this.context.canvas.width,this.context.canvas.height,Vv))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,ao(this.context),Vv.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const r=e.viewState;this.prepareContainer(e,t);const o=this.context,a=this.replayGroup_;let u=a&&!a.isEmpty();if(!u&&!(this.getLayer().hasListener(ni.PRERENDER)||this.getLayer().hasListener(ni.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(o,e),r.projection,this.clipped_=!1,u&&n.extent&&this.clipping){const c=_r(n.extent);u=wt(c,e.extent),this.clipped_=u&&!to(c,e.extent),this.clipped_&&this.clipUnrotated(o,e,c)}return u&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),r=this.renderedCenter_,o=this.renderedResolution_,a=this.renderedRotation_,u=this.renderedProjection_,c=this.wrappedRenderedExtent_,d=this.getLayer(),f=[],p=n[0]*Wn,m=n[1]*Wn;f.push(this.getRenderTransform(r,o,a,Wn,p,m,0).slice());const _=d.getSource(),v=u.getExtent();if(_.getWrapX()&&u.canWrapX()&&!to(v,c)){let w=c[0];const E=He(v);let C=0,S;for(;w<v[0];)--C,S=E*C,f.push(this.getRenderTransform(r,o,a,Wn,p,m,S).slice()),w+=E;for(C=0,w=c[2];w>v[2];)++C,S=E*C,f.push(this.getRenderTransform(r,o,a,Wn,p,m,S).slice()),w-=E}this.hitDetectionImageData_=i1(n,f,this.renderedFeatures_,d.getStyleFunction(),c,o,a,up(o,this.renderedPixelRatio_),null)}t(r1(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,r,o){if(!this.replayGroup_)return;const a=t.viewState.resolution,u=t.viewState.rotation,c=this.getLayer(),d={},f=function(v,w,E){const C=Le(v),S=d[C];if(S){if(S!==!0&&E<S.distanceSq){if(E===0)return d[C]=!0,o.splice(o.lastIndexOf(S),1),r(v,c,w);S.geometry=w,S.distanceSq=E}}else{if(E===0)return d[C]=!0,r(v,c,w);o.push(d[C]={feature:v,layer:c,geometry:w,distanceSq:E,callback:r})}};let p;const m=[this.replayGroup_],_=this.getLayer().getDeclutter();return m.some(v=>p=v.forEachFeatureAtCoordinate(e,a,u,n,f,_&&t.declutter[_]?t.declutter[_].all().map(w=>w.value):null)),p}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const r=e.viewHints[pt.ANIMATING],o=e.viewHints[pt.INTERACTING],a=t.getUpdateWhileAnimating(),u=t.getUpdateWhileInteracting();if(this.ready&&!a&&r||!u&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,d=e.viewState,f=d.projection,p=d.resolution,m=e.pixelRatio,_=t.getRevision(),v=t.getRenderBuffer();let w=t.getRenderOrder();w===void 0&&(w=H2);const E=d.center.slice(),C=xr(c,v*p),S=C.slice(),T=[C.slice()],I=f.getExtent();if(n.getWrapX()&&f.canWrapX()&&!to(I,e.extent)){const H=He(I),re=Math.max(He(C)/2,H);C[0]=I[0]-re,C[2]=I[2]+re,qp(E,f);const B=cw(T[0],f);B[0]<I[0]&&B[2]<I[2]?T.push([B[0]+H,B[1],B[2]+H,B[3]]):B[0]>I[0]&&B[2]>I[2]&&T.push([B[0]-H,B[1],B[2]-H,B[3]])}if(this.ready&&this.renderedResolution_==p&&this.renderedRevision_==_&&this.renderedRenderOrder_==w&&this.renderedFrameDeclutter_===!!e.declutter&&to(this.wrappedRenderedExtent_,C))return Mr(this.renderedExtent_,S)||(this.hitDetectionImageData_=null,this.renderedExtent_=S),this.renderedCenter_=E,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const L=new Jw(o1(p,m),C,p,m);let N;for(let H=0,re=T.length;H<re;++H)n.loadFeatures(T[H],p,f);const b=up(p,m);let D=!0;const z=(H,re)=>{let B;const ie=H.getStyleFunction()||t.getStyleFunction();if(ie&&(B=ie(H,p)),B){const G=this.renderFeature(H,b,B,L,N,this.getLayer().getDeclutter(),re);D=D&&!G}},q=nd(C),Z=n.getFeaturesInExtent(q);w&&Z.sort(w);for(let H=0,re=Z.length;H<re;++H)z(Z[H],H);this.renderedFeatures_=Z,this.ready=D;const X=L.finish(),ne=new n1(C,p,m,n.getOverlaps(),X,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=p,this.renderedRevision_=_,this.renderedRenderOrder_=w,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=S,this.wrappedRenderedExtent_=C,this.renderedCenter_=E,this.renderedProjection_=f,this.renderedPixelRatio_=m,this.replayGroup_=ne,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,r,o,a,u){if(!n)return!1;let c=!1;if(Array.isArray(n))for(let d=0,f=n.length;d<f;++d)c=Oh(r,e,n[d],t,this.boundHandleStyleImageChange_,o,a,u)||c;else c=Oh(r,e,n,t,this.boundHandleStyleImageChange_,o,a,u);return c}}class a1 extends Sm{constructor(e){super(e)}createRenderer(){return new nL(this)}}class cp{constructor(e){this.rbush_=new Vw(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[Le(t)]=n}load(e,t){const n=new Array(t.length);for(let r=0,o=t.length;r<o;r++){const a=e[r],u=t[r],c={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:u};n[r]=c,this.items_[Le(u)]=c}this.rbush_.load(n)}remove(e){const t=Le(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[Le(t)],r=[n.minX,n.minY,n.maxX,n.maxY];Rl(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let r=0,o=e.length;r<o;r++)if(n=t(e[r]),n)return n;return n}isEmpty(){return lo(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Tr(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class dd extends Ls{constructor(e,t,n){super(),n!==void 0&&t===void 0?this.setFlatCoordinates(n,e):(t=t||0,this.setCenterAndRadius(e,t,n))}clone(){const e=new dd(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){const o=this.flatCoordinates,a=e-o[0],u=t-o[1],c=a*a+u*u;if(c<r){if(c===0)for(let d=0;d<this.stride;++d)n[d]=o[d];else{const d=this.getRadius()/Math.sqrt(c);n[0]=o[0]+d*a,n[1]=o[1]+d*u;for(let f=2;f<this.stride;++f)n[f]=o[f]}return n.length=this.stride,c}return r}containsXY(e,t){const n=this.flatCoordinates,r=e-n[0],o=t-n[1];return r*r+o*o<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,n=t[this.stride]-t[0];return Tr(t[0]-n,t[1]-n,t[0]+n,t[1]+n,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(wt(e,t)){const n=this.getCenter();return e[0]<=n[0]&&e[2]>=n[0]||e[1]<=n[1]&&e[3]>=n[1]?!0:Hp(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,n=this.flatCoordinates[t]-this.flatCoordinates[0],r=e.slice();r[t]=r[0]+n;for(let o=1;o<t;++o)r[t+o]=e[o];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(e,t,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let o=pw(r,0,e,this.stride);r[o++]=r[0]+t;for(let a=1,u=this.stride;a<u;++a)r[o++]=r[a];r.length=o,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const n=this.getCenter(),r=this.getStride();this.setCenter(em(n,0,n.length,r,e,t,n)),this.changed()}}dd.prototype.transform;class Fh extends gw{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(qe),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,n=e.length;t<n;++t)this.changeEventsKeys_.push(Ge(e[t],Te.CHANGE,this.changed,this))}clone(){const e=new Fh(Rg(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,n,r){if(r<go(this.getExtent(),e,t))return r;const o=this.geometries_;for(let a=0,u=o.length;a<u;++a)r=o[a].closestPointXY(e,t,n,r);return r}containsXY(e,t){const n=this.geometries_;for(let r=0,o=n.length;r<o;++r)if(n[r].containsXY(e,t))return!0;return!1}computeExtent(e){vu(e);const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)aw(e,t[n].getExtent());return e}getGeometries(){return Rg(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let r=!1;for(let o=0,a=n.length;o<a;++o){const u=n[o],c=u.getSimplifiedGeometry(e);t.push(c),c!==u&&(r=!0)}return r?new Fh(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const n=this.geometries_;for(let r=0,o=n.length;r<o;++r)n[r].rotate(e,t);this.changed()}scale(e,t,n){n||(n=Pr(this.getExtent()));const r=this.geometries_;for(let o=0,a=r.length;o<a;++o)r[o].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(Rg(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let r=0,o=n.length;r<o;++r)n[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Rg(i){return i.map(e=>e.clone())}class kl extends Ls{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{const r=e,o=[],a=[];for(let c=0,d=r.length;c<d;++c){const f=r[c];Xi(o,f.getFlatCoordinates()),a.push(o.length)}const u=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(u,o),this.ends_=a}}appendLineString(e){Xi(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new kl(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<go(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(nm(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),rm(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,r))}getCoordinateAtM(e,t,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,n=n!==void 0?n:!1,yI(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return Za(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Hi(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,r=[];let o=0;for(let a=0,u=t.length;a<u;++a){const c=t[a],d=new Hi(e.slice(o,c),n);r.push(d),o=c}return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const r=this.ends_,o=this.stride;for(let a=0,u=r.length;a<u;++a){const c=r[a],d=Ph(t,n,c,o,.5);Xi(e,d),n=c}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=mw(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new kl(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return qP(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=sm(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class Su extends Ls{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Xi(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new Su(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){if(r<go(this.getExtent(),e,t))return r;const o=this.flatCoordinates,a=this.stride;for(let u=0,c=o.length;u<c;u+=a){const d=wr(e,t,o[u],o[u+1]);if(d<r){r=d;for(let f=0;f<a;++f)n[f]=o[u+f];n.length=a}}return r}getCoordinates(){return ms(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Ii(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,r=[];for(let o=0,a=e.length;o<a;o+=n){const u=new Ii(e.slice(o,o+n),t);r.push(u)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let r=0,o=t.length;r<o;r+=n){const a=t[r],u=t[r+1];if(Up(e,a,u))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=id(this.flatCoordinates,0,e,this.stride),this.changed()}}function u1(i,e,t,n){const r=[];let o=si();for(let a=0,u=t.length;a<u;++a){const c=t[a];o=Xp(i,e,c[0],n),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=c[c.length-1]}return r}class Al extends Ls{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const r=e,o=[],a=[];for(let u=0,c=r.length;u<c;++u){const d=r[u],f=o.length,p=d.getEnds();for(let m=0,_=p.length;m<_;++m)p[m]+=f;Xi(o,d.getFlatCoordinates()),a.push(p)}t=r.length===0?this.getLayout():r[0].getLayout(),e=o,n=a}t!==void 0&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;Xi(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,o=t.length;r<o;++r)t[r]+=n}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const n=new Al(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,r){return r<go(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(VP(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),UP(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,r))}containsXY(e,t){return ZP(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return KP(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),yv(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,np(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=u1(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=vw(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Su(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;eI(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=yv(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=YP(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new Al(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const o=this.endss_[e-1];t=o[o.length-1]}const n=this.endss_[e].slice(),r=n[n.length-1];if(t!==0)for(let o=0,a=n.length;o<a;++o)n[o]-=t;return new $i(this.flatCoordinates.slice(t,r),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,r=[];let o=0;for(let a=0,u=n.length;a<u;++a){const c=n[a].slice(),d=c[c.length-1];if(o!==0)for(let p=0,m=c.length;p<m;++p)c[p]-=o;const f=new $i(t.slice(o,d),e,c);r.push(f),o=d}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return QP(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=XP(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const r=n[n.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const Hv=ri();class jn{constructor(e,t,n,r,o,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=o,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Va(this.flatCoordinates_):Xp(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Pr(this.getExtent());this.flatInteriorPoints_=am(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Sw(this.flatCoordinates_,this.ends_),t=u1(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=vw(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Ph(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let r=0,o=n.length;r<o;++r){const a=n[r],u=Ph(e,t,a,2,.5);Xi(this.flatMidpoints_,u),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Vt(e);const t=e.getExtent(),n=e.getWorldExtent();if(t&&n){const r=en(n)/en(t);Rr(Hv,n[0],n[3],r,-r,0,0,0),vs(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Hv,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new jn(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=rw((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const n=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":n.length=rd(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),r=[n.length];break;case"MultiLineString":r=[],n.length=mw(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,r);break;case"Polygon":r=[],n.length=om(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,r);break}return r&&(this.simplifiedGeometry_=new jn(this.type_,n,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}jn.prototype.getFlatCoordinates=jn.prototype.getOrientedFlatCoordinates;class c1 extends Ji{constructor(e){super(),this.projection=Vt(e.projection),this.attributions_=Yv(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,r){t.viewResolver=n,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Yv(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Yv(i){return i?typeof i=="function"?i:(Array.isArray(i)||(i=[i]),e=>i):null}const wn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function iL(i,e){return[[-1/0,-1/0,1/0,1/0]]}let rL=!1;function h1(i,e,t,n,r,o,a){const u=new XMLHttpRequest;u.open("GET",typeof i=="function"?i(t,n,r):i,!0),e.getType()=="arraybuffer"&&(u.responseType="arraybuffer"),u.withCredentials=rL,u.onload=function(c){if(!u.status||u.status>=200&&u.status<300){const d=e.getType();try{let f;d=="text"||d=="json"?f=u.responseText:d=="xml"?f=u.responseXML||u.responseText:d=="arraybuffer"&&(f=u.response),f?o(e.readFeatures(f,{extent:t,featureProjection:r}),e.readProjection(f)):a()}catch{a()}}else a()},u.onerror=a,u.send()}function Kv(i,e){return function(t,n,r,o,a){const u=this;h1(i,e,t,n,r,function(c,d){u.addFeatures(c),o!==void 0&&o(c)},a||Cl)}}class rs extends li{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class d1 extends c1{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Cl,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Ve(this.format_,"`format` must be set when `url` is set"),this.loader_=Kv(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:iL;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new cp:null,this.loadedExtentsRtree_=new cp,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,r;Array.isArray(e.features)?r=e.features:e.features&&(n=e.features,r=n.getArray()),!t&&n===void 0&&(n=new dn(r)),r!==void 0&&this.addFeaturesInternal(r),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Le(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new rs(wn.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof jn||(this.featureChangeKeys_[e]=[Ge(t,Te.CHANGE,this.handleFeatureChange_,this),Ge(t,El.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof jn){const o=this.idIndex_[r];o instanceof jn?Array.isArray(o)?o.push(t):this.idIndex_[r]=[o,t]:n=!1}else n=!1}return n&&(Ve(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],r=[];for(let o=0,a=e.length;o<a;o++){const u=e[o],c=Le(u);this.addToIndex_(c,u)&&n.push(u)}for(let o=0,a=n.length;o<a;o++){const u=n[o],c=Le(u);this.setupChangeEvents_(c,u);const d=u.getGeometry();if(d){const f=d.getExtent();t.push(f),r.push(u)}else this.nullGeometryFeatures_[c]=u}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(wn.ADDFEATURE))for(let o=0,a=n.length;o<a;o++)this.dispatchEvent(new rs(wn.ADDFEATURE,n[o]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(wn.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(wn.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(Jt.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(Jt.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(qe);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(n);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new rs(wn.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(r){const o=r.getGeometry();if(o instanceof jn||o.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const r=n.getGeometry();if(r instanceof jn||r.intersectsExtent(e)){const o=t(n);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),lo(this.nullGeometryFeatures_)||Xi(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=Yp(e,t);return[].concat(...r.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],r=e[1];let o=null;const a=[NaN,NaN];let u=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||ws,this.featuresRtree_.forEachInExtent(c,function(d){if(t(d)){const f=d.getGeometry(),p=u;if(u=f instanceof jn?0:f.closestPointXY(n,r,a,u),u<p){o=d;const m=Math.sqrt(u);c[0]=n-m,c[1]=r-m,c[2]=n+m,c[3]=r+m}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=Le(t),r=t.getGeometry();if(!r)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const a=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const o=t.getId();if(o!==void 0){const a=o.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new rs(wn.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Le(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&lo(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const r=this.loadedExtentsRtree_,o=this.strategy_(e,t,n);for(let a=0,u=o.length;a<u;++a){const c=o[a];r.forEachInExtent(c,function(f){return to(f.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new rs(wn.FEATURESLOADSTART)),this.loader_.call(this,c,t,n,f=>{--this.loadingExtentsCount_,this.dispatchEvent(new rs(wn.FEATURESLOADEND,void 0,f))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new rs(wn.FEATURESLOADERROR))}),r.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let n;t.forEachInExtent(e,function(r){if(Rl(r.extent,e))return n=r,!0}),n&&t.remove(n)}removeFeatures(e){let t=!1;for(let n=0,r=e.length;n<r;++n)t=this.removeFeatureInternal(e[n])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Le(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const n=this.featureChangeKeys_[t];n==null||n.forEach(qe),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const o=r.toString(),a=this.idIndex_[o];a===e?delete this.idIndex_[o]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[o]=a[0]))}return delete this.uidIndex_[t],this.hasListener(wn.REMOVEFEATURE)&&this.dispatchEvent(new rs(wn.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Ve(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Kv(e,this.format_))}}const oe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Ru extends $h{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(Te.CHANGE)}release(){this.state===oe.ERROR&&this.setState(oe.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==oe.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Oe()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const r=t-n+1e3/60;return r>=this.transition_?1:Ww(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class f1 extends Ru{constructor(e,t,n,r,o,a){super(e,t,a),this.crossOrigin_=r,this.src_=n,this.key=n,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=oe.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=oe.ERROR,this.unlistenImage_(),this.image_=sL(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=oe.LOADED:this.state=oe.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==oe.ERROR&&(this.state=oe.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==oe.IDLE&&(this.state=oe.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=dI(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function sL(){const i=mt(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}class oL{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const r=this.points_[t+2]-this.points_[n+2];if(r<1e3/60)return!1;const o=this.points_[t]-this.points_[n],a=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(a,o),this.initialVelocity_=Math.sqrt(o*o+a*a)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class lL extends Kh{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Oe()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Rr(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),ow(r,n)}forEachFeatureAtCoordinate(e,t,n,r,o,a,u,c){let d;const f=t.viewState;function p(I,L,N,b){return o.call(a,L,I?N:null,b)}const m=f.projection,_=qp(e.slice(),m),v=[[0,0]];if(m.canWrapX()&&r){const I=m.getExtent(),L=He(I);v.push([-L,0],[L,0])}const w=t.layerStatesArray,E=w.length,C=[],S=[];for(let I=0;I<v.length;I++)for(let L=E-1;L>=0;--L){const N=w[L],b=N.layer;if(b.hasRenderer()&&xm(N,f)&&u.call(c,b)){const D=b.getRenderer(),z=b.getSource();if(D&&z){const q=z.getWrapX()?_:e,Z=p.bind(null,N.managed);S[0]=q[0]+v[I][0],S[1]=q[1]+v[I][1],d=D.forEachFeatureAtCoordinate(S,t,n,Z,C)}if(d)return d}}if(C.length===0)return;const T=1/C.length;return C.forEach((I,L)=>I.distanceSq+=L*T),C.sort((I,L)=>I.distanceSq-L.distanceSq),C.some(I=>d=I.callback(I.feature,I.layer,I.geometry)),d}hasFeatureAtCoordinate(e,t,n,r,o,a){return this.forEachFeatureAtCoordinate(e,t,n,r,ws,this,o,a)!==void 0}getMap(){return this.map_}renderFrame(e){Oe()}scheduleExpireIconCache(e){Bi.canExpireCache()&&e.postRenderFunctions.push(aL)}}function aL(i,e){Bi.expire()}class uL extends lL{constructor(e){super(e),this.fontChangeListenerKey_=Ge(pr,El.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=ld+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const r=new e1(e,void 0,t);n.dispatchEvent(r)}}disposeInternal(){qe(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(ni.PRECOMPOSE,e);const t=e.layerStatesArray.sort((u,c)=>u.zIndex-c.zIndex);t.some(u=>u.layer instanceof Sm&&u.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const o=[];let a=null;for(let u=0,c=t.length;u<c;++u){const d=t[u];e.layerIndex=u;const f=d.layer,p=f.getSourceState();if(!xm(d,r)||p!="ready"&&p!="undefined"){f.unrender();continue}const m=f.render(e,a);m&&(m!==a&&(this.children_.push(m),a=m),o.push(d))}this.declutter(e,o),hI(this.element_,this.children_),this.dispatchRenderEvent(ni.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let n=t.length-1;n>=0;--n){const r=t[n],o=r.layer;o.getDeclutter()&&o.renderDeclutter(e,r)}t.forEach(n=>n.layer.renderDeferred(e))}}}class gs extends li{constructor(e,t){super(e),this.layer=t}}const Tg={LAYERS:"layers"};class zl extends jw{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Tg.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new dn(n.slice(),{unique:!0}):Ve(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new dn(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(qe),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ge(e,Jt.ADD,this.handleLayersAdd_,this),Ge(e,Jt.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(qe);yu(this.listenerKeys_);const t=e.getArray();for(let n=0,r=t.length;n<r;n++){const o=t[n];this.registerLayerListeners_(o),this.dispatchEvent(new gs("addlayer",o))}this.changed()}registerLayerListeners_(e){const t=[Ge(e,El.PROPERTYCHANGE,this.handleLayerChange_,this),Ge(e,Te.CHANGE,this.handleLayerChange_,this)];e instanceof zl&&t.push(Ge(e,"addlayer",this.handleLayerGroupAdd_,this),Ge(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Le(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new gs("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new gs("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new gs("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=Le(t);this.listenerKeys_[n].forEach(qe),delete this.listenerKeys_[n],this.dispatchEvent(new gs("removelayer",t)),this.changed()}getLayers(){return this.get(Tg.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let r=0,o=n.length;r<o;++r)this.dispatchEvent(new gs("removelayer",n[r]))}this.set(Tg.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const r=this.getLayerState();let o=r.zIndex;!e&&r.zIndex===void 0&&(o=0);for(let a=n,u=t.length;a<u;a++){const c=t[a];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),c.minZoom=Math.max(c.minZoom,r.minZoom),c.maxZoom=Math.min(c.maxZoom,r.maxZoom),r.extent!==void 0&&(c.extent!==void 0?c.extent=Bn(c.extent,r.extent):c.extent=r.extent),c.zIndex===void 0&&(c.zIndex=o)}return t}getSourceState(){return"ready"}}class ll extends li{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}class ji extends ll{constructor(e,t,n,r,o,a){super(e,t,o),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const je={SINGLECLICK:"singleclick",CLICK:Te.CLICK,DBLCLICK:Te.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},hp={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class cL extends $h{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Ge(n,hp.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ge(n,hp.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Te.TOUCHMOVE,this.boundHandleTouchMove_,Aw?{passive:!1}:!1)}emulateClick_(e){let t=new ji(je.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new ji(je.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new ji(je.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==je.POINTERUP||t.type==je.POINTERCANCEL){delete this.trackedTouches_[n];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==je.POINTERDOWN||t.type==je.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new ji(je.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(qe),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new ji(je.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ge(n,je.POINTERMOVE,this.handlePointerMove_,this),Ge(n,je.POINTERUP,this.handlePointerUp_,this),Ge(this.element_,je.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Ge(this.element_.getRootNode(),je.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new ji(je.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new ji(je.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(qe(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Te.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(qe(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(qe),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const as={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},qt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Dh=1/0;class hL{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,yu(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(n);return delete this.queuedElements_[r],n}enqueue(e){Ve(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Dh?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,r=t.length,o=t[e],a=n[e],u=e;for(;e<r>>1;){const c=this.getLeftChildIndex_(e),d=this.getRightChildIndex_(e),f=d<r&&n[d]<n[c]?d:c;t[e]=t[f],n[e]=n[f],e=f}t[e]=o,n[e]=a,this.siftDown_(u,e)}siftDown_(e,t){const n=this.elements_,r=this.priorities_,o=n[t],a=r[t];for(;t>e;){const u=this.getParentIndex_(t);if(r[u]>a)n[t]=n[u],r[t]=r[u],t=u;else break}n[t]=o,r[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let r=0;const o=t.length;let a,u,c;for(u=0;u<o;++u)a=t[u],c=e(a),c==Dh?delete this.queuedElements_[this.keyFunction_(a)]:(n[r]=c,t[r++]=a);t.length=r,n.length=r,this.heapify_()}}class dL extends hL{constructor(e,t){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Te.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===oe.LOADED||n===oe.ERROR||n===oe.EMPTY){n!==oe.ERROR&&t.removeEventListener(Te.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;){const r=this.dequeue()[0],o=r.getKey();r.getState()===oe.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++n,r.load())}}}function fL(i,e,t,n,r){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][e.getKey()])return Dh;const o=i.viewState.center,a=n[0]-o[0],u=n[1]-o[1];return 65536*Math.log(r)+Math.sqrt(a*a+u*u)/r}class Tm extends Ji{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let n=0,r=this.listenerKeys.length;n<r;++n)qe(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_??e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Cl&&this.listenerKeys.push(Ge(e,as.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class gL extends Tm{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"›",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=a):this.collapseLabel_=o;const u=e.label!==void 0?e.label:"i";typeof u=="string"?(this.label_=document.createElement("span"),this.label_.textContent=u,this.label_.className=r):this.label_=u;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(Te.CLICK,this.handleClick_.bind(this),!1);const d=t+" "+ld+" "+pm+(this.collapsed_&&this.collapsible_?" "+Sv:"")+(this.collapsible_?"":" ol-uncollapsible"),f=this.element;f.className=d,f.appendChild(this.toggleButton_),f.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),n=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>n.add(r)):n.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(o=>{var a;return((a=o.getSource())==null?void 0:a.getAttributionsCollapsible())===!1});this.setCollapsible(r)}return Array.from(n)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>nP(()=>r))),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Mr(t,this.renderedAttributions_)){cI(this.ulElement_);for(let r=0,o=t.length;r<o;++r){const a=document.createElement("li");a.innerHTML=t[r],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Sv),this.collapsed_?Ev(this.collapseLabel_,this.label_):Ev(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class pL extends Tm{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"⇧",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(r));const o=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=o,a.appendChild(this.label_),a.addEventListener(Te.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+ld+" "+pm,c=this.element;c.className=u,c.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Hc)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Nl}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const r="rotate("+n+"rad)";if(this.autoHide_){const o=this.element.classList.contains(Hc);!o&&n===0?this.element.classList.add(Hc):o&&n!==0&&this.element.classList.remove(Hc)}this.label_.style.transform=r}this.rotation_=n}}class mL extends Tm{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",u=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",c=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",d=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=r,f.setAttribute("type","button"),f.title=c,f.appendChild(typeof a=="string"?document.createTextNode(a):a),f.addEventListener(Te.CLICK,this.handleClick_.bind(this,n),!1);const p=document.createElement("button");p.className=o,p.setAttribute("type","button"),p.title=d,p.appendChild(typeof u=="string"?document.createTextNode(u):u),p.addEventListener(Te.CLICK,this.handleClick_.bind(this,-n),!1);const m=t+" "+ld+" "+pm,_=this.element;_.className=m,_.appendChild(f),_.appendChild(p),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const r=n.getZoom();if(r!==void 0){const o=n.getConstrainedZoom(r+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:o,duration:this.duration_,easing:Nl})):n.setZoom(o)}}}function yL(i){i=i||{};const e=new dn;return(i.zoom!==void 0?i.zoom:!0)&&e.push(new mL(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&e.push(new pL(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&e.push(new gL(i.attributionOptions)),e}const Nh={ACTIVE:"active"};class Tu extends Ji{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Nh.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Nh.ACTIVE,e)}setMap(e){this.map_=e}}function _L(i,e,t){const n=i.getCenterInternal();if(n){const r=[n[0]+e[0],n[1]+e[1]];i.animateInternal({duration:t!==void 0?t:250,easing:OI,center:i.getConstrainedCenter(r)})}}function Pm(i,e,t,n){const r=i.getZoom();if(r===void 0)return;const o=i.getConstrainedZoom(r+e),a=i.getResolutionForZoom(o);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:a,anchor:t,duration:n!==void 0?n:250,easing:Nl})}class g1 extends Tu{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==je.DBLCLICK){const n=e.originalEvent,r=e.map,o=e.coordinate,a=n.shiftKey?-this.delta_:this.delta_,u=r.getView();Pm(u,a,o,this.duration_),n.preventDefault(),t=!0}return!t}}class ks extends Tu{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==je.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==je.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==je.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==je.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Im(i){const e=i.length;let t=0,n=0;for(let r=0;r<e;r++)t+=i[r].clientX,n+=i[r].clientY;return{clientX:t/e,clientY:n/e}}function dp(i){const e=arguments;return function(t){let n=!0;for(let r=0,o=e.length;r<o&&(n=n&&e[r](t),!!n);++r);return n}}const vL=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},xL=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},wL=function(i){const e=i.map.getTargetElement(),t=e.getRootNode(),n=i.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(n):e.contains(n)},p1=function(i){const e=i.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?wL(i):!0},lu=ws,m1=function(i){const e=i.originalEvent;return e.button==0&&!(uI&&Pw&&e.ctrlKey)},EL=Fl,CL=function(i){return i.type==je.SINGLECLICK},Lm=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},SL=function(i){const e=i.originalEvent;return Pw?e.metaKey:e.ctrlKey},y1=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},_1=function(i){const e=i.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},Pg=function(i){const e=i.originalEvent;return Ve(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},v1=function(i){const e=i.originalEvent;return Ve(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class x1 extends ks{constructor(e){super({stopDown:Fl}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:dp(Lm,v1);this.condition_=e.onFocusOnly?dp(p1,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,r=t.getEventPixel(Im(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],u=e.map.getView();PP(o,u.getResolution()),Zp(o,u.getRotation()),u.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),a=n.getCenterInternal(),u=t.getPixelFromCoordinateInternal(a),c=t.getCoordinateFromPixelInternal([u[0]-r*Math.cos(o),u[1]-r*Math.sin(o)]);n.animateInternal({center:n.getConstrainedCenter(c),duration:500,easing:Nl})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class w1 extends ks{constructor(e){e=e||{},super({stopDown:Fl}),this.condition_=e.condition?e.condition:xL,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Pg(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===vm)return;const r=t.getSize(),o=e.pixel,a=Math.atan2(r[1]/2-o[1],o[0]-r[0]/2);if(this.lastAngle_!==void 0){const u=a-this.lastAngle_;n.adjustRotationInternal(-u)}this.lastAngle_=a}handleUpEvent(e){return Pg(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Pg(e)&&m1(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class RL extends Kh{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+n,r.top=Math.min(e[1],t[1])+n,r.width=Math.abs(t[0]-e[0])+n,r.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new $i([r])}getGeometry(){return this.geometry_}}const $o={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Aa extends li{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class E1 extends ks{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new RL(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??m1,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const r=n[0]-t[0],o=n[1]-t[1];return r*r+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Aa($o.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Aa(t?$o.BOXEND:$o.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Aa($o.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Aa($o.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Aa($o.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class C1 extends E1{constructor(e){e=e||{};const t=e.condition?e.condition:y1;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let r=this.getGeometry();if(this.out_){const o=n.rotatedExtentForGeometry(r),a=n.getResolutionForExtentInternal(o),u=n.getResolution()/a;r=r.clone(),r.scale(u*u)}n.fitInternal(r,{duration:this.duration_,easing:Nl})}}const Qs={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class S1 extends Tu{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Lm(t)&&_1(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Te.KEYDOWN){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==Qs.DOWN||r==Qs.LEFT||r==Qs.RIGHT||r==Qs.UP)){const a=e.map.getView(),u=a.getResolution()*this.pixelDelta_;let c=0,d=0;r==Qs.DOWN?d=-u:r==Qs.LEFT?c=-u:r==Qs.RIGHT?c=u:d=u;const f=[c,d];Zp(f,a.getRotation()),_L(a,f,this.duration_),n.preventDefault(),t=!0}}return!t}}class R1 extends Tu{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!SL(t)&&_1(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Te.KEYDOWN||e.type==Te.KEYPRESS){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==="+"||r==="-")){const o=e.map,a=r==="+"?this.delta_:-this.delta_,u=o.getView();Pm(u,a,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}class T1 extends Tu{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:lu;this.condition_=e.onFocusOnly?dp(p1,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Te.WHEEL)return!0;const n=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let o;if(e.type==Te.WHEEL&&(o=r.deltaY,lI&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=Iw),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)),o===0)return!1;this.lastDelta_=o;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");const u=n.getView();if(this.mode_==="trackpad"&&!(u.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(u.getAnimating()&&u.cancelAnimations(),u.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),u.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=o;const c=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-ht(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Pm(t,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class P1 extends ks{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Fl),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(this.lastAngle_!==void 0){const c=o-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=c}this.lastAngle_=o;const a=e.map,u=a.getView();u.getConstraints().rotation!==vm&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Im(this.targetPointers))),this.rotating_&&(a.render(),u.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class I1 extends ks{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Fl),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],r=this.targetPointers[1],o=n.clientX-r.clientX,a=n.clientY-r.clientY,u=Math.sqrt(o*o+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/u),this.lastDistance_=u;const c=e.map,d=c.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(Im(this.targetPointers))),c.render(),d.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function TL(i){i=i||{};const e=new dn,t=new oL(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&e.push(new w1),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&e.push(new g1({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&e.push(new x1({onFocusOnly:i.onFocusOnly,kinetic:t})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&e.push(new P1),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&e.push(new I1({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(e.push(new S1),e.push(new R1({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&e.push(new T1({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&e.push(new C1({duration:i.zoomDuration})),e}function L1(i){if(i instanceof ud){i.setMapInternal(null);return}i instanceof zl&&i.getLayers().forEach(L1)}function k1(i,e){if(i instanceof ud){i.setMapInternal(e);return}if(i instanceof zl){const t=i.getLayers().getArray();for(let n=0,r=t.length;n<r;++n)k1(t[n],e)}}let PL=class extends Ji{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=IL(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Iw,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=ri(),this.pixelToCoordinateTransform_=ri(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||yL(),this.interactions=t.interactions||TL({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new dL(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(qt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(qt.VIEW,this.handleViewChanged_),this.addChangeListener(qt.SIZE,this.handleSizeChanged_),this.addChangeListener(qt.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof Gi)&&e.view.then(function(r){n.setView(new Gi(r))}),this.controls.addEventListener(Jt.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Jt.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Jt.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Jt.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Jt.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Jt.REMOVE,r=>{const o=r.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){k1(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const o=n.hitTolerance!==void 0?n.hitTolerance:0,a=n.layerFilter!==void 0?n.layerFilter:ws,u=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,o,u,t,null,a,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(r){n.push(r)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(r){r instanceof zl?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:ws,o=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,o,a,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),r=this.getSize(),o=n.width/r[0],a=n.height/r[1],u="changedTouches"in e?e.changedTouches[0]:e;return[(u.clientX-n.left)/o,(u.clientY-n.top)/a]}getTarget(){return this.get(qt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Pl(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?zt(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(qt.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof dn){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const r=e[t];if(!r.visible)continue;const o=r.layer.getRenderer();if(o&&!o.ready)return!0;const a=r.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=ct(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?zt(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(qt.SIZE)}getView(){return this.get(qt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,r){return fL(this.frameState_,e,t,n,r)}handleBrowserEvent(e,t){t=t||e.type;const n=new ji(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===hp.POINTERDOWN||n===Te.WHEEL||n===Te.KEYDOWN){const r=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():r,a=t.target,u=o instanceof ShadowRoot?o.host===a?o.host.ownerDocument:o:o===r?r.documentElement:o;if(this.overlayContainerStopEvent_.contains(a)||!u.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let o=r.length-1;o>=0;o--){const a=r[o];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,o=r;if(e){const a=e.viewHints;if(a[pt.ANIMATING]||a[pt.INTERACTING]){const u=Date.now()-e.time>8;r=u?0:8,o=u?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,o))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(ni.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(ni.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ll(as.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ll(as.LOADSTART,this,e))));const n=this.postRenderFunctions_;for(let r=0,o=n.length;r<o;++r)n[r](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,r=this.targetChangeHandlerKeys_.length;n<r;++n)qe(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Te.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Te.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new uL(this)),this.mapBrowserEventHandler_=new cL(this,this.moveTolerance_);for(const o in je)this.mapBrowserEventHandler_.addEventListener(je[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Te.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Te.WHEEL,this.boundHandleBrowserEvent_,Aw?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const o=t.getRootNode();n=o instanceof ShadowRoot?o.host:t}this.targetChangeHandlerKeys_=[Ge(n,Te.KEYDOWN,this.handleBrowserEvent,this),Ge(n,Te.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(qe(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(qe(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ge(e,El.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ge(e,Te.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(qe),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new gs("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ge(e,El.PROPERTYCHANGE,this.render,this),Ge(e,Te.CHANGE,this.render,this),Ge(e,"addlayer",this.handleLayerAdd_,this),Ge(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){L1(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),r=this.frameState_;let o=null;if(t!==void 0&&Cv(t)&&n&&n.isDef()){const a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=n.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Jg(u.center,u.resolution,u.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:u,viewHints:a,wantedTiles:{},mapId:Le(this),renderTargets:{}},u.nextCenter&&u.nextResolution){const c=isNaN(u.nextRotation)?u.rotation:u.nextRotation;o.nextExtent=Jg(u.nextCenter,u.nextResolution,c,t)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),r&&(!this.previousExtent_||!Jh(this.previousExtent_)&&!Rl(o.extent,this.previousExtent_))&&(this.dispatchEvent(new ll(as.MOVESTART,this,r)),this.previousExtent_=vu(this.previousExtent_)),this.previousExtent_&&!o.viewHints[pt.ANIMATING]&&!o.viewHints[pt.INTERACTING]&&!Rl(o.extent,this.previousExtent_)&&(this.dispatchEvent(new ll(as.MOVEEND,this,o)),lw(o.extent,this.previousExtent_))),this.dispatchEvent(new ll(as.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(as.LOADSTART)||this.hasListener(as.LOADEND)||this.hasListener(ni.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new gs("removelayer",t)),this.set(qt.LAYERGROUP,e)}setSize(e){this.set(qt.SIZE,e)}setTarget(e){this.set(qt.TARGET,e)}setView(e){if(!e||e instanceof Gi){this.set(qt.VIEW,e);return}this.set(qt.VIEW,new Gi);const t=this;e.then(function(n){t.setView(new Gi(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),o=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),a=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(o)&&!isNaN(a)&&(t=[Math.max(0,o),Math.max(0,a)],!Cv(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&dw("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!Mr(t,n))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function IL(i){let e=null;i.keyboardEventTarget!==void 0&&(e=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const t={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new zl({layers:i.layers});t[qt.LAYERGROUP]=n,t[qt.TARGET]=i.target,t[qt.VIEW]=i.view instanceof Gi?i.view:new Gi;let r;i.controls!==void 0&&(Array.isArray(i.controls)?r=new dn(i.controls.slice()):(Ve(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=i.controls));let o;i.interactions!==void 0&&(Array.isArray(i.interactions)?o=new dn(i.interactions.slice()):(Ve(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=i.interactions));let a;return i.overlays!==void 0?Array.isArray(i.overlays)?a=new dn(i.overlays.slice()):(Ve(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=i.overlays):a=new dn,{controls:r,interactions:o,keyboardEventTarget:e,overlays:a,values:t}}let LL=class{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();){const t=this.pop();t instanceof Kh&&t.dispose()}}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return Ve(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return Ve(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Ve(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}};function zh(i,e,t,n){return n!==void 0?(n[0]=i,n[1]=e,n[2]=t,n):[i,e,t]}function kL(i,e,t){return i+"/"+e+"/"+t}function AL(i){return ML(i[0],i[1],i[2])}function ML(i,e,t){return(e<<i)+t}function bL(i,e){const t=i[0],n=i[1],r=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const o=e.getFullTileRange(t);return o?o.containsXY(n,r):!0}class km{constructor(e,t,n,r){this.minX=e,this.maxX=t,this.minY=n,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Zo(i,e,t,n,r){return r!==void 0?(r.minX=i,r.maxX=e,r.minY=t,r.maxY=n,r):new km(i,e,t,n)}const $v=[];class OL extends Ru{constructor(e,t,n,r,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups=[],this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=n}getContext(){return this.context_||(this.context_=mt(1,1,$v)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Le(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(ao(this.context_),$v.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let FL=class extends Ru{constructor(e,t,n,r,o,a){super(e,t,a),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=n,this.key=n}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==oe.IDLE&&(this.setState(oe.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(oe.ERROR)}setFeatures(e){this.features_=e,this.setState(oe.LOADED)}setLoader(e){this.loader_=e}};const oi=Ye.createContext({});var DL={};const En=typeof process>"u"||typeof DL.RLAYERS_DEBUG>"u"?()=>{}:console.debug.bind(window.console),A1="_rlayers_handlers";class ii extends Ye.PureComponent{static getOLObject(e,t){let n=t.get(e);return n===void 0&&(n={},t.set(e,n)),n}get handlers(){return ii.getOLObject(A1,this.ol)}getCurrentEvents(){return Object.keys(this.props).filter(e=>e.startsWith("on")).map(e=>({event:e.toLowerCase().slice(2),prop:e})).reduce((e,t)=>Object.assign(Object.assign({},e),{[t.event]:this.props[t.prop]}),{})}getHandlerProp(e){for(const t of Object.keys(this.props))if(t.toLowerCase()==="on"+e)return t}incrementHandlers(e){}decrementHandlers(e){}attachEventHandlers(){var e;const t=this.handlers,n=Object.keys(t??{}),r=(e=this.eventSources)!==null&&e!==void 0?e:[this.ol],o=this.getCurrentEvents(),a=Object.keys(o),u=a.concat(n.filter(c=>!a.includes(c)));for(const c of u){if(t[c]!==void 0&&o[c]===void 0){En("removing previously installed handler",this,c,t[c]);for(const d of r)d.un(c,t[c]);t[c]=void 0,this.decrementHandlers(c)}if(t[c]===void 0&&o[c]!==void 0){En("installing handler",this,c,o[c]);const d=this.getHandlerProp(c);if(!d)throw new Error("Internal error");t[c]=f=>this.props[d].call(this,f);for(const f of r)f.on(c,t[c]);this.incrementHandlers(c)}}}attachOldEventHandlers(e){const t=this.handlers,n=this.getCurrentEvents();for(const r of Object.keys(n))n[r]&&(En("reinstalling existing handler",this,r,n[r]),e.on(r,t[r]))}refresh(e){this.attachEventHandlers()}on(e,t){this.ol.on(e,t),this.incrementHandlers(e)}un(e,t){this.decrementHandlers(e),this.ol.un(e,t)}componentDidMount(){En("didMount",this),this.refresh()}propsDiff(e){if(this.props===null||e===null)return this.props!==e?(En("null props differ",this.props,e),!0):!1;for(const t of Object.keys(this.props))if(this.props[t]!==e[t])return En("because of",t,this.props[t],e[t]),!0;return!1}componentDidUpdate(e,t,n){this.props!==e&&(En("willRefresh",this,e,this.props),this.refresh(e))}componentWillUnmount(){var e;const t=this.handlers;En("willUnmount",this,t);const n=(e=this.eventSources)!==null&&e!==void 0?e:[this.ol];for(const r of Object.keys(t??{}))if(En("cleaning up handler",this,r,t[r]),t[r]){for(const o of n)o.un(r,t[r]);t[r]=void 0,this.decrementHandlers(r)}}render(){return null}}ii.contextType=oi;class NL extends ii{constructor(e){super(e),this.updateView=t=>{var n;const r=this.ol.getView();typeof((n=this.props)===null||n===void 0?void 0:n.view[1])=="function"&&this.props.view[1]({center:r.getCenter(),zoom:r.getZoom(),resolution:r.getResolution()})},this.target=Ye.createRef(),this.ol=new PL({controls:e.noDefaultControls?[]:void 0,interactions:e.noDefaultInteractions?[]:void 0,view:new Gi({projection:e.projection,center:e.initial.center,zoom:e.initial.resolution===void 0?e.initial.zoom:void 0,resolution:e.initial.resolution,extent:e.extent,minResolution:e.minResolution,maxResolution:e.maxResolution,constrainResolution:e.constrainResolution,minZoom:e.minZoom,maxZoom:e.maxZoom,enableRotation:e.enableRotation,constrainRotation:e.constrainRotation})}),this.props.view&&this.ol.on("moveend",this.updateView)}componentDidMount(){super.componentDidMount(),this.ol.setTarget(this.target.current)}refresh(e){super.refresh(e);const t=this.ol.getView();for(const n of["minZoom","maxZoom","constrainResolution"]){const r=n.charAt(0).toUpperCase()+n.substring(1);(!e||this.props[n]!==e[n])&&t["set"+r](this.props[n])}this.props.view&&(t.setCenter(this.props.view[0].center),this.props.view[0].resolution===void 0?t.setZoom(this.props.view[0].zoom):t.setResolution(this.props.view[0].resolution)),this.props.properties&&this.ol.setProperties(this.props.properties),this.props.view?this.ol.on("moveend",this.updateView):this.ol.un("moveend",this.updateView)}render(){return Ye.createElement("div",{className:this.props.className,style:{width:this.props.width,height:this.props.height},ref:this.target},Ye.createElement(oi.Provider,{value:{map:this.ol,rMap:this}},this.props.children))}}class M1 extends ii{constructor(e,t){var n,r;if(super(e,t),!(!((r=(n=this.context)===null||n===void 0?void 0:n.map)===null||r===void 0)&&r.addLayer))throw new Error("A layer must be part of a map")}refresh(e){super.refresh(e);for(const t of["visible","opacity","zIndex","minResolution","maxResolution","minZoom","maxZoom"]){const n=t.charAt(0).toUpperCase()+t.substring(1);this.props[t]!==(e&&e[t])&&this.ol["set"+n](this.props[t])}this.source&&this.props.attributions&&this.source.setAttributions(this.props.attributions),this.props.properties&&this.ol.setProperties(this.props.properties)}componentDidMount(){super.componentDidMount(),this.context.map.addLayer(this.ol)}componentWillUnmount(){super.componentWillUnmount(),this.context.map.removeLayer(this.ol)}render(){return Ye.createElement("div",{className:"_rlayers_RLayer"},Ye.createElement(oi.Provider,{value:Object.assign(Object.assign({},this.context),{layer:this.ol,source:this.source,rLayer:this})},this.props.children))}}const b1=.5;function jh(i){return i instanceof Image||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageBitmap?i:null}function zL(i){return i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Float32Array||i instanceof DataView?i:null}const jL=new Error("disposed");let qo=null;function GL(i){qo||(qo=mt(i.width,i.height,void 0,{willReadFrequently:!0}));const e=qo.canvas,t=i.width;e.width!==t&&(e.width=t);const n=i.height;return e.height!==n&&(e.height=n),qo.clearRect(0,0,t,n),qo.drawImage(i,0,0),qo.getImageData(0,0,t,n).data}const WL=[256,256];class fp extends Ru{constructor(e){const t=oe.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=jh(this.data_);return e?[e.width,e.height]:WL}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==oe.IDLE&&this.state!==oe.ERROR)return;this.state=oe.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=oe.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=oe.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(jL),this.controller_=null),super.disposeInternal()}}const BL=10,Zv=.25;class O1{constructor(e,t,n,r,o,a){this.sourceProj_=e,this.targetProj_=t;let u={};const c=$a(this.targetProj_,this.sourceProj_);this.transformInv_=function(S){const T=S[0]+"/"+S[1];return u[T]||(u[T]=c(S)),u[T]},this.maxSourceExtent_=r,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&He(r)>=He(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?He(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?He(this.targetProj_.getExtent()):null;const d=Is(n),f=Qh(n),p=qh(n),m=Zh(n),_=this.transformInv_(d),v=this.transformInv_(f),w=this.transformInv_(p),E=this.transformInv_(m),C=BL+(a?Math.max(0,Math.ceil(Math.log2(Ka(n)/(a*a*256*256)))):0);if(this.addQuad_(d,f,p,m,_,v,w,E,C),this.wrapsXInSource_){let S=1/0;this.triangles_.forEach(function(T,I,L){S=Math.min(S,T.source[0][0],T.source[1][0],T.source[2][0])}),this.triangles_.forEach(T=>{if(Math.max(T.source[0][0],T.source[1][0],T.source[2][0])-S>this.sourceWorldWidth_/2){const I=[[T.source[0][0],T.source[0][1]],[T.source[1][0],T.source[1][1]],[T.source[2][0],T.source[2][1]]];I[0][0]-S>this.sourceWorldWidth_/2&&(I[0][0]-=this.sourceWorldWidth_),I[1][0]-S>this.sourceWorldWidth_/2&&(I[1][0]-=this.sourceWorldWidth_),I[2][0]-S>this.sourceWorldWidth_/2&&(I[2][0]-=this.sourceWorldWidth_);const L=Math.min(I[0][0],I[1][0],I[2][0]);Math.max(I[0][0],I[1][0],I[2][0])-L<this.sourceWorldWidth_/2&&(T.source=I)}})}u={}}addTriangle_(e,t,n,r,o,a){this.triangles_.push({source:[r,o,a],target:[e,t,n]})}addQuad_(e,t,n,r,o,a,u,c,d){const f=Nn([o,a,u,c]),p=this.sourceWorldWidth_?He(f)/this.sourceWorldWidth_:null,m=this.sourceWorldWidth_,_=this.sourceProj_.canWrapX()&&p>.5&&p<1;let v=!1;if(d>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const E=Nn([e,t,n,r]);v=He(E)/this.targetWorldWidth_>Zv||v}!_&&this.sourceProj_.isGlobal()&&p&&(v=p>Zv||v)}if(!v&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!wt(f,this.maxSourceExtent_))return;let w=0;if(!v&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(c[0])||!isFinite(c[1]))){if(d>0)v=!0;else if(w=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(u[0])||!isFinite(u[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),w!=1&&w!=2&&w!=4&&w!=8)return}if(d>0){if(!v){const E=[(e[0]+n[0])/2,(e[1]+n[1])/2],C=this.transformInv_(E);let S;_?S=(fl(o[0],m)+fl(u[0],m))/2-fl(C[0],m):S=(o[0]+u[0])/2-C[0];const T=(o[1]+u[1])/2-C[1];v=S*S+T*T>this.errorThresholdSquared_}if(v){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const E=[(t[0]+n[0])/2,(t[1]+n[1])/2],C=this.transformInv_(E),S=[(r[0]+e[0])/2,(r[1]+e[1])/2],T=this.transformInv_(S);this.addQuad_(e,t,E,S,o,a,C,T,d-1),this.addQuad_(S,E,n,r,T,C,u,c,d-1)}else{const E=[(e[0]+t[0])/2,(e[1]+t[1])/2],C=this.transformInv_(E),S=[(n[0]+r[0])/2,(n[1]+r[1])/2],T=this.transformInv_(S);this.addQuad_(e,E,S,r,o,C,T,c,d-1),this.addQuad_(E,t,n,S,C,a,u,T,d-1)}return}}if(_){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}w&11||this.addTriangle_(e,n,r,o,u,c),w&14||this.addTriangle_(e,n,t,o,u,a),w&&(w&13||this.addTriangle_(t,r,e,a,c,o),w&7||this.addTriangle_(t,r,n,a,c,u))}calculateSourceExtent(){const e=si();return this.triangles_.forEach(function(t,n,r){const o=t.source;Ua(e,o[0]),Ua(e,o[1]),Ua(e,o[2])}),e}getTriangles(){return this.triangles_}}let Ig;const Sr=[];function qv(i,e,t,n,r){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(n,r),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,n)+1,Math.max(t,r)),i.restore()}function Lg(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function VL(){if(Ig===void 0){const i=mt(6,6,Sr);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",qv(i,4,5,4,0),qv(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;Ig=Lg(e,0)||Lg(e,4)||Lg(e,8),ao(i),Sr.push(i.canvas)}return Ig}function Qv(i,e,t,n){const r=FP(t,e,i);let o=fv(e,n,t);const a=e.getMetersPerUnit();a!==void 0&&(o*=a);const u=i.getMetersPerUnit();u!==void 0&&(o/=u);const c=i.getExtent();if(!c||Sl(c,r)){const d=fv(i,o,r)/o;isFinite(d)&&d>0&&(o/=d)}return o}function F1(i,e,t,n){const r=Pr(t);let o=Qv(i,e,r,n);return(!isFinite(o)||o<=0)&&Hp(t,function(a){return o=Qv(i,e,a,n),isFinite(o)&&o>0}),o}function D1(i,e,t,n,r,o,a,u,c,d,f,p,m,_){const v=mt(Math.round(t*i),Math.round(t*e),Sr);if(p||(v.imageSmoothingEnabled=!1),c.length===0)return v.canvas;v.scale(t,t);function w(L){return Math.round(L*t)/t}v.globalCompositeOperation="lighter";const E=si();c.forEach(function(L,N,b){aw(E,L.extent)});let C;const S=t/n,T=(p?1:1+Math.pow(2,-24))/S;if(!m||c.length!==1||d!==0){if(C=mt(Math.round(He(E)*S),Math.round(en(E)*S),Sr),p||(C.imageSmoothingEnabled=!1),r&&_){const L=(r[0]-E[0])*S,N=-(r[3]-E[3])*S,b=He(r)*S,D=en(r)*S;C.rect(L,N,b,D),C.clip()}c.forEach(function(L,N,b){if(L.image.width>0&&L.image.height>0){if(L.clipExtent){C.save();const X=(L.clipExtent[0]-E[0])*S,ne=-(L.clipExtent[3]-E[3])*S,H=He(L.clipExtent)*S,re=en(L.clipExtent)*S;C.rect(p?X:Math.round(X),p?ne:Math.round(ne),p?H:Math.round(X+H)-Math.round(X),p?re:Math.round(ne+re)-Math.round(ne)),C.clip()}const D=(L.extent[0]-E[0])*S,z=-(L.extent[3]-E[3])*S,q=He(L.extent)*S,Z=en(L.extent)*S;C.drawImage(L.image,d,d,L.image.width-2*d,L.image.height-2*d,p?D:Math.round(D),p?z:Math.round(z),p?q:Math.round(D+q)-Math.round(D),p?Z:Math.round(z+Z)-Math.round(z)),L.clipExtent&&C.restore()}})}const I=Is(a);return u.getTriangles().forEach(function(L,N,b){const D=L.source,z=L.target;let q=D[0][0],Z=D[0][1],X=D[1][0],ne=D[1][1],H=D[2][0],re=D[2][1];const B=w((z[0][0]-I[0])/o),ie=w(-(z[0][1]-I[1])/o),G=w((z[1][0]-I[0])/o),Q=w(-(z[1][1]-I[1])/o),Y=w((z[2][0]-I[0])/o),M=w(-(z[2][1]-I[1])/o),U=q,pe=Z;q=0,Z=0,X-=U,ne-=pe,H-=U,re-=pe;const K=[[X,ne,0,0,G-B],[H,re,0,0,Y-B],[0,0,X,ne,Q-ie],[0,0,H,re,M-ie]],ve=RP(K);if(!ve)return;if(v.save(),v.beginPath(),VL()||!p){v.moveTo(G,Q);const le=4,he=B-G,Se=ie-Q;for(let xe=0;xe<le;xe++)v.lineTo(G+w((xe+1)*he/le),Q+w(xe*Se/(le-1))),xe!=le-1&&v.lineTo(G+w((xe+1)*he/le),Q+w((xe+1)*Se/(le-1)));v.lineTo(Y,M)}else v.moveTo(G,Q),v.lineTo(B,ie),v.lineTo(Y,M);v.clip(),v.transform(ve[0],ve[2],ve[1],ve[3],B,ie),v.translate(E[0]-U,E[3]-pe);let _e;if(C)_e=C.canvas,v.scale(T,-T);else{const le=c[0],he=le.extent;_e=le.image,v.scale(He(he)/_e.width,-en(he)/_e.height)}v.drawImage(_e,0,0),v.restore()}),C&&(ao(C),Sr.push(C.canvas)),f&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,u.getTriangles().forEach(function(L,N,b){const D=L.target,z=(D[0][0]-I[0])/o,q=-(D[0][1]-I[1])/o,Z=(D[1][0]-I[0])/o,X=-(D[1][1]-I[1])/o,ne=(D[2][0]-I[0])/o,H=-(D[2][1]-I[1])/o;v.beginPath(),v.moveTo(Z,X),v.lineTo(z,q),v.lineTo(ne,H),v.closePath(),v.stroke()}),v.restore()),v.canvas}class UL extends fp{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,n=t.getExtent(),r=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?r?Bn(n,r):n:r;const o=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),a=this.targetTileGrid_.getExtent();let u=this.sourceTileGrid_.getExtent();const c=a?Bn(o,a):o;if(Ka(c)===0){this.state=oe.EMPTY;return}n&&(u?u=Bn(u,n):u=n);const d=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),f=e.targetProj,p=F1(t,f,c,d);if(!isFinite(p)||p<=0){this.state=oe.EMPTY;return}const m=e.errorThreshold!==void 0?e.errorThreshold:b1;if(this.triangulation_=new O1(t,f,c,u,p*m,d),this.triangulation_.getTriangles().length===0){this.state=oe.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(p);let _=this.triangulation_.calculateSourceExtent();if(u&&(t.canWrapX()?(_[1]=ht(_[1],u[1],u[3]),_[3]=ht(_[3],u[1],u[3])):_=Bn(_,u)),!Ka(_))this.state=oe.EMPTY;else{let v=0,w=0;t.canWrapX()&&(v=He(n),w=Math.floor((_[0]-n[0])/v)),Yp(_.slice(),t,!0).forEach(C=>{const S=this.sourceTileGrid_.getTileRangeForExtentAndZ(C,this.sourceZ_),T=e.getTileFunction;for(let I=S.minX;I<=S.maxX;I++)for(let L=S.minY;L<=S.maxY;L++){const N=T(this.sourceZ_,I,L,this.pixelRatio_);if(N){const b=w*v;this.sourceTiles_.push({tile:N,offset:b})}}++w}),this.sourceTiles_.length===0&&(this.state=oe.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(v=>{var ie;const w=v.tile;if(!w||w.getState()!==oe.LOADED)return;const E=w.getSize(),C=this.gutter_;let S;const T=zL(w.getData());T?S=T:(t=!0,S=GL(jh(w.getData())));const I=[E[0]+2*C,E[1]+2*C],L=S instanceof Float32Array,N=I[0]*I[1],b=L?Float32Array:Uint8ClampedArray,D=new b(S.buffer),z=b.BYTES_PER_ELEMENT,q=z*D.length/N,Z=D.byteLength/I[1],X=Math.floor(Z/z/I[0]),ne=N*X;let H=D;if(D.length!==ne){H=new b(ne);let G=0,Q=0;const Y=I[0]*X;for(let M=0;M<I[1];++M){for(let U=0;U<Y;++U)H[G++]=D[Q+U];Q+=Z/z}}const re=this.sourceTileGrid_.getTileCoordExtent(w.tileCoord);re[0]+=v.offset,re[2]+=v.offset;const B=(ie=this.clipExtent_)==null?void 0:ie.slice();B&&(B[0]+=v.offset,B[2]+=v.offset),e.push({extent:re,clipExtent:B,data:new Uint8ClampedArray(H.buffer),dataType:b,bytesPerPixel:q,pixelSize:I})}),this.sourceTiles_.length=0,e.length===0){this.state=oe.ERROR,this.changed();return}const n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),o=typeof r=="number"?r:r[0],a=typeof r=="number"?r:r[1],u=this.targetTileGrid_.getResolution(n),c=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let f,p;const m=e[0].bytesPerPixel,_=Math.ceil(m/3);for(let v=_-1;v>=0;--v){const w=[];for(let L=0,N=e.length;L<N;++L){const b=e[L],D=b.data,z=b.pixelSize,q=z[0],Z=z[1],X=mt(q,Z,Sr),ne=X.createImageData(q,Z),H=ne.data;let re=v*3;for(let B=0,ie=H.length;B<ie;B+=4)H[B]=D[re],H[B+1]=D[re+1],H[B+2]=D[re+2],H[B+3]=255,re+=m;X.putImageData(ne,0,0),w.push({extent:b.extent,clipExtent:b.clipExtent,image:X.canvas})}const E=D1(o,a,this.pixelRatio_,c,this.sourceTileGrid_.getExtent(),u,d,this.triangulation_,w,this.gutter_,!1,!1,!1);for(let L=0,N=w.length;L<N;++L){const D=w[L].image.getContext("2d");ao(D),Sr.push(D.canvas)}const C=E.getContext("2d"),S=C.getImageData(0,0,E.width,E.height);ao(C),Sr.push(E),f||(p=new Uint8ClampedArray(m*S.width*S.height),f=new e[0].dataType(p.buffer));const T=S.data;let I=v*3;for(let L=0,N=T.length;L<N;L+=4)T[L+3]===255?(p[I]=T[L],p[I+1]=T[L+1],p[I+2]=T[L+2]):(p[I]=0,p[I+1]=0,p[I+2]=0),I+=m}if(t){const v=mt(o,a),w=new ImageData(f,o);v.putImageData(w,0,0),this.reprojData_=v.canvas}else this.reprojData_=f;this.reprojSize_=[Math.round(o*this.pixelRatio_),Math.round(a*this.pixelRatio_)],this.state=oe.LOADED,this.changed()}load(){if(this.state!==oe.IDLE&&this.state!==oe.ERROR)return;this.state=oe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n!==oe.IDLE&&n!==oe.LOADING)return;e++;const r=Ge(t,Te.CHANGE,()=>{const o=t.getState();(o==oe.LOADED||o==oe.ERROR||o==oe.EMPTY)&&(qe(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==oe.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(qe),this.sourcesListenerKeys_=null}}class gp extends Ru{constructor(e,t,n,r,o,a,u,c,d,f,p,m){super(o,oe.IDLE,m),this.renderEdges_=p!==void 0?p:!1,this.pixelRatio_=u,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=a||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const _=r.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let w=this.sourceTileGrid_.getExtent();const E=v?Bn(_,v):_;if(Ka(E)===0){this.state=oe.EMPTY;return}const C=e.getExtent();C&&(w?w=Bn(w,C):w=C);const S=r.getResolution(this.wrappedTileCoord_[0]),T=F1(e,n,E,S);if(!isFinite(T)||T<=0){this.state=oe.EMPTY;return}const I=f!==void 0?f:b1;if(this.triangulation_=new O1(e,n,E,w,T*I,S),this.triangulation_.getTriangles().length===0){this.state=oe.EMPTY;return}this.sourceZ_=t.getZForResolution(T);let L=this.triangulation_.calculateSourceExtent();if(w&&(e.canWrapX()?(L[1]=ht(L[1],w[1],w[3]),L[3]=ht(L[3],w[1],w[3])):L=Bn(L,w)),!Ka(L))this.state=oe.EMPTY;else{let N=0,b=0;e.canWrapX()&&(N=He(C),b=Math.floor((L[0]-C[0])/N)),Yp(L.slice(),e,!0).forEach(z=>{const q=t.getTileRangeForExtentAndZ(z,this.sourceZ_);for(let Z=q.minX;Z<=q.maxX;Z++)for(let X=q.minY;X<=q.maxY;X++){const ne=d(this.sourceZ_,Z,X,u);if(ne){const H=b*N;this.sourceTiles_.push({tile:ne,offset:H})}}++b}),this.sourceTiles_.length===0&&(this.state=oe.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var r;const n=t.tile;if(n&&n.getState()==oe.LOADED){const o=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);o[0]+=t.offset,o[2]+=t.offset;const a=(r=this.clipExtent_)==null?void 0:r.slice();a&&(a[0]+=t.offset,a[2]+=t.offset),e.push({extent:o,clipExtent:a,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=oe.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),r=typeof n=="number"?n:n[0],o=typeof n=="number"?n:n[1],a=this.targetTileGrid_.getResolution(t),u=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=D1(r,o,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),a,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=oe.LOADED}this.changed()}load(){if(this.state==oe.IDLE){this.state=oe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n==oe.IDLE||n==oe.LOADING){e++;const r=Ge(t,Te.CHANGE,o=>{const a=t.getState();(a==oe.LOADED||a==oe.ERROR||a==oe.EMPTY)&&(qe(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},n,r){t.getState()==oe.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(qe),this.sourcesListenerKeys_=null}release(){this.canvas_&&(ao(this.canvas_.getContext("2d")),Sr.push(this.canvas_),this.canvas_=null),super.release()}}const _s={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class XL extends ud{constructor(e){e=e||{};const t=Object.assign({},e),n=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(_s.PRELOAD)}setPreload(e){this.set(_s.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(_s.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(_s.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function kg(i,e,t,n){return`${i},${kL(e,t,n)}`}function Ag(i,e,t){if(!(t in i))return i[t]=new Set([e]),!0;const n=i[t],r=n.has(e);return r||n.add(e),!r}function HL(i,e,t){const n=i[t];return n?n.delete(e):!1}function Jv(i,e){const t=i.layerStatesArray[i.layerIndex];t.extent&&(e=Bn(e,_r(t.extent,i.viewState.projection)));const n=t.layer.getRenderSource();if(!n.getWrapX()){const r=n.getTileGridForProjection(i.viewState.projection).getExtent();r&&(e=Bn(e,r))}return e}class N1 extends t1{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=si(),this.tempTileRange_=new km(0,0,0,0),this.tempTileCoord_=zh(0,0,0);const n=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new LL(n),this.renderedProjection_=void 0,this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,n,r){const o=this.tileCache_,u=this.getLayer().getSource(),c=kg(u.getKey(),e,t,n);let d;if(o.containsKey(c))d=o.get(c);else{if(d=u.getTile(e,t,n,r.pixelRatio,r.viewState.projection),!d)return null;o.set(c,d)}return d}getTile(e,t,n,r){const o=this.getOrCreateTile(e,t,n,r);return o||null}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),r=zt(t.pixelToCoordinateTransform,e.slice()),o=n.getExtent();if(o&&!Sl(o,r))return null;const a=t.viewState,u=n.getRenderSource(),c=u.getTileGridForProjection(a.projection),d=u.getTilePixelRatio(t.pixelRatio);for(let f=c.getZForResolution(a.resolution);f>=c.getMinZoom();--f){const p=c.getTileCoordForCoordAndZ(r,f),m=this.getTile(f,p[1],p[2],t);if(!m||m.getState()!==oe.LOADED)continue;const _=c.getOrigin(f),v=tn(c.getTileSize(f)),w=c.getResolution(f);let E;if(m instanceof f1||m instanceof gp)E=m.getImage();else if(m instanceof fp){if(E=jh(m.getData()),!E)continue}else continue;const C=Math.floor(d*((r[0]-_[0])/w-p[1]*v[0])),S=Math.floor(d*((_[1]-r[1])/w-p[2]*v[1])),T=Math.round(d*u.getGutterForProjection(a.projection));return this.getImageData(E,C+T,S+T)}return null}prepareFrame(e){this.renderedProjection_?e.viewState.projection!==this.renderedProjection_&&(this.tileCache_.clear(),this.renderedProjection_=e.viewState.projection):this.renderedProjection_=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const n=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==n&&(this.renderedRevision_=n,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=n,!0}enqueueTiles(e,t,n,r,o){const a=e.viewState,u=this.getLayer(),c=u.getRenderSource(),d=c.getTileGridForProjection(a.projection),f=Le(c);f in e.wantedTiles||(e.wantedTiles[f]={});const p=e.wantedTiles[f],m=u.getMapInternal(),_=Math.max(n-o,d.getMinZoom(),d.getZForResolution(Math.min(u.getMaxResolution(),m?m.getView().getResolutionForZoom(Math.max(u.getMinZoom(),0)):d.getResolution(0)),c.zDirection));for(let v=n;v>=_;--v){const w=d.getTileRangeForExtentAndZ(t,v,this.tempTileRange_),E=d.getResolution(v);for(let C=w.minX;C<=w.maxX;++C)for(let S=w.minY;S<=w.maxY;++S){const T=this.getTile(v,C,S,e);if(!T||!Ag(r,T,v))continue;const L=T.getKey();if(p[L]=!0,T.getState()===oe.IDLE&&!e.tileQueue.isKeyQueued(L)){const N=zh(v,C,S,this.tempTileCoord_);e.tileQueue.enqueue([T,f,d.getTileCoordCenter(N),E])}}}}findStaleTile_(e,t){const n=this.tileCache_,r=e[0],o=e[1],a=e[2],u=this.getStaleKeys();for(let c=0;c<u.length;++c){const d=kg(u[c],r,o,a);if(n.containsKey(d)){const f=n.get(d);if(f.getState()===oe.LOADED)return f.endTransition(Le(this)),Ag(t,f,r),!0}}return!1}findAltTiles_(e,t,n,r){const o=e.getTileRangeForTileCoordAndZ(t,n,this.tempTileRange_);if(!o)return!1;let a=!0;const u=this.tileCache_,d=this.getLayer().getRenderSource().getKey();for(let f=o.minX;f<=o.maxX;++f)for(let p=o.minY;p<=o.maxY;++p){const m=kg(d,n,f,p);let _=!1;if(u.containsKey(m)){const v=u.get(m);v.getState()===oe.LOADED&&(Ag(r,v,n),_=!0)}_||(a=!1)}return a}renderFrame(e,t){this.renderComplete=!0;const n=e.layerStatesArray[e.layerIndex],r=e.viewState,o=r.projection,a=r.resolution,u=r.center,c=e.pixelRatio,d=this.getLayer(),f=d.getSource(),p=f.getRevision(),m=f.getTileGridForProjection(o),_=m.getZForResolution(a,f.zDirection),v=m.getResolution(_),w=f.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==w&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=w):this.renderedSourceKey_=w;let E=e.extent;const C=f.getTilePixelRatio(c);this.prepareContainer(e,t);const S=this.context.canvas.width,T=this.context.canvas.height,I=n.extent&&_r(n.extent);I&&(E=Bn(E,_r(n.extent)));const L=v*S/2/C,N=v*T/2/C,b=[u[0]-L,u[1]-N,u[0]+L,u[1]+N],D={};this.renderedTiles.length=0;const z=d.getPreload();if(e.nextExtent){const Y=m.getZForResolution(r.nextResolution,f.zDirection),M=Jv(e,e.nextExtent);this.enqueueTiles(e,M,Y,D,z)}const q=Jv(e,E);if(this.enqueueTiles(e,q,_,D,0),z>0&&setTimeout(()=>{this.enqueueTiles(e,q,_-1,D,z-1)},0),!(_ in D))return this.container;const Z=Le(this),X=e.time;for(const Y of D[_]){const M=Y.getState();if((Y instanceof gp||Y instanceof UL)&&M===oe.EMPTY)continue;const U=Y.tileCoord;if(M===oe.LOADED&&Y.getAlpha(Z,X)===1){Y.endTransition(Z);continue}if(this.renderComplete=!1,this.findStaleTile_(U,D)){HL(D,Y,_),e.animate=!0;continue}if(this.findAltTiles_(m,U,_+1,D))continue;const ve=m.getMinZoom();for(let _e=_-1;_e>=ve&&!this.findAltTiles_(m,U,_e,D);--_e);}const ne=v/a*c/C,H=this.getRenderContext(e);Rr(this.tempTransform,S/2,T/2,ne,ne,0,-S/2,-T/2),n.extent&&this.clipUnrotated(H,e,I),f.getInterpolate()||(H.imageSmoothingEnabled=!1),this.preRender(H,e);const re=Object.keys(D).map(Number);re.sort(Ui);let B;const ie=[],G=[];for(let Y=re.length-1;Y>=0;--Y){const M=re[Y],U=f.getTilePixelSize(M,c,o),K=m.getResolution(M)/v,ve=U[0]*K*ne,_e=U[1]*K*ne,le=m.getTileCoordForCoordAndZ(Is(b),M),he=m.getTileCoordExtent(le),Se=zt(this.tempTransform,[C*(he[0]-b[0])/v,C*(b[3]-he[3])/v]),xe=C*f.getGutterForProjection(o);for(const Ae of D[M]){if(Ae.getState()!==oe.LOADED)continue;const Ne=Ae.tileCoord,lt=le[1]-Ne[1],kt=Math.round(Se[0]-(lt-1)*ve),fn=le[2]-Ne[2],Xt=Math.round(Se[1]-(fn-1)*_e),ft=Math.round(Se[0]-lt*ve),nn=Math.round(Se[1]-fn*_e),rn=kt-ft,Xn=Xt-nn,Hn=re.length===1;let ai=!1;B=[ft,nn,ft+rn,nn,ft+rn,nn+Xn,ft,nn+Xn];for(let tr=0,nr=ie.length;tr<nr;++tr)if(!Hn&&M<G[tr]){const yt=ie[tr];wt([ft,nn,ft+rn,nn+Xn],[yt[0],yt[3],yt[4],yt[7]])&&(ai||(H.save(),ai=!0),H.beginPath(),H.moveTo(B[0],B[1]),H.lineTo(B[2],B[3]),H.lineTo(B[4],B[5]),H.lineTo(B[6],B[7]),H.moveTo(yt[6],yt[7]),H.lineTo(yt[4],yt[5]),H.lineTo(yt[2],yt[3]),H.lineTo(yt[0],yt[1]),H.clip())}ie.push(B),G.push(M),this.drawTile(Ae,e,ft,nn,rn,Xn,xe,Hn),ai&&H.restore(),this.renderedTiles.unshift(Ae),this.updateUsedTiles(e.usedTiles,f,Ae)}}this.renderedRevision=p,this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!Rl(this.renderedExtent_,b),this.renderedExtent_=b,this.renderedPixelRatio=c,this.renderedProjection=o,this.postRender(this.context,e),n.extent&&H.restore(),H.imageSmoothingEnabled=!0;const Q=(Y,M)=>{const U=Le(f),pe=M.wantedTiles[U],K=pe?Object.keys(pe).length:0;this.updateCacheSize(K),this.tileCache_.expireCache()};return e.postRenderFunctions.push(Q),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,n,r,o,a,u,c){let d;if(e instanceof fp){if(d=jh(e.getData()),!d)throw new Error("Rendering array data is not yet supported")}else d=this.getTileImage(e);if(!d)return;const f=this.getRenderContext(t),p=Le(this),m=t.layerStatesArray[t.layerIndex],_=m.opacity*(c?e.getAlpha(p,t.time):1),v=_!==f.globalAlpha;v&&(f.save(),f.globalAlpha=_),f.drawImage(d,u,u,d.width-2*u,d.height-2*u,n,r,o,a),v&&f.restore(),_!==m.opacity?t.animate=!0:c&&e.endTransition(p)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,n){const r=Le(t);r in e||(e[r]={}),e[r][n.getKey()]=!0}}class YL extends XL{constructor(e){super(e)}createRenderer(){return new N1(this,{cacheSize:this.getCacheSize()})}}const KL={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},ex={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class $L extends N1{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=ri(),this.tileClipContexts_=null}drawTile(e,t,n,r,o,a,u,c){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,n,r,o,a,u,c)}getTile(e,t,n,r){const o=this.getOrCreateTile(e,t,n,r);if(!o)return null;const u=r.viewState.resolution,c=r.viewHints;return(!(c[pt.ANIMATING]||c[pt.INTERACTING])||!o.wantedResolution)&&(o.wantedResolution=u),o}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,n){const r=this.getLayer(),o=r.getRevision(),a=r.getRenderOrder()||null,u=e.wantedResolution,c=e.getReplayState(r);if(!c.dirty&&c.renderedResolution===u&&c.renderedRevision==o&&c.renderedRenderOrder==a)return;const d=r.getSource(),f=!!r.getDeclutter(),p=d.getTileGrid(),_=d.getTileGridForProjection(n).getTileCoordExtent(e.wrappedTileCoord),v=d.getSourceTiles(t,n,e),w=Le(r);delete e.hitDetectionImageData[w],e.executorGroups[w]=[],c.dirty=!1;for(let E=0,C=v.length;E<C;++E){const S=v[E];if(S.getState()!=oe.LOADED)continue;const T=S.tileCoord,I=p.getTileCoordExtent(T),L=Bn(_,I),N=xr(L,r.getRenderBuffer()*u,this.tempExtent),b=Rl(I,L)?null:N,D=new Jw(0,L,u,t),z=up(u,t),q=function(re,B){let ie;const G=re.getStyleFunction()||r.getStyleFunction();if(G&&(ie=G(re,u)),ie){const Q=this.renderFeature(re,z,ie,D,f,B);c.dirty=c.dirty||Q}},Z=S.getFeatures();a&&a!==c.renderedRenderOrder&&Z.sort(a);for(let re=0,B=Z.length;re<B;++re){const ie=Z[re];(!b||wt(b,ie.getGeometry().getExtent()))&&q.call(this,ie,re)}const X=D.finish(),ne=r.getRenderMode()!=="vector"&&f&&v.length===1?null:L,H=new n1(ne,u,t,d.getOverlaps(),X,r.getRenderBuffer(),!0);e.executorGroups[w].push(H)}c.renderedRevision=o,c.renderedRenderOrder=a,c.renderedResolution=u}forEachFeatureAtCoordinate(e,t,n,r,o){const a=t.viewState.resolution,u=t.viewState.rotation;n=n??0;const c=this.getLayer(),f=c.getSource().getTileGridForProjection(t.viewState.projection),p=Nn([e]);xr(p,a*n,p);const m={},_=function(E,C,S){let T=E.getId();T===void 0&&(T=Le(E));const I=m[T];if(I){if(I!==!0&&S<I.distanceSq){if(S===0)return m[T]=!0,o.splice(o.lastIndexOf(I),1),r(E,c,C);I.geometry=C,I.distanceSq=S}}else{if(S===0)return m[T]=!0,r(E,c,C);o.push(m[T]={feature:E,layer:c,geometry:C,distanceSq:S,callback:r})}},v=this.renderedTiles;let w;for(let E=0,C=v.length;!w&&E<C;++E){const S=v[E],T=f.getTileCoordExtent(S.wrappedTileCoord);if(!wt(T,p))continue;const I=Le(c),L=[S.executorGroups[I]],N=c.getDeclutter();L.some(b=>{const D=N?t.declutter[N].all().map(z=>z.value):null;for(let z=0,q=b.length;z<q;++z)if(w=b[z].forEachFeatureAtCoordinate(e,a,u,n,_,D),w)return!0})}return w}getFeatures(e){return new Promise((t,n)=>{const r=this.getLayer(),o=Le(r),a=r.getSource(),u=this.renderedProjection,c=u.getExtent(),d=this.renderedResolution,f=a.getTileGridForProjection(u),p=zt(this.renderedPixelToCoordinateTransform_,e.slice()),m=f.getTileCoordForCoordAndResolution(p,d);let _;for(let T=0,I=this.renderedTiles.length;T<I;++T)if(m.toString()===this.renderedTiles[T].tileCoord.toString()){if(_=this.renderedTiles[T],_.getState()===oe.LOADED){const L=f.getTileCoordExtent(_.tileCoord);a.getWrapX()&&u.canWrapX()&&!to(c,L)&&qp(p,u);break}_=void 0}if(!_||_.loadingSourceTiles>0){t([]);return}const v=f.getTileCoordExtent(_.wrappedTileCoord),w=Is(v),E=[(p[0]-w[0])/d,(w[1]-p[1])/d],C=_.getSourceTiles().reduce(function(T,I){return T.concat(I.getFeatures())},[]);let S=_.hitDetectionImageData[o];if(!S){const T=tn(f.getTileSize(f.getZForResolution(d,a.zDirection))),I=this.renderedRotation_,L=[this.getRenderTransform(f.getTileCoordCenter(_.wrappedTileCoord),d,0,Wn,T[0]*Wn,T[1]*Wn,0)];S=i1(T,L,C,r.getStyleFunction(),f.getTileCoordExtent(_.wrappedTileCoord),_.getReplayState(r).renderedResolution,I),_.hitDetectionImageData[o]=S}t(r1(E,C,S))})}getFeaturesInExtent(e){const t=[],n=this.getTileCache();if(n.getCount()===0)return t;const o=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),a=o.getZForResolution(this.renderedResolution),u={};return n.forEach(c=>{if(c.tileCoord[0]!==a||c.getState()!==oe.LOADED)return;const d=c.getSourceTiles();for(let f=0,p=d.length;f<p;++f){const m=d[f],_=m.getKey();if(_ in u)continue;u[_]=!0;const v=m.tileCoord;if(wt(e,o.getTileCoordExtent(v))){const w=m.getFeatures();if(w)for(let E=0,C=w.length;E<C;++E){const S=w[E],T=S.getGeometry();wt(e,T.getExtent())&&t.push(S)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const n=this.context,r=n.globalAlpha;n.globalAlpha=t.opacity;const o=e.viewHints,a=!(o[pt.ANIMATING]||o[pt.INTERACTING]),u=this.renderedTiles;for(let c=0,d=u.length;c<d;++c){const f=u[c],p=f.executorGroups[Le(this.getLayer())],m=this.getLayer().getDeclutter();if(p)for(let _=p.length-1;_>=0;--_)p[_].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(f,e),e.viewState.rotation,a,bh,m?e.declutter[m]:void 0)}n.globalAlpha=r}renderDeferredInternal(e){const n=this.renderedTiles.reduce((u,c,d)=>(c.executorGroups[Le(this.getLayer())].forEach(f=>u.push({executorGroup:f,index:d})),u),[]),r=n.map(({executorGroup:u})=>u.getDeferredZIndexContexts()),o={};for(let u=0,c=n.length;u<c;++u){const d=n[u].executorGroup.getDeferredZIndexContexts();for(const f in d)o[f]=!0}Object.keys(o).sort(Ui).map(Number).forEach(u=>{r.forEach((c,d)=>{c[u]&&(c[u].forEach(f=>{const{executorGroup:p,index:m}=n[d],_=p.getRenderedContext(),v=_.globalAlpha;_.globalAlpha=this.renderedOpacity_;const w=this.tileClipContexts_[m];w&&w.draw(_),f.draw(_),w&&_.restore(),_.globalAlpha=v,f.clear()}),c[u].length=0)})})}getTileRenderTransform(e,t){const n=t.pixelRatio,r=t.viewState,o=r.center,a=r.resolution,u=r.rotation,c=t.size,d=Math.round(c[0]*n),f=Math.round(c[1]*n),m=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),_=e.tileCoord,v=m.getTileCoordExtent(e.wrappedTileCoord),w=m.getTileCoordExtent(_,this.tempExtent)[0]-v[0];return Bp(fg(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(o,a,u,n,d,f,w))}postRender(e,t){var I;const n=t.viewHints,r=!(n[pt.ANIMATING]||n[pt.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const o=this.getLayer(),a=o.getRenderMode(),u=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const c=o.getDeclutter(),d=c?ex[a].filter(L=>!bh.includes(L)):ex[a],f=t.viewState,p=f.rotation,m=o.getSource(),v=m.getTileGridForProjection(f.projection).getZForResolution(f.resolution,m.zDirection),w=this.renderedTiles,E=[],C=[],S=[];let T=!0;for(let L=w.length-1;L>=0;--L){const N=w[L];T=T&&!N.getReplayState(o).dirty;const b=N.executorGroups[Le(o)].filter(H=>H.hasExecutors(d));if(b.length===0)continue;const D=this.getTileRenderTransform(N,t),z=N.tileCoord[0];let q=!1;const Z=b[0].getClipCoords(D);let X=e,ne;if(Z){ne=new Rm,X=ne.getContext();for(let H=0,re=E.length;H<re;++H)if(v!==z&&z<C[H]){const B=E[H];wt([Z[0],Z[3],Z[4],Z[7]],[B[0],B[3],B[4],B[7]])&&(q||(X.save(),q=!0),X.beginPath(),X.moveTo(Z[0],Z[1]),X.lineTo(Z[2],Z[3]),X.lineTo(Z[4],Z[5]),X.lineTo(Z[6],Z[7]),X.moveTo(B[6],B[7]),X.lineTo(B[4],B[5]),X.lineTo(B[2],B[3]),X.lineTo(B[0],B[1]),X.clip())}E.push(Z),C.push(z)}for(let H=0,re=b.length;H<re;++H)b[H].execute(e,[e.canvas.width,e.canvas.height],D,p,r,d,(I=t.declutter)==null?void 0:I[c]);q&&(X===e?X.restore():S[L]=ne)}e.globalAlpha=u,this.ready=T,this.tileClipContexts_=S,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,n,r,o,a){if(!n)return!1;let u=!1;if(Array.isArray(n))for(let c=0,d=n.length;c<d;++c)u=Oh(r,e,n[c],t,this.boundHandleStyleImageChange_,void 0,o,a)||u;else u=Oh(r,e,n,t,this.boundHandleStyleImageChange_,void 0,o,a);return u}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const n=e.getReplayState(t),r=t.getRevision(),o=e.wantedResolution;return n.renderedTileResolution!==o||n.renderedTileRevision!==r}renderTileImage_(e,t){const n=this.getLayer(),r=e.getReplayState(n),o=n.getRevision(),a=e.executorGroups[Le(n)];r.renderedTileRevision=o;const u=e.wrappedTileCoord,c=u[0],d=n.getSource();let f=t.pixelRatio;const m=t.viewState.projection,_=d.getTileGridForProjection(m),v=_.getResolution(e.tileCoord[0]),w=t.pixelRatio/e.wantedResolution*v,E=_.getResolution(c),C=e.getContext();f=Math.round(Math.max(f,w/f));const S=d.getTilePixelSize(c,f,m);C.canvas.width=S[0],C.canvas.height=S[1];const T=f/w;if(T!==1){const b=lv(this.tmpTransform_);fg(b,T,T),C.setTransform.apply(C,b)}const I=_.getTileCoordExtent(u,this.tempExtent),L=w/E,N=lv(this.tmpTransform_);fg(N,L,-L),lP(N,-I[0],-I[3]);for(let b=0,D=a.length;b<D;++b)a[b].execute(C,[C.canvas.width*T,C.canvas.height*T],N,0,!0,KL[n.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}class ZL extends Sm{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const n=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n;const r=e.renderMode||"hybrid";Ve(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new $L(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(_s.PRELOAD)}getUseInterimTilesOnError(){return this.get(_s.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(_s.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(_s.USE_INTERIM_TILES_ON_ERROR,e)}}const Mg={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Qo=[0,0,0],ss=5;class Am{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Ve(tP(this.resolutions_,(r,o)=>o-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,o=this.resolutions_.length-1;r<o;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Ve(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Is(n)),Ve(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Ve(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:mm,Ve(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,o)=>{const a=new km(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(n){const u=this.getTileRangeForExtentAndZ(n,o);a.minX=Math.max(u.minX,a.minX),a.maxX=Math.min(u.maxX,a.maxX),a.minY=Math.max(u.minY,a.minY),a.maxY=Math.min(u.maxY,a.maxY)}return a}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const r=this.getTileRangeForExtentAndZ(e,t);for(let o=r.minX,a=r.maxX;o<=a;++o)for(let u=r.minY,c=r.maxY;u<=c;++u)n([t,o,u])}forEachTileCoordParentTileRange(e,t,n,r){let o,a,u,c=null,d=e[0]-1;for(this.zoomFactor_===2?(a=e[1],u=e[2]):c=this.getTileCoordExtent(e,r);d>=this.minZoom;){if(a!==void 0&&u!==void 0?(a=Math.floor(a/2),u=Math.floor(u/2),o=Zo(a,a,u,u,n)):o=this.getTileRangeForExtentAndZ(c,d,n),t(d,o))return!0;--d}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=e[1]*2,a=e[2]*2;return Zo(o,o+1,a,a+1,t)}const r=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],o=e[1],a=e[2];if(t===r)return Zo(o,a,o,a,n);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-r),d=Math.floor(o*c),f=Math.floor(a*c);if(t<r)return Zo(d,d,f,f,n);const p=Math.floor(c*(o+1))-1,m=Math.floor(c*(a+1))-1;return Zo(d,p,f,m,n)}const u=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(u,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Qo);const r=Qo[1],o=Qo[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Qo);const a=Qo[1],u=Qo[2];return Zo(r,a,o,u,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),r=tn(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*n,t[1]-(e[2]+.5)*r[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),o=tn(this.getTileSize(e[0]),this.tmpSize_),a=n[0]+e[1]*o[0]*r,u=n[1]-(e[2]+1)*o[1]*r,c=a+o[0]*r,d=u+o[1]*r;return Tr(a,u,c,d,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,r,o){const a=this.getZForResolution(n),u=n/this.getResolution(a),c=this.getOrigin(a),d=tn(this.getTileSize(a),this.tmpSize_);let f=u*(e-c[0])/n/d[0],p=u*(c[1]-t)/n/d[1];return r?(f=Xc(f,ss)-1,p=Xc(p,ss)-1):(f=Uc(f,ss),p=Uc(p,ss)),zh(a,f,p,o)}getTileCoordForXYAndZ_(e,t,n,r,o){const a=this.getOrigin(n),u=this.getResolution(n),c=tn(this.getTileSize(n),this.tmpSize_);let d=(e-a[0])/u/c[0],f=(a[1]-t)/u/c[1];return r?(d=Xc(d,ss)-1,f=Xc(f,ss)-1):(d=Uc(d,ss),f=Uc(f,ss)),zh(n,d,f,o)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=Wp(this.resolutions_,e,t||0);return ht(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return ww(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let r=this.minZoom;r<t;++r)n[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=n}}function z1(i){let e=i.getDefaultTileGrid();return e||(e=JL(i),i.setDefaultTileGrid(e)),e}function qL(i,e,t){const n=e[0],r=i.getTileCoordCenter(e),o=fd(t);if(!Sl(o,r)){const a=He(o),u=Math.ceil((o[0]-r[0])/a);return r[0]+=a*u,i.getTileCoordForCoordAndZ(r,n)}return e}function QL(i,e,t,n){n=n!==void 0?n:"top-left";const r=G1(i,e,t);return new Am({extent:i,origin:hP(i,n),resolutions:r,tileSize:t})}function j1(i){const e=i||{},t=e.extent||Vt("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:G1(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Am(n)}function G1(i,e,t,n){e=e!==void 0?e:Gw,t=tn(t!==void 0?t:mm);const r=en(i),o=He(i);n=n>0?n:Math.max(o/t[0],r/t[1]);const a=e+1,u=new Array(a);for(let c=0;c<a;++c)u[c]=n/Math.pow(2,c);return u}function JL(i,e,t,n){const r=fd(i);return QL(r,e,t,n)}function fd(i){i=Vt(i);let e=i.getExtent();if(!e){const t=180*Kp.degrees/i.getMetersPerUnit();e=Tr(-t,-t,t,t)}return e}class ek extends c1{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&tn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Le(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,r,o){return Oe()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:z1(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const r=this.getTileGridForProjection(n),o=this.getTilePixelRatio(t),a=tn(r.getTileSize(e),this.tmpSize);return o==1?a:_I(a,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const n=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=qL(n,e,t)),bL(e,n)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class tk extends li{constructor(e,t){super(e),this.tile=t}}const nk=/\{z\}/g,ik=/\{x\}/g,rk=/\{y\}/g,sk=/\{-y\}/g;function ok(i,e,t,n,r){return i.replace(nk,e.toString()).replace(ik,t.toString()).replace(rk,n.toString()).replace(sk,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-n).toString()})}function lk(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const n=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let o;for(o=n;o<=r;++o)e.push(i.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const n=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=n;r++)e.push(i.replace(t[0],r.toString()));return e}return e.push(i),e}function ak(i,e){return function(t,n,r){if(!t)return;let o;const a=t[0];if(e){const u=e.getFullTileRange(a);u&&(o=u.getHeight()-1)}return ok(i,a,t[1],t[2],o)}}function uk(i,e){const t=i.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=ak(i[r],e);return ck(n)}function ck(i){return i.length===1?i[0]:function(e,t,n){if(!e)return;const r=AL(e),o=fl(r,i.length);return i[o](e,t,n)}}class gd extends ek{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===gd.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=Le(t),r=t.getState();let o;r==oe.LOADING?(this.tileLoadingKeys_[n]=!0,o=Mg.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],o=r==oe.ERROR?Mg.TILELOADERROR:r==oe.LOADED?Mg.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new tk(o,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=lk(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(uk(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}}class hk extends gd{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:dk,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:f1,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!gh(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||gh(t,e)))return this.tileGrid;const n=Le(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=z1(e)),this.tileGridForProjection[n]}createTile_(e,t,n,r,o,a){const u=[e,t,n],c=this.getTileCoordForTileUrlFunction(u,o),d=c?this.tileUrlFunction(c,r,o):void 0,f=new this.tileClass(u,d!==void 0?oe.IDLE:oe.EMPTY,d!==void 0?d:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=a,f.addEventListener(Te.CHANGE,this.handleTileChange.bind(this)),f}getTile(e,t,n,r,o){const a=this.getProjection();if(!a||!o||gh(a,o))return this.getTileInternal(e,t,n,r,a||o);const u=[e,t,n],c=this.getKey(),d=this.getTileGridForProjection(a),f=this.getTileGridForProjection(o),p=this.getTileCoordForTileUrlFunction(u,o),m=new gp(a,d,o,f,u,p,this.getTilePixelRatio(r),this.getGutter(),(_,v,w,E)=>this.getTileInternal(_,v,w,E,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return m.key=c,m}getTileInternal(e,t,n,r,o){const a=this.getKey();return this.createTile_(e,t,n,r,o,a)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const n=Vt(e);if(n){const r=Le(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function dk(i,e){i.getImage().src=e}class fk extends hk{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:j1({extent:fd(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}class gk extends gd{constructor(e){const t=e.projection||"EPSG:3857",n=e.extent||fd(t),r=e.tileGrid||j1({extent:n,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:pk,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:FL,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,n){if(n.getState()===oe.IDLE){n.setState(oe.LOADING);const r=n.wrappedTileCoord,o=this.getTileGridForProjection(t),a=o.getTileCoordExtent(r),u=r[0],c=o.getResolution(u);xr(a,-c,a);const d=this.tileGrid,f=d.getExtent();f&&Bn(a,f,a);const p=d.getZForResolution(c,this.zDirection);d.forEachTileCoord(a,p,m=>{const _=this.tileUrlFunction(m,e,t);this.sourceTiles_[_]||(this.sourceTiles_[_]=new this.tileClass(m,_?oe.IDLE:oe.EMPTY,_,this.format_,this.tileLoadFunction));const v=this.sourceTiles_[_];n.sourceTiles.push(v),this.tileKeysBySourceTileUrl_[_]||(this.tileKeysBySourceTileUrl_[_]=[]),this.tileKeysBySourceTileUrl_[_].push(n.getKey());const w=v.getState();if(w<oe.LOADED){const E=C=>{this.handleTileChange(C);const S=v.getState();if(S===oe.LOADED||S===oe.ERROR){const T=v.getKey();T in n.errorTileKeys?v.getState()===oe.LOADED&&delete n.errorTileKeys[T]:n.loadingSourceTiles--,S===oe.ERROR?n.errorTileKeys[T]=!0:v.removeEventListener(Te.CHANGE,E),n.loadingSourceTiles===0&&n.setState(lo(n.errorTileKeys)?oe.LOADED:oe.ERROR)}};v.addEventListener(Te.CHANGE,E),n.loadingSourceTiles++}w===oe.IDLE&&(v.extent=d.getTileCoordExtent(m),v.projection=t,v.resolution=d.getResolution(m[0]),v.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(m=>m.getState()===oe.ERROR)?oe.ERROR:oe.LOADED)}return n.sourceTiles}removeSourceTiles(e){const t=e.sourceTiles;for(let n=0,r=t.length;n<r;++n){const o=t[n].getTileUrl(),a=this.getKey();if(!this.tileKeysBySourceTileUrl_[o])return;const u=this.tileKeysBySourceTileUrl_[o][a];u!==-1&&(this.tileKeysBySourceTileUrl_[o].splice(u,1),this.tileKeysBySourceTileUrl_[o].length===0&&(delete this.tileKeysBySourceTileUrl_[o],delete this.sourceTiles_[o]))}}getTile(e,t,n,r,o){const a=[e,t,n];let u=this.getTileCoordForTileUrlFunction(a,o);const c=this.getTileGrid().getExtent(),d=this.getTileGridForProjection(o);if(u&&c){const m=d.getTileCoordExtent(u);xr(m,-d.getResolution(e),m),wt(c,m)||(u=null)}let f=!0;if(u!==null){const m=this.tileGrid,_=d.getResolution(e),v=m.getZForResolution(_,1),w=d.getTileCoordExtent(u);xr(w,-_,w),m.forEachTileCoord(w,v,E=>{f=f&&!this.tileUrlFunction(E,r,o)})}const p=new OL(a,f?oe.EMPTY:oe.IDLE,u,this.getSourceTiles.bind(this,r,o),this.removeSourceTiles.bind(this));return p.key=this.getKey(),p}getTileGridForProjection(e){const t=e.getCode();let n=this.tileGrids_[t];if(!n){const r=this.tileGrid,o=r.getResolutions().slice(),a=o.map(function(d,f){return r.getOrigin(f)}),u=o.map(function(d,f){return r.getTileSize(f)}),c=Gw+1;for(let d=o.length;d<c;++d)o.push(o[d-1]/2),a.push(a[d-1]),u.push(u[d-1]);n=new Am({extent:r.getExtent(),origins:a,resolutions:o,tileSizes:u}),this.tileGrids_[t]=n}return n}getTilePixelRatio(e){return e}getTilePixelSize(e,t,n){const r=this.getTileGridForProjection(n),o=tn(r.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}}function pk(i,e){i.setLoader(function(t,n,r){h1(e,i.getFormat(),t,n,r,i.onLoad.bind(i),i.onError.bind(i))})}const mk='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class yk extends fk{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[mk];const n=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",r=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:n,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:r,wrapX:e.wrapX,zDirection:e.zDirection})}}class _k extends M1{}const Jo=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,W1=new Set,pp=typeof process=="object"&&process?process:{},B1=(i,e,t,n)=>{typeof pp.emitWarning=="function"?pp.emitWarning(i,e,t,n):console.error(`[${t}] ${e}: ${i}`)};let Gh=globalThis.AbortController,tx=globalThis.AbortSignal;var Dx;if(typeof Gh>"u"){tx=class{constructor(){tt(this,"onabort");tt(this,"_onabort",[]);tt(this,"reason");tt(this,"aborted",!1)}addEventListener(n,r){this._onabort.push(r)}},Gh=class{constructor(){tt(this,"signal",new tx);e()}abort(n){var r,o;if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(const a of this.signal._onabort)a(n);(o=(r=this.signal).onabort)==null||o.call(r,n)}}};let i=((Dx=pp.env)==null?void 0:Dx.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{i&&(i=!1,B1("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const vk=i=>!W1.has(i),us=i=>i&&i===Math.floor(i)&&i>0&&isFinite(i),V1=i=>us(i)?i<=Math.pow(2,8)?Uint8Array:i<=Math.pow(2,16)?Uint16Array:i<=Math.pow(2,32)?Uint32Array:i<=Number.MAX_SAFE_INTEGER?ph:null:null;class ph extends Array{constructor(e){super(e),this.fill(0)}}var _l;const eo=class eo{constructor(e,t){tt(this,"heap");tt(this,"length");if(!k(eo,_l))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}static create(e){const t=V1(e);if(!t)return[];Re(eo,_l,!0);const n=new eo(e,t);return Re(eo,_l,!1),n}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};_l=new WeakMap,Be(eo,_l,!1);let mp=eo;var Nx,zx,_i,bn,vi,xi,vl,xl,It,wi,Ct,rt,ke,un,On,Qt,Ft,Ei,Dt,Ci,Si,Fn,Ri,ps,cn,ue,_p,so,yr,du,Dn,U1,oo,wl,fu,cs,hs,vp,mh,yh,it,xp,Wa,ds,wp;const hy=class hy{constructor(e){Be(this,ue);Be(this,_i);Be(this,bn);Be(this,vi);Be(this,xi);Be(this,vl);Be(this,xl);tt(this,"ttl");tt(this,"ttlResolution");tt(this,"ttlAutopurge");tt(this,"updateAgeOnGet");tt(this,"updateAgeOnHas");tt(this,"allowStale");tt(this,"noDisposeOnSet");tt(this,"noUpdateTTL");tt(this,"maxEntrySize");tt(this,"sizeCalculation");tt(this,"noDeleteOnFetchRejection");tt(this,"noDeleteOnStaleGet");tt(this,"allowStaleOnFetchAbort");tt(this,"allowStaleOnFetchRejection");tt(this,"ignoreFetchAbort");Be(this,It);Be(this,wi);Be(this,Ct);Be(this,rt);Be(this,ke);Be(this,un);Be(this,On);Be(this,Qt);Be(this,Ft);Be(this,Ei);Be(this,Dt);Be(this,Ci);Be(this,Si);Be(this,Fn);Be(this,Ri);Be(this,ps);Be(this,cn);Be(this,so,()=>{});Be(this,yr,()=>{});Be(this,du,()=>{});Be(this,Dn,()=>!1);Be(this,oo,e=>{});Be(this,wl,(e,t,n)=>{});Be(this,fu,(e,t,n,r)=>{if(n||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});tt(this,Nx,"LRUCache");const{max:t=0,ttl:n,ttlResolution:r=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:u,allowStale:c,dispose:d,disposeAfter:f,noDisposeOnSet:p,noUpdateTTL:m,maxSize:_=0,maxEntrySize:v=0,sizeCalculation:w,fetchMethod:E,memoMethod:C,noDeleteOnFetchRejection:S,noDeleteOnStaleGet:T,allowStaleOnFetchRejection:I,allowStaleOnFetchAbort:L,ignoreFetchAbort:N}=e;if(t!==0&&!us(t))throw new TypeError("max option must be a nonnegative integer");const b=t?V1(t):Array;if(!b)throw new Error("invalid max value: "+t);if(Re(this,_i,t),Re(this,bn,_),this.maxEntrySize=v||k(this,bn),this.sizeCalculation=w,this.sizeCalculation){if(!k(this,bn)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(C!==void 0&&typeof C!="function")throw new TypeError("memoMethod must be a function if defined");if(Re(this,xl,C),E!==void 0&&typeof E!="function")throw new TypeError("fetchMethod must be a function if specified");if(Re(this,vl,E),Re(this,ps,!!E),Re(this,Ct,new Map),Re(this,rt,new Array(t).fill(void 0)),Re(this,ke,new Array(t).fill(void 0)),Re(this,un,new b(t)),Re(this,On,new b(t)),Re(this,Qt,0),Re(this,Ft,0),Re(this,Ei,mp.create(t)),Re(this,It,0),Re(this,wi,0),typeof d=="function"&&Re(this,vi,d),typeof f=="function"?(Re(this,xi,f),Re(this,Dt,[])):(Re(this,xi,void 0),Re(this,Dt,void 0)),Re(this,Ri,!!k(this,vi)),Re(this,cn,!!k(this,xi)),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!S,this.allowStaleOnFetchRejection=!!I,this.allowStaleOnFetchAbort=!!L,this.ignoreFetchAbort=!!N,this.maxEntrySize!==0){if(k(this,bn)!==0&&!us(k(this,bn)))throw new TypeError("maxSize must be a positive integer if specified");if(!us(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");fe(this,ue,U1).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!T,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!u,this.ttlResolution=us(r)||r===0?r:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!us(this.ttl))throw new TypeError("ttl must be a positive integer if specified");fe(this,ue,_p).call(this)}if(k(this,_i)===0&&this.ttl===0&&k(this,bn)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!k(this,_i)&&!k(this,bn)){const D="LRU_CACHE_UNBOUNDED";vk(D)&&(W1.add(D),B1("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",D,hy))}}static unsafeExposeInternals(e){return{starts:k(e,Si),ttls:k(e,Fn),sizes:k(e,Ci),keyMap:k(e,Ct),keyList:k(e,rt),valList:k(e,ke),next:k(e,un),prev:k(e,On),get head(){return k(e,Qt)},get tail(){return k(e,Ft)},free:k(e,Ei),isBackgroundFetch:t=>{var n;return fe(n=e,ue,it).call(n,t)},backgroundFetch:(t,n,r,o)=>{var a;return fe(a=e,ue,yh).call(a,t,n,r,o)},moveToTail:t=>{var n;return fe(n=e,ue,Wa).call(n,t)},indexes:t=>{var n;return fe(n=e,ue,cs).call(n,t)},rindexes:t=>{var n;return fe(n=e,ue,hs).call(n,t)},isStale:t=>{var n;return k(n=e,Dn).call(n,t)}}}get max(){return k(this,_i)}get maxSize(){return k(this,bn)}get calculatedSize(){return k(this,wi)}get size(){return k(this,It)}get fetchMethod(){return k(this,vl)}get memoMethod(){return k(this,xl)}get dispose(){return k(this,vi)}get disposeAfter(){return k(this,xi)}getRemainingTTL(e){return k(this,Ct).has(e)?1/0:0}*entries(){for(const e of fe(this,ue,cs).call(this))k(this,ke)[e]!==void 0&&k(this,rt)[e]!==void 0&&!fe(this,ue,it).call(this,k(this,ke)[e])&&(yield[k(this,rt)[e],k(this,ke)[e]])}*rentries(){for(const e of fe(this,ue,hs).call(this))k(this,ke)[e]!==void 0&&k(this,rt)[e]!==void 0&&!fe(this,ue,it).call(this,k(this,ke)[e])&&(yield[k(this,rt)[e],k(this,ke)[e]])}*keys(){for(const e of fe(this,ue,cs).call(this)){const t=k(this,rt)[e];t!==void 0&&!fe(this,ue,it).call(this,k(this,ke)[e])&&(yield t)}}*rkeys(){for(const e of fe(this,ue,hs).call(this)){const t=k(this,rt)[e];t!==void 0&&!fe(this,ue,it).call(this,k(this,ke)[e])&&(yield t)}}*values(){for(const e of fe(this,ue,cs).call(this))k(this,ke)[e]!==void 0&&!fe(this,ue,it).call(this,k(this,ke)[e])&&(yield k(this,ke)[e])}*rvalues(){for(const e of fe(this,ue,hs).call(this))k(this,ke)[e]!==void 0&&!fe(this,ue,it).call(this,k(this,ke)[e])&&(yield k(this,ke)[e])}[(zx=Symbol.iterator,Nx=Symbol.toStringTag,zx)](){return this.entries()}find(e,t={}){for(const n of fe(this,ue,cs).call(this)){const r=k(this,ke)[n],o=fe(this,ue,it).call(this,r)?r.__staleWhileFetching:r;if(o!==void 0&&e(o,k(this,rt)[n],this))return this.get(k(this,rt)[n],t)}}forEach(e,t=this){for(const n of fe(this,ue,cs).call(this)){const r=k(this,ke)[n],o=fe(this,ue,it).call(this,r)?r.__staleWhileFetching:r;o!==void 0&&e.call(t,o,k(this,rt)[n],this)}}rforEach(e,t=this){for(const n of fe(this,ue,hs).call(this)){const r=k(this,ke)[n],o=fe(this,ue,it).call(this,r)?r.__staleWhileFetching:r;o!==void 0&&e.call(t,o,k(this,rt)[n],this)}}purgeStale(){let e=!1;for(const t of fe(this,ue,hs).call(this,{allowStale:!0}))k(this,Dn).call(this,t)&&(fe(this,ue,ds).call(this,k(this,rt)[t],"expire"),e=!0);return e}info(e){const t=k(this,Ct).get(e);if(t===void 0)return;const n=k(this,ke)[t],r=fe(this,ue,it).call(this,n)?n.__staleWhileFetching:n;if(r===void 0)return;const o={value:r};if(k(this,Fn)&&k(this,Si)){const a=k(this,Fn)[t],u=k(this,Si)[t];if(a&&u){const c=a-(Jo.now()-u);o.ttl=c,o.start=Date.now()}}return k(this,Ci)&&(o.size=k(this,Ci)[t]),o}dump(){const e=[];for(const t of fe(this,ue,cs).call(this,{allowStale:!0})){const n=k(this,rt)[t],r=k(this,ke)[t],o=fe(this,ue,it).call(this,r)?r.__staleWhileFetching:r;if(o===void 0||n===void 0)continue;const a={value:o};if(k(this,Fn)&&k(this,Si)){a.ttl=k(this,Fn)[t];const u=Jo.now()-k(this,Si)[t];a.start=Math.floor(Date.now()-u)}k(this,Ci)&&(a.size=k(this,Ci)[t]),e.unshift([n,a])}return e}load(e){this.clear();for(const[t,n]of e){if(n.start){const r=Date.now()-n.start;n.start=Jo.now()-r}this.set(t,n.value,n)}}set(e,t,n={}){var m,_,v,w,E;if(t===void 0)return this.delete(e),this;const{ttl:r=this.ttl,start:o,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:u=this.sizeCalculation,status:c}=n;let{noUpdateTTL:d=this.noUpdateTTL}=n;const f=k(this,fu).call(this,e,t,n.size||0,u);if(this.maxEntrySize&&f>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),fe(this,ue,ds).call(this,e,"set"),this;let p=k(this,It)===0?void 0:k(this,Ct).get(e);if(p===void 0)p=k(this,It)===0?k(this,Ft):k(this,Ei).length!==0?k(this,Ei).pop():k(this,It)===k(this,_i)?fe(this,ue,mh).call(this,!1):k(this,It),k(this,rt)[p]=e,k(this,ke)[p]=t,k(this,Ct).set(e,p),k(this,un)[k(this,Ft)]=p,k(this,On)[p]=k(this,Ft),Re(this,Ft,p),jc(this,It)._++,k(this,wl).call(this,p,f,c),c&&(c.set="add"),d=!1;else{fe(this,ue,Wa).call(this,p);const C=k(this,ke)[p];if(t!==C){if(k(this,ps)&&fe(this,ue,it).call(this,C)){C.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:S}=C;S!==void 0&&!a&&(k(this,Ri)&&((m=k(this,vi))==null||m.call(this,S,e,"set")),k(this,cn)&&((_=k(this,Dt))==null||_.push([S,e,"set"])))}else a||(k(this,Ri)&&((v=k(this,vi))==null||v.call(this,C,e,"set")),k(this,cn)&&((w=k(this,Dt))==null||w.push([C,e,"set"])));if(k(this,oo).call(this,p),k(this,wl).call(this,p,f,c),k(this,ke)[p]=t,c){c.set="replace";const S=C&&fe(this,ue,it).call(this,C)?C.__staleWhileFetching:C;S!==void 0&&(c.oldValue=S)}}else c&&(c.set="update")}if(r!==0&&!k(this,Fn)&&fe(this,ue,_p).call(this),k(this,Fn)&&(d||k(this,du).call(this,p,r,o),c&&k(this,yr).call(this,c,p)),!a&&k(this,cn)&&k(this,Dt)){const C=k(this,Dt);let S;for(;S=C==null?void 0:C.shift();)(E=k(this,xi))==null||E.call(this,...S)}return this}pop(){var e;try{for(;k(this,It);){const t=k(this,ke)[k(this,Qt)];if(fe(this,ue,mh).call(this,!0),fe(this,ue,it).call(this,t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(k(this,cn)&&k(this,Dt)){const t=k(this,Dt);let n;for(;n=t==null?void 0:t.shift();)(e=k(this,xi))==null||e.call(this,...n)}}}has(e,t={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:r}=t,o=k(this,Ct).get(e);if(o!==void 0){const a=k(this,ke)[o];if(fe(this,ue,it).call(this,a)&&a.__staleWhileFetching===void 0)return!1;if(k(this,Dn).call(this,o))r&&(r.has="stale",k(this,yr).call(this,r,o));else return n&&k(this,so).call(this,o),r&&(r.has="hit",k(this,yr).call(this,r,o)),!0}else r&&(r.has="miss");return!1}peek(e,t={}){const{allowStale:n=this.allowStale}=t,r=k(this,Ct).get(e);if(r===void 0||!n&&k(this,Dn).call(this,r))return;const o=k(this,ke)[r];return fe(this,ue,it).call(this,o)?o.__staleWhileFetching:o}async fetch(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:u=this.noDisposeOnSet,size:c=0,sizeCalculation:d=this.sizeCalculation,noUpdateTTL:f=this.noUpdateTTL,noDeleteOnFetchRejection:p=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:m=this.allowStaleOnFetchRejection,ignoreFetchAbort:_=this.ignoreFetchAbort,allowStaleOnFetchAbort:v=this.allowStaleOnFetchAbort,context:w,forceRefresh:E=!1,status:C,signal:S}=t;if(!k(this,ps))return C&&(C.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:o,status:C});const T={allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:u,size:c,sizeCalculation:d,noUpdateTTL:f,noDeleteOnFetchRejection:p,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:v,ignoreFetchAbort:_,status:C,signal:S};let I=k(this,Ct).get(e);if(I===void 0){C&&(C.fetch="miss");const L=fe(this,ue,yh).call(this,e,I,T,w);return L.__returned=L}else{const L=k(this,ke)[I];if(fe(this,ue,it).call(this,L)){const q=n&&L.__staleWhileFetching!==void 0;return C&&(C.fetch="inflight",q&&(C.returnedStale=!0)),q?L.__staleWhileFetching:L.__returned=L}const N=k(this,Dn).call(this,I);if(!E&&!N)return C&&(C.fetch="hit"),fe(this,ue,Wa).call(this,I),r&&k(this,so).call(this,I),C&&k(this,yr).call(this,C,I),L;const b=fe(this,ue,yh).call(this,e,I,T,w),z=b.__staleWhileFetching!==void 0&&n;return C&&(C.fetch=N?"stale":"refresh",z&&N&&(C.returnedStale=!0)),z?b.__staleWhileFetching:b.__returned=b}}async forceFetch(e,t={}){const n=await this.fetch(e,t);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,t={}){const n=k(this,xl);if(!n)throw new Error("no memoMethod provided to constructor");const{context:r,forceRefresh:o,...a}=t,u=this.get(e,a);if(!o&&u!==void 0)return u;const c=n(e,u,{options:a,context:r});return this.set(e,c,a),c}get(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:a}=t,u=k(this,Ct).get(e);if(u!==void 0){const c=k(this,ke)[u],d=fe(this,ue,it).call(this,c);return a&&k(this,yr).call(this,a,u),k(this,Dn).call(this,u)?(a&&(a.get="stale"),d?(a&&n&&c.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?c.__staleWhileFetching:void 0):(o||fe(this,ue,ds).call(this,e,"expire"),a&&n&&(a.returnedStale=!0),n?c:void 0)):(a&&(a.get="hit"),d?c.__staleWhileFetching:(fe(this,ue,Wa).call(this,u),r&&k(this,so).call(this,u),c))}else a&&(a.get="miss")}delete(e){return fe(this,ue,ds).call(this,e,"delete")}clear(){return fe(this,ue,wp).call(this,"delete")}};_i=new WeakMap,bn=new WeakMap,vi=new WeakMap,xi=new WeakMap,vl=new WeakMap,xl=new WeakMap,It=new WeakMap,wi=new WeakMap,Ct=new WeakMap,rt=new WeakMap,ke=new WeakMap,un=new WeakMap,On=new WeakMap,Qt=new WeakMap,Ft=new WeakMap,Ei=new WeakMap,Dt=new WeakMap,Ci=new WeakMap,Si=new WeakMap,Fn=new WeakMap,Ri=new WeakMap,ps=new WeakMap,cn=new WeakMap,ue=new WeakSet,_p=function(){const e=new ph(k(this,_i)),t=new ph(k(this,_i));Re(this,Fn,e),Re(this,Si,t),Re(this,du,(o,a,u=Jo.now())=>{if(t[o]=a!==0?u:0,e[o]=a,a!==0&&this.ttlAutopurge){const c=setTimeout(()=>{k(this,Dn).call(this,o)&&fe(this,ue,ds).call(this,k(this,rt)[o],"expire")},a+1);c.unref&&c.unref()}}),Re(this,so,o=>{t[o]=e[o]!==0?Jo.now():0}),Re(this,yr,(o,a)=>{if(e[a]){const u=e[a],c=t[a];if(!u||!c)return;o.ttl=u,o.start=c,o.now=n||r();const d=o.now-c;o.remainingTTL=u-d}});let n=0;const r=()=>{const o=Jo.now();if(this.ttlResolution>0){n=o;const a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref()}return o};this.getRemainingTTL=o=>{const a=k(this,Ct).get(o);if(a===void 0)return 0;const u=e[a],c=t[a];if(!u||!c)return 1/0;const d=(n||r())-c;return u-d},Re(this,Dn,o=>{const a=t[o],u=e[o];return!!u&&!!a&&(n||r())-a>u})},so=new WeakMap,yr=new WeakMap,du=new WeakMap,Dn=new WeakMap,U1=function(){const e=new ph(k(this,_i));Re(this,wi,0),Re(this,Ci,e),Re(this,oo,t=>{Re(this,wi,k(this,wi)-e[t]),e[t]=0}),Re(this,fu,(t,n,r,o)=>{if(fe(this,ue,it).call(this,n))return 0;if(!us(r))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(r=o(n,t),!us(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return r}),Re(this,wl,(t,n,r)=>{if(e[t]=n,k(this,bn)){const o=k(this,bn)-e[t];for(;k(this,wi)>o;)fe(this,ue,mh).call(this,!0)}Re(this,wi,k(this,wi)+e[t]),r&&(r.entrySize=n,r.totalCalculatedSize=k(this,wi))})},oo=new WeakMap,wl=new WeakMap,fu=new WeakMap,cs=function*({allowStale:e=this.allowStale}={}){if(k(this,It))for(let t=k(this,Ft);!(!fe(this,ue,vp).call(this,t)||((e||!k(this,Dn).call(this,t))&&(yield t),t===k(this,Qt)));)t=k(this,On)[t]},hs=function*({allowStale:e=this.allowStale}={}){if(k(this,It))for(let t=k(this,Qt);!(!fe(this,ue,vp).call(this,t)||((e||!k(this,Dn).call(this,t))&&(yield t),t===k(this,Ft)));)t=k(this,un)[t]},vp=function(e){return e!==void 0&&k(this,Ct).get(k(this,rt)[e])===e},mh=function(e){var o,a;const t=k(this,Qt),n=k(this,rt)[t],r=k(this,ke)[t];return k(this,ps)&&fe(this,ue,it).call(this,r)?r.__abortController.abort(new Error("evicted")):(k(this,Ri)||k(this,cn))&&(k(this,Ri)&&((o=k(this,vi))==null||o.call(this,r,n,"evict")),k(this,cn)&&((a=k(this,Dt))==null||a.push([r,n,"evict"]))),k(this,oo).call(this,t),e&&(k(this,rt)[t]=void 0,k(this,ke)[t]=void 0,k(this,Ei).push(t)),k(this,It)===1?(Re(this,Qt,Re(this,Ft,0)),k(this,Ei).length=0):Re(this,Qt,k(this,un)[t]),k(this,Ct).delete(n),jc(this,It)._--,t},yh=function(e,t,n,r){const o=t===void 0?void 0:k(this,ke)[t];if(fe(this,ue,it).call(this,o))return o;const a=new Gh,{signal:u}=n;u==null||u.addEventListener("abort",()=>a.abort(u.reason),{signal:a.signal});const c={signal:a.signal,options:n,context:r},d=(w,E=!1)=>{const{aborted:C}=a.signal,S=n.ignoreFetchAbort&&w!==void 0;if(n.status&&(C&&!E?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,S&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),C&&!S&&!E)return p(a.signal.reason);const T=_;return k(this,ke)[t]===_&&(w===void 0?T.__staleWhileFetching?k(this,ke)[t]=T.__staleWhileFetching:fe(this,ue,ds).call(this,e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,w,c.options))),w},f=w=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=w),p(w)),p=w=>{const{aborted:E}=a.signal,C=E&&n.allowStaleOnFetchAbort,S=C||n.allowStaleOnFetchRejection,T=S||n.noDeleteOnFetchRejection,I=_;if(k(this,ke)[t]===_&&(!T||I.__staleWhileFetching===void 0?fe(this,ue,ds).call(this,e,"fetch"):C||(k(this,ke)[t]=I.__staleWhileFetching)),S)return n.status&&I.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),I.__staleWhileFetching;if(I.__returned===I)throw w},m=(w,E)=>{var S;const C=(S=k(this,vl))==null?void 0:S.call(this,e,o,c);C&&C instanceof Promise&&C.then(T=>w(T===void 0?void 0:T),E),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(w(void 0),n.allowStaleOnFetchAbort&&(w=T=>d(T,!0)))})};n.status&&(n.status.fetchDispatched=!0);const _=new Promise(m).then(d,f),v=Object.assign(_,{__abortController:a,__staleWhileFetching:o,__returned:void 0});return t===void 0?(this.set(e,v,{...c.options,status:void 0}),t=k(this,Ct).get(e)):k(this,ke)[t]=v,v},it=function(e){if(!k(this,ps))return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Gh},xp=function(e,t){k(this,On)[t]=e,k(this,un)[e]=t},Wa=function(e){e!==k(this,Ft)&&(e===k(this,Qt)?Re(this,Qt,k(this,un)[e]):fe(this,ue,xp).call(this,k(this,On)[e],k(this,un)[e]),fe(this,ue,xp).call(this,k(this,Ft),e),Re(this,Ft,e))},ds=function(e,t){var r,o,a,u;let n=!1;if(k(this,It)!==0){const c=k(this,Ct).get(e);if(c!==void 0)if(n=!0,k(this,It)===1)fe(this,ue,wp).call(this,t);else{k(this,oo).call(this,c);const d=k(this,ke)[c];if(fe(this,ue,it).call(this,d)?d.__abortController.abort(new Error("deleted")):(k(this,Ri)||k(this,cn))&&(k(this,Ri)&&((r=k(this,vi))==null||r.call(this,d,e,t)),k(this,cn)&&((o=k(this,Dt))==null||o.push([d,e,t]))),k(this,Ct).delete(e),k(this,rt)[c]=void 0,k(this,ke)[c]=void 0,c===k(this,Ft))Re(this,Ft,k(this,On)[c]);else if(c===k(this,Qt))Re(this,Qt,k(this,un)[c]);else{const f=k(this,On)[c];k(this,un)[f]=k(this,un)[c];const p=k(this,un)[c];k(this,On)[p]=k(this,On)[c]}jc(this,It)._--,k(this,Ei).push(c)}}if(k(this,cn)&&((a=k(this,Dt))!=null&&a.length)){const c=k(this,Dt);let d;for(;d=c==null?void 0:c.shift();)(u=k(this,xi))==null||u.call(this,...d)}return n},wp=function(e){var t,n,r;for(const o of fe(this,ue,hs).call(this,{allowStale:!0})){const a=k(this,ke)[o];if(fe(this,ue,it).call(this,a))a.__abortController.abort(new Error("deleted"));else{const u=k(this,rt)[o];k(this,Ri)&&((t=k(this,vi))==null||t.call(this,a,u,e)),k(this,cn)&&((n=k(this,Dt))==null||n.push([a,u,e]))}}if(k(this,Ct).clear(),k(this,ke).fill(void 0),k(this,rt).fill(void 0),k(this,Fn)&&k(this,Si)&&(k(this,Fn).fill(0),k(this,Si).fill(0)),k(this,Ci)&&k(this,Ci).fill(0),Re(this,Qt,0),Re(this,Ft,0),k(this,Ei).length=0,Re(this,wi,0),Re(this,It,0),k(this,cn)&&k(this,Dt)){const o=k(this,Dt);let a;for(;a=o==null?void 0:o.shift();)(r=k(this,xi))==null||r.call(this,...a)}};let yp=hy;var jl=Gx();const xk=jx(jl);class au extends Ye.PureComponent{constructor(e,t){super(e,t),this.style=(n,r)=>{if(this.ol!==this.style)return this.ol;let o;if(this.cache){o=this.props.cacheId(n,r);const d=this.cache.get(o);if(d)return d}const a=new Tn({zIndex:this.props.zIndex}),u=Ye.createElement(oi.Provider,{value:Object.assign(Object.assign({},this.context),{style:a})},this.props.render(n,r)),c=Wx.createRoot(document.createElement("div"));return jl.flushSync(()=>{c.render(u)}),this.cache&&this.cache.set(o,a),a},e.render?this.ol=this.style:this.ol=new Tn({zIndex:e.zIndex}),e.render&&e.cacheSize&&e.cacheId&&(this.cache=new yp({max:e.cacheSize}))}componentDidMount(){this.refresh()}componentDidUpdate(e,t,n){this.props!==e&&(En("willRefresh",this,e,this.props),this.refresh(e))}refresh(e){var t,n,r,o,a,u,c;if(!e||(e==null?void 0:e.render)!==this.props.render){if(!((t=this.context)===null||t===void 0)&&t.styleArray){if(this.ol===this.style)throw new Error("An RStyleArray must contain only static RStyles");this.context.styleArray.includes(this.ol)||this.context.styleArray.push(this.ol)}else!((r=(n=this.context)===null||n===void 0?void 0:n.feature)===null||r===void 0)&&r.setStyle?this.context.feature.setStyle(this.ol):!((a=(o=this.context)===null||o===void 0?void 0:o.vectorlayer)===null||a===void 0)&&a.setStyle?this.context.vectorlayer.setStyle(this.ol):!((c=(u=this.context)===null||u===void 0?void 0:u.vectortilelayer)===null||c===void 0)&&c.setStyle&&this.context.vectortilelayer.setStyle(this.ol);this.cache&&this.cache.clear()}this.ol instanceof Tn&&(!e||e.zIndex!==this.props.zIndex)&&this.ol.setZIndex(this.props.zIndex)}render(){return this.props.render?null:Ye.createElement("div",{className:"_rlayers_RStyle"},Ye.createElement(oi.Provider,{value:Object.assign(Object.assign({},this.context),{style:this.ol})},this.props.children))}static getStyle(e){return e==null?e:typeof e.style=="function"?(t,n)=>e.style(t,n):Object.keys(e).includes("current")?(t,n)=>e.current.style(t,n):e}static getStyleStatic(e){if(e==null)return e;let t;if(typeof e.style=="function"&&(t=e),!(Object.keys(e).includes("current")&&(t=e.current,t==null))){if(t){if(t.ol!==void 0&&typeof t.ol!="function")return t.ol;throw new TypeError("RStyle is dynamic and cannot be converted to Style")}if(typeof e=="function")throw new TypeError("StyleLike is dynamic and cannot be converted to Style");return e}}}au.contextType=oi;class Qc extends ji{}class Ze extends ii{constructor(e,t){var n,r;if(super(e,t),!(!((n=this===null||this===void 0?void 0:this.context)===null||n===void 0)&&n.vectorlayer))throw new Error("An RFeature must be part of a vector layer");e.feature?this.ol=e.feature:this.ol=new ti(Object.assign(Object.assign({},(r=e.properties)!==null&&r!==void 0?r:{}),{geometry:e.geometry,style:au.getStyle(e.style)})),Ze.initEventRelay(this.context.map),this.onchange=()=>this.forceUpdate()}static initEventRelay(e){for(const t of Ze.pointerEvents)e.on(t,Ze.eventRelay)}incrementHandlers(e){var t;const n=ii.getOLObject(Xa,this.context.vectorlayer);n[e]=((t=n[e])!==null&&t!==void 0?t:0)+1}decrementHandlers(e){const t=ii.getOLObject(Xa,this.context.vectorlayer);t[e]--}static dispatchEvent(e,t){var n;if(!e.feature)return!0;if(e.feature.dispatchEvent&&e.feature.dispatchEvent(t)===!1)return!1;t.target||(t.target=e.feature);const r=(n=e.layer)===null||n===void 0?void 0:n.get(A1)[t.type];return r?r.call(null,t):!0}static eventRelay(e){const t=[];if(e.map.forEachFeatureAtPixel(e.pixel,(n,r)=>t.push({feature:n,layer:r})&&!1,{hitTolerance:Ze.hitTolerance,layerFilter:n=>{var r,o,a,u,c;const d=ii.getOLObject(Xa,n);switch(e.type){case"click":return d.click>0;case"dblclick":return d.dblclick>0;case"singleclick":return d.singleclick>0;case"pointermove":return((r=d.pointermove)!==null&&r!==void 0?r:0)+((o=d.pointerenter)!==null&&o!==void 0?o:0)+((a=d.pointerleave)!==null&&a!==void 0?a:0)>0;case"pointerdrag":return((u=d.pointerdrag)!==null&&u!==void 0?u:0)+((c=d.pointerdragend)!==null&&c!==void 0?c:0)>0}return Object.keys(d).reduce((f,p)=>f+d[p],0)>0}}),e.dragging){Ze.lastFeaturesDragged.length||(Ze.lastFeaturesDragged=[...t]);for(const n of Ze.lastFeaturesDragged)t.find(r=>r.feature===n.feature)||t.push(n)}else{for(const n of Ze.lastFeaturesDragged)if(Ze.dispatchEvent(n,new Qc("pointerdragend",e.map,e.originalEvent))===!1)return Ze.lastFeaturesDragged=[],!1;Ze.lastFeaturesDragged=[]}if(e.type==="pointermove"){for(const n of Ze.lastFeaturesEntered)if(!t.find(r=>r.feature===n.feature)){const r=Ze.dispatchEvent(n,new Qc("pointerleave",e.map,e.originalEvent));if(n.feature=null,n.layer=null,r===!1)return Ze.lastFeaturesEntered=Ze.lastFeaturesEntered.filter(o=>o.feature),!1}Ze.lastFeaturesEntered=Ze.lastFeaturesEntered.filter(n=>n.feature);for(const n of t)if(!Ze.lastFeaturesEntered.find(r=>r.feature===n.feature)){const r=Ze.dispatchEvent(n,new Qc("pointerenter",e.map,e.originalEvent));if(Ze.lastFeaturesEntered.push(n),r===!1)return!1}}for(const n of t)if(Ze.dispatchEvent(n,new Qc(e.type,e.map,e.originalEvent))===!1)return!1;return!0}refresh(e){super.refresh(e),this.props.feature!==void 0&&this.props.feature!==this.ol&&(En("replacing bound feature",this.ol),this.componentWillUnmount(),this.ol=this.props.feature,this.componentDidMount()),this.props.properties!==(e==null?void 0:e.properties)&&this.ol.setProperties(this.props.properties),this.props.geometry!==(e==null?void 0:e.geometry)&&this.ol.setGeometry(this.props.geometry),this.props.style!==(e==null?void 0:e.style)&&this.ol.setStyle(au.getStyle(this.props.style))}componentDidMount(){En("didMount",this.ol),super.componentDidMount(),this.ol.on("change",this.onchange),this.context.vectorsource.addFeature(this.ol)}componentWillUnmount(){super.componentWillUnmount(),this.ol.un("change",this.onchange),this.context.vectorsource.removeFeature(this.ol)}render(){var e,t;const n=(t=(e=this.ol)===null||e===void 0?void 0:e.getGeometry())===null||t===void 0?void 0:t.getExtent(),r=n&&Pr(n);return Ye.createElement("div",{className:"_rlayers_RFeature"},Ye.createElement(oi.Provider,{value:Object.assign(Object.assign({},this.context),{feature:this.ol,rFeature:this,location:r})},this.props.children))}}Ze.pointerEvents=["click","pointerdrag","pointermove","singleclick","dblclick"];Ze.lastFeaturesEntered=[];Ze.lastFeaturesDragged=[];Ze.hitTolerance=3;const Xa="_rlayers_feature_handlers";class wk extends _k{constructor(e,t){super(e,t),this.source=new yk,this.ol=new YL({source:this.source}),this.eventSources=[this.ol,this.source]}refresh(e){super.refresh(e),this.ol.setProperties({label:"OpenStreetMap"})}}class mo extends Ye.PureComponent{constructor(e,t){if(super(e,t),!this.context)throw new Error("A style property must be part of a style");this.ol=this.create(e)}create(e){throw new Error("RBaseStyle is an abstract class")}refresh(e){if(En("refreshStyle",this),!!e)for(const t of this.classProps){const n=t.charAt(0).toUpperCase()+t.substring(1);(e&&e[t])!==this.props[t]&&(this.ol["set"+n]?this.ol["set"+n](this.props[t]):console.error(`Underlying OpenLayers object does not support updating of ${t} after object creation. If you are using an anonymous constant array or object, consider assigning its value to a constant and then passing the constant or use React.useMemo() to avoid this warning and improve performance.`))}}set(e){}componentDidMount(){this.set(this.ol)}componentDidUpdate(e,t,n){e!==this.props&&this.refresh(e)}componentWillUnmount(){this.set(null)}render(){return null}}mo.contextType=oi;mo.classProps=[];class Mm extends mo{create(e){return this.classProps=Mm.classProps,new Yi(e)}set(e){if(this.context.style.setStroke)return this.context.style.setStroke(e);throw new Error("Parent element does not support a stroke")}}Mm.classProps=["color","width","lineCap","lineJoin","lineDash"];class bm extends mo{create(e){return this.classProps=bm.classProps,new Zi(e)}set(e){if(this.context.style.setFill)return this.context.style.setFill(e);throw new Error("Parent element does not support a fill")}}bm.classProps=["color"];class Pu extends mo{create(e){throw new Error("RImage is an abstract class")}set(e){if(!this.context.style.setImage)throw new Error("Parent element does not support an image");this.context.style.setImage(e)}}Pu.classProps=["opacity","rotateWithView","rotation","scale","displacement"];class Iu extends Pu{create(e){throw new Error("RImage is an abstract class")}setStroke(e){this.stroke=e,this.ol=this.create(this.props),super.set(this.ol)}setFill(e){this.fill=e,this.ol=this.create(this.props),super.set(this.ol)}render(){return Ye.createElement("div",{className:"_rlayers_RStyle"},Ye.createElement(oi.Provider,{value:Object.assign(Object.assign({},this.context),{style:this})},this.props.children))}}Iu.classProps=Pu.classProps.concat(["radius"]);class Om extends Iu{create(e){return this.classProps=Om.classProps,new Dl(Object.assign(Object.assign({},e),{stroke:this.stroke,fill:this.fill}))}}Om.classProps=Iu.classProps.concat(["radius"]);class Fm extends Iu{create(e){return this.classProps=Fm.classProps,new wu(Object.assign(Object.assign({},e),{stroke:this.stroke,fill:this.fill}))}}Fm.classProps=Iu.classProps.concat(["radius1","radius2","points","angle"]);class Dm extends mo{create(e){return this.classProps=Dm.classProps,new ad(e)}set(e){if(!this.context.style.setText)throw new Error("Parent element does not support a text");this.context.style.setText(e)}render(){return Ye.createElement("div",{className:"_rlayers_RStyle_RText"},Ye.createElement(oi.Provider,{value:Object.assign(Object.assign({},this.context),{style:this.ol})},this.props.children))}}Dm.classProps=["text","font","offsetY","offsetX","overflow","scale","rotation","textAlign","padding","placement","textBaseline"];class Nm extends mo{create(e){this.classProps=Nm.classProps;const t=this.context.style;if(!t.setBackgroundFill||!t.setBackgroundStroke)throw new Error("Parent element does not support a background");return{setFill:t.setBackgroundFill.bind(t),setStroke:t.setBackgroundStroke.bind(t)}}render(){return Ye.createElement("div",{className:"_rlayers_RStyle_RBackground"},Ye.createElement(oi.Provider,{value:Object.assign(Object.assign({},this.context),{style:this.ol})},this.props.children))}}Nm.classProps=[];class zm extends Pu{create(e){return this.classProps=zm.classProps,new wm(e)}}zm.classProps=Pu.classProps.concat(["anchor","anchorXUnits","anchorYUnits","color","crossOrigin","img","offset","offsetOrigin","size","imgSize","src"]);class nx extends M1{constructor(e,t){super(e,t),this.source=new gk({url:this.props.url,format:this.props.format,projection:this.props.projection,cacheSize:this.props.cacheSize,extent:this.props.extent,overlaps:this.props.overlaps,state:this.props.state,tileClass:this.props.tileClass,tileSize:this.props.tileSize,tileGrid:this.props.tileGrid,tileLoadFunction:this.props.tileLoadFunction,tileUrlFunction:this.props.tileUrlFunction,transition:this.props.transition,wrapX:this.props.wrapX,zDirection:this.props.zDirection}),this.ol=new ZL({style:au.getStyle(this.props.style),source:this.source,renderBuffer:this.props.renderBuffer}),this.eventSources=[this.ol,this.source],Ze.initEventRelay(this.context.map)}incrementHandlers(e){var t;const n=ii.getOLObject(Xa,this.ol);n[e]=((t=n[e])!==null&&t!==void 0?t:0)+1}decrementHandlers(e){const t=ii.getOLObject(Xa,this.ol);t[e]--}refresh(e){super.refresh(e);const t=Object.keys(this.props).filter(n=>n.startsWith("on")).reduce((n,r)=>Object.assign(Object.assign({},n),{["_"+r.toLowerCase()]:this.props[r]}),{});this.ol.setProperties(t),(e==null?void 0:e.style)!==this.props.style&&this.ol.setStyle(au.getStyle(this.props.style)),(e==null?void 0:e.url)!==this.props.url&&(this.source.setUrl(this.props.url),this.source.refresh())}render(){return Ye.createElement("div",{className:"_rlayers_RLayerVectorTile"},Ye.createElement(oi.Provider,{value:Object.assign(Object.assign({},this.context),{layer:this.ol,vectortilelayer:this.ol,rLayer:this,rLayerVectorTile:this})},this.props.children))}}class Mi extends ii{constructor(e,t){var n,r;if(super(e,t),!(!((r=(n=this.context)===null||n===void 0?void 0:n.map)===null||r===void 0)&&r.addInteraction))throw new Error("An interaction must be part of a map");this.ol=this.createOL(e)}createOL(e){throw new Error("RBaseInteraction should not be directly instantiated")}refresh(e){for(const t of this.classProps)if(e&&e[t]!==this.props[t]){En("Replacing interaction",this,e),this.componentWillUnmount(),this.ol=this.createOL(this.props),this.componentDidMount();break}super.refresh(e)}componentDidMount(){super.componentDidMount(),this.context.map.addInteraction(this.ol)}componentWillUnmount(){super.componentWillUnmount(),this.context.map.removeInteraction(this.ol)}}Mi.classProps=[];class Lu extends Mi{}Lu.classProps=["handleDownEvent","handleDragEvent","handleMoveEvent","handleUpEvent"];class jm extends Lu{createOL(e){return this.classProps=jm.classProps,new E1(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}jm.classProps=["className","condition","minArea","boxEndCondition"];const bg={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"};class Og extends li{constructor(e,t,n,r,o){super(e),this.features=t,this.coordinate=n,this.startCoordinate=r,this.mapBrowserEvent=o}}class Ek extends ks{constructor(e){e=e||{},super(e),this.on,this.once,this.un,this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=e.features!==void 0?e.features:null;let t;if(e.layers&&!this.features_)if(typeof e.layers=="function")t=e.layers;else{const n=e.layers;t=function(r){return n.includes(r)}}else t=ws;this.layerFilter_=t,this.filter_=e.filter&&!this.features_?e.filter:ws,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.condition_=e.condition?e.condition:lu,this.lastFeature_=null,this.addChangeListener(Nh.ACTIVE,this.handleActiveChanged_)}handleDownEvent(e){if(!e.originalEvent||!this.condition_(e))return!1;if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);const t=this.features_||new dn([this.lastFeature_]);return this.dispatchEvent(new Og(bg.TRANSLATESTART,t,e.coordinate,this.startCoordinate_,e)),!0}return!1}handleUpEvent(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);const t=this.features_||new dn([this.lastFeature_]);return this.dispatchEvent(new Og(bg.TRANSLATEEND,t,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1}handleDragEvent(e){if(this.lastCoordinate_){const t=e.coordinate;e.map.getView().getProjection();const n=ct(t),r=ct(this.lastCoordinate_),o=n[0]-r[0],a=n[1]-r[1],u=this.features_||new dn([this.lastFeature_]);u.forEach(function(c){const d=c.getGeometry();d.translate(o,a),c.setGeometry(d)}),this.lastCoordinate_=t,this.dispatchEvent(new Og(bg.TRANSLATING,u,t,this.startCoordinate_,e))}}handleMoveEvent(e){const t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(e,t){return t.forEachFeatureAtPixel(e,(n,r)=>{if(!(!(n instanceof ti)||!this.filter_(n,r))&&!(this.features_&&!this.features_.getArray().includes(n)))return n},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(e){this.hitTolerance_=e}setMap(e){const t=this.getMap();super.setMap(e),this.updateState_(t)}handleActiveChanged_(){this.updateState_(null)}updateState_(e){let t=this.getMap();const n=this.getActive();(!t||!n)&&(t=t||e,t&&t.getViewport().classList.remove("ol-grab","ol-grabbing"))}}class Gm extends Lu{createOL(e){return this.classProps=Gm.classProps,new Ek(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}Gm.classProps=["features","layers","filter","hitTolerance"];const Jc={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class eh extends li{constructor(e,t){super(e),this.feature=t}}function Ck(i,e){const t=[];for(let n=0;n<e.length;++n){const o=e[n].getGeometry();X1(i,o,t)}return t}function th(i,e){return wr(i[0],i[1],e[0],e[1])}function cl(i,e){const t=i.length;return e<0?i[e+t]:e>=t?i[e-t]:i[e]}function nh(i,e,t){let n,r;e<t?(n=e,r=t):(n=t,r=e);const o=Math.ceil(n),a=Math.floor(r);if(o>a){const c=hl(i,n),d=hl(i,r);return th(c,d)}let u=0;if(n<o){const c=hl(i,n),d=cl(i,o);u+=th(c,d)}if(a<r){const c=cl(i,a),d=hl(i,r);u+=th(c,d)}for(let c=o;c<a-1;++c){const d=cl(i,c),f=cl(i,c+1);u+=th(d,f)}return u}function X1(i,e,t){if(e instanceof Hi){ih(i,e.getCoordinates(),!1,t);return}if(e instanceof kl){const n=e.getCoordinates();for(let r=0,o=n.length;r<o;++r)ih(i,n[r],!1,t);return}if(e instanceof $i){const n=e.getCoordinates();for(let r=0,o=n.length;r<o;++r)ih(i,n[r],!0,t);return}if(e instanceof Al){const n=e.getCoordinates();for(let r=0,o=n.length;r<o;++r){const a=n[r];for(let u=0,c=a.length;u<c;++u)ih(i,a[u],!0,t)}return}if(e instanceof Fh){const n=e.getGeometries();for(let r=0;r<n.length;++r)X1(i,n[r],t);return}}const Fg={index:-1,endIndex:NaN};function Sk(i,e,t,n){const r=i[0],o=i[1];let a=1/0,u=-1,c=NaN;for(let p=0;p<e.targets.length;++p){const m=e.targets[p],_=m.coordinates;let v=1/0,w;for(let E=0;E<_.length-1;++E){const C=_[E],S=_[E+1],T=H1(r,o,C,S);T.squaredDistance<v&&(v=T.squaredDistance,w=E+T.along)}v<a&&(a=v,m.ring&&e.targetIndex===p&&(m.endIndex>m.startIndex?w<m.startIndex&&(w+=_.length):m.endIndex<m.startIndex&&w>m.startIndex&&(w-=_.length)),c=w,u=p)}const d=e.targets[u];let f=d.ring;if(e.targetIndex===u&&f){const p=hl(d.coordinates,c),m=t.getPixelFromCoordinate(p);Sh(m,e.startPx)>n&&(f=!1)}if(f){const p=d.coordinates,m=p.length,_=d.startIndex,v=c;if(_<v){const w=nh(p,_,v);nh(p,_,v-m)<w&&(c-=m)}else{const w=nh(p,_,v);nh(p,_,v+m)<w&&(c+=m)}}return Fg.index=u,Fg.endIndex=c,Fg}function ih(i,e,t,n){const r=i[0],o=i[1];for(let a=0,u=e.length-1;a<u;++a){const c=e[a],d=e[a+1],f=H1(r,o,c,d);if(f.squaredDistance===0){const p=a+f.along;n.push({coordinates:e,ring:t,startIndex:p,endIndex:p});return}}}const Dg={along:0,squaredDistance:0};function H1(i,e,t,n){const r=t[0],o=t[1],a=n[0],u=n[1],c=a-r,d=u-o;let f=0,p=r,m=o;return(c!==0||d!==0)&&(f=ht(((i-r)*c+(e-o)*d)/(c*c+d*d),0,1),p+=c*f,m+=d*f),Dg.along=f,Dg.squaredDistance=ed(wr(i,e,p,m),10),Dg}function hl(i,e){const t=i.length;let n=Math.floor(e);const r=e-n;n>=t?n-=t:n<0&&(n+=t);let o=n+1;o>=t&&(o-=t);const a=i[n],u=a[0],c=a[1],d=i[o],f=d[0]-u,p=d[1]-c;return[u+f*r,c+p*r]}class Rk extends ks{constructor(e){const t=e;t.stopDown||(t.stopDown=Fl),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=Pk(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:ws,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let n=e.geometryFunction;if(!n){const r=this.mode_;if(r==="Circle")n=(o,a,u)=>{const c=a||new dd([NaN,NaN]),d=ct(o[0]),f=Tl(d,ct(o[o.length-1]));return c.setCenterAndRadius(d,Math.sqrt(f),this.geometryLayout_),c};else{let o;r==="Point"?o=Ii:r==="LineString"?o=Hi:r==="Polygon"&&(o=$i),n=(a,u,c)=>(u?r==="Polygon"?a[0].length?u.setCoordinates([a[0].concat([a[0][0]])],this.geometryLayout_):u.setCoordinates([],this.geometryLayout_):u.setCoordinates(a,this.geometryLayout_):u=new o(a,this.geometryLayout_),u)}}this.geometryFunction_=n,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new a1({source:new d1({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:Tk(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:Lm,this.freehandCondition_,e.freehand?this.freehandCondition_=lu:this.freehandCondition_=e.freehandCondition?e.freehandCondition:y1,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(Nh.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=lu:t=e:t=EL,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===Te.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===je.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===je.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===je.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===je.POINTERDOWN?n=!1:t&&this.getPointerCount()<2?(n=e.type===je.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===je.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===je.DBLCLICK&&(n=!1),super.handleEvent(e)&&n}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new ji(je.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),n=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),r=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),o=Nn([n,r]),a=this.traceSource_.getFeaturesInExtent(o);if(a.length===0)return;const u=Ck(e.coordinate,a);u.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:u,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const n=e.startIndex<=e.endIndex,r=e.startIndex<=t;n===r?n&&t>e.endIndex||!n&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(n&&t<e.endIndex||!n&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let n=0;if(e<t){const r=Math.ceil(e);let o=Math.floor(t);o===t&&(o-=1),n=o-r+1}else{const r=Math.floor(e);let o=Math.ceil(t);o===t&&(o+=1),n=r-o+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(e,t,n){if(t===n)return;const r=[];if(t<n){const o=Math.ceil(t);let a=Math.floor(n);a===n&&(a-=1);for(let u=o;u<=a;++u)r.push(cl(e.coordinates,u))}else{const o=Math.floor(t);let a=Math.ceil(n);a===n&&(a+=1);for(let u=o;u>=a;--u)r.push(cl(e.coordinates,u))}r.length&&this.appendCoordinates(r)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&Sh(t.startPx,e.pixel)<this.snapTolerance_)return;const n=Sk(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==n.index){if(t.targetIndex!==-1){const c=t.targets[t.targetIndex];this.removeTracedCoordinates_(c.startIndex,c.endIndex)}const u=t.targets[n.index];this.addTracedCoordinates_(u,u.startIndex,n.endIndex)}else{const u=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(u,n.endIndex)}t.targetIndex=n.index;const r=t.targets[t.targetIndex];r.endIndex=n.endIndex;const o=hl(r.coordinates,r.endIndex),a=this.getMap().getPixelFromCoordinate(o);e.coordinate=o,e.pixel=[Math.round(a[0]),Math.round(a[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const n=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const r=!this.finishCoordinate_;r&&this.startDrawing_(e.coordinate),!r&&this.freehand_?this.finishDrawing():!this.freehand_&&(!r||this.mode_==="Point")&&(this.atFinish_(e.pixel,n)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,n=e.pixel,r=t[0]-n[0],o=t[1]-n[1],a=r*r+o*o;if(this.shouldHandle_=this.freehand_?a>this.squaredClickTolerance_:a<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let n=!1;if(this.sketchFeature_){let r=!1,o=[this.finishCoordinate_];const a=this.mode_;if(a==="Point")n=!0;else if(a==="Circle")n=this.sketchCoords_.length===2;else if(a==="LineString")r=!t&&this.sketchCoords_.length>this.minPoints_;else if(a==="Polygon"){const u=this.sketchCoords_;r=u[0].length>this.minPoints_,o=[u[0][0],u[0][u[0].length-2]],t?o=[u[0][0]]:o=[u[0][0],u[0][u[0].length-2]]}if(r){const u=this.getMap();for(let c=0,d=o.length;c<d;c++){const f=o[c],p=u.getPixelFromCoordinate(f),m=e[0]-p[0],_=e[1]-p[1],v=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(m*m+_*_)<=v,n){this.finishCoordinate_=f;break}}}}return n}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new ti(new Ii(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new ti);const t=e.getLinearRing(0);let n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),n.changed()):(n=new Hi(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(e){const t=this.getMap().getView().getProjection(),n=Rh(this.geometryLayout_);for(;e.length<n;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new ti(new Hi(this.sketchLineCoords_)));const r=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new ti,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new eh(Jc.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),n=this.sketchFeature_.getGeometry(),r=t.getView().getProjection(),o=Rh(this.geometryLayout_);let a,u;for(;e.length<o;)e.push(0);this.mode_==="Point"?u=this.sketchCoords_:this.mode_==="Polygon"?(a=this.sketchCoords_[0],u=a[a.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(a=this.sketchCoords_,u=a[a.length-1]),u[0]=e[0],u[1]=e[1],this.geometryFunction_(this.sketchCoords_,n,r),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),n.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(n):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();let r,o;const a=this.mode_;return a==="LineString"||a==="Circle"?(this.finishCoordinate_=e.slice(),o=this.sketchCoords_,o.length>=this.maxPoints_&&(this.freehand_?o.pop():r=!0),o.push(e.slice()),this.geometryFunction_(o,t,n)):a==="Polygon"&&(o=this.sketchCoords_[0],o.length>=this.maxPoints_&&(this.freehand_?o.pop():r=!0),o.push(e.slice()),r&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,t,n)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),r?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),r=this.mode_;for(let o=0;o<e;++o){let a;if(r==="LineString"||r==="Circle"){if(a=this.sketchCoords_,a.splice(-2,1),a.length>=2){this.finishCoordinate_=a[a.length-2].slice();const u=this.finishCoordinate_.slice();a[a.length-1]=u,this.createOrUpdateSketchPoint_(u)}this.geometryFunction_(a,t,n),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(r==="Polygon"){a=this.sketchCoords_[0],a.splice(-2,1);const u=this.sketchLine_.getGeometry();if(a.length>=2){const c=a[a.length-2].slice();a[a.length-1]=c,this.createOrUpdateSketchPoint_(c)}u.setCoordinates(a),this.geometryFunction_(this.sketchCoords_,t,n)}if(a.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const n=e.getGeometry(),r=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,n,r)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,n,r),t=n.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new Su([t])):this.type_==="MultiLineString"?e.setGeometry(new kl([t])):this.type_==="MultiPolygon"&&e.setGeometry(new Al([t])),this.dispatchEvent(new eh(Jc.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new eh(Jc.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,n=!this.sketchFeature_;n&&this.startDrawing_(e[0]);let r;if(t==="LineString"||t==="Circle")r=this.sketchCoords_;else if(t==="Polygon")r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;n&&r.shift(),r.pop();for(let a=0;a<e.length;a++)this.addToDrawing_(e[a]);const o=e[e.length-1];this.sketchFeature_=this.addToDrawing_(o),this.modifyDrawing_(o)}extend(e){const n=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=n.getCoordinates();const r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.sketchPoint_=new ti(new Ii(r)),this.updateSketchFeatures_(),this.dispatchEvent(new eh(Jc.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function Tk(){const i=zw();return function(e,t){return i[e.getGeometry().getType()]}}function Pk(i){switch(i){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+i)}}class Wm extends Lu{createOL(e){var t;if(!(!((t=this===null||this===void 0?void 0:this.context)===null||t===void 0)&&t.vectorsource))throw new Error("A Draw interaction must be part of a vector layer");return this.classProps=Wm.classProps,new Rk(Object.assign({type:e.type,source:this.context.vectorsource},Object.keys(e).filter(n=>this.classProps.includes(n)).reduce((n,r)=>Object.assign(Object.assign({},n),{[r]:e[r]}),{})))}}Wm.classProps=["condition","finishCondition","freehandCondition","style","stopClick","maxPoints","minPoints","snapTolerance"];const ix=0,Ha=1,rx=[0,0,0,0],gl=[],Ng={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class zg extends li{constructor(e,t,n){super(e),this.features=t,this.mapBrowserEvent=n}}class Ik extends ks{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:v1,this.defaultDeleteCondition_=function(n){return vL(n)&&CL(n)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:lu,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new cp,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new a1({source:new d1({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:kk(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new dn(this.source_.getFeatures()),this.source_.addEventListener(wn.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(wn.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(Jt.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(Jt.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}const n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),e.addEventListener(Te.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new dn;const n=this.featuresBeingModified_.getArray();for(let r=0,o=t.length;r<o;++r){const a=t[r];for(let u=0,c=a.length;u<c;++u){const d=a[u].feature;d&&!n.includes(d)&&this.featuresBeingModified_.push(d)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new zg(Ng.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(Te.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,n=[];t.forEach(function(r){e===r.feature&&n.push(r)});for(let r=n.length-1;r>=0;--r){const o=n[r];for(let a=this.dragSegments_.length-1;a>=0;--a)this.dragSegments_[a][0]===o&&this.dragSegments_.splice(a,1);t.remove(o)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const n=t.getCoordinates(),r={feature:e,geometry:t,segment:[n,n]};this.rBush_.insert(t.getExtent(),r)}writeMultiPointGeometry_(e,t){const n=t.getCoordinates();for(let r=0,o=n.length;r<o;++r){const a=n[r],u={feature:e,geometry:t,depth:[r],index:r,segment:[a,a]};this.rBush_.insert(t.getExtent(),u)}}writeLineStringGeometry_(e,t){const n=t.getCoordinates();for(let r=0,o=n.length-1;r<o;++r){const a=n.slice(r,r+2),u={feature:e,geometry:t,index:r,segment:a};this.rBush_.insert(Nn(a),u)}}writeMultiLineStringGeometry_(e,t){const n=t.getCoordinates();for(let r=0,o=n.length;r<o;++r){const a=n[r];for(let u=0,c=a.length-1;u<c;++u){const d=a.slice(u,u+2),f={feature:e,geometry:t,depth:[r],index:u,segment:d};this.rBush_.insert(Nn(d),f)}}}writePolygonGeometry_(e,t){const n=t.getCoordinates();for(let r=0,o=n.length;r<o;++r){const a=n[r];for(let u=0,c=a.length-1;u<c;++u){const d=a.slice(u,u+2),f={feature:e,geometry:t,depth:[r],index:u,segment:d};this.rBush_.insert(Nn(d),f)}}}writeMultiPolygonGeometry_(e,t){const n=t.getCoordinates();for(let r=0,o=n.length;r<o;++r){const a=n[r];for(let u=0,c=a.length;u<c;++u){const d=a[u];for(let f=0,p=d.length-1;f<p;++f){const m=d.slice(f,f+2),_={feature:e,geometry:t,depth:[u,r],index:f,segment:m};this.rBush_.insert(Nn(m),_)}}}}writeCircleGeometry_(e,t){const n=t.getCenter(),r={feature:e,geometry:t,index:ix,segment:[n,n]},o={feature:e,geometry:t,index:Ha,segment:[n,n]},a=[r,o];r.featureSegments=a,o.featureSegments=a,this.rBush_.insert(Va(n),r);let u=t;this.rBush_.insert(u.getExtent(),o)}writeGeometryCollectionGeometry_(e,t){const n=t.getGeometriesArray();for(let r=0;r<n.length;++r){const o=n[r],a=this.SEGMENT_WRITERS_[o.getType()];a(e,o)}}createOrUpdateVertexFeature_(e,t,n){let r=this.vertexFeature_;return r?r.getGeometry().setCoordinates(e):(r=new ti(new Ii(e)),this.vertexFeature_=r,this.overlay_.getSource().addFeature(r)),r.set("features",t),r.set("geometries",n),r}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==je.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=je.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==je.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],n=[],r=[];for(let o=0,a=this.dragSegments_.length;o<a;++o){const u=this.dragSegments_[o],c=u[0],d=c.feature;n.includes(d)||n.push(d);const f=c.geometry;r.includes(f)||r.push(f);const p=c.depth;let m;const _=c.segment,v=u[1];for(;t.length<f.getStride();)t.push(_[v][t.length]);switch(f.getType()){case"Point":m=t,_[0]=t,_[1]=t;break;case"MultiPoint":m=f.getCoordinates(),m[c.index]=t,_[0]=t,_[1]=t;break;case"LineString":m=f.getCoordinates(),m[c.index+v]=t,_[v]=t;break;case"MultiLineString":m=f.getCoordinates(),m[p[0]][c.index+v]=t,_[v]=t;break;case"Polygon":m=f.getCoordinates(),m[p[0]][c.index+v]=t,_[v]=t;break;case"MultiPolygon":m=f.getCoordinates(),m[p[1]][p[0]][c.index+v]=t,_[v]=t;break;case"Circle":if(_[0]=t,_[1]=t,c.index===ix)this.changingFeature_=!0,f.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let w=Sh(ct(f.getCenter()),ct(t));f.setRadius(w),this.changingFeature_=!1}break}m&&this.setGeometryCoordinates_(f,m)}this.createOrUpdateVertexFeature_(t,n,r)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const n=this.vertexFeature_;if(n){e.map.getView().getProjection();const r=[],o=n.getGeometry().getCoordinates(),a=Nn([o]),u=this.rBush_.getInExtent(a),c={};u.sort(Lk);for(let d=0,f=u.length;d<f;++d){const p=u[d],m=p.segment;let _=Le(p.geometry);const v=p.depth;if(v&&(_+="-"+v.join("-")),c[_]||(c[_]=new Array(2)),p.geometry.getType()==="Circle"&&p.index===Ha){const w=ox(t,p);Ti(w,o)&&!c[_][0]&&(this.dragSegments_.push([p,0]),c[_][0]=p);continue}if(Ti(m[0],o)&&!c[_][0]){this.dragSegments_.push([p,0]),c[_][0]=p;continue}if(Ti(m[1],o)&&!c[_][1]){if(c[_][0]&&c[_][0].index===0){let w=p.geometry.getCoordinates();switch(p.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":w=w[v[1]];case"Polygon":if(p.index!==w[v[0]].length-2)continue;break}}this.dragSegments_.push([p,1]),c[_][1]=p;continue}Le(m)in this.vertexSegments_&&!c[_][0]&&!c[_][1]&&this.insertVertexCondition_(e)&&r.push(p)}r.length&&this.willModifyFeatures_(e,[r]);for(let d=r.length-1;d>=0;--d)this.insertVertex_(r[d],o)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const n=this.dragSegments_[t][0],r=n.geometry;if(r.getType()==="Circle"){const o=r.getCenter(),a=n.featureSegments[0],u=n.featureSegments[1];a.segment[0]=o,a.segment[1]=o,u.segment[0]=o,u.segment[1]=o,this.rBush_.update(Va(o),a);let c=r;this.rBush_.update(c.getExtent(),u)}else this.rBush_.update(Nn(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new zg(Ng.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,n){const r=n||t.getCoordinateFromPixel(e);t.getView().getProjection();const o=function(c,d){return sx(r,c)-sx(r,d)};let a,u;if(this.hitDetection_){const c=typeof this.hitDetection_=="object"?d=>d===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(d,f,p)=>{p&&p.getType()==="Point"&&(p=new Ii(Pl(p.getCoordinates())));const m=p||d.getGeometry();if(d instanceof ti&&this.features_.getArray().includes(d)){u=m;const _=d.getGeometry().getFlatCoordinates().slice(0,2);a=[{feature:d,geometry:u,segment:[_,_]}]}return!0},{layerFilter:c})}if(!a){const c=_r(Va(r,rx)),d=t.getView().getResolution()*this.pixelTolerance_,f=nd(xr(c,d,rx));a=this.rBush_.getInExtent(f)}if(a&&a.length>0){const c=a.sort(o)[0],d=c.segment;let f=ox(r,c);const p=t.getPixelFromCoordinate(f);let m=Sh(e,p);if(u||m<=this.pixelTolerance_){const _={};if(_[Le(d)]=!0,this.snapToPointer_||(this.delta_[0]=f[0]-r[0],this.delta_[1]=f[1]-r[1]),c.geometry.getType()==="Circle"&&c.index===Ha)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(f,[c.feature],[c.geometry]);else{const v=t.getPixelFromCoordinate(d[0]),w=t.getPixelFromCoordinate(d[1]),E=Tl(p,v),C=Tl(p,w);m=Math.sqrt(Math.min(E,C)),this.snappedToVertex_=m<=this.pixelTolerance_,this.snappedToVertex_&&(f=E>C?d[1]:d[0]),this.createOrUpdateVertexFeature_(f,[c.feature],[c.geometry]);const S={};S[Le(c.geometry)]=!0;for(let T=1,I=a.length;T<I;++T){const L=a[T].segment;if(Ti(d[0],L[0])&&Ti(d[1],L[1])||Ti(d[0],L[1])&&Ti(d[1],L[0])){const N=Le(a[T].geometry);N in S||(S[N]=!0,_[Le(L)]=!0)}else break}}this.vertexSegments_=_;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const n=e.segment,r=e.feature,o=e.geometry,a=e.depth,u=e.index;let c;for(;t.length<o.getStride();)t.push(0);switch(o.getType()){case"MultiLineString":c=o.getCoordinates(),c[a[0]].splice(u+1,0,t);break;case"Polygon":c=o.getCoordinates(),c[a[0]].splice(u+1,0,t);break;case"MultiPolygon":c=o.getCoordinates(),c[a[1]][a[0]].splice(u+1,0,t);break;case"LineString":c=o.getCoordinates(),c.splice(u+1,0,t);break;default:return}this.setGeometryCoordinates_(o,c);const d=this.rBush_;d.remove(e),this.updateSegmentIndices_(o,u,a,1);const f={segment:[n[0],t],feature:r,geometry:o,depth:a,index:u};d.insert(Nn(f.segment),f),this.dragSegments_.push([f,1]);const p={segment:[t,n[1]],feature:r,geometry:o,depth:a,index:u+1};d.insert(Nn(p.segment),p),this.dragSegments_.push([p,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=je.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new zg(Ng.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let n=!1,r,o,a,u,c,d,f,p,m,_,v;for(c=e.length-1;c>=0;--c)a=e[c],_=a[0],v=Le(_.feature),_.depth&&(v+="-"+_.depth.join("-")),v in t||(t[v]={}),a[1]===0?(t[v].right=_,t[v].index=_.index):a[1]==1&&(t[v].left=_,t[v].index=_.index+1);for(v in t){switch(m=t[v].right,f=t[v].left,d=t[v].index,p=d-1,f!==void 0?_=f:_=m,p<0&&(p=0),u=_.geometry,o=u.getCoordinates(),r=o,n=!1,u.getType()){case"MultiLineString":o[_.depth[0]].length>2&&(o[_.depth[0]].splice(d,1),n=!0);break;case"LineString":o.length>2&&(o.splice(d,1),n=!0);break;case"MultiPolygon":r=r[_.depth[1]];case"Polygon":r=r[_.depth[0]],r.length>4&&(d==r.length-1&&(d=0),r.splice(d,1),n=!0,d===0&&(r.pop(),r.push(r[0]),p=r.length-1));break}if(n){this.setGeometryCoordinates_(u,o);const w=[];if(f!==void 0&&(this.rBush_.remove(f),w.push(f.segment[0])),m!==void 0&&(this.rBush_.remove(m),w.push(m.segment[1])),f!==void 0&&m!==void 0){const E={depth:_.depth,feature:_.feature,geometry:_.geometry,index:p,segment:w};this.rBush_.insert(Nn(E.segment),E)}this.updateSegmentIndices_(u,d,_.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return n}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,n,r){this.rBush_.forEachInExtent(e.getExtent(),function(o){o.geometry===e&&(n===void 0||o.depth===void 0||Mr(o.depth,n))&&o.index>t&&(o.index+=r)})}}function Lk(i,e){return i.index-e.index}function sx(i,e,t){const n=e.geometry;if(n.getType()==="Circle"){let o=n;if(e.index===Ha){const a=Tl(o.getCenter(),ct(i)),u=Math.sqrt(a)-o.getRadius();return u*u}}const r=ct(i);return gl[0]=ct(e.segment[0]),gl[1]=ct(e.segment[1]),IP(r,gl)}function ox(i,e,t){const n=e.geometry;if(n.getType()==="Circle"&&e.index===Ha)return Pl(n.getClosestPoint(ct(i)));const r=ct(i);return gl[0]=ct(e.segment[0]),gl[1]=ct(e.segment[1]),Pl(hw(r,gl))}function kk(){const i=zw();return function(e,t){return i.Point}}class Bm extends Lu{createOL(e){var t;if(!(!((t=this===null||this===void 0?void 0:this.context)===null||t===void 0)&&t.vectorsource))throw new Error("A Modify interaction must be part of a vector layer");return this.classProps=Bm.classProps,new Ik(Object.assign({source:this.context.vectorsource},Object.keys(e).filter(n=>this.classProps.includes(n)).reduce((n,r)=>Object.assign(Object.assign({},n),{[r]:e[r]}),{})))}}Bm.classProps=["condition","deleteCondition","insertVertexCondition","style","pixelTolerance","hitDetection"];class Vm extends Mi{createOL(e){return this.classProps=Vm.classProps,new g1(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}Vm.classProps=["duration","delta"];class Um extends Mi{createOL(e){return this.classProps=Um.classProps,new x1(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}Um.classProps=["condition","kinetic"];class Xm extends Mi{createOL(e){return this.classProps=Xm.classProps,new w1(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}Xm.classProps=["condition","duration"];class Hm extends Mi{createOL(e){return this.classProps=Hm.classProps,new C1(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}Hm.classProps=["className","condition","duration","out","minArea"];class Ym extends Mi{createOL(e){return this.classProps=Ym.classProps,new T1(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}Ym.classProps=["condition","maxDelta","duration","useAnchor","constrainResolution"];class Km extends Mi{createOL(e){return this.classProps=Km.classProps,new P1(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}Km.classProps=["threshold","duration"];class $m extends Mi{createOL(e){return this.classProps=$m.classProps,new I1(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}$m.classProps=["duration"];class Zm extends Mi{createOL(e){return this.classProps=Zm.classProps,new S1(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}Zm.classProps=["condition","duration","pixelDelta"];class qm extends Mi{createOL(e){return this.classProps=qm.classProps,new R1(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}qm.classProps=["condition","duration","delta"];class Ak{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=ti,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?Vt(t.dataProjection):this.readProjection(e);t.extent&&n&&n.getUnits()==="tile-pixels"&&(n=Vt(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Oe()}readFeature(e,t){return Oe()}readFeatures(e,t){return Oe()}readGeometry(e,t){return Oe()}readProjection(e){return Oe()}writeFeature(e,t){return Oe()}writeFeatures(e,t){return Oe()}writeGeometry(e,t){return Oe()}}function Mk(i,e,t){const n=t?Vt(t.featureProjection):null,r=t?Vt(t.dataProjection):null;let o=i;if(n&&r&&!gh(n,r)){const a=r,u=n;a.getUnits()==="tile-pixels"?o.transform(a,u):o.applyTransform($a(a,u))}return o}const Ep=65536*65536,lx=1/Ep,bk=12,ax=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),jg=0,rh=1,Ma=2,sh=5;class Ok{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,n=this.length){for(;this.pos<n;){const r=this.readVarint(),o=r>>3,a=this.pos;this.type=r&7,e(o,t,this),this.pos===a&&this.skip(r)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Ep;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Ep;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let n,r;return r=t[this.pos++],n=r&127,r<128||(r=t[this.pos++],n|=(r&127)<<7,r<128)||(r=t[this.pos++],n|=(r&127)<<14,r<128)||(r=t[this.pos++],n|=(r&127)<<21,r<128)?n:(r=t[this.pos],n|=(r&15)<<28,Fk(n,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=bk&&ax?ax.decode(this.buf.subarray(t,e)):Kk(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===Ma?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===jg)for(;this.buf[this.pos++]>127;);else if(t===Ma)this.pos=this.readVarint()+this.pos;else if(t===sh)this.pos+=4;else if(t===rh)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.dataView=new DataView(n.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*lx),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*lx),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){Dk(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=$k(this.buf,e,this.pos);const n=this.pos-t;n>=128&&ux(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let n=0;n<t;n++)this.buf[this.pos++]=e[n]}writeRawMessage(e,t){this.pos++;const n=this.pos;e(t,this);const r=this.pos-n;r>=128&&ux(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r}writeMessage(e,t,n){this.writeTag(e,Ma),this.writeRawMessage(t,n)}writePackedVarint(e,t){t.length&&this.writeMessage(e,jk,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,Gk,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,Vk,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,Wk,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,Bk,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,Uk,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,Xk,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,Hk,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,Yk,t)}writeBytesField(e,t){this.writeTag(e,Ma),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,sh),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,sh),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,rh),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,rh),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,jg),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,jg),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,Ma),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,sh),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,rh),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function Fk(i,e,t){const n=t.buf;let r,o;if(o=n[t.pos++],r=(o&112)>>4,o<128||(o=n[t.pos++],r|=(o&127)<<3,o<128)||(o=n[t.pos++],r|=(o&127)<<10,o<128)||(o=n[t.pos++],r|=(o&127)<<17,o<128)||(o=n[t.pos++],r|=(o&127)<<24,o<128)||(o=n[t.pos++],r|=(o&1)<<31,o<128))return el(i,r,e);throw new Error("Expected varint not more than 10 bytes")}function el(i,e,t){return t?e*4294967296+(i>>>0):(e>>>0)*4294967296+(i>>>0)}function Dk(i,e){let t,n;if(i>=0?(t=i%4294967296|0,n=i/4294967296|0):(t=~(-i%4294967296),n=~(-i/4294967296),t^4294967295?t=t+1|0:(t=0,n=n+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Nk(t,n,e),zk(n,e)}function Nk(i,e,t){t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos]=i&127}function zk(i,e){const t=(i&7)<<4;e.buf[e.pos++]|=t|((i>>>=3)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127)))))}function ux(i,e,t){const n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(n);for(let r=t.pos-1;r>=i;r--)t.buf[r+n]=t.buf[r]}function jk(i,e){for(let t=0;t<i.length;t++)e.writeVarint(i[t])}function Gk(i,e){for(let t=0;t<i.length;t++)e.writeSVarint(i[t])}function Wk(i,e){for(let t=0;t<i.length;t++)e.writeFloat(i[t])}function Bk(i,e){for(let t=0;t<i.length;t++)e.writeDouble(i[t])}function Vk(i,e){for(let t=0;t<i.length;t++)e.writeBoolean(i[t])}function Uk(i,e){for(let t=0;t<i.length;t++)e.writeFixed32(i[t])}function Xk(i,e){for(let t=0;t<i.length;t++)e.writeSFixed32(i[t])}function Hk(i,e){for(let t=0;t<i.length;t++)e.writeFixed64(i[t])}function Yk(i,e){for(let t=0;t<i.length;t++)e.writeSFixed64(i[t])}function Kk(i,e,t){let n="",r=e;for(;r<t;){const o=i[r];let a=null,u=o>239?4:o>223?3:o>191?2:1;if(r+u>t)break;let c,d,f;u===1?o<128&&(a=o):u===2?(c=i[r+1],(c&192)===128&&(a=(o&31)<<6|c&63,a<=127&&(a=null))):u===3?(c=i[r+1],d=i[r+2],(c&192)===128&&(d&192)===128&&(a=(o&15)<<12|(c&63)<<6|d&63,(a<=2047||a>=55296&&a<=57343)&&(a=null))):u===4&&(c=i[r+1],d=i[r+2],f=i[r+3],(c&192)===128&&(d&192)===128&&(f&192)===128&&(a=(o&15)<<18|(c&63)<<12|(d&63)<<6|f&63,(a<=65535||a>=1114112)&&(a=null))),a===null?(a=65533,u=1):a>65535&&(a-=65536,n+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),n+=String.fromCharCode(a),r+=u}return n}function $k(i,e,t){for(let n=0,r,o;n<e.length;n++){if(r=e.charCodeAt(n),r>55295&&r<57344)if(o)if(r<56320){i[t++]=239,i[t++]=191,i[t++]=189,o=r;continue}else r=o-55296<<10|r-56320|65536,o=null;else{r>56319||n+1===e.length?(i[t++]=239,i[t++]=191,i[t++]=189):o=r;continue}else o&&(i[t++]=239,i[t++]=191,i[t++]=189,o=null);r<128?i[t++]=r:(r<2048?i[t++]=r>>6|192:(r<65536?i[t++]=r>>12|224:(i[t++]=r>>18|240,i[t++]=r>>12&63|128),i[t++]=r>>6&63|128),i[t++]=r&63|128)}return t}class cx extends Ak{constructor(e){super(),e=e||{},this.dataProjection=new $p({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:jn,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,n,r){e.pos=t.geometry;const o=e.readVarint()+e.pos;let a=1,u=0,c=0,d=0,f=0,p=0;for(;e.pos<o;){if(!u){const m=e.readVarint();a=m&7,u=m>>3}if(u--,a===1||a===2)c+=e.readSVarint(),d+=e.readSVarint(),a===1&&f>p&&(r.push(f),p=f),n.push(c,d),f+=2;else if(a===7)f>p&&(n.push(n[p],n[p+1]),f+=2);else throw new Error("Invalid command found in the PBF")}f>p&&(r.push(f),p=f)}createFeature_(e,t,n){const r=t.type;if(r===0)return null;let o;const a=t.properties;let u;this.idProperty_?(u=a[this.idProperty_],delete a[this.idProperty_]):u=t.id,a[this.layerName_]=t.layer.name;const c=[],d=[];this.readRawGeometry_(e,t,c,d);const f=eA(r,d.length);if(this.featureClass===jn)o=new this.featureClass(f,c,d,2,a,u),o.transform(n.dataProjection);else{let p;if(f=="Polygon"){const v=Sw(c,d);p=v.length>1?new Al(c,"XY",v):new $i(c,"XY",d)}else p=f==="Point"?new Ii(c,"XY"):f==="LineString"?new Hi(c,"XY"):f==="MultiPoint"?new Su(c,"XY"):f==="MultiLineString"?new kl(c,"XY",d):null;const m=this.featureClass;o=new m,this.geometryName_&&o.setGeometryName(this.geometryName_);const _=Mk(p,!1,n);o.setGeometry(_),u!==void 0&&o.setId(u),o.setProperties(a,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,t){const n=this.layers_;t=this.adaptOptions(t);const r=Vt(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const o=new Ok(e),a=o.readFields(Zk,{}),u=[];for(const c in a){if(n&&!n.includes(c))continue;const d=a[c],f=d?[0,0,d.extent,d.extent]:null;r.setExtent(f);for(let p=0,m=d.length;p<m;++p){const _=Jk(o,d,p),v=this.createFeature_(o,_,t);v!==null&&u.push(v)}}return u}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function Zk(i,e,t){if(i===3){const n={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(qk,n,r),n.length=n.features.length,n.length&&(e[n.name]=n)}}function qk(i,e,t){if(i===15)e.version=t.readVarint();else if(i===1)e.name=t.readString();else if(i===5)e.extent=t.readVarint();else if(i===2)e.features.push(t.pos);else if(i===3)e.keys.push(t.readString());else if(i===4){let n=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)i=t.readVarint()>>3,n=i===1?t.readString():i===2?t.readFloat():i===3?t.readDouble():i===4?t.readVarint64():i===5?t.readVarint():i===6?t.readSVarint():i===7?t.readBoolean():null;e.values.push(n)}}function Qk(i,e,t){if(i==1)e.id=t.readVarint();else if(i==2){const n=t.readVarint()+t.pos;for(;t.pos<n;){const r=e.layer.keys[t.readVarint()],o=e.layer.values[t.readVarint()];e.properties[r]=o}}else i==3?e.type=t.readVarint():i==4&&(e.geometry=t.pos)}function Jk(i,e,t){i.pos=e.features[t];const n=i.readVarint()+i.pos,r={layer:e,type:0,properties:{}};return i.readFields(Qk,r,n),r}function eA(i,e){let t;return i===1?t=e===1?"Point":"MultiPoint":i===2?t=e===1?"LineString":"MultiLineString":i===3&&(t="Polygon"),t}function hx(i,[e,t]){return Math.min(t,Math.max(e,i))}function St(i,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(i==null||i(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function tA(i,e=[]){let t=[];function n(o,a){const u=P.createContext(a),c=t.length;t=[...t,a];function d(p){const{scope:m,children:_,...v}=p,w=(m==null?void 0:m[i][c])||u,E=P.useMemo(()=>v,Object.values(v));return J.jsx(w.Provider,{value:E,children:_})}function f(p,m){const _=(m==null?void 0:m[i][c])||u,v=P.useContext(_);if(v)return v;if(a!==void 0)return a;throw new Error(`\`${p}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,f]}const r=()=>{const o=t.map(a=>P.createContext(a));return function(u){const c=(u==null?void 0:u[i])||o;return P.useMemo(()=>({[`__scope${i}`]:{...u,[i]:c}}),[u,c])}};return r.scopeName=i,[n,nA(r,...e)]}function nA(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const a=n.reduce((u,{useScope:c,scopeName:d})=>{const p=c(o)[`__scope${d}`];return{...u,...p}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function iA(i,e){typeof i=="function"?i(e):i!=null&&(i.current=e)}function Y1(...i){return e=>i.forEach(t=>iA(t,e))}function Ut(...i){return P.useCallback(Y1(...i),i)}var uu=P.forwardRef((i,e)=>{const{children:t,...n}=i,r=P.Children.toArray(t),o=r.find(sA);if(o){const a=o.props.children,u=r.map(c=>c===o?P.Children.count(a)>1?P.Children.only(null):P.isValidElement(a)?a.props.children:null:c);return J.jsx(Cp,{...n,ref:e,children:P.isValidElement(a)?P.cloneElement(a,void 0,u):null})}return J.jsx(Cp,{...n,ref:e,children:t})});uu.displayName="Slot";var Cp=P.forwardRef((i,e)=>{const{children:t,...n}=i;if(P.isValidElement(t)){const r=lA(t);return P.cloneElement(t,{...oA(n,t.props),ref:e?Y1(e,r):r})}return P.Children.count(t)>1?P.Children.only(null):null});Cp.displayName="SlotClone";var rA=({children:i})=>J.jsx(J.Fragment,{children:i});function sA(i){return P.isValidElement(i)&&i.type===rA}function oA(i,e){const t={...e};for(const n in e){const r=i[n],o=e[n];/^on[A-Z]/.test(n)?r&&o?t[n]=(...u)=>{o(...u),r(...u)}:r&&(t[n]=r):n==="style"?t[n]={...r,...o}:n==="className"&&(t[n]=[r,o].filter(Boolean).join(" "))}return{...i,...t}}function lA(i){var n,r;let e=(n=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=(r=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}function aA(i){const e=i+"CollectionProvider",[t,n]=tA(e),[r,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=_=>{const{scope:v,children:w}=_,E=Ye.useRef(null),C=Ye.useRef(new Map).current;return J.jsx(r,{scope:v,itemMap:C,collectionRef:E,children:w})};a.displayName=e;const u=i+"CollectionSlot",c=Ye.forwardRef((_,v)=>{const{scope:w,children:E}=_,C=o(u,w),S=Ut(v,C.collectionRef);return J.jsx(uu,{ref:S,children:E})});c.displayName=u;const d=i+"CollectionItemSlot",f="data-radix-collection-item",p=Ye.forwardRef((_,v)=>{const{scope:w,children:E,...C}=_,S=Ye.useRef(null),T=Ut(v,S),I=o(d,w);return Ye.useEffect(()=>(I.itemMap.set(S,{ref:S,...C}),()=>void I.itemMap.delete(S))),J.jsx(uu,{[f]:"",ref:T,children:E})});p.displayName=d;function m(_){const v=o(i+"CollectionConsumer",_);return Ye.useCallback(()=>{const E=v.collectionRef.current;if(!E)return[];const C=Array.from(E.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((I,L)=>C.indexOf(I.ref.current)-C.indexOf(L.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:c,ItemSlot:p},m,n]}function uA(i,e=[]){let t=[];function n(o,a){const u=P.createContext(a),c=t.length;t=[...t,a];const d=p=>{var C;const{scope:m,children:_,...v}=p,w=((C=m==null?void 0:m[i])==null?void 0:C[c])||u,E=P.useMemo(()=>v,Object.values(v));return J.jsx(w.Provider,{value:E,children:_})};d.displayName=o+"Provider";function f(p,m){var w;const _=((w=m==null?void 0:m[i])==null?void 0:w[c])||u,v=P.useContext(_);if(v)return v;if(a!==void 0)return a;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[d,f]}const r=()=>{const o=t.map(a=>P.createContext(a));return function(u){const c=(u==null?void 0:u[i])||o;return P.useMemo(()=>({[`__scope${i}`]:{...u,[i]:c}}),[u,c])}};return r.scopeName=i,[n,cA(r,...e)]}function cA(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const a=n.reduce((u,{useScope:c,scopeName:d})=>{const p=c(o)[`__scope${d}`];return{...u,...p}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}var hA=P.createContext(void 0);function dA(i){const e=P.useContext(hA);return i||e||"ltr"}var fA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Rt=fA.reduce((i,e)=>{const t=P.forwardRef((n,r)=>{const{asChild:o,...a}=n,u=o?uu:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),J.jsx(u,{...a,ref:r})});return t.displayName=`Primitive.${e}`,{...i,[e]:t}},{});function gA(i,e){i&&jl.flushSync(()=>i.dispatchEvent(e))}function Ir(i){const e=P.useRef(i);return P.useEffect(()=>{e.current=i}),P.useMemo(()=>(...t)=>{var n;return(n=e.current)==null?void 0:n.call(e,...t)},[])}function pA(i,e=globalThis==null?void 0:globalThis.document){const t=Ir(i);P.useEffect(()=>{const n=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var mA="DismissableLayer",Sp="dismissableLayer.update",yA="dismissableLayer.pointerDownOutside",_A="dismissableLayer.focusOutside",dx,K1=P.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$1=P.forwardRef((i,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:o,onInteractOutside:a,onDismiss:u,...c}=i,d=P.useContext(K1),[f,p]=P.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,_]=P.useState({}),v=Ut(e,b=>p(b)),w=Array.from(d.layers),[E]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),C=w.indexOf(E),S=f?w.indexOf(f):-1,T=d.layersWithOutsidePointerEventsDisabled.size>0,I=S>=C,L=wA(b=>{const D=b.target,z=[...d.branches].some(q=>q.contains(D));!I||z||(r==null||r(b),a==null||a(b),b.defaultPrevented||u==null||u())},m),N=EA(b=>{const D=b.target;[...d.branches].some(q=>q.contains(D))||(o==null||o(b),a==null||a(b),b.defaultPrevented||u==null||u())},m);return pA(b=>{S===d.layers.size-1&&(n==null||n(b),!b.defaultPrevented&&u&&(b.preventDefault(),u()))},m),P.useEffect(()=>{if(f)return t&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(dx=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),fx(),()=>{t&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=dx)}},[f,m,t,d]),P.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),fx())},[f,d]),P.useEffect(()=>{const b=()=>_({});return document.addEventListener(Sp,b),()=>document.removeEventListener(Sp,b)},[]),J.jsx(Rt.div,{...c,ref:v,style:{pointerEvents:T?I?"auto":"none":void 0,...i.style},onFocusCapture:St(i.onFocusCapture,N.onFocusCapture),onBlurCapture:St(i.onBlurCapture,N.onBlurCapture),onPointerDownCapture:St(i.onPointerDownCapture,L.onPointerDownCapture)})});$1.displayName=mA;var vA="DismissableLayerBranch",xA=P.forwardRef((i,e)=>{const t=P.useContext(K1),n=P.useRef(null),r=Ut(e,n);return P.useEffect(()=>{const o=n.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),J.jsx(Rt.div,{...i,ref:r})});xA.displayName=vA;function wA(i,e=globalThis==null?void 0:globalThis.document){const t=Ir(i),n=P.useRef(!1),r=P.useRef(()=>{});return P.useEffect(()=>{const o=u=>{if(u.target&&!n.current){let c=function(){Z1(yA,t,d,{discrete:!0})};const d={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}else e.removeEventListener("click",r.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function EA(i,e=globalThis==null?void 0:globalThis.document){const t=Ir(i),n=P.useRef(!1);return P.useEffect(()=>{const r=o=>{o.target&&!n.current&&Z1(_A,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function fx(){const i=new CustomEvent(Sp);document.dispatchEvent(i)}function Z1(i,e,t,{discrete:n}){const r=t.originalEvent.target,o=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(i,e,{once:!0}),n?gA(r,o):r.dispatchEvent(o)}var Gg=0;function CA(){P.useEffect(()=>{const i=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",i[0]??gx()),document.body.insertAdjacentElement("beforeend",i[1]??gx()),Gg++,()=>{Gg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Gg--}},[])}function gx(){const i=document.createElement("span");return i.setAttribute("data-radix-focus-guard",""),i.tabIndex=0,i.style.outline="none",i.style.opacity="0",i.style.position="fixed",i.style.pointerEvents="none",i}var Wg="focusScope.autoFocusOnMount",Bg="focusScope.autoFocusOnUnmount",px={bubbles:!1,cancelable:!0},SA="FocusScope",q1=P.forwardRef((i,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:o,...a}=i,[u,c]=P.useState(null),d=Ir(r),f=Ir(o),p=P.useRef(null),m=Ut(e,w=>c(w)),_=P.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;P.useEffect(()=>{if(n){let w=function(T){if(_.paused||!u)return;const I=T.target;u.contains(I)?p.current=I:fs(p.current,{select:!0})},E=function(T){if(_.paused||!u)return;const I=T.relatedTarget;I!==null&&(u.contains(I)||fs(p.current,{select:!0}))},C=function(T){if(document.activeElement===document.body)for(const L of T)L.removedNodes.length>0&&fs(u)};document.addEventListener("focusin",w),document.addEventListener("focusout",E);const S=new MutationObserver(C);return u&&S.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",E),S.disconnect()}}},[n,u,_.paused]),P.useEffect(()=>{if(u){yx.add(_);const w=document.activeElement;if(!u.contains(w)){const C=new CustomEvent(Wg,px);u.addEventListener(Wg,d),u.dispatchEvent(C),C.defaultPrevented||(RA(kA(Q1(u)),{select:!0}),document.activeElement===w&&fs(u))}return()=>{u.removeEventListener(Wg,d),setTimeout(()=>{const C=new CustomEvent(Bg,px);u.addEventListener(Bg,f),u.dispatchEvent(C),C.defaultPrevented||fs(w??document.body,{select:!0}),u.removeEventListener(Bg,f),yx.remove(_)},0)}}},[u,d,f,_]);const v=P.useCallback(w=>{if(!t&&!n||_.paused)return;const E=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,C=document.activeElement;if(E&&C){const S=w.currentTarget,[T,I]=TA(S);T&&I?!w.shiftKey&&C===I?(w.preventDefault(),t&&fs(T,{select:!0})):w.shiftKey&&C===T&&(w.preventDefault(),t&&fs(I,{select:!0})):C===S&&w.preventDefault()}},[t,n,_.paused]);return J.jsx(Rt.div,{tabIndex:-1,...a,ref:m,onKeyDown:v})});q1.displayName=SA;function RA(i,{select:e=!1}={}){const t=document.activeElement;for(const n of i)if(fs(n,{select:e}),document.activeElement!==t)return}function TA(i){const e=Q1(i),t=mx(e,i),n=mx(e.reverse(),i);return[t,n]}function Q1(i){const e=[],t=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function mx(i,e){for(const t of i)if(!PA(t,{upTo:e}))return t}function PA(i,{upTo:e}){if(getComputedStyle(i).visibility==="hidden")return!0;for(;i;){if(e!==void 0&&i===e)return!1;if(getComputedStyle(i).display==="none")return!0;i=i.parentElement}return!1}function IA(i){return i instanceof HTMLInputElement&&"select"in i}function fs(i,{select:e=!1}={}){if(i&&i.focus){const t=document.activeElement;i.focus({preventScroll:!0}),i!==t&&IA(i)&&e&&i.select()}}var yx=LA();function LA(){let i=[];return{add(e){const t=i[0];e!==t&&(t==null||t.pause()),i=_x(i,e),i.unshift(e)},remove(e){var t;i=_x(i,e),(t=i[0])==null||t.resume()}}}function _x(i,e){const t=[...i],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function kA(i){return i.filter(e=>e.tagName!=="A")}var Un=globalThis!=null&&globalThis.document?P.useLayoutEffect:()=>{},AA=CR.useId||(()=>{}),MA=0;function Qm(i){const[e,t]=P.useState(AA());return Un(()=>{t(n=>n??String(MA++))},[i]),e?`radix-${e}`:""}const bA=["top","right","bottom","left"],Cs=Math.min,Gn=Math.max,Wh=Math.round,oh=Math.floor,Ki=i=>({x:i,y:i}),OA={left:"right",right:"left",bottom:"top",top:"bottom"},FA={start:"end",end:"start"};function Rp(i,e,t){return Gn(i,Cs(e,t))}function Lr(i,e){return typeof i=="function"?i(e):i}function kr(i){return i.split("-")[0]}function Gl(i){return i.split("-")[1]}function Jm(i){return i==="x"?"y":"x"}function ey(i){return i==="y"?"height":"width"}function Ss(i){return["top","bottom"].includes(kr(i))?"y":"x"}function ty(i){return Jm(Ss(i))}function DA(i,e,t){t===void 0&&(t=!1);const n=Gl(i),r=ty(i),o=ey(r);let a=r==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=Bh(a)),[a,Bh(a)]}function NA(i){const e=Bh(i);return[Tp(i),e,Tp(e)]}function Tp(i){return i.replace(/start|end/g,e=>FA[e])}function zA(i,e,t){const n=["left","right"],r=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(i){case"top":case"bottom":return t?e?r:n:e?n:r;case"left":case"right":return e?o:a;default:return[]}}function jA(i,e,t,n){const r=Gl(i);let o=zA(kr(i),t==="start",n);return r&&(o=o.map(a=>a+"-"+r),e&&(o=o.concat(o.map(Tp)))),o}function Bh(i){return i.replace(/left|right|bottom|top/g,e=>OA[e])}function GA(i){return{top:0,right:0,bottom:0,left:0,...i}}function J1(i){return typeof i!="number"?GA(i):{top:i,right:i,bottom:i,left:i}}function Vh(i){const{x:e,y:t,width:n,height:r}=i;return{width:n,height:r,top:t,left:e,right:e+n,bottom:t+r,x:e,y:t}}function vx(i,e,t){let{reference:n,floating:r}=i;const o=Ss(e),a=ty(e),u=ey(a),c=kr(e),d=o==="y",f=n.x+n.width/2-r.width/2,p=n.y+n.height/2-r.height/2,m=n[u]/2-r[u]/2;let _;switch(c){case"top":_={x:f,y:n.y-r.height};break;case"bottom":_={x:f,y:n.y+n.height};break;case"right":_={x:n.x+n.width,y:p};break;case"left":_={x:n.x-r.width,y:p};break;default:_={x:n.x,y:n.y}}switch(Gl(e)){case"start":_[a]-=m*(t&&d?-1:1);break;case"end":_[a]+=m*(t&&d?-1:1);break}return _}const WA=async(i,e,t)=>{const{placement:n="bottom",strategy:r="absolute",middleware:o=[],platform:a}=t,u=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:i,floating:e,strategy:r}),{x:f,y:p}=vx(d,n,c),m=n,_={},v=0;for(let w=0;w<u.length;w++){const{name:E,fn:C}=u[w],{x:S,y:T,data:I,reset:L}=await C({x:f,y:p,initialPlacement:n,placement:m,strategy:r,middlewareData:_,rects:d,platform:a,elements:{reference:i,floating:e}});f=S??f,p=T??p,_={..._,[E]:{..._[E],...I}},L&&v<=50&&(v++,typeof L=="object"&&(L.placement&&(m=L.placement),L.rects&&(d=L.rects===!0?await a.getElementRects({reference:i,floating:e,strategy:r}):L.rects),{x:f,y:p}=vx(d,m,c)),w=-1)}return{x:f,y:p,placement:m,strategy:r,middlewareData:_}};async function cu(i,e){var t;e===void 0&&(e={});const{x:n,y:r,platform:o,rects:a,elements:u,strategy:c}=i,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:m=!1,padding:_=0}=Lr(e,i),v=J1(_),E=u[m?p==="floating"?"reference":"floating":p],C=Vh(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(E)))==null||t?E:E.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:d,rootBoundary:f,strategy:c})),S=p==="floating"?{x:n,y:r,width:a.floating.width,height:a.floating.height}:a.reference,T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),I=await(o.isElement==null?void 0:o.isElement(T))?await(o.getScale==null?void 0:o.getScale(T))||{x:1,y:1}:{x:1,y:1},L=Vh(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:S,offsetParent:T,strategy:c}):S);return{top:(C.top-L.top+v.top)/I.y,bottom:(L.bottom-C.bottom+v.bottom)/I.y,left:(C.left-L.left+v.left)/I.x,right:(L.right-C.right+v.right)/I.x}}const BA=i=>({name:"arrow",options:i,async fn(e){const{x:t,y:n,placement:r,rects:o,platform:a,elements:u,middlewareData:c}=e,{element:d,padding:f=0}=Lr(i,e)||{};if(d==null)return{};const p=J1(f),m={x:t,y:n},_=ty(r),v=ey(_),w=await a.getDimensions(d),E=_==="y",C=E?"top":"left",S=E?"bottom":"right",T=E?"clientHeight":"clientWidth",I=o.reference[v]+o.reference[_]-m[_]-o.floating[v],L=m[_]-o.reference[_],N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let b=N?N[T]:0;(!b||!await(a.isElement==null?void 0:a.isElement(N)))&&(b=u.floating[T]||o.floating[v]);const D=I/2-L/2,z=b/2-w[v]/2-1,q=Cs(p[C],z),Z=Cs(p[S],z),X=q,ne=b-w[v]-Z,H=b/2-w[v]/2+D,re=Rp(X,H,ne),B=!c.arrow&&Gl(r)!=null&&H!==re&&o.reference[v]/2-(H<X?q:Z)-w[v]/2<0,ie=B?H<X?H-X:H-ne:0;return{[_]:m[_]+ie,data:{[_]:re,centerOffset:H-re-ie,...B&&{alignmentOffset:ie}},reset:B}}}),VA=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t,n;const{placement:r,middlewareData:o,rects:a,initialPlacement:u,platform:c,elements:d}=e,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:w=!0,...E}=Lr(i,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const C=kr(r),S=Ss(u),T=kr(u)===u,I=await(c.isRTL==null?void 0:c.isRTL(d.floating)),L=m||(T||!w?[Bh(u)]:NA(u)),N=v!=="none";!m&&N&&L.push(...jA(u,w,v,I));const b=[u,...L],D=await cu(e,E),z=[];let q=((n=o.flip)==null?void 0:n.overflows)||[];if(f&&z.push(D[C]),p){const H=DA(r,a,I);z.push(D[H[0]],D[H[1]])}if(q=[...q,{placement:r,overflows:z}],!z.every(H=>H<=0)){var Z,X;const H=(((Z=o.flip)==null?void 0:Z.index)||0)+1,re=b[H];if(re)return{data:{index:H,overflows:q},reset:{placement:re}};let B=(X=q.filter(ie=>ie.overflows[0]<=0).sort((ie,G)=>ie.overflows[1]-G.overflows[1])[0])==null?void 0:X.placement;if(!B)switch(_){case"bestFit":{var ne;const ie=(ne=q.filter(G=>{if(N){const Q=Ss(G.placement);return Q===S||Q==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(Q=>Q>0).reduce((Q,Y)=>Q+Y,0)]).sort((G,Q)=>G[1]-Q[1])[0])==null?void 0:ne[0];ie&&(B=ie);break}case"initialPlacement":B=u;break}if(r!==B)return{reset:{placement:B}}}return{}}}};function xx(i,e){return{top:i.top-e.height,right:i.right-e.width,bottom:i.bottom-e.height,left:i.left-e.width}}function wx(i){return bA.some(e=>i[e]>=0)}const UA=function(i){return i===void 0&&(i={}),{name:"hide",options:i,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...r}=Lr(i,e);switch(n){case"referenceHidden":{const o=await cu(e,{...r,elementContext:"reference"}),a=xx(o,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:wx(a)}}}case"escaped":{const o=await cu(e,{...r,altBoundary:!0}),a=xx(o,t.floating);return{data:{escapedOffsets:a,escaped:wx(a)}}}default:return{}}}}};async function XA(i,e){const{placement:t,platform:n,elements:r}=i,o=await(n.isRTL==null?void 0:n.isRTL(r.floating)),a=kr(t),u=Gl(t),c=Ss(t)==="y",d=["left","top"].includes(a)?-1:1,f=o&&c?-1:1,p=Lr(e,i);let{mainAxis:m,crossAxis:_,alignmentAxis:v}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return u&&typeof v=="number"&&(_=u==="end"?v*-1:v),c?{x:_*f,y:m*d}:{x:m*d,y:_*f}}const HA=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(e){var t,n;const{x:r,y:o,placement:a,middlewareData:u}=e,c=await XA(e,i);return a===((t=u.offset)==null?void 0:t.placement)&&(n=u.arrow)!=null&&n.alignmentOffset?{}:{x:r+c.x,y:o+c.y,data:{...c,placement:a}}}}},YA=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(e){const{x:t,y:n,placement:r}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:u={fn:E=>{let{x:C,y:S}=E;return{x:C,y:S}}},...c}=Lr(i,e),d={x:t,y:n},f=await cu(e,c),p=Ss(kr(r)),m=Jm(p);let _=d[m],v=d[p];if(o){const E=m==="y"?"top":"left",C=m==="y"?"bottom":"right",S=_+f[E],T=_-f[C];_=Rp(S,_,T)}if(a){const E=p==="y"?"top":"left",C=p==="y"?"bottom":"right",S=v+f[E],T=v-f[C];v=Rp(S,v,T)}const w=u.fn({...e,[m]:_,[p]:v});return{...w,data:{x:w.x-t,y:w.y-n,enabled:{[m]:o,[p]:a}}}}}},KA=function(i){return i===void 0&&(i={}),{options:i,fn(e){const{x:t,y:n,placement:r,rects:o,middlewareData:a}=e,{offset:u=0,mainAxis:c=!0,crossAxis:d=!0}=Lr(i,e),f={x:t,y:n},p=Ss(r),m=Jm(p);let _=f[m],v=f[p];const w=Lr(u,e),E=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(c){const T=m==="y"?"height":"width",I=o.reference[m]-o.floating[T]+E.mainAxis,L=o.reference[m]+o.reference[T]-E.mainAxis;_<I?_=I:_>L&&(_=L)}if(d){var C,S;const T=m==="y"?"width":"height",I=["top","left"].includes(kr(r)),L=o.reference[p]-o.floating[T]+(I&&((C=a.offset)==null?void 0:C[p])||0)+(I?0:E.crossAxis),N=o.reference[p]+o.reference[T]+(I?0:((S=a.offset)==null?void 0:S[p])||0)-(I?E.crossAxis:0);v<L?v=L:v>N&&(v=N)}return{[m]:_,[p]:v}}}},$A=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(e){var t,n;const{placement:r,rects:o,platform:a,elements:u}=e,{apply:c=()=>{},...d}=Lr(i,e),f=await cu(e,d),p=kr(r),m=Gl(r),_=Ss(r)==="y",{width:v,height:w}=o.floating;let E,C;p==="top"||p==="bottom"?(E=p,C=m===(await(a.isRTL==null?void 0:a.isRTL(u.floating))?"start":"end")?"left":"right"):(C=p,E=m==="end"?"top":"bottom");const S=w-f.top-f.bottom,T=v-f.left-f.right,I=Cs(w-f[E],S),L=Cs(v-f[C],T),N=!e.middlewareData.shift;let b=I,D=L;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(D=T),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(b=S),N&&!m){const q=Gn(f.left,0),Z=Gn(f.right,0),X=Gn(f.top,0),ne=Gn(f.bottom,0);_?D=v-2*(q!==0||Z!==0?q+Z:Gn(f.left,f.right)):b=w-2*(X!==0||ne!==0?X+ne:Gn(f.top,f.bottom))}await c({...e,availableWidth:D,availableHeight:b});const z=await a.getDimensions(u.floating);return v!==z.width||w!==z.height?{reset:{rects:!0}}:{}}}};function pd(){return typeof window<"u"}function Wl(i){return eE(i)?(i.nodeName||"").toLowerCase():"#document"}function Vn(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function er(i){var e;return(e=(eE(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function eE(i){return pd()?i instanceof Node||i instanceof Vn(i).Node:!1}function ki(i){return pd()?i instanceof Element||i instanceof Vn(i).Element:!1}function qi(i){return pd()?i instanceof HTMLElement||i instanceof Vn(i).HTMLElement:!1}function Ex(i){return!pd()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof Vn(i).ShadowRoot}function ku(i){const{overflow:e,overflowX:t,overflowY:n,display:r}=Ai(i);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(r)}function ZA(i){return["table","td","th"].includes(Wl(i))}function md(i){return[":popover-open",":modal"].some(e=>{try{return i.matches(e)}catch{return!1}})}function ny(i){const e=iy(),t=ki(i)?Ai(i):i;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function qA(i){let e=Rs(i);for(;qi(e)&&!Ml(e);){if(ny(e))return e;if(md(e))return null;e=Rs(e)}return null}function iy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ml(i){return["html","body","#document"].includes(Wl(i))}function Ai(i){return Vn(i).getComputedStyle(i)}function yd(i){return ki(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function Rs(i){if(Wl(i)==="html")return i;const e=i.assignedSlot||i.parentNode||Ex(i)&&i.host||er(i);return Ex(e)?e.host:e}function tE(i){const e=Rs(i);return Ml(e)?i.ownerDocument?i.ownerDocument.body:i.body:qi(e)&&ku(e)?e:tE(e)}function hu(i,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=tE(i),o=r===((n=i.ownerDocument)==null?void 0:n.body),a=Vn(r);if(o){const u=Pp(a);return e.concat(a,a.visualViewport||[],ku(r)?r:[],u&&t?hu(u):[])}return e.concat(r,hu(r,[],t))}function Pp(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function nE(i){const e=Ai(i);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=qi(i),o=r?i.offsetWidth:t,a=r?i.offsetHeight:n,u=Wh(t)!==o||Wh(n)!==a;return u&&(t=o,n=a),{width:t,height:n,$:u}}function ry(i){return ki(i)?i:i.contextElement}function pl(i){const e=ry(i);if(!qi(e))return Ki(1);const t=e.getBoundingClientRect(),{width:n,height:r,$:o}=nE(e);let a=(o?Wh(t.width):t.width)/n,u=(o?Wh(t.height):t.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!u||!Number.isFinite(u))&&(u=1),{x:a,y:u}}const QA=Ki(0);function iE(i){const e=Vn(i);return!iy()||!e.visualViewport?QA:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function JA(i,e,t){return e===void 0&&(e=!1),!t||e&&t!==Vn(i)?!1:e}function co(i,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=i.getBoundingClientRect(),o=ry(i);let a=Ki(1);e&&(n?ki(n)&&(a=pl(n)):a=pl(i));const u=JA(o,t,n)?iE(o):Ki(0);let c=(r.left+u.x)/a.x,d=(r.top+u.y)/a.y,f=r.width/a.x,p=r.height/a.y;if(o){const m=Vn(o),_=n&&ki(n)?Vn(n):n;let v=m,w=Pp(v);for(;w&&n&&_!==v;){const E=pl(w),C=w.getBoundingClientRect(),S=Ai(w),T=C.left+(w.clientLeft+parseFloat(S.paddingLeft))*E.x,I=C.top+(w.clientTop+parseFloat(S.paddingTop))*E.y;c*=E.x,d*=E.y,f*=E.x,p*=E.y,c+=T,d+=I,v=Vn(w),w=Pp(v)}}return Vh({width:f,height:p,x:c,y:d})}function sy(i,e){const t=yd(i).scrollLeft;return e?e.left+t:co(er(i)).left+t}function rE(i,e,t){t===void 0&&(t=!1);const n=i.getBoundingClientRect(),r=n.left+e.scrollLeft-(t?0:sy(i,n)),o=n.top+e.scrollTop;return{x:r,y:o}}function eM(i){let{elements:e,rect:t,offsetParent:n,strategy:r}=i;const o=r==="fixed",a=er(n),u=e?md(e.floating):!1;if(n===a||u&&o)return t;let c={scrollLeft:0,scrollTop:0},d=Ki(1);const f=Ki(0),p=qi(n);if((p||!p&&!o)&&((Wl(n)!=="body"||ku(a))&&(c=yd(n)),qi(n))){const _=co(n);d=pl(n),f.x=_.x+n.clientLeft,f.y=_.y+n.clientTop}const m=a&&!p&&!o?rE(a,c,!0):Ki(0);return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-c.scrollLeft*d.x+f.x+m.x,y:t.y*d.y-c.scrollTop*d.y+f.y+m.y}}function tM(i){return Array.from(i.getClientRects())}function nM(i){const e=er(i),t=yd(i),n=i.ownerDocument.body,r=Gn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),o=Gn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-t.scrollLeft+sy(i);const u=-t.scrollTop;return Ai(n).direction==="rtl"&&(a+=Gn(e.clientWidth,n.clientWidth)-r),{width:r,height:o,x:a,y:u}}function iM(i,e){const t=Vn(i),n=er(i),r=t.visualViewport;let o=n.clientWidth,a=n.clientHeight,u=0,c=0;if(r){o=r.width,a=r.height;const d=iy();(!d||d&&e==="fixed")&&(u=r.offsetLeft,c=r.offsetTop)}return{width:o,height:a,x:u,y:c}}function rM(i,e){const t=co(i,!0,e==="fixed"),n=t.top+i.clientTop,r=t.left+i.clientLeft,o=qi(i)?pl(i):Ki(1),a=i.clientWidth*o.x,u=i.clientHeight*o.y,c=r*o.x,d=n*o.y;return{width:a,height:u,x:c,y:d}}function Cx(i,e,t){let n;if(e==="viewport")n=iM(i,t);else if(e==="document")n=nM(er(i));else if(ki(e))n=rM(e,t);else{const r=iE(i);n={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Vh(n)}function sE(i,e){const t=Rs(i);return t===e||!ki(t)||Ml(t)?!1:Ai(t).position==="fixed"||sE(t,e)}function sM(i,e){const t=e.get(i);if(t)return t;let n=hu(i,[],!1).filter(u=>ki(u)&&Wl(u)!=="body"),r=null;const o=Ai(i).position==="fixed";let a=o?Rs(i):i;for(;ki(a)&&!Ml(a);){const u=Ai(a),c=ny(a);!c&&u.position==="fixed"&&(r=null),(o?!c&&!r:!c&&u.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||ku(a)&&!c&&sE(i,a))?n=n.filter(f=>f!==a):r=u,a=Rs(a)}return e.set(i,n),n}function oM(i){let{element:e,boundary:t,rootBoundary:n,strategy:r}=i;const a=[...t==="clippingAncestors"?md(e)?[]:sM(e,this._c):[].concat(t),n],u=a[0],c=a.reduce((d,f)=>{const p=Cx(e,f,r);return d.top=Gn(p.top,d.top),d.right=Cs(p.right,d.right),d.bottom=Cs(p.bottom,d.bottom),d.left=Gn(p.left,d.left),d},Cx(e,u,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function lM(i){const{width:e,height:t}=nE(i);return{width:e,height:t}}function aM(i,e,t){const n=qi(e),r=er(e),o=t==="fixed",a=co(i,!0,o,e);let u={scrollLeft:0,scrollTop:0};const c=Ki(0);if(n||!n&&!o)if((Wl(e)!=="body"||ku(r))&&(u=yd(e)),n){const m=co(e,!0,o,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else r&&(c.x=sy(r));const d=r&&!n&&!o?rE(r,u):Ki(0),f=a.left+u.scrollLeft-c.x-d.x,p=a.top+u.scrollTop-c.y-d.y;return{x:f,y:p,width:a.width,height:a.height}}function Vg(i){return Ai(i).position==="static"}function Sx(i,e){if(!qi(i)||Ai(i).position==="fixed")return null;if(e)return e(i);let t=i.offsetParent;return er(i)===t&&(t=t.ownerDocument.body),t}function oE(i,e){const t=Vn(i);if(md(i))return t;if(!qi(i)){let r=Rs(i);for(;r&&!Ml(r);){if(ki(r)&&!Vg(r))return r;r=Rs(r)}return t}let n=Sx(i,e);for(;n&&ZA(n)&&Vg(n);)n=Sx(n,e);return n&&Ml(n)&&Vg(n)&&!ny(n)?t:n||qA(i)||t}const uM=async function(i){const e=this.getOffsetParent||oE,t=this.getDimensions,n=await t(i.floating);return{reference:aM(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function cM(i){return Ai(i).direction==="rtl"}const hM={convertOffsetParentRelativeRectToViewportRelativeRect:eM,getDocumentElement:er,getClippingRect:oM,getOffsetParent:oE,getElementRects:uM,getClientRects:tM,getDimensions:lM,getScale:pl,isElement:ki,isRTL:cM};function dM(i,e){let t=null,n;const r=er(i);function o(){var u;clearTimeout(n),(u=t)==null||u.disconnect(),t=null}function a(u,c){u===void 0&&(u=!1),c===void 0&&(c=1),o();const{left:d,top:f,width:p,height:m}=i.getBoundingClientRect();if(u||e(),!p||!m)return;const _=oh(f),v=oh(r.clientWidth-(d+p)),w=oh(r.clientHeight-(f+m)),E=oh(d),S={rootMargin:-_+"px "+-v+"px "+-w+"px "+-E+"px",threshold:Gn(0,Cs(1,c))||1};let T=!0;function I(L){const N=L[0].intersectionRatio;if(N!==c){if(!T)return a();N?a(!1,N):n=setTimeout(()=>{a(!1,1e-7)},1e3)}T=!1}try{t=new IntersectionObserver(I,{...S,root:r.ownerDocument})}catch{t=new IntersectionObserver(I,S)}t.observe(i)}return a(!0),o}function fM(i,e,t,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=ry(i),f=r||o?[...d?hu(d):[],...hu(e)]:[];f.forEach(C=>{r&&C.addEventListener("scroll",t,{passive:!0}),o&&C.addEventListener("resize",t)});const p=d&&u?dM(d,t):null;let m=-1,_=null;a&&(_=new ResizeObserver(C=>{let[S]=C;S&&S.target===d&&_&&(_.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var T;(T=_)==null||T.observe(e)})),t()}),d&&!c&&_.observe(d),_.observe(e));let v,w=c?co(i):null;c&&E();function E(){const C=co(i);w&&(C.x!==w.x||C.y!==w.y||C.width!==w.width||C.height!==w.height)&&t(),w=C,v=requestAnimationFrame(E)}return t(),()=>{var C;f.forEach(S=>{r&&S.removeEventListener("scroll",t),o&&S.removeEventListener("resize",t)}),p==null||p(),(C=_)==null||C.disconnect(),_=null,c&&cancelAnimationFrame(v)}}const gM=HA,pM=YA,mM=VA,yM=$A,_M=UA,Rx=BA,vM=KA,xM=(i,e,t)=>{const n=new Map,r={platform:hM,...t},o={...r.platform,_c:n};return WA(i,e,{...r,platform:o})};var _h=typeof document<"u"?P.useLayoutEffect:P.useEffect;function Uh(i,e){if(i===e)return!0;if(typeof i!=typeof e)return!1;if(typeof i=="function"&&i.toString()===e.toString())return!0;let t,n,r;if(i&&e&&typeof i=="object"){if(Array.isArray(i)){if(t=i.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!Uh(i[n],e[n]))return!1;return!0}if(r=Object.keys(i),t=r.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,r[n]))return!1;for(n=t;n--!==0;){const o=r[n];if(!(o==="_owner"&&i.$$typeof)&&!Uh(i[o],e[o]))return!1}return!0}return i!==i&&e!==e}function lE(i){return typeof window>"u"?1:(i.ownerDocument.defaultView||window).devicePixelRatio||1}function Tx(i,e){const t=lE(i);return Math.round(e*t)/t}function Ug(i){const e=P.useRef(i);return _h(()=>{e.current=i}),e}function wM(i){i===void 0&&(i={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:r,elements:{reference:o,floating:a}={},transform:u=!0,whileElementsMounted:c,open:d}=i,[f,p]=P.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,_]=P.useState(n);Uh(m,n)||_(n);const[v,w]=P.useState(null),[E,C]=P.useState(null),S=P.useCallback(G=>{G!==N.current&&(N.current=G,w(G))},[]),T=P.useCallback(G=>{G!==b.current&&(b.current=G,C(G))},[]),I=o||v,L=a||E,N=P.useRef(null),b=P.useRef(null),D=P.useRef(f),z=c!=null,q=Ug(c),Z=Ug(r),X=Ug(d),ne=P.useCallback(()=>{if(!N.current||!b.current)return;const G={placement:e,strategy:t,middleware:m};Z.current&&(G.platform=Z.current),xM(N.current,b.current,G).then(Q=>{const Y={...Q,isPositioned:X.current!==!1};H.current&&!Uh(D.current,Y)&&(D.current=Y,jl.flushSync(()=>{p(Y)}))})},[m,e,t,Z,X]);_h(()=>{d===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,p(G=>({...G,isPositioned:!1})))},[d]);const H=P.useRef(!1);_h(()=>(H.current=!0,()=>{H.current=!1}),[]),_h(()=>{if(I&&(N.current=I),L&&(b.current=L),I&&L){if(q.current)return q.current(I,L,ne);ne()}},[I,L,ne,q,z]);const re=P.useMemo(()=>({reference:N,floating:b,setReference:S,setFloating:T}),[S,T]),B=P.useMemo(()=>({reference:I,floating:L}),[I,L]),ie=P.useMemo(()=>{const G={position:t,left:0,top:0};if(!B.floating)return G;const Q=Tx(B.floating,f.x),Y=Tx(B.floating,f.y);return u?{...G,transform:"translate("+Q+"px, "+Y+"px)",...lE(B.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Q,top:Y}},[t,u,B.floating,f.x,f.y]);return P.useMemo(()=>({...f,update:ne,refs:re,elements:B,floatingStyles:ie}),[f,ne,re,B,ie])}const EM=i=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:i,fn(t){const{element:n,padding:r}=typeof i=="function"?i(t):i;return n&&e(n)?n.current!=null?Rx({element:n.current,padding:r}).fn(t):{}:n?Rx({element:n,padding:r}).fn(t):{}}}},CM=(i,e)=>({...gM(i),options:[i,e]}),SM=(i,e)=>({...pM(i),options:[i,e]}),RM=(i,e)=>({...vM(i),options:[i,e]}),TM=(i,e)=>({...mM(i),options:[i,e]}),PM=(i,e)=>({...yM(i),options:[i,e]}),IM=(i,e)=>({..._M(i),options:[i,e]}),LM=(i,e)=>({...EM(i),options:[i,e]});var kM="Arrow",aE=P.forwardRef((i,e)=>{const{children:t,width:n=10,height:r=5,...o}=i;return J.jsx(Rt.svg,{...o,ref:e,width:n,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:i.asChild?t:J.jsx("polygon",{points:"0,0 30,0 15,10"})})});aE.displayName=kM;var AM=aE;function MM(i,e=[]){let t=[];function n(o,a){const u=P.createContext(a),c=t.length;t=[...t,a];function d(p){const{scope:m,children:_,...v}=p,w=(m==null?void 0:m[i][c])||u,E=P.useMemo(()=>v,Object.values(v));return J.jsx(w.Provider,{value:E,children:_})}function f(p,m){const _=(m==null?void 0:m[i][c])||u,v=P.useContext(_);if(v)return v;if(a!==void 0)return a;throw new Error(`\`${p}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,f]}const r=()=>{const o=t.map(a=>P.createContext(a));return function(u){const c=(u==null?void 0:u[i])||o;return P.useMemo(()=>({[`__scope${i}`]:{...u,[i]:c}}),[u,c])}};return r.scopeName=i,[n,bM(r,...e)]}function bM(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const a=n.reduce((u,{useScope:c,scopeName:d})=>{const p=c(o)[`__scope${d}`];return{...u,...p}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function OM(i){const[e,t]=P.useState(void 0);return Un(()=>{if(i){t({width:i.offsetWidth,height:i.offsetHeight});const n=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const o=r[0];let a,u;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,u=d.blockSize}else a=i.offsetWidth,u=i.offsetHeight;t({width:a,height:u})});return n.observe(i,{box:"border-box"}),()=>n.unobserve(i)}else t(void 0)},[i]),e}var oy="Popper",[uE,cE]=MM(oy),[FM,hE]=uE(oy),dE=i=>{const{__scopePopper:e,children:t}=i,[n,r]=P.useState(null);return J.jsx(FM,{scope:e,anchor:n,onAnchorChange:r,children:t})};dE.displayName=oy;var fE="PopperAnchor",gE=P.forwardRef((i,e)=>{const{__scopePopper:t,virtualRef:n,...r}=i,o=hE(fE,t),a=P.useRef(null),u=Ut(e,a);return P.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:J.jsx(Rt.div,{...r,ref:u})});gE.displayName=fE;var ly="PopperContent",[DM,NM]=uE(ly),pE=P.forwardRef((i,e)=>{var le,he,Se,xe,Ae,Ne;const{__scopePopper:t,side:n="bottom",sideOffset:r=0,align:o="center",alignOffset:a=0,arrowPadding:u=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:p="partial",hideWhenDetached:m=!1,updatePositionStrategy:_="optimized",onPlaced:v,...w}=i,E=hE(ly,t),[C,S]=P.useState(null),T=Ut(e,lt=>S(lt)),[I,L]=P.useState(null),N=OM(I),b=(N==null?void 0:N.width)??0,D=(N==null?void 0:N.height)??0,z=n+(o!=="center"?"-"+o:""),q=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},Z=Array.isArray(d)?d:[d],X=Z.length>0,ne={padding:q,boundary:Z.filter(jM),altBoundary:X},{refs:H,floatingStyles:re,placement:B,isPositioned:ie,middlewareData:G}=wM({strategy:"fixed",placement:z,whileElementsMounted:(...lt)=>fM(...lt,{animationFrame:_==="always"}),elements:{reference:E.anchor},middleware:[CM({mainAxis:r+D,alignmentAxis:a}),c&&SM({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?RM():void 0,...ne}),c&&TM({...ne}),PM({...ne,apply:({elements:lt,rects:kt,availableWidth:fn,availableHeight:Xt})=>{const{width:ft,height:nn}=kt.reference,rn=lt.floating.style;rn.setProperty("--radix-popper-available-width",`${fn}px`),rn.setProperty("--radix-popper-available-height",`${Xt}px`),rn.setProperty("--radix-popper-anchor-width",`${ft}px`),rn.setProperty("--radix-popper-anchor-height",`${nn}px`)}}),I&&LM({element:I,padding:u}),GM({arrowWidth:b,arrowHeight:D}),m&&IM({strategy:"referenceHidden",...ne})]}),[Q,Y]=_E(B),M=Ir(v);Un(()=>{ie&&(M==null||M())},[ie,M]);const U=(le=G.arrow)==null?void 0:le.x,pe=(he=G.arrow)==null?void 0:he.y,K=((Se=G.arrow)==null?void 0:Se.centerOffset)!==0,[ve,_e]=P.useState();return Un(()=>{C&&_e(window.getComputedStyle(C).zIndex)},[C]),J.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:ie?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(xe=G.transformOrigin)==null?void 0:xe.x,(Ae=G.transformOrigin)==null?void 0:Ae.y].join(" "),...((Ne=G.hide)==null?void 0:Ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:i.dir,children:J.jsx(DM,{scope:t,placedSide:Q,onArrowChange:L,arrowX:U,arrowY:pe,shouldHideArrow:K,children:J.jsx(Rt.div,{"data-side":Q,"data-align":Y,...w,ref:T,style:{...w.style,animation:ie?void 0:"none"}})})})});pE.displayName=ly;var mE="PopperArrow",zM={top:"bottom",right:"left",bottom:"top",left:"right"},yE=P.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,o=NM(mE,n),a=zM[o.placedSide];return J.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:J.jsx(AM,{...r,ref:t,style:{...r.style,display:"block"}})})});yE.displayName=mE;function jM(i){return i!==null}var GM=i=>({name:"transformOrigin",options:i,fn(e){var E,C,S;const{placement:t,rects:n,middlewareData:r}=e,a=((E=r.arrow)==null?void 0:E.centerOffset)!==0,u=a?0:i.arrowWidth,c=a?0:i.arrowHeight,[d,f]=_E(t),p={start:"0%",center:"50%",end:"100%"}[f],m=(((C=r.arrow)==null?void 0:C.x)??0)+u/2,_=(((S=r.arrow)==null?void 0:S.y)??0)+c/2;let v="",w="";return d==="bottom"?(v=a?p:`${m}px`,w=`${-c}px`):d==="top"?(v=a?p:`${m}px`,w=`${n.floating.height+c}px`):d==="right"?(v=`${-c}px`,w=a?p:`${_}px`):d==="left"&&(v=`${n.floating.width+c}px`,w=a?p:`${_}px`),{data:{x:v,y:w}}}});function _E(i){const[e,t="center"]=i.split("-");return[e,t]}var WM=dE,BM=gE,VM=pE,UM=yE,XM="Portal",vE=P.forwardRef((i,e)=>{var u;const{container:t,...n}=i,[r,o]=P.useState(!1);Un(()=>o(!0),[]);const a=t||r&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return a?xk.createPortal(J.jsx(Rt.div,{...n,ref:e}),a):null});vE.displayName=XM;function Px({prop:i,defaultProp:e,onChange:t=()=>{}}){const[n,r]=HM({defaultProp:e,onChange:t}),o=i!==void 0,a=o?i:n,u=Ir(t),c=P.useCallback(d=>{if(o){const p=typeof d=="function"?d(i):d;p!==i&&u(p)}else r(d)},[o,i,r,u]);return[a,c]}function HM({defaultProp:i,onChange:e}){const t=P.useState(i),[n]=t,r=P.useRef(n),o=Ir(e);return P.useEffect(()=>{r.current!==n&&(o(n),r.current=n)},[n,r,o]),t}function YM(i){const e=P.useRef({value:i,previous:i});return P.useMemo(()=>(e.current.value!==i&&(e.current.previous=e.current.value,e.current.value=i),e.current.previous),[i])}var KM="VisuallyHidden",xE=P.forwardRef((i,e)=>J.jsx(Rt.span,{...i,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...i.style}}));xE.displayName=KM;var $M=function(i){if(typeof document>"u")return null;var e=Array.isArray(i)?i[0]:i;return e.ownerDocument.body},tl=new WeakMap,lh=new WeakMap,ah={},Xg=0,wE=function(i){return i&&(i.host||wE(i.parentNode))},ZM=function(i,e){return e.map(function(t){if(i.contains(t))return t;var n=wE(t);return n&&i.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",i,". Doing nothing"),null)}).filter(function(t){return!!t})},qM=function(i,e,t,n){var r=ZM(e,Array.isArray(i)?i:[i]);ah[t]||(ah[t]=new WeakMap);var o=ah[t],a=[],u=new Set,c=new Set(r),d=function(p){!p||u.has(p)||(u.add(p),d(p.parentNode))};r.forEach(d);var f=function(p){!p||c.has(p)||Array.prototype.forEach.call(p.children,function(m){if(u.has(m))f(m);else try{var _=m.getAttribute(n),v=_!==null&&_!=="false",w=(tl.get(m)||0)+1,E=(o.get(m)||0)+1;tl.set(m,w),o.set(m,E),a.push(m),w===1&&v&&lh.set(m,!0),E===1&&m.setAttribute(t,"true"),v||m.setAttribute(n,"true")}catch(C){console.error("aria-hidden: cannot operate on ",m,C)}})};return f(e),u.clear(),Xg++,function(){a.forEach(function(p){var m=tl.get(p)-1,_=o.get(p)-1;tl.set(p,m),o.set(p,_),m||(lh.has(p)||p.removeAttribute(n),lh.delete(p)),_||p.removeAttribute(t)}),Xg--,Xg||(tl=new WeakMap,tl=new WeakMap,lh=new WeakMap,ah={})}},QM=function(i,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(i)?i:[i]),r=$M(i);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live]"))),qM(n,r,t,"aria-hidden")):function(){return null}},Wi=function(){return Wi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Wi.apply(this,arguments)};function EE(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t}function JM(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,o;n<r;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return i.concat(o||Array.prototype.slice.call(e))}var vh="right-scroll-bar-position",xh="width-before-scroll-bar",eb="with-scroll-bars-hidden",tb="--removed-body-scroll-bar-size";function Hg(i,e){return typeof i=="function"?i(e):i&&(i.current=e),i}function nb(i,e){var t=P.useState(function(){return{value:i,callback:e,facade:{get current(){return t.value},set current(n){var r=t.value;r!==n&&(t.value=n,t.callback(n,r))}}}})[0];return t.callback=e,t.facade}var ib=typeof window<"u"?P.useLayoutEffect:P.useEffect,Ix=new WeakMap;function rb(i,e){var t=nb(null,function(n){return i.forEach(function(r){return Hg(r,n)})});return ib(function(){var n=Ix.get(t);if(n){var r=new Set(n),o=new Set(i),a=t.current;r.forEach(function(u){o.has(u)||Hg(u,null)}),o.forEach(function(u){r.has(u)||Hg(u,a)})}Ix.set(t,i)},[i]),t}function sb(i){return i}function ob(i,e){e===void 0&&(e=sb);var t=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:i},useMedium:function(o){var a=e(o,n);return t.push(a),function(){t=t.filter(function(u){return u!==a})}},assignSyncMedium:function(o){for(n=!0;t.length;){var a=t;t=[],a.forEach(o)}t={push:function(u){return o(u)},filter:function(){return t}}},assignMedium:function(o){n=!0;var a=[];if(t.length){var u=t;t=[],u.forEach(o),a=t}var c=function(){var f=a;a=[],f.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),t={push:function(f){a.push(f),d()},filter:function(f){return a=a.filter(f),t}}}};return r}function lb(i){i===void 0&&(i={});var e=ob(null);return e.options=Wi({async:!0,ssr:!1},i),e}var CE=function(i){var e=i.sideCar,t=EE(i,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return P.createElement(n,Wi({},t))};CE.isSideCarExport=!0;function ab(i,e){return i.useMedium(e),CE}var SE=lb(),Yg=function(){},_d=P.forwardRef(function(i,e){var t=P.useRef(null),n=P.useState({onScrollCapture:Yg,onWheelCapture:Yg,onTouchMoveCapture:Yg}),r=n[0],o=n[1],a=i.forwardProps,u=i.children,c=i.className,d=i.removeScrollBar,f=i.enabled,p=i.shards,m=i.sideCar,_=i.noIsolation,v=i.inert,w=i.allowPinchZoom,E=i.as,C=E===void 0?"div":E,S=i.gapMode,T=EE(i,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=m,L=rb([t,e]),N=Wi(Wi({},T),r);return P.createElement(P.Fragment,null,f&&P.createElement(I,{sideCar:SE,removeScrollBar:d,shards:p,noIsolation:_,inert:v,setCallbacks:o,allowPinchZoom:!!w,lockRef:t,gapMode:S}),a?P.cloneElement(P.Children.only(u),Wi(Wi({},N),{ref:L})):P.createElement(C,Wi({},N,{className:c,ref:L}),u))});_d.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};_d.classNames={fullWidth:xh,zeroRight:vh};var ub=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function cb(){if(!document)return null;var i=document.createElement("style");i.type="text/css";var e=ub();return e&&i.setAttribute("nonce",e),i}function hb(i,e){i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}function db(i){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(i)}var fb=function(){var i=0,e=null;return{add:function(t){i==0&&(e=cb())&&(hb(e,t),db(e)),i++},remove:function(){i--,!i&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},gb=function(){var i=fb();return function(e,t){P.useEffect(function(){return i.add(e),function(){i.remove()}},[e&&t])}},RE=function(){var i=gb(),e=function(t){var n=t.styles,r=t.dynamic;return i(n,r),null};return e},pb={left:0,top:0,right:0,gap:0},Kg=function(i){return parseInt(i||"",10)||0},mb=function(i){var e=window.getComputedStyle(document.body),t=e[i==="padding"?"paddingLeft":"marginLeft"],n=e[i==="padding"?"paddingTop":"marginTop"],r=e[i==="padding"?"paddingRight":"marginRight"];return[Kg(t),Kg(n),Kg(r)]},yb=function(i){if(i===void 0&&(i="margin"),typeof window>"u")return pb;var e=mb(i),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},_b=RE(),ml="data-scroll-locked",vb=function(i,e,t,n){var r=i.left,o=i.top,a=i.right,u=i.gap;return t===void 0&&(t="margin"),`
  .`.concat(eb,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(u,"px ").concat(n,`;
  }
  body[`).concat(ml,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vh,` {
    right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(xh,` {
    margin-right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(vh," .").concat(vh,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(xh," .").concat(xh,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(ml,`] {
    `).concat(tb,": ").concat(u,`px;
  }
`)},Lx=function(){var i=parseInt(document.body.getAttribute(ml)||"0",10);return isFinite(i)?i:0},xb=function(){P.useEffect(function(){return document.body.setAttribute(ml,(Lx()+1).toString()),function(){var i=Lx()-1;i<=0?document.body.removeAttribute(ml):document.body.setAttribute(ml,i.toString())}},[])},wb=function(i){var e=i.noRelative,t=i.noImportant,n=i.gapMode,r=n===void 0?"margin":n;xb();var o=P.useMemo(function(){return yb(r)},[r]);return P.createElement(_b,{styles:vb(o,!e,r,t?"":"!important")})},Ip=!1;if(typeof window<"u")try{var uh=Object.defineProperty({},"passive",{get:function(){return Ip=!0,!0}});window.addEventListener("test",uh,uh),window.removeEventListener("test",uh,uh)}catch{Ip=!1}var nl=Ip?{passive:!1}:!1,Eb=function(i){return i.tagName==="TEXTAREA"},TE=function(i,e){if(!(i instanceof Element))return!1;var t=window.getComputedStyle(i);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Eb(i)&&t[e]==="visible")},Cb=function(i){return TE(i,"overflowY")},Sb=function(i){return TE(i,"overflowX")},kx=function(i,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=PE(i,n);if(r){var o=IE(i,n),a=o[1],u=o[2];if(a>u)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},Rb=function(i){var e=i.scrollTop,t=i.scrollHeight,n=i.clientHeight;return[e,t,n]},Tb=function(i){var e=i.scrollLeft,t=i.scrollWidth,n=i.clientWidth;return[e,t,n]},PE=function(i,e){return i==="v"?Cb(e):Sb(e)},IE=function(i,e){return i==="v"?Rb(e):Tb(e)},Pb=function(i,e){return i==="h"&&e==="rtl"?-1:1},Ib=function(i,e,t,n,r){var o=Pb(i,window.getComputedStyle(e).direction),a=o*n,u=t.target,c=e.contains(u),d=!1,f=a>0,p=0,m=0;do{var _=IE(i,u),v=_[0],w=_[1],E=_[2],C=w-E-o*v;(v||C)&&PE(i,u)&&(p+=C,m+=v),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!c&&u!==document.body||c&&(e.contains(u)||e===u));return(f&&(Math.abs(p)<1||!r)||!f&&(Math.abs(m)<1||!r))&&(d=!0),d},ch=function(i){return"changedTouches"in i?[i.changedTouches[0].clientX,i.changedTouches[0].clientY]:[0,0]},Ax=function(i){return[i.deltaX,i.deltaY]},Mx=function(i){return i&&"current"in i?i.current:i},Lb=function(i,e){return i[0]===e[0]&&i[1]===e[1]},kb=function(i){return`
  .block-interactivity-`.concat(i,` {pointer-events: none;}
  .allow-interactivity-`).concat(i,` {pointer-events: all;}
`)},Ab=0,il=[];function Mb(i){var e=P.useRef([]),t=P.useRef([0,0]),n=P.useRef(),r=P.useState(Ab++)[0],o=P.useState(RE)[0],a=P.useRef(i);P.useEffect(function(){a.current=i},[i]),P.useEffect(function(){if(i.inert){document.body.classList.add("block-interactivity-".concat(r));var w=JM([i.lockRef.current],(i.shards||[]).map(Mx),!0).filter(Boolean);return w.forEach(function(E){return E.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),w.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(r))})}}},[i.inert,i.lockRef.current,i.shards]);var u=P.useCallback(function(w,E){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!a.current.allowPinchZoom;var C=ch(w),S=t.current,T="deltaX"in w?w.deltaX:S[0]-C[0],I="deltaY"in w?w.deltaY:S[1]-C[1],L,N=w.target,b=Math.abs(T)>Math.abs(I)?"h":"v";if("touches"in w&&b==="h"&&N.type==="range")return!1;var D=kx(b,N);if(!D)return!0;if(D?L=b:(L=b==="v"?"h":"v",D=kx(b,N)),!D)return!1;if(!n.current&&"changedTouches"in w&&(T||I)&&(n.current=L),!L)return!0;var z=n.current||L;return Ib(z,E,w,z==="h"?T:I,!0)},[]),c=P.useCallback(function(w){var E=w;if(!(!il.length||il[il.length-1]!==o)){var C="deltaY"in E?Ax(E):ch(E),S=e.current.filter(function(L){return L.name===E.type&&(L.target===E.target||E.target===L.shadowParent)&&Lb(L.delta,C)})[0];if(S&&S.should){E.cancelable&&E.preventDefault();return}if(!S){var T=(a.current.shards||[]).map(Mx).filter(Boolean).filter(function(L){return L.contains(E.target)}),I=T.length>0?u(E,T[0]):!a.current.noIsolation;I&&E.cancelable&&E.preventDefault()}}},[]),d=P.useCallback(function(w,E,C,S){var T={name:w,delta:E,target:C,should:S,shadowParent:bb(C)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(I){return I!==T})},1)},[]),f=P.useCallback(function(w){t.current=ch(w),n.current=void 0},[]),p=P.useCallback(function(w){d(w.type,Ax(w),w.target,u(w,i.lockRef.current))},[]),m=P.useCallback(function(w){d(w.type,ch(w),w.target,u(w,i.lockRef.current))},[]);P.useEffect(function(){return il.push(o),i.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:m}),document.addEventListener("wheel",c,nl),document.addEventListener("touchmove",c,nl),document.addEventListener("touchstart",f,nl),function(){il=il.filter(function(w){return w!==o}),document.removeEventListener("wheel",c,nl),document.removeEventListener("touchmove",c,nl),document.removeEventListener("touchstart",f,nl)}},[]);var _=i.removeScrollBar,v=i.inert;return P.createElement(P.Fragment,null,v?P.createElement(o,{styles:kb(r)}):null,_?P.createElement(wb,{gapMode:i.gapMode}):null)}function bb(i){for(var e=null;i!==null;)i instanceof ShadowRoot&&(e=i.host,i=i.host),i=i.parentNode;return e}const Ob=ab(SE,Mb);var LE=P.forwardRef(function(i,e){return P.createElement(_d,Wi({},i,{ref:e,sideCar:Ob}))});LE.classNames=_d.classNames;var Fb=[" ","Enter","ArrowUp","ArrowDown"],Db=[" ","Enter"],Au="Select",[vd,xd,Nb]=aA(Au),[Bl,sF]=uA(Au,[Nb,cE]),wd=cE(),[zb,As]=Bl(Au),[jb,Gb]=Bl(Au),kE=i=>{const{__scopeSelect:e,children:t,open:n,defaultOpen:r,onOpenChange:o,value:a,defaultValue:u,onValueChange:c,dir:d,name:f,autoComplete:p,disabled:m,required:_,form:v}=i,w=wd(e),[E,C]=P.useState(null),[S,T]=P.useState(null),[I,L]=P.useState(!1),N=dA(d),[b=!1,D]=Px({prop:n,defaultProp:r,onChange:o}),[z,q]=Px({prop:a,defaultProp:u,onChange:c}),Z=P.useRef(null),X=E?v||!!E.closest("form"):!0,[ne,H]=P.useState(new Set),re=Array.from(ne).map(B=>B.props.value).join(";");return J.jsx(WM,{...w,children:J.jsxs(zb,{required:_,scope:e,trigger:E,onTriggerChange:C,valueNode:S,onValueNodeChange:T,valueNodeHasChildren:I,onValueNodeHasChildrenChange:L,contentId:Qm(),value:z,onValueChange:q,open:b,onOpenChange:D,dir:N,triggerPointerDownPosRef:Z,disabled:m,children:[J.jsx(vd.Provider,{scope:e,children:J.jsx(jb,{scope:i.__scopeSelect,onNativeOptionAdd:P.useCallback(B=>{H(ie=>new Set(ie).add(B))},[]),onNativeOptionRemove:P.useCallback(B=>{H(ie=>{const G=new Set(ie);return G.delete(B),G})},[]),children:t})}),X?J.jsxs(tC,{"aria-hidden":!0,required:_,tabIndex:-1,name:f,autoComplete:p,value:z,onChange:B=>q(B.target.value),disabled:m,form:v,children:[z===void 0?J.jsx("option",{value:""}):null,Array.from(ne)]},re):null]})})};kE.displayName=Au;var AE="SelectTrigger",ME=P.forwardRef((i,e)=>{const{__scopeSelect:t,disabled:n=!1,...r}=i,o=wd(t),a=As(AE,t),u=a.disabled||n,c=Ut(e,a.onTriggerChange),d=xd(t),f=P.useRef("touch"),[p,m,_]=nC(w=>{const E=d().filter(T=>!T.disabled),C=E.find(T=>T.value===a.value),S=iC(E,w,C);S!==void 0&&a.onValueChange(S.value)}),v=w=>{u||(a.onOpenChange(!0),_()),w&&(a.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return J.jsx(BM,{asChild:!0,...o,children:J.jsx(Rt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":eC(a.value)?"":void 0,...r,ref:c,onClick:St(r.onClick,w=>{w.currentTarget.focus(),f.current!=="mouse"&&v(w)}),onPointerDown:St(r.onPointerDown,w=>{f.current=w.pointerType;const E=w.target;E.hasPointerCapture(w.pointerId)&&E.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(v(w),w.preventDefault())}),onKeyDown:St(r.onKeyDown,w=>{const E=p.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&m(w.key),!(E&&w.key===" ")&&Fb.includes(w.key)&&(v(),w.preventDefault())})})})});ME.displayName=AE;var bE="SelectValue",OE=P.forwardRef((i,e)=>{const{__scopeSelect:t,className:n,style:r,children:o,placeholder:a="",...u}=i,c=As(bE,t),{onValueNodeHasChildrenChange:d}=c,f=o!==void 0,p=Ut(e,c.onValueNodeChange);return Un(()=>{d(f)},[d,f]),J.jsx(Rt.span,{...u,ref:p,style:{pointerEvents:"none"},children:eC(c.value)?J.jsx(J.Fragment,{children:a}):o})});OE.displayName=bE;var Wb="SelectIcon",FE=P.forwardRef((i,e)=>{const{__scopeSelect:t,children:n,...r}=i;return J.jsx(Rt.span,{"aria-hidden":!0,...r,ref:e,children:n||"▼"})});FE.displayName=Wb;var Bb="SelectPortal",DE=i=>J.jsx(vE,{asChild:!0,...i});DE.displayName=Bb;var ho="SelectContent",NE=P.forwardRef((i,e)=>{const t=As(ho,i.__scopeSelect),[n,r]=P.useState();if(Un(()=>{r(new DocumentFragment)},[]),!t.open){const o=n;return o?jl.createPortal(J.jsx(zE,{scope:i.__scopeSelect,children:J.jsx(vd.Slot,{scope:i.__scopeSelect,children:J.jsx("div",{children:i.children})})}),o):null}return J.jsx(jE,{...i,ref:e})});NE.displayName=ho;var yi=10,[zE,Ms]=Bl(ho),Vb="SelectContentImpl",jE=P.forwardRef((i,e)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:o,onPointerDownOutside:a,side:u,sideOffset:c,align:d,alignOffset:f,arrowPadding:p,collisionBoundary:m,collisionPadding:_,sticky:v,hideWhenDetached:w,avoidCollisions:E,...C}=i,S=As(ho,t),[T,I]=P.useState(null),[L,N]=P.useState(null),b=Ut(e,le=>I(le)),[D,z]=P.useState(null),[q,Z]=P.useState(null),X=xd(t),[ne,H]=P.useState(!1),re=P.useRef(!1);P.useEffect(()=>{if(T)return QM(T)},[T]),CA();const B=P.useCallback(le=>{const[he,...Se]=X().map(Ne=>Ne.ref.current),[xe]=Se.slice(-1),Ae=document.activeElement;for(const Ne of le)if(Ne===Ae||(Ne==null||Ne.scrollIntoView({block:"nearest"}),Ne===he&&L&&(L.scrollTop=0),Ne===xe&&L&&(L.scrollTop=L.scrollHeight),Ne==null||Ne.focus(),document.activeElement!==Ae))return},[X,L]),ie=P.useCallback(()=>B([D,T]),[B,D,T]);P.useEffect(()=>{ne&&ie()},[ne,ie]);const{onOpenChange:G,triggerPointerDownPosRef:Q}=S;P.useEffect(()=>{if(T){let le={x:0,y:0};const he=xe=>{var Ae,Ne;le={x:Math.abs(Math.round(xe.pageX)-(((Ae=Q.current)==null?void 0:Ae.x)??0)),y:Math.abs(Math.round(xe.pageY)-(((Ne=Q.current)==null?void 0:Ne.y)??0))}},Se=xe=>{le.x<=10&&le.y<=10?xe.preventDefault():T.contains(xe.target)||G(!1),document.removeEventListener("pointermove",he),Q.current=null};return Q.current!==null&&(document.addEventListener("pointermove",he),document.addEventListener("pointerup",Se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",he),document.removeEventListener("pointerup",Se,{capture:!0})}}},[T,G,Q]),P.useEffect(()=>{const le=()=>G(!1);return window.addEventListener("blur",le),window.addEventListener("resize",le),()=>{window.removeEventListener("blur",le),window.removeEventListener("resize",le)}},[G]);const[Y,M]=nC(le=>{const he=X().filter(Ae=>!Ae.disabled),Se=he.find(Ae=>Ae.ref.current===document.activeElement),xe=iC(he,le,Se);xe&&setTimeout(()=>xe.ref.current.focus())}),U=P.useCallback((le,he,Se)=>{const xe=!re.current&&!Se;(S.value!==void 0&&S.value===he||xe)&&(z(le),xe&&(re.current=!0))},[S.value]),pe=P.useCallback(()=>T==null?void 0:T.focus(),[T]),K=P.useCallback((le,he,Se)=>{const xe=!re.current&&!Se;(S.value!==void 0&&S.value===he||xe)&&Z(le)},[S.value]),ve=n==="popper"?Lp:GE,_e=ve===Lp?{side:u,sideOffset:c,align:d,alignOffset:f,arrowPadding:p,collisionBoundary:m,collisionPadding:_,sticky:v,hideWhenDetached:w,avoidCollisions:E}:{};return J.jsx(zE,{scope:t,content:T,viewport:L,onViewportChange:N,itemRefCallback:U,selectedItem:D,onItemLeave:pe,itemTextRefCallback:K,focusSelectedItem:ie,selectedItemText:q,position:n,isPositioned:ne,searchRef:Y,children:J.jsx(LE,{as:uu,allowPinchZoom:!0,children:J.jsx(q1,{asChild:!0,trapped:S.open,onMountAutoFocus:le=>{le.preventDefault()},onUnmountAutoFocus:St(r,le=>{var he;(he=S.trigger)==null||he.focus({preventScroll:!0}),le.preventDefault()}),children:J.jsx($1,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:le=>le.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:J.jsx(ve,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:le=>le.preventDefault(),...C,..._e,onPlaced:()=>H(!0),ref:b,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:St(C.onKeyDown,le=>{const he=le.ctrlKey||le.altKey||le.metaKey;if(le.key==="Tab"&&le.preventDefault(),!he&&le.key.length===1&&M(le.key),["ArrowUp","ArrowDown","Home","End"].includes(le.key)){let xe=X().filter(Ae=>!Ae.disabled).map(Ae=>Ae.ref.current);if(["ArrowUp","End"].includes(le.key)&&(xe=xe.slice().reverse()),["ArrowUp","ArrowDown"].includes(le.key)){const Ae=le.target,Ne=xe.indexOf(Ae);xe=xe.slice(Ne+1)}setTimeout(()=>B(xe)),le.preventDefault()}})})})})})})});jE.displayName=Vb;var Ub="SelectItemAlignedPosition",GE=P.forwardRef((i,e)=>{const{__scopeSelect:t,onPlaced:n,...r}=i,o=As(ho,t),a=Ms(ho,t),[u,c]=P.useState(null),[d,f]=P.useState(null),p=Ut(e,b=>f(b)),m=xd(t),_=P.useRef(!1),v=P.useRef(!0),{viewport:w,selectedItem:E,selectedItemText:C,focusSelectedItem:S}=a,T=P.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&d&&w&&E&&C){const b=o.trigger.getBoundingClientRect(),D=d.getBoundingClientRect(),z=o.valueNode.getBoundingClientRect(),q=C.getBoundingClientRect();if(o.dir!=="rtl"){const Ae=q.left-D.left,Ne=z.left-Ae,lt=b.left-Ne,kt=b.width+lt,fn=Math.max(kt,D.width),Xt=window.innerWidth-yi,ft=hx(Ne,[yi,Math.max(yi,Xt-fn)]);u.style.minWidth=kt+"px",u.style.left=ft+"px"}else{const Ae=D.right-q.right,Ne=window.innerWidth-z.right-Ae,lt=window.innerWidth-b.right-Ne,kt=b.width+lt,fn=Math.max(kt,D.width),Xt=window.innerWidth-yi,ft=hx(Ne,[yi,Math.max(yi,Xt-fn)]);u.style.minWidth=kt+"px",u.style.right=ft+"px"}const Z=m(),X=window.innerHeight-yi*2,ne=w.scrollHeight,H=window.getComputedStyle(d),re=parseInt(H.borderTopWidth,10),B=parseInt(H.paddingTop,10),ie=parseInt(H.borderBottomWidth,10),G=parseInt(H.paddingBottom,10),Q=re+B+ne+G+ie,Y=Math.min(E.offsetHeight*5,Q),M=window.getComputedStyle(w),U=parseInt(M.paddingTop,10),pe=parseInt(M.paddingBottom,10),K=b.top+b.height/2-yi,ve=X-K,_e=E.offsetHeight/2,le=E.offsetTop+_e,he=re+B+le,Se=Q-he;if(he<=K){const Ae=Z.length>0&&E===Z[Z.length-1].ref.current;u.style.bottom="0px";const Ne=d.clientHeight-w.offsetTop-w.offsetHeight,lt=Math.max(ve,_e+(Ae?pe:0)+Ne+ie),kt=he+lt;u.style.height=kt+"px"}else{const Ae=Z.length>0&&E===Z[0].ref.current;u.style.top="0px";const lt=Math.max(K,re+w.offsetTop+(Ae?U:0)+_e)+Se;u.style.height=lt+"px",w.scrollTop=he-K+w.offsetTop}u.style.margin=`${yi}px 0`,u.style.minHeight=Y+"px",u.style.maxHeight=X+"px",n==null||n(),requestAnimationFrame(()=>_.current=!0)}},[m,o.trigger,o.valueNode,u,d,w,E,C,o.dir,n]);Un(()=>T(),[T]);const[I,L]=P.useState();Un(()=>{d&&L(window.getComputedStyle(d).zIndex)},[d]);const N=P.useCallback(b=>{b&&v.current===!0&&(T(),S==null||S(),v.current=!1)},[T,S]);return J.jsx(Hb,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:_,onScrollButtonChange:N,children:J.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:J.jsx(Rt.div,{...r,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});GE.displayName=Ub;var Xb="SelectPopperPosition",Lp=P.forwardRef((i,e)=>{const{__scopeSelect:t,align:n="start",collisionPadding:r=yi,...o}=i,a=wd(t);return J.jsx(VM,{...a,...o,ref:e,align:n,collisionPadding:r,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Lp.displayName=Xb;var[Hb,ay]=Bl(ho,{}),kp="SelectViewport",WE=P.forwardRef((i,e)=>{const{__scopeSelect:t,nonce:n,...r}=i,o=Ms(kp,t),a=ay(kp,t),u=Ut(e,o.onViewportChange),c=P.useRef(0);return J.jsxs(J.Fragment,{children:[J.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),J.jsx(vd.Slot,{scope:t,children:J.jsx(Rt.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:St(r.onScroll,d=>{const f=d.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&p){const _=Math.abs(c.current-f.scrollTop);if(_>0){const v=window.innerHeight-yi*2,w=parseFloat(p.style.minHeight),E=parseFloat(p.style.height),C=Math.max(w,E);if(C<v){const S=C+_,T=Math.min(v,S),I=S-T;p.style.height=T+"px",p.style.bottom==="0px"&&(f.scrollTop=I>0?I:0,p.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});WE.displayName=kp;var BE="SelectGroup",[Yb,Kb]=Bl(BE),$b=P.forwardRef((i,e)=>{const{__scopeSelect:t,...n}=i,r=Qm();return J.jsx(Yb,{scope:t,id:r,children:J.jsx(Rt.div,{role:"group","aria-labelledby":r,...n,ref:e})})});$b.displayName=BE;var VE="SelectLabel",UE=P.forwardRef((i,e)=>{const{__scopeSelect:t,...n}=i,r=Kb(VE,t);return J.jsx(Rt.div,{id:r.id,...n,ref:e})});UE.displayName=VE;var Xh="SelectItem",[Zb,XE]=Bl(Xh),HE=P.forwardRef((i,e)=>{const{__scopeSelect:t,value:n,disabled:r=!1,textValue:o,...a}=i,u=As(Xh,t),c=Ms(Xh,t),d=u.value===n,[f,p]=P.useState(o??""),[m,_]=P.useState(!1),v=Ut(e,S=>{var T;return(T=c.itemRefCallback)==null?void 0:T.call(c,S,n,r)}),w=Qm(),E=P.useRef("touch"),C=()=>{r||(u.onValueChange(n),u.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return J.jsx(Zb,{scope:t,value:n,disabled:r,textId:w,isSelected:d,onItemTextChange:P.useCallback(S=>{p(T=>T||((S==null?void 0:S.textContent)??"").trim())},[]),children:J.jsx(vd.ItemSlot,{scope:t,value:n,disabled:r,textValue:f,children:J.jsx(Rt.div,{role:"option","aria-labelledby":w,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...a,ref:v,onFocus:St(a.onFocus,()=>_(!0)),onBlur:St(a.onBlur,()=>_(!1)),onClick:St(a.onClick,()=>{E.current!=="mouse"&&C()}),onPointerUp:St(a.onPointerUp,()=>{E.current==="mouse"&&C()}),onPointerDown:St(a.onPointerDown,S=>{E.current=S.pointerType}),onPointerMove:St(a.onPointerMove,S=>{var T;E.current=S.pointerType,r?(T=c.onItemLeave)==null||T.call(c):E.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:St(a.onPointerLeave,S=>{var T;S.currentTarget===document.activeElement&&((T=c.onItemLeave)==null||T.call(c))}),onKeyDown:St(a.onKeyDown,S=>{var I;((I=c.searchRef)==null?void 0:I.current)!==""&&S.key===" "||(Db.includes(S.key)&&C(),S.key===" "&&S.preventDefault())})})})})});HE.displayName=Xh;var Ba="SelectItemText",YE=P.forwardRef((i,e)=>{const{__scopeSelect:t,className:n,style:r,...o}=i,a=As(Ba,t),u=Ms(Ba,t),c=XE(Ba,t),d=Gb(Ba,t),[f,p]=P.useState(null),m=Ut(e,C=>p(C),c.onItemTextChange,C=>{var S;return(S=u.itemTextRefCallback)==null?void 0:S.call(u,C,c.value,c.disabled)}),_=f==null?void 0:f.textContent,v=P.useMemo(()=>J.jsx("option",{value:c.value,disabled:c.disabled,children:_},c.value),[c.disabled,c.value,_]),{onNativeOptionAdd:w,onNativeOptionRemove:E}=d;return Un(()=>(w(v),()=>E(v)),[w,E,v]),J.jsxs(J.Fragment,{children:[J.jsx(Rt.span,{id:c.textId,...o,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?jl.createPortal(o.children,a.valueNode):null]})});YE.displayName=Ba;var KE="SelectItemIndicator",$E=P.forwardRef((i,e)=>{const{__scopeSelect:t,...n}=i;return XE(KE,t).isSelected?J.jsx(Rt.span,{"aria-hidden":!0,...n,ref:e}):null});$E.displayName=KE;var Ap="SelectScrollUpButton",ZE=P.forwardRef((i,e)=>{const t=Ms(Ap,i.__scopeSelect),n=ay(Ap,i.__scopeSelect),[r,o]=P.useState(!1),a=Ut(e,n.onScrollButtonChange);return Un(()=>{if(t.viewport&&t.isPositioned){let u=function(){const d=c.scrollTop>0;o(d)};const c=t.viewport;return u(),c.addEventListener("scroll",u),()=>c.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),r?J.jsx(QE,{...i,ref:a,onAutoScroll:()=>{const{viewport:u,selectedItem:c}=t;u&&c&&(u.scrollTop=u.scrollTop-c.offsetHeight)}}):null});ZE.displayName=Ap;var Mp="SelectScrollDownButton",qE=P.forwardRef((i,e)=>{const t=Ms(Mp,i.__scopeSelect),n=ay(Mp,i.__scopeSelect),[r,o]=P.useState(!1),a=Ut(e,n.onScrollButtonChange);return Un(()=>{if(t.viewport&&t.isPositioned){let u=function(){const d=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<d;o(f)};const c=t.viewport;return u(),c.addEventListener("scroll",u),()=>c.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),r?J.jsx(QE,{...i,ref:a,onAutoScroll:()=>{const{viewport:u,selectedItem:c}=t;u&&c&&(u.scrollTop=u.scrollTop+c.offsetHeight)}}):null});qE.displayName=Mp;var QE=P.forwardRef((i,e)=>{const{__scopeSelect:t,onAutoScroll:n,...r}=i,o=Ms("SelectScrollButton",t),a=P.useRef(null),u=xd(t),c=P.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return P.useEffect(()=>()=>c(),[c]),Un(()=>{var f;const d=u().find(p=>p.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[u]),J.jsx(Rt.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:St(r.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:St(r.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:St(r.onPointerLeave,()=>{c()})})}),qb="SelectSeparator",JE=P.forwardRef((i,e)=>{const{__scopeSelect:t,...n}=i;return J.jsx(Rt.div,{"aria-hidden":!0,...n,ref:e})});JE.displayName=qb;var bp="SelectArrow",Qb=P.forwardRef((i,e)=>{const{__scopeSelect:t,...n}=i,r=wd(t),o=As(bp,t),a=Ms(bp,t);return o.open&&a.position==="popper"?J.jsx(UM,{...r,...n,ref:e}):null});Qb.displayName=bp;function eC(i){return i===""||i===void 0}var tC=P.forwardRef((i,e)=>{const{value:t,...n}=i,r=P.useRef(null),o=Ut(e,r),a=YM(t);return P.useEffect(()=>{const u=r.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&f){const p=new Event("change",{bubbles:!0});f.call(u,t),u.dispatchEvent(p)}},[a,t]),J.jsx(xE,{asChild:!0,children:J.jsx("select",{...n,ref:o,defaultValue:t})})});tC.displayName="BubbleSelect";function nC(i){const e=Ir(i),t=P.useRef(""),n=P.useRef(0),r=P.useCallback(a=>{const u=t.current+a;e(u),function c(d){t.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(u)},[e]),o=P.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return P.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,r,o]}function iC(i,e,t){const r=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,o=t?i.indexOf(t):-1;let a=Jb(i,Math.max(o,0));r.length===1&&(a=a.filter(d=>d!==t));const c=a.find(d=>d.textValue.toLowerCase().startsWith(r.toLowerCase()));return c!==t?c:void 0}function Jb(i,e){return i.map((t,n)=>i[(e+n)%i.length])}var eO=kE,rC=ME,tO=OE,nO=FE,iO=DE,sC=NE,rO=WE,oC=UE,lC=HE,sO=YE,oO=$E,aC=ZE,uC=qE,cC=JE;/**
 * @license lucide-react v0.461.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hC=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.461.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.461.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=P.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:o,iconNode:a,...u},c)=>P.createElement("svg",{ref:c,...aO,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:hC("lucide",r),...u},[...a.map(([d,f])=>P.createElement(d,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.461.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=(i,e)=>{const t=P.forwardRef(({className:n,...r},o)=>P.createElement(uO,{ref:o,iconNode:e,className:hC(`lucide-${lO(i)}`,n),...r}));return t.displayName=`${i}`,t};/**
 * @license lucide-react v0.461.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=uy("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.461.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=uy("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.461.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=uy("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function fC(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var r=i.length;for(e=0;e<r;e++)i[e]&&(t=fC(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function dO(){for(var i,e,t=0,n="",r=arguments.length;t<r;t++)(i=arguments[t])&&(e=fC(i))&&(n&&(n+=" "),n+=e);return n}const cy="-",fO=i=>{const e=pO(i),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=i;return{getClassGroupId:a=>{const u=a.split(cy);return u[0]===""&&u.length!==1&&u.shift(),gC(u,e)||gO(a)},getConflictingClassGroupIds:(a,u)=>{const c=t[a]||[];return u&&n[a]?[...c,...n[a]]:c}}},gC=(i,e)=>{var a;if(i.length===0)return e.classGroupId;const t=i[0],n=e.nextPart.get(t),r=n?gC(i.slice(1),n):void 0;if(r)return r;if(e.validators.length===0)return;const o=i.join(cy);return(a=e.validators.find(({validator:u})=>u(o)))==null?void 0:a.classGroupId},bx=/^\[(.+)\]$/,gO=i=>{if(bx.test(i)){const e=bx.exec(i)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},pO=i=>{const{theme:e,prefix:t}=i,n={nextPart:new Map,validators:[]};return yO(Object.entries(i.classGroups),t).forEach(([o,a])=>{Op(a,n,o,e)}),n},Op=(i,e,t,n)=>{i.forEach(r=>{if(typeof r=="string"){const o=r===""?e:Ox(e,r);o.classGroupId=t;return}if(typeof r=="function"){if(mO(r)){Op(r(n),e,t,n);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([o,a])=>{Op(a,Ox(e,o),t,n)})})},Ox=(i,e)=>{let t=i;return e.split(cy).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},mO=i=>i.isThemeGetter,yO=(i,e)=>e?i.map(([t,n])=>{const r=n.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,u])=>[e+a,u])):o);return[t,r]}):i,_O=i=>{if(i<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const r=(o,a)=>{t.set(o,a),e++,e>i&&(e=0,n=t,t=new Map)};return{get(o){let a=t.get(o);if(a!==void 0)return a;if((a=n.get(o))!==void 0)return r(o,a),a},set(o,a){t.has(o)?t.set(o,a):r(o,a)}}},pC="!",vO=i=>{const{separator:e,experimentalParseClassName:t}=i,n=e.length===1,r=e[0],o=e.length,a=u=>{const c=[];let d=0,f=0,p;for(let E=0;E<u.length;E++){let C=u[E];if(d===0){if(C===r&&(n||u.slice(E,E+o)===e)){c.push(u.slice(f,E)),f=E+o;continue}if(C==="/"){p=E;continue}}C==="["?d++:C==="]"&&d--}const m=c.length===0?u:u.substring(f),_=m.startsWith(pC),v=_?m.substring(1):m,w=p&&p>f?p-f:void 0;return{modifiers:c,hasImportantModifier:_,baseClassName:v,maybePostfixModifierPosition:w}};return t?u=>t({className:u,parseClassName:a}):a},xO=i=>{if(i.length<=1)return i;const e=[];let t=[];return i.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},wO=i=>({cache:_O(i.cacheSize),parseClassName:vO(i),...fO(i)}),EO=/\s+/,CO=(i,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:r}=e,o=[],a=i.trim().split(EO);let u="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:f,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:_}=t(d);let v=!!_,w=n(v?m.substring(0,_):m);if(!w){if(!v){u=d+(u.length>0?" "+u:u);continue}if(w=n(m),!w){u=d+(u.length>0?" "+u:u);continue}v=!1}const E=xO(f).join(":"),C=p?E+pC:E,S=C+w;if(o.includes(S))continue;o.push(S);const T=r(w,v);for(let I=0;I<T.length;++I){const L=T[I];o.push(C+L)}u=d+(u.length>0?" "+u:u)}return u};function SO(){let i=0,e,t,n="";for(;i<arguments.length;)(e=arguments[i++])&&(t=mC(e))&&(n&&(n+=" "),n+=t);return n}const mC=i=>{if(typeof i=="string")return i;let e,t="";for(let n=0;n<i.length;n++)i[n]&&(e=mC(i[n]))&&(t&&(t+=" "),t+=e);return t};function RO(i,...e){let t,n,r,o=a;function a(c){const d=e.reduce((f,p)=>p(f),i());return t=wO(d),n=t.cache.get,r=t.cache.set,o=u,u(c)}function u(c){const d=n(c);if(d)return d;const f=CO(c,t);return r(c,f),f}return function(){return o(SO.apply(null,arguments))}}const nt=i=>{const e=t=>t[i]||[];return e.isThemeGetter=!0,e},yC=/^\[(?:([a-z-]+):)?(.+)\]$/i,TO=/^\d+\/\d+$/,PO=new Set(["px","full","screen"]),IO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,LO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,AO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,MO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gr=i=>yl(i)||PO.has(i)||TO.test(i),os=i=>Vl(i,"length",GO),yl=i=>!!i&&!Number.isNaN(Number(i)),$g=i=>Vl(i,"number",yl),ba=i=>!!i&&Number.isInteger(Number(i)),bO=i=>i.endsWith("%")&&yl(i.slice(0,-1)),be=i=>yC.test(i),ls=i=>IO.test(i),OO=new Set(["length","size","percentage"]),FO=i=>Vl(i,OO,_C),DO=i=>Vl(i,"position",_C),NO=new Set(["image","url"]),zO=i=>Vl(i,NO,BO),jO=i=>Vl(i,"",WO),Oa=()=>!0,Vl=(i,e,t)=>{const n=yC.exec(i);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},GO=i=>LO.test(i)&&!kO.test(i),_C=()=>!1,WO=i=>AO.test(i),BO=i=>MO.test(i),VO=()=>{const i=nt("colors"),e=nt("spacing"),t=nt("blur"),n=nt("brightness"),r=nt("borderColor"),o=nt("borderRadius"),a=nt("borderSpacing"),u=nt("borderWidth"),c=nt("contrast"),d=nt("grayscale"),f=nt("hueRotate"),p=nt("invert"),m=nt("gap"),_=nt("gradientColorStops"),v=nt("gradientColorStopPositions"),w=nt("inset"),E=nt("margin"),C=nt("opacity"),S=nt("padding"),T=nt("saturate"),I=nt("scale"),L=nt("sepia"),N=nt("skew"),b=nt("space"),D=nt("translate"),z=()=>["auto","contain","none"],q=()=>["auto","hidden","clip","visible","scroll"],Z=()=>["auto",be,e],X=()=>[be,e],ne=()=>["",gr,os],H=()=>["auto",yl,be],re=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],Q=()=>["","0",be],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>[yl,be];return{cacheSize:500,separator:":",theme:{colors:[Oa],spacing:[gr,os],blur:["none","",ls,be],brightness:M(),borderColor:[i],borderRadius:["none","","full",ls,be],borderSpacing:X(),borderWidth:ne(),contrast:M(),grayscale:Q(),hueRotate:M(),invert:Q(),gap:X(),gradientColorStops:[i],gradientColorStopPositions:[bO,os],inset:Z(),margin:Z(),opacity:M(),padding:X(),saturate:M(),scale:M(),sepia:Q(),skew:M(),space:X(),translate:X()},classGroups:{aspect:[{aspect:["auto","square","video",be]}],container:["container"],columns:[{columns:[ls]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...re(),be]}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ba,be]}],basis:[{basis:Z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",be]}],grow:[{grow:Q()}],shrink:[{shrink:Q()}],order:[{order:["first","last","none",ba,be]}],"grid-cols":[{"grid-cols":[Oa]}],"col-start-end":[{col:["auto",{span:["full",ba,be]},be]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Oa]}],"row-start-end":[{row:["auto",{span:[ba,be]},be]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",be]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",be]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[b]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[b]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",be,e]}],"min-w":[{"min-w":[be,e,"min","max","fit"]}],"max-w":[{"max-w":[be,e,"none","full","min","max","fit","prose",{screen:[ls]},ls]}],h:[{h:[be,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[be,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ls,os]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",$g]}],"font-family":[{font:[Oa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",be]}],"line-clamp":[{"line-clamp":["none",yl,$g]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gr,be]}],"list-image":[{"list-image":["none",be]}],"list-style-type":[{list:["none","disc","decimal",be]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[i]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[i]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gr,os]}],"underline-offset":[{"underline-offset":["auto",gr,be]}],"text-decoration-color":[{decoration:[i]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:X()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...re(),DO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",FO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},zO]}],"bg-color":[{bg:[i]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:B()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[gr,be]}],"outline-w":[{outline:[gr,os]}],"outline-color":[{outline:[i]}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[i]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[gr,os]}],"ring-offset-color":[{"ring-offset":[i]}],shadow:[{shadow:["","inner","none",ls,jO]}],"shadow-color":[{shadow:[Oa]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":[...ie(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ie()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ls,be]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[T]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",be]}],duration:[{duration:M()}],ease:[{ease:["linear","in","out","in-out",be]}],delay:[{delay:M()}],animate:[{animate:["none","spin","ping","pulse","bounce",be]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[ba,be]}],"translate-x":[{"translate-x":[D]}],"translate-y":[{"translate-y":[D]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",be]}],accent:[{accent:["auto",i]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be]}],"caret-color":[{caret:[i]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":X()}],"scroll-mx":[{"scroll-mx":X()}],"scroll-my":[{"scroll-my":X()}],"scroll-ms":[{"scroll-ms":X()}],"scroll-me":[{"scroll-me":X()}],"scroll-mt":[{"scroll-mt":X()}],"scroll-mr":[{"scroll-mr":X()}],"scroll-mb":[{"scroll-mb":X()}],"scroll-ml":[{"scroll-ml":X()}],"scroll-p":[{"scroll-p":X()}],"scroll-px":[{"scroll-px":X()}],"scroll-py":[{"scroll-py":X()}],"scroll-ps":[{"scroll-ps":X()}],"scroll-pe":[{"scroll-pe":X()}],"scroll-pt":[{"scroll-pt":X()}],"scroll-pr":[{"scroll-pr":X()}],"scroll-pb":[{"scroll-pb":X()}],"scroll-pl":[{"scroll-pl":X()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be]}],fill:[{fill:[i,"none"]}],"stroke-w":[{stroke:[gr,os,$g]}],stroke:[{stroke:[i,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},UO=RO(VO);function Ts(...i){return UO(dO(i))}const XO=eO,HO=tO,vC=P.forwardRef(({className:i,children:e,...t},n)=>J.jsxs(rC,{ref:n,className:Ts("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",i),...t,children:[e,J.jsx(nO,{asChild:!0,children:J.jsx(dC,{className:"h-4 w-4 opacity-50"})})]}));vC.displayName=rC.displayName;const xC=P.forwardRef(({className:i,...e},t)=>J.jsx(aC,{ref:t,className:Ts("flex cursor-default items-center justify-center py-1",i),...e,children:J.jsx(hO,{className:"h-4 w-4"})}));xC.displayName=aC.displayName;const wC=P.forwardRef(({className:i,...e},t)=>J.jsx(uC,{ref:t,className:Ts("flex cursor-default items-center justify-center py-1",i),...e,children:J.jsx(dC,{className:"h-4 w-4"})}));wC.displayName=uC.displayName;const EC=P.forwardRef(({className:i,children:e,position:t="popper",...n},r)=>J.jsx(iO,{children:J.jsxs(sC,{ref:r,className:Ts("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",i),position:t,...n,children:[J.jsx(xC,{}),J.jsx(rO,{className:Ts("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),J.jsx(wC,{})]})}));EC.displayName=sC.displayName;const YO=P.forwardRef(({className:i,...e},t)=>J.jsx(oC,{ref:t,className:Ts("px-2 py-1.5 text-sm font-semibold",i),...e}));YO.displayName=oC.displayName;const CC=P.forwardRef(({className:i,children:e,...t},n)=>J.jsxs(lC,{ref:n,className:Ts("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i),...t,children:[J.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:J.jsx(oO,{children:J.jsx(cO,{className:"h-4 w-4"})})}),J.jsx(sO,{children:e})]}));CC.displayName=lC.displayName;const KO=P.forwardRef(({className:i,...e},t)=>J.jsx(cC,{ref:t,className:Ts("-mx-1 my-1 h-px bg-muted",i),...e}));KO.displayName=cC.displayName;const Fx=[{id:2,name:"Campo Grande",extent:[-6114145108176996e-9,-2.4617838310957295e6,-5966813762112098e-9,-2.2927181680410677e6]},{id:4,name:"Altamira",extent:[-619202422393597e-8,-1078806151183669e-9,-5749373400745597e-9,-332851.54136948125]},{id:9,name:"Marabá",extent:[-5721999937959531e-9,-693524.9226643831,-5424431807120031e-9,-538657.4143822525]},{id:11,name:"Caicó",extent:[-414451369782621e-8,-751379.6676048576,-4.1033254862326984e6,-690490.3910322845]},{id:3,name:"Juazeiro do Norte",extent:[-4382280998211564e-9,-811024.1855970011,-4362900274864454e-9,-791580.0646192871]},{id:1,name:"São Caetano Do Sul",extent:[-5185807346655569e-9,-2.7108896295878487e6,-5181321171176601e-9,-2.7047780126119284e6]},{id:5,name:"São Luís",extent:[-4944099336296136e-9,-311729.5511961376,-4916069088514389e-9,-275423.1864369044]},{id:6,name:"Crato",extent:[-4408262967362713e-9,-845824.7647518881,-4378974809335003e-9,-781372.8788528391]},{id:7,name:"Guarabira",extent:[-3956105459658594e-9,-777066.2696167702,-3938528112062337e-9,-760146.0366785905]},{id:8,name:"Caruaru",extent:[-4.0276171005441933e6,-938316.5549985012,-3990981856124127e-9,-890799.6286330861]},{id:10,name:"Boa Vista",extent:[-6790555730084164e-9,270386.93871313025,-6710984558065131e-9,401683.3501780201]},{id:12,name:"Florianópolis",extent:[-5411630065678805e-9,-3.2298235479799807e6,-5379837219108245e-9,-3157044988295852e-9]},{id:13,name:"Tijucas",extent:[-5432869824522161e-9,-3167869683561847e-9,-5409514995353732e-9,-3.1402733111181105e6]}];function $O(){const[i,e]=P.useState(),t=P.useRef(null);function n(r){const o=Fx.filter(a=>String(a.id)===r);if(o.length===0)throw new Error("Eita");e(o[0]),t.current&&t.current.ol.getView().fit(o[0].extent,{size:t.current.ol.getSize(),duration:1e3,callback:()=>console.log("just fitted"),padding:[50,50,50,50]})}return J.jsxs("div",{className:"flex w-[100vw] h-[100vh]",children:[J.jsxs(NL,{ref:t,initial:{center:[-6389344727940026e-9,-1450949419839621e-9],zoom:4.68906559745409,resolution:6068.541833086031},className:"w-[100%] h-[100%]",children:[J.jsx(nx,{url:"http://34.171.229.232:7800/shared.green_areas/{z}/{x}/{y}.pbf",format:new cx,zIndex:100,style:r=>{const o=r.get("id_municipality_boundaries");if(!(!i||o!==i.id))return new Tn({stroke:new Yi({color:"green",width:1}),fill:new Zi({color:"rgba(20,200,20,0.5)"})})}}),J.jsx(nx,{url:"http://34.171.229.232:7800/shared.municipality_boundaries/{z}/{x}/{y}.pbf",format:new cx,zIndex:100,style:r=>{const o=r.get("id");if(!(!i||o!==i.id))return new Tn({stroke:new Yi({color:"red",width:3}),fill:new Zi({color:"rgba(20,200,20,0)"})})}}),J.jsx(wk,{})]}),J.jsx("div",{className:"absolute top-2 right-2  bg-white rounded-md shadow-sm",children:J.jsxs(XO,{onValueChange:n,children:[J.jsx(vC,{className:"w-[250px]",children:J.jsx(HO,{placeholder:"Selecione um município"})}),J.jsx(EC,{children:Fx.map(r=>J.jsx(CC,{value:String(r.id),children:r.name}))})]})})]})}function ZO(){return J.jsx(VT,{basename:"/cloudmatize-prototypes/",children:J.jsx(vT,{children:J.jsx(Qx,{path:"/",element:J.jsx($O,{})})})})}Wx.createRoot(document.getElementById("root")).render(J.jsx(P.StrictMode,{children:J.jsx(ZO,{})}));
