var pw=Object.defineProperty;var Y_=r=>{throw TypeError(r)};var mw=(r,e,t)=>e in r?pw(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var $e=(r,e,t)=>mw(r,typeof e!="symbol"?e+"":e,t),Xd=(r,e,t)=>e.has(r)||Y_("Cannot "+t);var R=(r,e,t)=>(Xd(r,e,"read from private field"),t?t.call(r):e.get(r)),ze=(r,e,t)=>e.has(r)?Y_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),ye=(r,e,t,n)=>(Xd(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),ce=(r,e,t)=>(Xd(r,e,"access private method"),t);var Yu=(r,e,t,n)=>({set _(i){ye(r,e,i,t)},get _(){return R(r,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();function _w(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Yd={exports:{}},bl={},Kd={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function yw(){if(K_)return Fe;K_=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function _(F){return F===null||typeof F!="object"?null:(F=m&&F[m]||F["@@iterator"],typeof F=="function"?F:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function C(F,W,ge){this.props=F,this.context=W,this.refs=E,this.updater=ge||v}C.prototype.isReactComponent={},C.prototype.setState=function(F,W){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,W,"setState")},C.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function S(){}S.prototype=C.prototype;function T(F,W,ge){this.props=F,this.context=W,this.refs=E,this.updater=ge||v}var I=T.prototype=new S;I.constructor=T,x(I,C.prototype),I.isPureReactComponent=!0;var L=Array.isArray,k=Object.prototype.hasOwnProperty,j={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function z(F,W,ge){var U,we={},ve=null,Te=null;if(W!=null)for(U in W.ref!==void 0&&(Te=W.ref),W.key!==void 0&&(ve=""+W.key),W)k.call(W,U)&&!N.hasOwnProperty(U)&&(we[U]=W[U]);var Pe=arguments.length-2;if(Pe===1)we.children=ge;else if(1<Pe){for(var De=Array(Pe),Ye=0;Ye<Pe;Ye++)De[Ye]=arguments[Ye+2];we.children=De}if(F&&F.defaultProps)for(U in Pe=F.defaultProps,Pe)we[U]===void 0&&(we[U]=Pe[U]);return{$$typeof:r,type:F,key:ve,ref:Te,props:we,_owner:j.current}}function G(F,W){return{$$typeof:r,type:F.type,key:W,ref:F.ref,props:F.props,_owner:F._owner}}function re(F){return typeof F=="object"&&F!==null&&F.$$typeof===r}function te(F){var W={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ge){return W[ge]})}var ee=/\/+/g;function le(F,W){return typeof F=="object"&&F!==null&&F.key!=null?te(""+F.key):W.toString(36)}function $(F,W,ge,U,we){var ve=typeof F;(ve==="undefined"||ve==="boolean")&&(F=null);var Te=!1;if(F===null)Te=!0;else switch(ve){case"string":case"number":Te=!0;break;case"object":switch(F.$$typeof){case r:case e:Te=!0}}if(Te)return Te=F,we=we(Te),F=U===""?"."+le(Te,0):U,L(we)?(ge="",F!=null&&(ge=F.replace(ee,"$&/")+"/"),$(we,W,ge,"",function(Ye){return Ye})):we!=null&&(re(we)&&(we=G(we,ge+(!we.key||Te&&Te.key===we.key?"":(""+we.key).replace(ee,"$&/")+"/")+F)),W.push(we)),1;if(Te=0,U=U===""?".":U+":",L(F))for(var Pe=0;Pe<F.length;Pe++){ve=F[Pe];var De=U+le(ve,Pe);Te+=$(ve,W,ge,De,we)}else if(De=_(F),typeof De=="function")for(F=De.call(F),Pe=0;!(ve=F.next()).done;)ve=ve.value,De=U+le(ve,Pe++),Te+=$(ve,W,ge,De,we);else if(ve==="object")throw W=String(F),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Te}function se(F,W,ge){if(F==null)return F;var U=[],we=0;return $(F,U,"","",function(ve){return W.call(ge,ve,we++)}),U}function X(F){if(F._status===-1){var W=F._result;W=W(),W.then(function(ge){(F._status===0||F._status===-1)&&(F._status=1,F._result=ge)},function(ge){(F._status===0||F._status===-1)&&(F._status=2,F._result=ge)}),F._status===-1&&(F._status=0,F._result=W)}if(F._status===1)return F._result.default;throw F._result}var ae={current:null},Y={transition:null},ne={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:Y,ReactCurrentOwner:j};function B(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:se,forEach:function(F,W,ge){se(F,function(){W.apply(this,arguments)},ge)},count:function(F){var W=0;return se(F,function(){W++}),W},toArray:function(F){return se(F,function(W){return W})||[]},only:function(F){if(!re(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Fe.Component=C,Fe.Fragment=t,Fe.Profiler=i,Fe.PureComponent=T,Fe.StrictMode=n,Fe.Suspense=h,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,Fe.act=B,Fe.cloneElement=function(F,W,ge){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var U=x({},F.props),we=F.key,ve=F.ref,Te=F._owner;if(W!=null){if(W.ref!==void 0&&(ve=W.ref,Te=j.current),W.key!==void 0&&(we=""+W.key),F.type&&F.type.defaultProps)var Pe=F.type.defaultProps;for(De in W)k.call(W,De)&&!N.hasOwnProperty(De)&&(U[De]=W[De]===void 0&&Pe!==void 0?Pe[De]:W[De])}var De=arguments.length-2;if(De===1)U.children=ge;else if(1<De){Pe=Array(De);for(var Ye=0;Ye<De;Ye++)Pe[Ye]=arguments[Ye+2];U.children=Pe}return{$$typeof:r,type:F.type,key:we,ref:ve,props:U,_owner:Te}},Fe.createContext=function(F){return F={$$typeof:a,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:l,_context:F},F.Consumer=F},Fe.createElement=z,Fe.createFactory=function(F){var W=z.bind(null,F);return W.type=F,W},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(F){return{$$typeof:u,render:F}},Fe.isValidElement=re,Fe.lazy=function(F){return{$$typeof:g,_payload:{_status:-1,_result:F},_init:X}},Fe.memo=function(F,W){return{$$typeof:f,type:F,compare:W===void 0?null:W}},Fe.startTransition=function(F){var W=Y.transition;Y.transition={};try{F()}finally{Y.transition=W}},Fe.unstable_act=B,Fe.useCallback=function(F,W){return ae.current.useCallback(F,W)},Fe.useContext=function(F){return ae.current.useContext(F)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(F){return ae.current.useDeferredValue(F)},Fe.useEffect=function(F,W){return ae.current.useEffect(F,W)},Fe.useId=function(){return ae.current.useId()},Fe.useImperativeHandle=function(F,W,ge){return ae.current.useImperativeHandle(F,W,ge)},Fe.useInsertionEffect=function(F,W){return ae.current.useInsertionEffect(F,W)},Fe.useLayoutEffect=function(F,W){return ae.current.useLayoutEffect(F,W)},Fe.useMemo=function(F,W){return ae.current.useMemo(F,W)},Fe.useReducer=function(F,W,ge){return ae.current.useReducer(F,W,ge)},Fe.useRef=function(F){return ae.current.useRef(F)},Fe.useState=function(F){return ae.current.useState(F)},Fe.useSyncExternalStore=function(F,W,ge){return ae.current.useSyncExternalStore(F,W,ge)},Fe.useTransition=function(){return ae.current.useTransition()},Fe.version="18.3.1",Fe}var H_;function eg(){return H_||(H_=1,Kd.exports=yw()),Kd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function vw(){if(Z_)return bl;Z_=1;var r=eg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function a(u,h,f){var g,m={},_=null,v=null;f!==void 0&&(_=""+f),h.key!==void 0&&(_=""+h.key),h.ref!==void 0&&(v=h.ref);for(g in h)n.call(h,g)&&!l.hasOwnProperty(g)&&(m[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)m[g]===void 0&&(m[g]=h[g]);return{$$typeof:e,type:u,key:_,ref:v,props:m,_owner:i.current}}return bl.Fragment=t,bl.jsx=a,bl.jsxs=a,bl}var $_;function xw(){return $_||($_=1,Yd.exports=vw()),Yd.exports}var Ut=xw(),K=eg();const at=_w(K);var Ku={},Hd={exports:{}},ln={},Zd={exports:{}},$d={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function ww(){return q_||(q_=1,function(r){function e(Y,ne){var B=Y.length;Y.push(ne);e:for(;0<B;){var F=B-1>>>1,W=Y[F];if(0<i(W,ne))Y[F]=ne,Y[B]=W,B=F;else break e}}function t(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var ne=Y[0],B=Y.pop();if(B!==ne){Y[0]=B;e:for(var F=0,W=Y.length,ge=W>>>1;F<ge;){var U=2*(F+1)-1,we=Y[U],ve=U+1,Te=Y[ve];if(0>i(we,B))ve<W&&0>i(Te,we)?(Y[F]=Te,Y[ve]=B,F=ve):(Y[F]=we,Y[U]=B,F=U);else if(ve<W&&0>i(Te,B))Y[F]=Te,Y[ve]=B,F=ve;else break e}}return ne}function i(Y,ne){var B=Y.sortIndex-ne.sortIndex;return B!==0?B:Y.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var a=Date,u=a.now();r.unstable_now=function(){return a.now()-u}}var h=[],f=[],g=1,m=null,_=3,v=!1,x=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Y){for(var ne=t(f);ne!==null;){if(ne.callback===null)n(f);else if(ne.startTime<=Y)n(f),ne.sortIndex=ne.expirationTime,e(h,ne);else break;ne=t(f)}}function L(Y){if(E=!1,I(Y),!x)if(t(h)!==null)x=!0,X(k);else{var ne=t(f);ne!==null&&ae(L,ne.startTime-Y)}}function k(Y,ne){x=!1,E&&(E=!1,S(z),z=-1),v=!0;var B=_;try{for(I(ne),m=t(h);m!==null&&(!(m.expirationTime>ne)||Y&&!te());){var F=m.callback;if(typeof F=="function"){m.callback=null,_=m.priorityLevel;var W=F(m.expirationTime<=ne);ne=r.unstable_now(),typeof W=="function"?m.callback=W:m===t(h)&&n(h),I(ne)}else n(h);m=t(h)}if(m!==null)var ge=!0;else{var U=t(f);U!==null&&ae(L,U.startTime-ne),ge=!1}return ge}finally{m=null,_=B,v=!1}}var j=!1,N=null,z=-1,G=5,re=-1;function te(){return!(r.unstable_now()-re<G)}function ee(){if(N!==null){var Y=r.unstable_now();re=Y;var ne=!0;try{ne=N(!0,Y)}finally{ne?le():(j=!1,N=null)}}else j=!1}var le;if(typeof T=="function")le=function(){T(ee)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,se=$.port2;$.port1.onmessage=ee,le=function(){se.postMessage(null)}}else le=function(){C(ee,0)};function X(Y){N=Y,j||(j=!0,le())}function ae(Y,ne){z=C(function(){Y(r.unstable_now())},ne)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_continueExecution=function(){x||v||(x=!0,X(k))},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(Y){switch(_){case 1:case 2:case 3:var ne=3;break;default:ne=_}var B=_;_=ne;try{return Y()}finally{_=B}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Y,ne){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var B=_;_=Y;try{return ne()}finally{_=B}},r.unstable_scheduleCallback=function(Y,ne,B){var F=r.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?F+B:F):B=F,Y){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=B+W,Y={id:g++,callback:ne,priorityLevel:Y,startTime:B,expirationTime:W,sortIndex:-1},B>F?(Y.sortIndex=B,e(f,Y),t(h)===null&&Y===t(f)&&(E?(S(z),z=-1):E=!0,ae(L,B-F))):(Y.sortIndex=W,e(h,Y),x||v||(x=!0,X(k))),Y},r.unstable_shouldYield=te,r.unstable_wrapCallback=function(Y){var ne=_;return function(){var B=_;_=ne;try{return Y.apply(this,arguments)}finally{_=B}}}}($d)),$d}var Q_;function Ew(){return Q_||(Q_=1,Zd.exports=ww()),Zd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function Cw(){if(J_)return ln;J_=1;var r=eg(),e=Ew();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function l(s,o){a(s,o),a(s+"Capture",o)}function a(s,o){for(i[s]=o,s=0;s<o.length;s++)n.add(o[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},m={};function _(s){return h.call(m,s)?!0:h.call(g,s)?!1:f.test(s)?m[s]=!0:(g[s]=!0,!1)}function v(s,o,c,d){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function x(s,o,c,d){if(o===null||typeof o>"u"||v(s,o,c,d))return!0;if(d)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function E(s,o,c,d,p,y,w){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=c,this.propertyName=s,this.type=o,this.sanitizeURL=y,this.removeEmptyString=w}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){C[s]=new E(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];C[o]=new E(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){C[s]=new E(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){C[s]=new E(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){C[s]=new E(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){C[s]=new E(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){C[s]=new E(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){C[s]=new E(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){C[s]=new E(s,5,!1,s.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function T(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(S,T);C[o]=new E(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(S,T);C[o]=new E(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(S,T);C[o]=new E(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){C[s]=new E(s,1,!1,s.toLowerCase(),null,!1,!1)}),C.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){C[s]=new E(s,1,!1,s.toLowerCase(),null,!0,!0)});function I(s,o,c,d){var p=C.hasOwnProperty(o)?C[o]:null;(p!==null?p.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(x(o,c,p,d)&&(c=null),d||p===null?_(o)&&(c===null?s.removeAttribute(o):s.setAttribute(o,""+c)):p.mustUseProperty?s[p.propertyName]=c===null?p.type===3?!1:"":c:(o=p.attributeName,d=p.attributeNamespace,c===null?s.removeAttribute(o):(p=p.type,c=p===3||p===4&&c===!0?"":""+c,d?s.setAttributeNS(d,o,c):s.setAttribute(o,c))))}var L=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),j=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),te=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),Y=Symbol.iterator;function ne(s){return s===null||typeof s!="object"?null:(s=Y&&s[Y]||s["@@iterator"],typeof s=="function"?s:null)}var B=Object.assign,F;function W(s){if(F===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);F=o&&o[1]||""}return`
`+F+s}var ge=!1;function U(s,o){if(!s||ge)return"";ge=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(b){var d=b}Reflect.construct(s,[],o)}else{try{o.call()}catch(b){d=b}s.call(o.prototype)}else{try{throw Error()}catch(b){d=b}s()}}catch(b){if(b&&d&&typeof b.stack=="string"){for(var p=b.stack.split(`
`),y=d.stack.split(`
`),w=p.length-1,P=y.length-1;1<=w&&0<=P&&p[w]!==y[P];)P--;for(;1<=w&&0<=P;w--,P--)if(p[w]!==y[P]){if(w!==1||P!==1)do if(w--,P--,0>P||p[w]!==y[P]){var M=`
`+p[w].replace(" at new "," at ");return s.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",s.displayName)),M}while(1<=w&&0<=P);break}}}finally{ge=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?W(s):""}function we(s){switch(s.tag){case 5:return W(s.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return s=U(s.type,!1),s;case 11:return s=U(s.type.render,!1),s;case 1:return s=U(s.type,!0),s;default:return""}}function ve(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case j:return"Portal";case G:return"Profiler";case z:return"StrictMode";case le:return"Suspense";case $:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case te:return(s.displayName||"Context")+".Consumer";case re:return(s._context.displayName||"Context")+".Provider";case ee:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case se:return o=s.displayName||null,o!==null?o:ve(s.type)||"Memo";case X:o=s._payload,s=s._init;try{return ve(s(o))}catch{}}return null}function Te(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(o);case 8:return o===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Pe(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function De(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ye(s){var o=De(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),d=""+s[o];if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return p.call(this)},set:function(w){d=""+w,y.call(this,w)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function gn(s){s._valueTracker||(s._valueTracker=Ye(s))}function cr(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return s&&(d=De(s)?s.checked?"true":"false":s.value),s=d,s!==c?(o.setValue(s),!0):!1}function Di(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function rs(s,o){var c=o.checked;return B({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function hr(s,o){var c=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;c=Pe(o.value!=null?o.value:c),s._wrapperState={initialChecked:d,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function mi(s,o){o=o.checked,o!=null&&I(s,"checked",o,!1)}function Dt(s,o){mi(s,o);var c=Pe(o.value),d=o.type;if(c!=null)d==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?_i(s,o.type,c):o.hasOwnProperty("defaultValue")&&_i(s,o.type,Pe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function pn(s,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,c||o===s.value||(s.value=o),s.defaultValue=o}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function _i(s,o,c){(o!=="number"||Di(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var Fn=Array.isArray;function Mn(s,o,c,d){if(s=s.options,o){o={};for(var p=0;p<c.length;p++)o["$"+c[p]]=!0;for(c=0;c<s.length;c++)p=o.hasOwnProperty("$"+s[c].value),s[c].selected!==p&&(s[c].selected=p),p&&d&&(s[c].defaultSelected=!0)}else{for(c=""+Pe(c),o=null,p=0;p<s.length;p++){if(s[p].value===c){s[p].selected=!0,d&&(s[p].defaultSelected=!0);return}o!==null||s[p].disabled||(o=s[p])}o!==null&&(o.selected=!0)}}function Hn(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return B({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Oi(s,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(t(92));if(Fn(c)){if(1<c.length)throw Error(t(93));c=c[0]}o=c}o==null&&(o=""),c=o}s._wrapperState={initialValue:Pe(c)}}function Ni(s,o){var c=Pe(o.value),d=Pe(o.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),o.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),d!=null&&(s.defaultValue=""+d)}function ct(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function Ws(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ss(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?Ws(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var zi,os=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,d,p){MSApp.execUnsafeLocalFunction(function(){return s(o,c,d,p)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(zi=zi||document.createElement("div"),zi.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=zi.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function ls(s,o){if(o){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=o;return}}s.textContent=o}var dr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ga=["Webkit","ms","Moz","O"];Object.keys(dr).forEach(function(s){Ga.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),dr[o]=dr[s]})});function Us(s,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||dr.hasOwnProperty(s)&&dr[s]?(""+o).trim():o+"px"}function ja(s,o){s=s.style;for(var c in o)if(o.hasOwnProperty(c)){var d=c.indexOf("--")===0,p=Us(c,o[c],d);c==="float"&&(c="cssFloat"),d?s.setProperty(c,p):s[c]=p}}var uh=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vs(s,o){if(o){if(uh[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Bs(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var as=null;function Xs(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var us=null,An=null,Dn=null;function fr(s){if(s=Cl(s)){if(typeof us!="function")throw Error(t(280));var o=s.stateNode;o&&(o=lu(o),us(s.stateNode,s.type,o))}}function il(s){An?Dn?Dn.push(s):Dn=[s]:An=s}function rl(){if(An){var s=An,o=Dn;if(Dn=An=null,fr(s),o)for(s=0;s<o.length;s++)fr(o[s])}}function Yt(s,o){return s(o)}function yi(){}var Ot=!1;function mn(s,o,c){if(Ot)return s(o,c);Ot=!0;try{return Yt(s,o,c)}finally{Ot=!1,(An!==null||Dn!==null)&&(yi(),rl())}}function wt(s,o){var c=s.stateNode;if(c===null)return null;var d=lu(c);if(d===null)return null;c=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(t(231,o,typeof c));return c}var _n=!1;if(u)try{var Kt={};Object.defineProperty(Kt,"passive",{get:function(){_n=!0}}),window.addEventListener("test",Kt,Kt),window.removeEventListener("test",Kt,Kt)}catch{_n=!1}function Je(s,o,c,d,p,y,w,P,M){var b=Array.prototype.slice.call(arguments,3);try{o.apply(c,b)}catch(Z){this.onError(Z)}}var ht=!1,en=null,Ys=!1,ch=null,E1={onError:function(s){ht=!0,en=s}};function C1(s,o,c,d,p,y,w,P,M){ht=!1,en=null,Je.apply(E1,arguments)}function S1(s,o,c,d,p,y,w,P,M){if(C1.apply(this,arguments),ht){if(ht){var b=en;ht=!1,en=null}else throw Error(t(198));Ys||(Ys=!0,ch=b)}}function cs(s){var o=s,c=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,o.flags&4098&&(c=o.return),s=o.return;while(s)}return o.tag===3?c:null}function pp(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function mp(s){if(cs(s)!==s)throw Error(t(188))}function T1(s){var o=s.alternate;if(!o){if(o=cs(s),o===null)throw Error(t(188));return o!==s?null:s}for(var c=s,d=o;;){var p=c.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){c=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===c)return mp(p),s;if(y===d)return mp(p),o;y=y.sibling}throw Error(t(188))}if(c.return!==d.return)c=p,d=y;else{for(var w=!1,P=p.child;P;){if(P===c){w=!0,c=p,d=y;break}if(P===d){w=!0,d=p,c=y;break}P=P.sibling}if(!w){for(P=y.child;P;){if(P===c){w=!0,c=y,d=p;break}if(P===d){w=!0,d=y,c=p;break}P=P.sibling}if(!w)throw Error(t(189))}}if(c.alternate!==d)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?s:o}function _p(s){return s=T1(s),s!==null?yp(s):null}function yp(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=yp(s);if(o!==null)return o;s=s.sibling}return null}var vp=e.unstable_scheduleCallback,xp=e.unstable_cancelCallback,R1=e.unstable_shouldYield,I1=e.unstable_requestPaint,dt=e.unstable_now,P1=e.unstable_getCurrentPriorityLevel,hh=e.unstable_ImmediatePriority,wp=e.unstable_UserBlockingPriority,Wa=e.unstable_NormalPriority,L1=e.unstable_LowPriority,Ep=e.unstable_IdlePriority,Ua=null,vi=null;function k1(s){if(vi&&typeof vi.onCommitFiberRoot=="function")try{vi.onCommitFiberRoot(Ua,s,void 0,(s.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:A1,F1=Math.log,M1=Math.LN2;function A1(s){return s>>>=0,s===0?32:31-(F1(s)/M1|0)|0}var Va=64,Ba=4194304;function sl(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Xa(s,o){var c=s.pendingLanes;if(c===0)return 0;var d=0,p=s.suspendedLanes,y=s.pingedLanes,w=c&268435455;if(w!==0){var P=w&~p;P!==0?d=sl(P):(y&=w,y!==0&&(d=sl(y)))}else w=c&~p,w!==0?d=sl(w):y!==0&&(d=sl(y));if(d===0)return 0;if(o!==0&&o!==d&&!(o&p)&&(p=d&-d,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if(d&4&&(d|=c&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=d;0<o;)c=31-Zn(o),p=1<<c,d|=s[c],o&=~p;return d}function D1(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O1(s,o){for(var c=s.suspendedLanes,d=s.pingedLanes,p=s.expirationTimes,y=s.pendingLanes;0<y;){var w=31-Zn(y),P=1<<w,M=p[w];M===-1?(!(P&c)||P&d)&&(p[w]=D1(P,o)):M<=o&&(s.expiredLanes|=P),y&=~P}}function dh(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Cp(){var s=Va;return Va<<=1,!(Va&4194240)&&(Va=64),s}function fh(s){for(var o=[],c=0;31>c;c++)o.push(s);return o}function ol(s,o,c){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-Zn(o),s[o]=c}function N1(s,o){var c=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<c;){var p=31-Zn(c),y=1<<p;o[p]=0,d[p]=-1,s[p]=-1,c&=~y}}function gh(s,o){var c=s.entangledLanes|=o;for(s=s.entanglements;c;){var d=31-Zn(c),p=1<<d;p&o|s[d]&o&&(s[d]|=o),c&=~p}}var Ue=0;function Sp(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Tp,ph,Rp,Ip,Pp,mh=!1,Ya=[],gr=null,pr=null,mr=null,ll=new Map,al=new Map,_r=[],z1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lp(s,o){switch(s){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":ll.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":al.delete(o.pointerId)}}function ul(s,o,c,d,p,y){return s===null||s.nativeEvent!==y?(s={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},o!==null&&(o=Cl(o),o!==null&&ph(o)),s):(s.eventSystemFlags|=d,o=s.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),s)}function b1(s,o,c,d,p){switch(o){case"focusin":return gr=ul(gr,s,o,c,d,p),!0;case"dragenter":return pr=ul(pr,s,o,c,d,p),!0;case"mouseover":return mr=ul(mr,s,o,c,d,p),!0;case"pointerover":var y=p.pointerId;return ll.set(y,ul(ll.get(y)||null,s,o,c,d,p)),!0;case"gotpointercapture":return y=p.pointerId,al.set(y,ul(al.get(y)||null,s,o,c,d,p)),!0}return!1}function kp(s){var o=hs(s.target);if(o!==null){var c=cs(o);if(c!==null){if(o=c.tag,o===13){if(o=pp(c),o!==null){s.blockedOn=o,Pp(s.priority,function(){Rp(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ka(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var c=yh(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var d=new c.constructor(c.type,c);as=d,c.target.dispatchEvent(d),as=null}else return o=Cl(c),o!==null&&ph(o),s.blockedOn=c,!1;o.shift()}return!0}function Fp(s,o,c){Ka(s)&&c.delete(o)}function G1(){mh=!1,gr!==null&&Ka(gr)&&(gr=null),pr!==null&&Ka(pr)&&(pr=null),mr!==null&&Ka(mr)&&(mr=null),ll.forEach(Fp),al.forEach(Fp)}function cl(s,o){s.blockedOn===o&&(s.blockedOn=null,mh||(mh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,G1)))}function hl(s){function o(p){return cl(p,s)}if(0<Ya.length){cl(Ya[0],s);for(var c=1;c<Ya.length;c++){var d=Ya[c];d.blockedOn===s&&(d.blockedOn=null)}}for(gr!==null&&cl(gr,s),pr!==null&&cl(pr,s),mr!==null&&cl(mr,s),ll.forEach(o),al.forEach(o),c=0;c<_r.length;c++)d=_r[c],d.blockedOn===s&&(d.blockedOn=null);for(;0<_r.length&&(c=_r[0],c.blockedOn===null);)kp(c),c.blockedOn===null&&_r.shift()}var Ks=L.ReactCurrentBatchConfig,Ha=!0;function j1(s,o,c,d){var p=Ue,y=Ks.transition;Ks.transition=null;try{Ue=1,_h(s,o,c,d)}finally{Ue=p,Ks.transition=y}}function W1(s,o,c,d){var p=Ue,y=Ks.transition;Ks.transition=null;try{Ue=4,_h(s,o,c,d)}finally{Ue=p,Ks.transition=y}}function _h(s,o,c,d){if(Ha){var p=yh(s,o,c,d);if(p===null)Oh(s,o,d,Za,c),Lp(s,d);else if(b1(p,s,o,c,d))d.stopPropagation();else if(Lp(s,d),o&4&&-1<z1.indexOf(s)){for(;p!==null;){var y=Cl(p);if(y!==null&&Tp(y),y=yh(s,o,c,d),y===null&&Oh(s,o,d,Za,c),y===p)break;p=y}p!==null&&d.stopPropagation()}else Oh(s,o,d,null,c)}}var Za=null;function yh(s,o,c,d){if(Za=null,s=Xs(d),s=hs(s),s!==null)if(o=cs(s),o===null)s=null;else if(c=o.tag,c===13){if(s=pp(o),s!==null)return s;s=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return Za=s,null}function Mp(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P1()){case hh:return 1;case wp:return 4;case Wa:case L1:return 16;case Ep:return 536870912;default:return 16}default:return 16}}var yr=null,vh=null,$a=null;function Ap(){if($a)return $a;var s,o=vh,c=o.length,d,p="value"in yr?yr.value:yr.textContent,y=p.length;for(s=0;s<c&&o[s]===p[s];s++);var w=c-s;for(d=1;d<=w&&o[c-d]===p[y-d];d++);return $a=p.slice(s,1<d?1-d:void 0)}function qa(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Qa(){return!0}function Dp(){return!1}function yn(s){function o(c,d,p,y,w){this._reactName=c,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var P in s)s.hasOwnProperty(P)&&(c=s[P],this[P]=c?c(y):y[P]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Qa:Dp,this.isPropagationStopped=Dp,this}return B(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Qa)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Qa)},persist:function(){},isPersistent:Qa}),o}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xh=yn(Hs),dl=B({},Hs,{view:0,detail:0}),U1=yn(dl),wh,Eh,fl,Ja=B({},dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sh,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==fl&&(fl&&s.type==="mousemove"?(wh=s.screenX-fl.screenX,Eh=s.screenY-fl.screenY):Eh=wh=0,fl=s),wh)},movementY:function(s){return"movementY"in s?s.movementY:Eh}}),Op=yn(Ja),V1=B({},Ja,{dataTransfer:0}),B1=yn(V1),X1=B({},dl,{relatedTarget:0}),Ch=yn(X1),Y1=B({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),K1=yn(Y1),H1=B({},Hs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Z1=yn(H1),$1=B({},Hs,{data:0}),Np=yn($1),q1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ex(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=J1[s])?!!o[s]:!1}function Sh(){return ex}var tx=B({},dl,{key:function(s){if(s.key){var o=q1[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=qa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Q1[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sh,charCode:function(s){return s.type==="keypress"?qa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?qa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),nx=yn(tx),ix=B({},Ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zp=yn(ix),rx=B({},dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sh}),sx=yn(rx),ox=B({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),lx=yn(ox),ax=B({},Ja,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ux=yn(ax),cx=[9,13,27,32],Th=u&&"CompositionEvent"in window,gl=null;u&&"documentMode"in document&&(gl=document.documentMode);var hx=u&&"TextEvent"in window&&!gl,bp=u&&(!Th||gl&&8<gl&&11>=gl),Gp=" ",jp=!1;function Wp(s,o){switch(s){case"keyup":return cx.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Up(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Zs=!1;function dx(s,o){switch(s){case"compositionend":return Up(o);case"keypress":return o.which!==32?null:(jp=!0,Gp);case"textInput":return s=o.data,s===Gp&&jp?null:s;default:return null}}function fx(s,o){if(Zs)return s==="compositionend"||!Th&&Wp(s,o)?(s=Ap(),$a=vh=yr=null,Zs=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return bp&&o.locale!=="ko"?null:o.data;default:return null}}var gx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vp(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!gx[s.type]:o==="textarea"}function Bp(s,o,c,d){il(d),o=ru(o,"onChange"),0<o.length&&(c=new xh("onChange","change",null,c,d),s.push({event:c,listeners:o}))}var pl=null,ml=null;function px(s){am(s,0)}function eu(s){var o=eo(s);if(cr(o))return s}function mx(s,o){if(s==="change")return o}var Xp=!1;if(u){var Rh;if(u){var Ih="oninput"in document;if(!Ih){var Yp=document.createElement("div");Yp.setAttribute("oninput","return;"),Ih=typeof Yp.oninput=="function"}Rh=Ih}else Rh=!1;Xp=Rh&&(!document.documentMode||9<document.documentMode)}function Kp(){pl&&(pl.detachEvent("onpropertychange",Hp),ml=pl=null)}function Hp(s){if(s.propertyName==="value"&&eu(ml)){var o=[];Bp(o,ml,s,Xs(s)),mn(px,o)}}function _x(s,o,c){s==="focusin"?(Kp(),pl=o,ml=c,pl.attachEvent("onpropertychange",Hp)):s==="focusout"&&Kp()}function yx(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return eu(ml)}function vx(s,o){if(s==="click")return eu(o)}function xx(s,o){if(s==="input"||s==="change")return eu(o)}function wx(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var $n=typeof Object.is=="function"?Object.is:wx;function _l(s,o){if($n(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var c=Object.keys(s),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var p=c[d];if(!h.call(o,p)||!$n(s[p],o[p]))return!1}return!0}function Zp(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function $p(s,o){var c=Zp(s);s=0;for(var d;c;){if(c.nodeType===3){if(d=s+c.textContent.length,s<=o&&d>=o)return{node:c,offset:o-s};s=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Zp(c)}}function qp(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?qp(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Qp(){for(var s=window,o=Di();o instanceof s.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)s=o.contentWindow;else break;o=Di(s.document)}return o}function Ph(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function Ex(s){var o=Qp(),c=s.focusedElem,d=s.selectionRange;if(o!==c&&c&&c.ownerDocument&&qp(c.ownerDocument.documentElement,c)){if(d!==null&&Ph(c)){if(o=d.start,s=d.end,s===void 0&&(s=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(s,c.value.length);else if(s=(o=c.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var p=c.textContent.length,y=Math.min(d.start,p);d=d.end===void 0?y:Math.min(d.end,p),!s.extend&&y>d&&(p=d,d=y,y=p),p=$p(c,y);var w=$p(c,d);p&&w&&(s.rangeCount!==1||s.anchorNode!==p.node||s.anchorOffset!==p.offset||s.focusNode!==w.node||s.focusOffset!==w.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),s.removeAllRanges(),y>d?(s.addRange(o),s.extend(w.node,w.offset)):(o.setEnd(w.node,w.offset),s.addRange(o)))}}for(o=[],s=c;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)s=o[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Cx=u&&"documentMode"in document&&11>=document.documentMode,$s=null,Lh=null,yl=null,kh=!1;function Jp(s,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;kh||$s==null||$s!==Di(d)||(d=$s,"selectionStart"in d&&Ph(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),yl&&_l(yl,d)||(yl=d,d=ru(Lh,"onSelect"),0<d.length&&(o=new xh("onSelect","select",null,o,c),s.push({event:o,listeners:d}),o.target=$s)))}function tu(s,o){var c={};return c[s.toLowerCase()]=o.toLowerCase(),c["Webkit"+s]="webkit"+o,c["Moz"+s]="moz"+o,c}var qs={animationend:tu("Animation","AnimationEnd"),animationiteration:tu("Animation","AnimationIteration"),animationstart:tu("Animation","AnimationStart"),transitionend:tu("Transition","TransitionEnd")},Fh={},em={};u&&(em=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function nu(s){if(Fh[s])return Fh[s];if(!qs[s])return s;var o=qs[s],c;for(c in o)if(o.hasOwnProperty(c)&&c in em)return Fh[s]=o[c];return s}var tm=nu("animationend"),nm=nu("animationiteration"),im=nu("animationstart"),rm=nu("transitionend"),sm=new Map,om="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vr(s,o){sm.set(s,o),l(o,[s])}for(var Mh=0;Mh<om.length;Mh++){var Ah=om[Mh],Sx=Ah.toLowerCase(),Tx=Ah[0].toUpperCase()+Ah.slice(1);vr(Sx,"on"+Tx)}vr(tm,"onAnimationEnd"),vr(nm,"onAnimationIteration"),vr(im,"onAnimationStart"),vr("dblclick","onDoubleClick"),vr("focusin","onFocus"),vr("focusout","onBlur"),vr(rm,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rx=new Set("cancel close invalid load scroll toggle".split(" ").concat(vl));function lm(s,o,c){var d=s.type||"unknown-event";s.currentTarget=c,S1(d,o,void 0,s),s.currentTarget=null}function am(s,o){o=(o&4)!==0;for(var c=0;c<s.length;c++){var d=s[c],p=d.event;d=d.listeners;e:{var y=void 0;if(o)for(var w=d.length-1;0<=w;w--){var P=d[w],M=P.instance,b=P.currentTarget;if(P=P.listener,M!==y&&p.isPropagationStopped())break e;lm(p,P,b),y=M}else for(w=0;w<d.length;w++){if(P=d[w],M=P.instance,b=P.currentTarget,P=P.listener,M!==y&&p.isPropagationStopped())break e;lm(p,P,b),y=M}}}if(Ys)throw s=ch,Ys=!1,ch=null,s}function He(s,o){var c=o[Wh];c===void 0&&(c=o[Wh]=new Set);var d=s+"__bubble";c.has(d)||(um(o,s,2,!1),c.add(d))}function Dh(s,o,c){var d=0;o&&(d|=4),um(c,s,d,o)}var iu="_reactListening"+Math.random().toString(36).slice(2);function xl(s){if(!s[iu]){s[iu]=!0,n.forEach(function(c){c!=="selectionchange"&&(Rx.has(c)||Dh(c,!1,s),Dh(c,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[iu]||(o[iu]=!0,Dh("selectionchange",!1,o))}}function um(s,o,c,d){switch(Mp(o)){case 1:var p=j1;break;case 4:p=W1;break;default:p=_h}c=p.bind(null,o,c,s),p=void 0,!_n||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),d?p!==void 0?s.addEventListener(o,c,{capture:!0,passive:p}):s.addEventListener(o,c,!0):p!==void 0?s.addEventListener(o,c,{passive:p}):s.addEventListener(o,c,!1)}function Oh(s,o,c,d,p){var y=d;if(!(o&1)&&!(o&2)&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var P=d.stateNode.containerInfo;if(P===p||P.nodeType===8&&P.parentNode===p)break;if(w===4)for(w=d.return;w!==null;){var M=w.tag;if((M===3||M===4)&&(M=w.stateNode.containerInfo,M===p||M.nodeType===8&&M.parentNode===p))return;w=w.return}for(;P!==null;){if(w=hs(P),w===null)return;if(M=w.tag,M===5||M===6){d=y=w;continue e}P=P.parentNode}}d=d.return}mn(function(){var b=y,Z=Xs(c),q=[];e:{var H=sm.get(s);if(H!==void 0){var oe=xh,he=s;switch(s){case"keypress":if(qa(c)===0)break e;case"keydown":case"keyup":oe=nx;break;case"focusin":he="focus",oe=Ch;break;case"focusout":he="blur",oe=Ch;break;case"beforeblur":case"afterblur":oe=Ch;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Op;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=B1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=sx;break;case tm:case nm:case im:oe=K1;break;case rm:oe=lx;break;case"scroll":oe=U1;break;case"wheel":oe=ux;break;case"copy":case"cut":case"paste":oe=Z1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=zp}var de=(o&4)!==0,ft=!de&&s==="scroll",D=de?H!==null?H+"Capture":null:H;de=[];for(var A=b,O;A!==null;){O=A;var J=O.stateNode;if(O.tag===5&&J!==null&&(O=J,D!==null&&(J=wt(A,D),J!=null&&de.push(wl(A,J,O)))),ft)break;A=A.return}0<de.length&&(H=new oe(H,he,null,c,Z),q.push({event:H,listeners:de}))}}if(!(o&7)){e:{if(H=s==="mouseover"||s==="pointerover",oe=s==="mouseout"||s==="pointerout",H&&c!==as&&(he=c.relatedTarget||c.fromElement)&&(hs(he)||he[bi]))break e;if((oe||H)&&(H=Z.window===Z?Z:(H=Z.ownerDocument)?H.defaultView||H.parentWindow:window,oe?(he=c.relatedTarget||c.toElement,oe=b,he=he?hs(he):null,he!==null&&(ft=cs(he),he!==ft||he.tag!==5&&he.tag!==6)&&(he=null)):(oe=null,he=b),oe!==he)){if(de=Op,J="onMouseLeave",D="onMouseEnter",A="mouse",(s==="pointerout"||s==="pointerover")&&(de=zp,J="onPointerLeave",D="onPointerEnter",A="pointer"),ft=oe==null?H:eo(oe),O=he==null?H:eo(he),H=new de(J,A+"leave",oe,c,Z),H.target=ft,H.relatedTarget=O,J=null,hs(Z)===b&&(de=new de(D,A+"enter",he,c,Z),de.target=O,de.relatedTarget=ft,J=de),ft=J,oe&&he)t:{for(de=oe,D=he,A=0,O=de;O;O=Qs(O))A++;for(O=0,J=D;J;J=Qs(J))O++;for(;0<A-O;)de=Qs(de),A--;for(;0<O-A;)D=Qs(D),O--;for(;A--;){if(de===D||D!==null&&de===D.alternate)break t;de=Qs(de),D=Qs(D)}de=null}else de=null;oe!==null&&cm(q,H,oe,de,!1),he!==null&&ft!==null&&cm(q,ft,he,de,!0)}}e:{if(H=b?eo(b):window,oe=H.nodeName&&H.nodeName.toLowerCase(),oe==="select"||oe==="input"&&H.type==="file")var fe=mx;else if(Vp(H))if(Xp)fe=xx;else{fe=yx;var me=_x}else(oe=H.nodeName)&&oe.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(fe=vx);if(fe&&(fe=fe(s,b))){Bp(q,fe,c,Z);break e}me&&me(s,H,b),s==="focusout"&&(me=H._wrapperState)&&me.controlled&&H.type==="number"&&_i(H,"number",H.value)}switch(me=b?eo(b):window,s){case"focusin":(Vp(me)||me.contentEditable==="true")&&($s=me,Lh=b,yl=null);break;case"focusout":yl=Lh=$s=null;break;case"mousedown":kh=!0;break;case"contextmenu":case"mouseup":case"dragend":kh=!1,Jp(q,c,Z);break;case"selectionchange":if(Cx)break;case"keydown":case"keyup":Jp(q,c,Z)}var _e;if(Th)e:{switch(s){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Zs?Wp(s,c)&&(Ee="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Ee="onCompositionStart");Ee&&(bp&&c.locale!=="ko"&&(Zs||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Zs&&(_e=Ap()):(yr=Z,vh="value"in yr?yr.value:yr.textContent,Zs=!0)),me=ru(b,Ee),0<me.length&&(Ee=new Np(Ee,s,null,c,Z),q.push({event:Ee,listeners:me}),_e?Ee.data=_e:(_e=Up(c),_e!==null&&(Ee.data=_e)))),(_e=hx?dx(s,c):fx(s,c))&&(b=ru(b,"onBeforeInput"),0<b.length&&(Z=new Np("onBeforeInput","beforeinput",null,c,Z),q.push({event:Z,listeners:b}),Z.data=_e))}am(q,o)})}function wl(s,o,c){return{instance:s,listener:o,currentTarget:c}}function ru(s,o){for(var c=o+"Capture",d=[];s!==null;){var p=s,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=wt(s,c),y!=null&&d.unshift(wl(s,y,p)),y=wt(s,o),y!=null&&d.push(wl(s,y,p))),s=s.return}return d}function Qs(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function cm(s,o,c,d,p){for(var y=o._reactName,w=[];c!==null&&c!==d;){var P=c,M=P.alternate,b=P.stateNode;if(M!==null&&M===d)break;P.tag===5&&b!==null&&(P=b,p?(M=wt(c,y),M!=null&&w.unshift(wl(c,M,P))):p||(M=wt(c,y),M!=null&&w.push(wl(c,M,P)))),c=c.return}w.length!==0&&s.push({event:o,listeners:w})}var Ix=/\r\n?/g,Px=/\u0000|\uFFFD/g;function hm(s){return(typeof s=="string"?s:""+s).replace(Ix,`
`).replace(Px,"")}function su(s,o,c){if(o=hm(o),hm(s)!==o&&c)throw Error(t(425))}function ou(){}var Nh=null,zh=null;function bh(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Gh=typeof setTimeout=="function"?setTimeout:void 0,Lx=typeof clearTimeout=="function"?clearTimeout:void 0,dm=typeof Promise=="function"?Promise:void 0,kx=typeof queueMicrotask=="function"?queueMicrotask:typeof dm<"u"?function(s){return dm.resolve(null).then(s).catch(Fx)}:Gh;function Fx(s){setTimeout(function(){throw s})}function jh(s,o){var c=o,d=0;do{var p=c.nextSibling;if(s.removeChild(c),p&&p.nodeType===8)if(c=p.data,c==="/$"){if(d===0){s.removeChild(p),hl(o);return}d--}else c!=="$"&&c!=="$?"&&c!=="$!"||d++;c=p}while(c);hl(o)}function xr(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function fm(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return s;o--}else c==="/$"&&o++}s=s.previousSibling}return null}var Js=Math.random().toString(36).slice(2),xi="__reactFiber$"+Js,El="__reactProps$"+Js,bi="__reactContainer$"+Js,Wh="__reactEvents$"+Js,Mx="__reactListeners$"+Js,Ax="__reactHandles$"+Js;function hs(s){var o=s[xi];if(o)return o;for(var c=s.parentNode;c;){if(o=c[bi]||c[xi]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(s=fm(s);s!==null;){if(c=s[xi])return c;s=fm(s)}return o}s=c,c=s.parentNode}return null}function Cl(s){return s=s[xi]||s[bi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function eo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function lu(s){return s[El]||null}var Uh=[],to=-1;function wr(s){return{current:s}}function Ze(s){0>to||(s.current=Uh[to],Uh[to]=null,to--)}function Ke(s,o){to++,Uh[to]=s.current,s.current=o}var Er={},Nt=wr(Er),tn=wr(!1),ds=Er;function no(s,o){var c=s.type.contextTypes;if(!c)return Er;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in c)p[y]=o[y];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=p),p}function nn(s){return s=s.childContextTypes,s!=null}function au(){Ze(tn),Ze(Nt)}function gm(s,o,c){if(Nt.current!==Er)throw Error(t(168));Ke(Nt,o),Ke(tn,c)}function pm(s,o,c){var d=s.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return c;d=d.getChildContext();for(var p in d)if(!(p in o))throw Error(t(108,Te(s)||"Unknown",p));return B({},c,d)}function uu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Er,ds=Nt.current,Ke(Nt,s),Ke(tn,tn.current),!0}function mm(s,o,c){var d=s.stateNode;if(!d)throw Error(t(169));c?(s=pm(s,o,ds),d.__reactInternalMemoizedMergedChildContext=s,Ze(tn),Ze(Nt),Ke(Nt,s)):Ze(tn),Ke(tn,c)}var Gi=null,cu=!1,Vh=!1;function _m(s){Gi===null?Gi=[s]:Gi.push(s)}function Dx(s){cu=!0,_m(s)}function Cr(){if(!Vh&&Gi!==null){Vh=!0;var s=0,o=Ue;try{var c=Gi;for(Ue=1;s<c.length;s++){var d=c[s];do d=d(!0);while(d!==null)}Gi=null,cu=!1}catch(p){throw Gi!==null&&(Gi=Gi.slice(s+1)),vp(hh,Cr),p}finally{Ue=o,Vh=!1}}return null}var io=[],ro=0,hu=null,du=0,On=[],Nn=0,fs=null,ji=1,Wi="";function gs(s,o){io[ro++]=du,io[ro++]=hu,hu=s,du=o}function ym(s,o,c){On[Nn++]=ji,On[Nn++]=Wi,On[Nn++]=fs,fs=s;var d=ji;s=Wi;var p=32-Zn(d)-1;d&=~(1<<p),c+=1;var y=32-Zn(o)+p;if(30<y){var w=p-p%5;y=(d&(1<<w)-1).toString(32),d>>=w,p-=w,ji=1<<32-Zn(o)+p|c<<p|d,Wi=y+s}else ji=1<<y|c<<p|d,Wi=s}function Bh(s){s.return!==null&&(gs(s,1),ym(s,1,0))}function Xh(s){for(;s===hu;)hu=io[--ro],io[ro]=null,du=io[--ro],io[ro]=null;for(;s===fs;)fs=On[--Nn],On[Nn]=null,Wi=On[--Nn],On[Nn]=null,ji=On[--Nn],On[Nn]=null}var vn=null,xn=null,et=!1,qn=null;function vm(s,o){var c=jn(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=s,o=s.deletions,o===null?(s.deletions=[c],s.flags|=16):o.push(c)}function xm(s,o){switch(s.tag){case 5:var c=s.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,vn=s,xn=xr(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,vn=s,xn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=fs!==null?{id:ji,overflow:Wi}:null,s.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=jn(18,null,null,0),c.stateNode=o,c.return=s,s.child=c,vn=s,xn=null,!0):!1;default:return!1}}function Yh(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Kh(s){if(et){var o=xn;if(o){var c=o;if(!xm(s,o)){if(Yh(s))throw Error(t(418));o=xr(c.nextSibling);var d=vn;o&&xm(s,o)?vm(d,c):(s.flags=s.flags&-4097|2,et=!1,vn=s)}}else{if(Yh(s))throw Error(t(418));s.flags=s.flags&-4097|2,et=!1,vn=s}}}function wm(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;vn=s}function fu(s){if(s!==vn)return!1;if(!et)return wm(s),et=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!bh(s.type,s.memoizedProps)),o&&(o=xn)){if(Yh(s))throw Em(),Error(t(418));for(;o;)vm(s,o),o=xr(o.nextSibling)}if(wm(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(o===0){xn=xr(s.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}s=s.nextSibling}xn=null}}else xn=vn?xr(s.stateNode.nextSibling):null;return!0}function Em(){for(var s=xn;s;)s=xr(s.nextSibling)}function so(){xn=vn=null,et=!1}function Hh(s){qn===null?qn=[s]:qn.push(s)}var Ox=L.ReactCurrentBatchConfig;function Sl(s,o,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var d=c.stateNode}if(!d)throw Error(t(147,s));var p=d,y=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(w){var P=p.refs;w===null?delete P[y]:P[y]=w},o._stringRef=y,o)}if(typeof s!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,s))}return s}function gu(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function Cm(s){var o=s._init;return o(s._payload)}function Sm(s){function o(D,A){if(s){var O=D.deletions;O===null?(D.deletions=[A],D.flags|=16):O.push(A)}}function c(D,A){if(!s)return null;for(;A!==null;)o(D,A),A=A.sibling;return null}function d(D,A){for(D=new Map;A!==null;)A.key!==null?D.set(A.key,A):D.set(A.index,A),A=A.sibling;return D}function p(D,A){return D=Fr(D,A),D.index=0,D.sibling=null,D}function y(D,A,O){return D.index=O,s?(O=D.alternate,O!==null?(O=O.index,O<A?(D.flags|=2,A):O):(D.flags|=2,A)):(D.flags|=1048576,A)}function w(D){return s&&D.alternate===null&&(D.flags|=2),D}function P(D,A,O,J){return A===null||A.tag!==6?(A=Gd(O,D.mode,J),A.return=D,A):(A=p(A,O),A.return=D,A)}function M(D,A,O,J){var fe=O.type;return fe===N?Z(D,A,O.props.children,J,O.key):A!==null&&(A.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===X&&Cm(fe)===A.type)?(J=p(A,O.props),J.ref=Sl(D,A,O),J.return=D,J):(J=bu(O.type,O.key,O.props,null,D.mode,J),J.ref=Sl(D,A,O),J.return=D,J)}function b(D,A,O,J){return A===null||A.tag!==4||A.stateNode.containerInfo!==O.containerInfo||A.stateNode.implementation!==O.implementation?(A=jd(O,D.mode,J),A.return=D,A):(A=p(A,O.children||[]),A.return=D,A)}function Z(D,A,O,J,fe){return A===null||A.tag!==7?(A=Es(O,D.mode,J,fe),A.return=D,A):(A=p(A,O),A.return=D,A)}function q(D,A,O){if(typeof A=="string"&&A!==""||typeof A=="number")return A=Gd(""+A,D.mode,O),A.return=D,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case k:return O=bu(A.type,A.key,A.props,null,D.mode,O),O.ref=Sl(D,null,A),O.return=D,O;case j:return A=jd(A,D.mode,O),A.return=D,A;case X:var J=A._init;return q(D,J(A._payload),O)}if(Fn(A)||ne(A))return A=Es(A,D.mode,O,null),A.return=D,A;gu(D,A)}return null}function H(D,A,O,J){var fe=A!==null?A.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return fe!==null?null:P(D,A,""+O,J);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case k:return O.key===fe?M(D,A,O,J):null;case j:return O.key===fe?b(D,A,O,J):null;case X:return fe=O._init,H(D,A,fe(O._payload),J)}if(Fn(O)||ne(O))return fe!==null?null:Z(D,A,O,J,null);gu(D,O)}return null}function oe(D,A,O,J,fe){if(typeof J=="string"&&J!==""||typeof J=="number")return D=D.get(O)||null,P(A,D,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case k:return D=D.get(J.key===null?O:J.key)||null,M(A,D,J,fe);case j:return D=D.get(J.key===null?O:J.key)||null,b(A,D,J,fe);case X:var me=J._init;return oe(D,A,O,me(J._payload),fe)}if(Fn(J)||ne(J))return D=D.get(O)||null,Z(A,D,J,fe,null);gu(A,J)}return null}function he(D,A,O,J){for(var fe=null,me=null,_e=A,Ee=A=0,St=null;_e!==null&&Ee<O.length;Ee++){_e.index>Ee?(St=_e,_e=null):St=_e.sibling;var Ge=H(D,_e,O[Ee],J);if(Ge===null){_e===null&&(_e=St);break}s&&_e&&Ge.alternate===null&&o(D,_e),A=y(Ge,A,Ee),me===null?fe=Ge:me.sibling=Ge,me=Ge,_e=St}if(Ee===O.length)return c(D,_e),et&&gs(D,Ee),fe;if(_e===null){for(;Ee<O.length;Ee++)_e=q(D,O[Ee],J),_e!==null&&(A=y(_e,A,Ee),me===null?fe=_e:me.sibling=_e,me=_e);return et&&gs(D,Ee),fe}for(_e=d(D,_e);Ee<O.length;Ee++)St=oe(_e,D,Ee,O[Ee],J),St!==null&&(s&&St.alternate!==null&&_e.delete(St.key===null?Ee:St.key),A=y(St,A,Ee),me===null?fe=St:me.sibling=St,me=St);return s&&_e.forEach(function(Mr){return o(D,Mr)}),et&&gs(D,Ee),fe}function de(D,A,O,J){var fe=ne(O);if(typeof fe!="function")throw Error(t(150));if(O=fe.call(O),O==null)throw Error(t(151));for(var me=fe=null,_e=A,Ee=A=0,St=null,Ge=O.next();_e!==null&&!Ge.done;Ee++,Ge=O.next()){_e.index>Ee?(St=_e,_e=null):St=_e.sibling;var Mr=H(D,_e,Ge.value,J);if(Mr===null){_e===null&&(_e=St);break}s&&_e&&Mr.alternate===null&&o(D,_e),A=y(Mr,A,Ee),me===null?fe=Mr:me.sibling=Mr,me=Mr,_e=St}if(Ge.done)return c(D,_e),et&&gs(D,Ee),fe;if(_e===null){for(;!Ge.done;Ee++,Ge=O.next())Ge=q(D,Ge.value,J),Ge!==null&&(A=y(Ge,A,Ee),me===null?fe=Ge:me.sibling=Ge,me=Ge);return et&&gs(D,Ee),fe}for(_e=d(D,_e);!Ge.done;Ee++,Ge=O.next())Ge=oe(_e,D,Ee,Ge.value,J),Ge!==null&&(s&&Ge.alternate!==null&&_e.delete(Ge.key===null?Ee:Ge.key),A=y(Ge,A,Ee),me===null?fe=Ge:me.sibling=Ge,me=Ge);return s&&_e.forEach(function(gw){return o(D,gw)}),et&&gs(D,Ee),fe}function ft(D,A,O,J){if(typeof O=="object"&&O!==null&&O.type===N&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case k:e:{for(var fe=O.key,me=A;me!==null;){if(me.key===fe){if(fe=O.type,fe===N){if(me.tag===7){c(D,me.sibling),A=p(me,O.props.children),A.return=D,D=A;break e}}else if(me.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===X&&Cm(fe)===me.type){c(D,me.sibling),A=p(me,O.props),A.ref=Sl(D,me,O),A.return=D,D=A;break e}c(D,me);break}else o(D,me);me=me.sibling}O.type===N?(A=Es(O.props.children,D.mode,J,O.key),A.return=D,D=A):(J=bu(O.type,O.key,O.props,null,D.mode,J),J.ref=Sl(D,A,O),J.return=D,D=J)}return w(D);case j:e:{for(me=O.key;A!==null;){if(A.key===me)if(A.tag===4&&A.stateNode.containerInfo===O.containerInfo&&A.stateNode.implementation===O.implementation){c(D,A.sibling),A=p(A,O.children||[]),A.return=D,D=A;break e}else{c(D,A);break}else o(D,A);A=A.sibling}A=jd(O,D.mode,J),A.return=D,D=A}return w(D);case X:return me=O._init,ft(D,A,me(O._payload),J)}if(Fn(O))return he(D,A,O,J);if(ne(O))return de(D,A,O,J);gu(D,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,A!==null&&A.tag===6?(c(D,A.sibling),A=p(A,O),A.return=D,D=A):(c(D,A),A=Gd(O,D.mode,J),A.return=D,D=A),w(D)):c(D,A)}return ft}var oo=Sm(!0),Tm=Sm(!1),pu=wr(null),mu=null,lo=null,Zh=null;function $h(){Zh=lo=mu=null}function qh(s){var o=pu.current;Ze(pu),s._currentValue=o}function Qh(s,o,c){for(;s!==null;){var d=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),s===c)break;s=s.return}}function ao(s,o){mu=s,Zh=lo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&o&&(rn=!0),s.firstContext=null)}function zn(s){var o=s._currentValue;if(Zh!==s)if(s={context:s,memoizedValue:o,next:null},lo===null){if(mu===null)throw Error(t(308));lo=s,mu.dependencies={lanes:0,firstContext:s}}else lo=lo.next=s;return o}var ps=null;function Jh(s){ps===null?ps=[s]:ps.push(s)}function Rm(s,o,c,d){var p=o.interleaved;return p===null?(c.next=c,Jh(o)):(c.next=p.next,p.next=c),o.interleaved=c,Ui(s,d)}function Ui(s,o){s.lanes|=o;var c=s.alternate;for(c!==null&&(c.lanes|=o),c=s,s=s.return;s!==null;)s.childLanes|=o,c=s.alternate,c!==null&&(c.childLanes|=o),c=s,s=s.return;return c.tag===3?c.stateNode:null}var Sr=!1;function ed(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Im(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Vi(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function Tr(s,o,c){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,Ne&2){var p=d.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),d.pending=o,Ui(s,c)}return p=d.interleaved,p===null?(o.next=o,Jh(d)):(o.next=p.next,p.next=o),d.interleaved=o,Ui(s,c)}function _u(s,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var d=o.lanes;d&=s.pendingLanes,c|=d,o.lanes=c,gh(s,c)}}function Pm(s,o){var c=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var p=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var w={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};y===null?p=y=w:y=y.next=w,c=c.next}while(c!==null);y===null?p=y=o:y=y.next=o}else p=y=o;c={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,effects:d.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=o:s.next=o,c.lastBaseUpdate=o}function yu(s,o,c,d){var p=s.updateQueue;Sr=!1;var y=p.firstBaseUpdate,w=p.lastBaseUpdate,P=p.shared.pending;if(P!==null){p.shared.pending=null;var M=P,b=M.next;M.next=null,w===null?y=b:w.next=b,w=M;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,P=Z.lastBaseUpdate,P!==w&&(P===null?Z.firstBaseUpdate=b:P.next=b,Z.lastBaseUpdate=M))}if(y!==null){var q=p.baseState;w=0,Z=b=M=null,P=y;do{var H=P.lane,oe=P.eventTime;if((d&H)===H){Z!==null&&(Z=Z.next={eventTime:oe,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var he=s,de=P;switch(H=o,oe=c,de.tag){case 1:if(he=de.payload,typeof he=="function"){q=he.call(oe,q,H);break e}q=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=de.payload,H=typeof he=="function"?he.call(oe,q,H):he,H==null)break e;q=B({},q,H);break e;case 2:Sr=!0}}P.callback!==null&&P.lane!==0&&(s.flags|=64,H=p.effects,H===null?p.effects=[P]:H.push(P))}else oe={eventTime:oe,lane:H,tag:P.tag,payload:P.payload,callback:P.callback,next:null},Z===null?(b=Z=oe,M=q):Z=Z.next=oe,w|=H;if(P=P.next,P===null){if(P=p.shared.pending,P===null)break;H=P,P=H.next,H.next=null,p.lastBaseUpdate=H,p.shared.pending=null}}while(!0);if(Z===null&&(M=q),p.baseState=M,p.firstBaseUpdate=b,p.lastBaseUpdate=Z,o=p.shared.interleaved,o!==null){p=o;do w|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);ys|=w,s.lanes=w,s.memoizedState=q}}function Lm(s,o,c){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var d=s[o],p=d.callback;if(p!==null){if(d.callback=null,d=c,typeof p!="function")throw Error(t(191,p));p.call(d)}}}var Tl={},wi=wr(Tl),Rl=wr(Tl),Il=wr(Tl);function ms(s){if(s===Tl)throw Error(t(174));return s}function td(s,o){switch(Ke(Il,o),Ke(Rl,s),Ke(wi,Tl),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ss(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=ss(o,s)}Ze(wi),Ke(wi,o)}function uo(){Ze(wi),Ze(Rl),Ze(Il)}function km(s){ms(Il.current);var o=ms(wi.current),c=ss(o,s.type);o!==c&&(Ke(Rl,s),Ke(wi,c))}function nd(s){Rl.current===s&&(Ze(wi),Ze(Rl))}var tt=wr(0);function vu(s){for(var o=s;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var id=[];function rd(){for(var s=0;s<id.length;s++)id[s]._workInProgressVersionPrimary=null;id.length=0}var xu=L.ReactCurrentDispatcher,sd=L.ReactCurrentBatchConfig,_s=0,nt=null,_t=null,Et=null,wu=!1,Pl=!1,Ll=0,Nx=0;function zt(){throw Error(t(321))}function od(s,o){if(o===null)return!1;for(var c=0;c<o.length&&c<s.length;c++)if(!$n(s[c],o[c]))return!1;return!0}function ld(s,o,c,d,p,y){if(_s=y,nt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,xu.current=s===null||s.memoizedState===null?jx:Wx,s=c(d,p),Pl){y=0;do{if(Pl=!1,Ll=0,25<=y)throw Error(t(301));y+=1,Et=_t=null,o.updateQueue=null,xu.current=Ux,s=c(d,p)}while(Pl)}if(xu.current=Su,o=_t!==null&&_t.next!==null,_s=0,Et=_t=nt=null,wu=!1,o)throw Error(t(300));return s}function ad(){var s=Ll!==0;return Ll=0,s}function Ei(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?nt.memoizedState=Et=s:Et=Et.next=s,Et}function bn(){if(_t===null){var s=nt.alternate;s=s!==null?s.memoizedState:null}else s=_t.next;var o=Et===null?nt.memoizedState:Et.next;if(o!==null)Et=o,_t=s;else{if(s===null)throw Error(t(310));_t=s,s={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Et===null?nt.memoizedState=Et=s:Et=Et.next=s}return Et}function kl(s,o){return typeof o=="function"?o(s):o}function ud(s){var o=bn(),c=o.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var d=_t,p=d.baseQueue,y=c.pending;if(y!==null){if(p!==null){var w=p.next;p.next=y.next,y.next=w}d.baseQueue=p=y,c.pending=null}if(p!==null){y=p.next,d=d.baseState;var P=w=null,M=null,b=y;do{var Z=b.lane;if((_s&Z)===Z)M!==null&&(M=M.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),d=b.hasEagerState?b.eagerState:s(d,b.action);else{var q={lane:Z,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};M===null?(P=M=q,w=d):M=M.next=q,nt.lanes|=Z,ys|=Z}b=b.next}while(b!==null&&b!==y);M===null?w=d:M.next=P,$n(d,o.memoizedState)||(rn=!0),o.memoizedState=d,o.baseState=w,o.baseQueue=M,c.lastRenderedState=d}if(s=c.interleaved,s!==null){p=s;do y=p.lane,nt.lanes|=y,ys|=y,p=p.next;while(p!==s)}else p===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function cd(s){var o=bn(),c=o.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var d=c.dispatch,p=c.pending,y=o.memoizedState;if(p!==null){c.pending=null;var w=p=p.next;do y=s(y,w.action),w=w.next;while(w!==p);$n(y,o.memoizedState)||(rn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),c.lastRenderedState=y}return[y,d]}function Fm(){}function Mm(s,o){var c=nt,d=bn(),p=o(),y=!$n(d.memoizedState,p);if(y&&(d.memoizedState=p,rn=!0),d=d.queue,hd(Om.bind(null,c,d,s),[s]),d.getSnapshot!==o||y||Et!==null&&Et.memoizedState.tag&1){if(c.flags|=2048,Fl(9,Dm.bind(null,c,d,p,o),void 0,null),Ct===null)throw Error(t(349));_s&30||Am(c,o,p)}return p}function Am(s,o,c){s.flags|=16384,s={getSnapshot:o,value:c},o=nt.updateQueue,o===null?(o={lastEffect:null,stores:null},nt.updateQueue=o,o.stores=[s]):(c=o.stores,c===null?o.stores=[s]:c.push(s))}function Dm(s,o,c,d){o.value=c,o.getSnapshot=d,Nm(o)&&zm(s)}function Om(s,o,c){return c(function(){Nm(o)&&zm(s)})}function Nm(s){var o=s.getSnapshot;s=s.value;try{var c=o();return!$n(s,c)}catch{return!0}}function zm(s){var o=Ui(s,1);o!==null&&ti(o,s,1,-1)}function bm(s){var o=Ei();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:s},o.queue=s,s=s.dispatch=Gx.bind(null,nt,s),[o.memoizedState,s]}function Fl(s,o,c,d){return s={tag:s,create:o,destroy:c,deps:d,next:null},o=nt.updateQueue,o===null?(o={lastEffect:null,stores:null},nt.updateQueue=o,o.lastEffect=s.next=s):(c=o.lastEffect,c===null?o.lastEffect=s.next=s:(d=c.next,c.next=s,s.next=d,o.lastEffect=s)),s}function Gm(){return bn().memoizedState}function Eu(s,o,c,d){var p=Ei();nt.flags|=s,p.memoizedState=Fl(1|o,c,void 0,d===void 0?null:d)}function Cu(s,o,c,d){var p=bn();d=d===void 0?null:d;var y=void 0;if(_t!==null){var w=_t.memoizedState;if(y=w.destroy,d!==null&&od(d,w.deps)){p.memoizedState=Fl(o,c,y,d);return}}nt.flags|=s,p.memoizedState=Fl(1|o,c,y,d)}function jm(s,o){return Eu(8390656,8,s,o)}function hd(s,o){return Cu(2048,8,s,o)}function Wm(s,o){return Cu(4,2,s,o)}function Um(s,o){return Cu(4,4,s,o)}function Vm(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Bm(s,o,c){return c=c!=null?c.concat([s]):null,Cu(4,4,Vm.bind(null,o,s),c)}function dd(){}function Xm(s,o){var c=bn();o=o===void 0?null:o;var d=c.memoizedState;return d!==null&&o!==null&&od(o,d[1])?d[0]:(c.memoizedState=[s,o],s)}function Ym(s,o){var c=bn();o=o===void 0?null:o;var d=c.memoizedState;return d!==null&&o!==null&&od(o,d[1])?d[0]:(s=s(),c.memoizedState=[s,o],s)}function Km(s,o,c){return _s&21?($n(c,o)||(c=Cp(),nt.lanes|=c,ys|=c,s.baseState=!0),o):(s.baseState&&(s.baseState=!1,rn=!0),s.memoizedState=c)}function zx(s,o){var c=Ue;Ue=c!==0&&4>c?c:4,s(!0);var d=sd.transition;sd.transition={};try{s(!1),o()}finally{Ue=c,sd.transition=d}}function Hm(){return bn().memoizedState}function bx(s,o,c){var d=Lr(s);if(c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null},Zm(s))$m(o,c);else if(c=Rm(s,o,c,d),c!==null){var p=Zt();ti(c,s,d,p),qm(c,o,d)}}function Gx(s,o,c){var d=Lr(s),p={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(Zm(s))$m(o,p);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var w=o.lastRenderedState,P=y(w,c);if(p.hasEagerState=!0,p.eagerState=P,$n(P,w)){var M=o.interleaved;M===null?(p.next=p,Jh(o)):(p.next=M.next,M.next=p),o.interleaved=p;return}}catch{}finally{}c=Rm(s,o,p,d),c!==null&&(p=Zt(),ti(c,s,d,p),qm(c,o,d))}}function Zm(s){var o=s.alternate;return s===nt||o!==null&&o===nt}function $m(s,o){Pl=wu=!0;var c=s.pending;c===null?o.next=o:(o.next=c.next,c.next=o),s.pending=o}function qm(s,o,c){if(c&4194240){var d=o.lanes;d&=s.pendingLanes,c|=d,o.lanes=c,gh(s,c)}}var Su={readContext:zn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},jx={readContext:zn,useCallback:function(s,o){return Ei().memoizedState=[s,o===void 0?null:o],s},useContext:zn,useEffect:jm,useImperativeHandle:function(s,o,c){return c=c!=null?c.concat([s]):null,Eu(4194308,4,Vm.bind(null,o,s),c)},useLayoutEffect:function(s,o){return Eu(4194308,4,s,o)},useInsertionEffect:function(s,o){return Eu(4,2,s,o)},useMemo:function(s,o){var c=Ei();return o=o===void 0?null:o,s=s(),c.memoizedState=[s,o],s},useReducer:function(s,o,c){var d=Ei();return o=c!==void 0?c(o):o,d.memoizedState=d.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},d.queue=s,s=s.dispatch=bx.bind(null,nt,s),[d.memoizedState,s]},useRef:function(s){var o=Ei();return s={current:s},o.memoizedState=s},useState:bm,useDebugValue:dd,useDeferredValue:function(s){return Ei().memoizedState=s},useTransition:function(){var s=bm(!1),o=s[0];return s=zx.bind(null,s[1]),Ei().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,c){var d=nt,p=Ei();if(et){if(c===void 0)throw Error(t(407));c=c()}else{if(c=o(),Ct===null)throw Error(t(349));_s&30||Am(d,o,c)}p.memoizedState=c;var y={value:c,getSnapshot:o};return p.queue=y,jm(Om.bind(null,d,y,s),[s]),d.flags|=2048,Fl(9,Dm.bind(null,d,y,c,o),void 0,null),c},useId:function(){var s=Ei(),o=Ct.identifierPrefix;if(et){var c=Wi,d=ji;c=(d&~(1<<32-Zn(d)-1)).toString(32)+c,o=":"+o+"R"+c,c=Ll++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=Nx++,o=":"+o+"r"+c.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},Wx={readContext:zn,useCallback:Xm,useContext:zn,useEffect:hd,useImperativeHandle:Bm,useInsertionEffect:Wm,useLayoutEffect:Um,useMemo:Ym,useReducer:ud,useRef:Gm,useState:function(){return ud(kl)},useDebugValue:dd,useDeferredValue:function(s){var o=bn();return Km(o,_t.memoizedState,s)},useTransition:function(){var s=ud(kl)[0],o=bn().memoizedState;return[s,o]},useMutableSource:Fm,useSyncExternalStore:Mm,useId:Hm,unstable_isNewReconciler:!1},Ux={readContext:zn,useCallback:Xm,useContext:zn,useEffect:hd,useImperativeHandle:Bm,useInsertionEffect:Wm,useLayoutEffect:Um,useMemo:Ym,useReducer:cd,useRef:Gm,useState:function(){return cd(kl)},useDebugValue:dd,useDeferredValue:function(s){var o=bn();return _t===null?o.memoizedState=s:Km(o,_t.memoizedState,s)},useTransition:function(){var s=cd(kl)[0],o=bn().memoizedState;return[s,o]},useMutableSource:Fm,useSyncExternalStore:Mm,useId:Hm,unstable_isNewReconciler:!1};function Qn(s,o){if(s&&s.defaultProps){o=B({},o),s=s.defaultProps;for(var c in s)o[c]===void 0&&(o[c]=s[c]);return o}return o}function fd(s,o,c,d){o=s.memoizedState,c=c(d,o),c=c==null?o:B({},o,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Tu={isMounted:function(s){return(s=s._reactInternals)?cs(s)===s:!1},enqueueSetState:function(s,o,c){s=s._reactInternals;var d=Zt(),p=Lr(s),y=Vi(d,p);y.payload=o,c!=null&&(y.callback=c),o=Tr(s,y,p),o!==null&&(ti(o,s,p,d),_u(o,s,p))},enqueueReplaceState:function(s,o,c){s=s._reactInternals;var d=Zt(),p=Lr(s),y=Vi(d,p);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=Tr(s,y,p),o!==null&&(ti(o,s,p,d),_u(o,s,p))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var c=Zt(),d=Lr(s),p=Vi(c,d);p.tag=2,o!=null&&(p.callback=o),o=Tr(s,p,d),o!==null&&(ti(o,s,d,c),_u(o,s,d))}};function Qm(s,o,c,d,p,y,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,y,w):o.prototype&&o.prototype.isPureReactComponent?!_l(c,d)||!_l(p,y):!0}function Jm(s,o,c){var d=!1,p=Er,y=o.contextType;return typeof y=="object"&&y!==null?y=zn(y):(p=nn(o)?ds:Nt.current,d=o.contextTypes,y=(d=d!=null)?no(s,p):Er),o=new o(c,y),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Tu,s.stateNode=o,o._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=p,s.__reactInternalMemoizedMaskedChildContext=y),o}function e_(s,o,c,d){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==s&&Tu.enqueueReplaceState(o,o.state,null)}function gd(s,o,c,d){var p=s.stateNode;p.props=c,p.state=s.memoizedState,p.refs={},ed(s);var y=o.contextType;typeof y=="object"&&y!==null?p.context=zn(y):(y=nn(o)?ds:Nt.current,p.context=no(s,y)),p.state=s.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(fd(s,o,y,c),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Tu.enqueueReplaceState(p,p.state,null),yu(s,c,p,d),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308)}function co(s,o){try{var c="",d=o;do c+=we(d),d=d.return;while(d);var p=c}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:s,source:o,stack:p,digest:null}}function pd(s,o,c){return{value:s,source:null,stack:c??null,digest:o??null}}function md(s,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var Vx=typeof WeakMap=="function"?WeakMap:Map;function t_(s,o,c){c=Vi(-1,c),c.tag=3,c.payload={element:null};var d=o.value;return c.callback=function(){Mu||(Mu=!0,Fd=d),md(s,o)},c}function n_(s,o,c){c=Vi(-1,c),c.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var p=o.value;c.payload=function(){return d(p)},c.callback=function(){md(s,o)}}var y=s.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(c.callback=function(){md(s,o),typeof d!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})}),c}function i_(s,o,c){var d=s.pingCache;if(d===null){d=s.pingCache=new Vx;var p=new Set;d.set(o,p)}else p=d.get(o),p===void 0&&(p=new Set,d.set(o,p));p.has(c)||(p.add(c),s=iw.bind(null,s,o,c),o.then(s,s))}function r_(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function s_(s,o,c,d,p){return s.mode&1?(s.flags|=65536,s.lanes=p,s):(s===o?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=Vi(-1,1),o.tag=2,Tr(c,o,1))),c.lanes|=1),s)}var Bx=L.ReactCurrentOwner,rn=!1;function Ht(s,o,c,d){o.child=s===null?Tm(o,null,c,d):oo(o,s.child,c,d)}function o_(s,o,c,d,p){c=c.render;var y=o.ref;return ao(o,p),d=ld(s,o,c,d,y,p),c=ad(),s!==null&&!rn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~p,Bi(s,o,p)):(et&&c&&Bh(o),o.flags|=1,Ht(s,o,d,p),o.child)}function l_(s,o,c,d,p){if(s===null){var y=c.type;return typeof y=="function"&&!bd(y)&&y.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=y,a_(s,o,y,d,p)):(s=bu(c.type,null,d,o,o.mode,p),s.ref=o.ref,s.return=o,o.child=s)}if(y=s.child,!(s.lanes&p)){var w=y.memoizedProps;if(c=c.compare,c=c!==null?c:_l,c(w,d)&&s.ref===o.ref)return Bi(s,o,p)}return o.flags|=1,s=Fr(y,d),s.ref=o.ref,s.return=o,o.child=s}function a_(s,o,c,d,p){if(s!==null){var y=s.memoizedProps;if(_l(y,d)&&s.ref===o.ref)if(rn=!1,o.pendingProps=d=y,(s.lanes&p)!==0)s.flags&131072&&(rn=!0);else return o.lanes=s.lanes,Bi(s,o,p)}return _d(s,o,c,d,p)}function u_(s,o,c){var d=o.pendingProps,p=d.children,y=s!==null?s.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(fo,wn),wn|=c;else{if(!(c&1073741824))return s=y!==null?y.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,Ke(fo,wn),wn|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:c,Ke(fo,wn),wn|=d}else y!==null?(d=y.baseLanes|c,o.memoizedState=null):d=c,Ke(fo,wn),wn|=d;return Ht(s,o,p,c),o.child}function c_(s,o){var c=o.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function _d(s,o,c,d,p){var y=nn(c)?ds:Nt.current;return y=no(o,y),ao(o,p),c=ld(s,o,c,d,y,p),d=ad(),s!==null&&!rn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~p,Bi(s,o,p)):(et&&d&&Bh(o),o.flags|=1,Ht(s,o,c,p),o.child)}function h_(s,o,c,d,p){if(nn(c)){var y=!0;uu(o)}else y=!1;if(ao(o,p),o.stateNode===null)Iu(s,o),Jm(o,c,d),gd(o,c,d,p),d=!0;else if(s===null){var w=o.stateNode,P=o.memoizedProps;w.props=P;var M=w.context,b=c.contextType;typeof b=="object"&&b!==null?b=zn(b):(b=nn(c)?ds:Nt.current,b=no(o,b));var Z=c.getDerivedStateFromProps,q=typeof Z=="function"||typeof w.getSnapshotBeforeUpdate=="function";q||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==d||M!==b)&&e_(o,w,d,b),Sr=!1;var H=o.memoizedState;w.state=H,yu(o,d,w,p),M=o.memoizedState,P!==d||H!==M||tn.current||Sr?(typeof Z=="function"&&(fd(o,c,Z,d),M=o.memoizedState),(P=Sr||Qm(o,c,P,d,H,M,b))?(q||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=M),w.props=d,w.state=M,w.context=b,d=P):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{w=o.stateNode,Im(s,o),P=o.memoizedProps,b=o.type===o.elementType?P:Qn(o.type,P),w.props=b,q=o.pendingProps,H=w.context,M=c.contextType,typeof M=="object"&&M!==null?M=zn(M):(M=nn(c)?ds:Nt.current,M=no(o,M));var oe=c.getDerivedStateFromProps;(Z=typeof oe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==q||H!==M)&&e_(o,w,d,M),Sr=!1,H=o.memoizedState,w.state=H,yu(o,d,w,p);var he=o.memoizedState;P!==q||H!==he||tn.current||Sr?(typeof oe=="function"&&(fd(o,c,oe,d),he=o.memoizedState),(b=Sr||Qm(o,c,b,d,H,he,M)||!1)?(Z||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,he,M),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,he,M)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||P===s.memoizedProps&&H===s.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&H===s.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=he),w.props=d,w.state=he,w.context=M,d=b):(typeof w.componentDidUpdate!="function"||P===s.memoizedProps&&H===s.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&H===s.memoizedState||(o.flags|=1024),d=!1)}return yd(s,o,c,d,y,p)}function yd(s,o,c,d,p,y){c_(s,o);var w=(o.flags&128)!==0;if(!d&&!w)return p&&mm(o,c,!1),Bi(s,o,y);d=o.stateNode,Bx.current=o;var P=w&&typeof c.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,s!==null&&w?(o.child=oo(o,s.child,null,y),o.child=oo(o,null,P,y)):Ht(s,o,P,y),o.memoizedState=d.state,p&&mm(o,c,!0),o.child}function d_(s){var o=s.stateNode;o.pendingContext?gm(s,o.pendingContext,o.pendingContext!==o.context):o.context&&gm(s,o.context,!1),td(s,o.containerInfo)}function f_(s,o,c,d,p){return so(),Hh(p),o.flags|=256,Ht(s,o,c,d),o.child}var vd={dehydrated:null,treeContext:null,retryLane:0};function xd(s){return{baseLanes:s,cachePool:null,transitions:null}}function g_(s,o,c){var d=o.pendingProps,p=tt.current,y=!1,w=(o.flags&128)!==0,P;if((P=w)||(P=s!==null&&s.memoizedState===null?!1:(p&2)!==0),P?(y=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(p|=1),Ke(tt,p&1),s===null)return Kh(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(o.mode&1?s.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(w=d.children,s=d.fallback,y?(d=o.mode,y=o.child,w={mode:"hidden",children:w},!(d&1)&&y!==null?(y.childLanes=0,y.pendingProps=w):y=Gu(w,d,0,null),s=Es(s,d,c,null),y.return=o,s.return=o,y.sibling=s,o.child=y,o.child.memoizedState=xd(c),o.memoizedState=vd,s):wd(o,w));if(p=s.memoizedState,p!==null&&(P=p.dehydrated,P!==null))return Xx(s,o,w,d,P,p,c);if(y){y=d.fallback,w=o.mode,p=s.child,P=p.sibling;var M={mode:"hidden",children:d.children};return!(w&1)&&o.child!==p?(d=o.child,d.childLanes=0,d.pendingProps=M,o.deletions=null):(d=Fr(p,M),d.subtreeFlags=p.subtreeFlags&14680064),P!==null?y=Fr(P,y):(y=Es(y,w,c,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,w=s.child.memoizedState,w=w===null?xd(c):{baseLanes:w.baseLanes|c,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=s.childLanes&~c,o.memoizedState=vd,d}return y=s.child,s=y.sibling,d=Fr(y,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=c),d.return=o,d.sibling=null,s!==null&&(c=o.deletions,c===null?(o.deletions=[s],o.flags|=16):c.push(s)),o.child=d,o.memoizedState=null,d}function wd(s,o){return o=Gu({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function Ru(s,o,c,d){return d!==null&&Hh(d),oo(o,s.child,null,c),s=wd(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function Xx(s,o,c,d,p,y,w){if(c)return o.flags&256?(o.flags&=-257,d=pd(Error(t(422))),Ru(s,o,w,d)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(y=d.fallback,p=o.mode,d=Gu({mode:"visible",children:d.children},p,0,null),y=Es(y,p,w,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,o.mode&1&&oo(o,s.child,null,w),o.child.memoizedState=xd(w),o.memoizedState=vd,y);if(!(o.mode&1))return Ru(s,o,w,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var P=d.dgst;return d=P,y=Error(t(419)),d=pd(y,d,void 0),Ru(s,o,w,d)}if(P=(w&s.childLanes)!==0,rn||P){if(d=Ct,d!==null){switch(w&-w){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(d.suspendedLanes|w)?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Ui(s,p),ti(d,s,p,-1))}return zd(),d=pd(Error(t(421))),Ru(s,o,w,d)}return p.data==="$?"?(o.flags|=128,o.child=s.child,o=rw.bind(null,s),p._reactRetry=o,null):(s=y.treeContext,xn=xr(p.nextSibling),vn=o,et=!0,qn=null,s!==null&&(On[Nn++]=ji,On[Nn++]=Wi,On[Nn++]=fs,ji=s.id,Wi=s.overflow,fs=o),o=wd(o,d.children),o.flags|=4096,o)}function p_(s,o,c){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o),Qh(s.return,o,c)}function Ed(s,o,c,d,p){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=c,y.tailMode=p)}function m_(s,o,c){var d=o.pendingProps,p=d.revealOrder,y=d.tail;if(Ht(s,o,d.children,c),d=tt.current,d&2)d=d&1|2,o.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&p_(s,c,o);else if(s.tag===19)p_(s,c,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(Ke(tt,d),!(o.mode&1))o.memoizedState=null;else switch(p){case"forwards":for(c=o.child,p=null;c!==null;)s=c.alternate,s!==null&&vu(s)===null&&(p=c),c=c.sibling;c=p,c===null?(p=o.child,o.child=null):(p=c.sibling,c.sibling=null),Ed(o,!1,p,c,y);break;case"backwards":for(c=null,p=o.child,o.child=null;p!==null;){if(s=p.alternate,s!==null&&vu(s)===null){o.child=p;break}s=p.sibling,p.sibling=c,c=p,p=s}Ed(o,!0,c,null,y);break;case"together":Ed(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Iu(s,o){!(o.mode&1)&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function Bi(s,o,c){if(s!==null&&(o.dependencies=s.dependencies),ys|=o.lanes,!(c&o.childLanes))return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,c=Fr(s,s.pendingProps),o.child=c,c.return=o;s.sibling!==null;)s=s.sibling,c=c.sibling=Fr(s,s.pendingProps),c.return=o;c.sibling=null}return o.child}function Yx(s,o,c){switch(o.tag){case 3:d_(o),so();break;case 5:km(o);break;case 1:nn(o.type)&&uu(o);break;case 4:td(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,p=o.memoizedProps.value;Ke(pu,d._currentValue),d._currentValue=p;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(Ke(tt,tt.current&1),o.flags|=128,null):c&o.child.childLanes?g_(s,o,c):(Ke(tt,tt.current&1),s=Bi(s,o,c),s!==null?s.sibling:null);Ke(tt,tt.current&1);break;case 19:if(d=(c&o.childLanes)!==0,s.flags&128){if(d)return m_(s,o,c);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ke(tt,tt.current),d)break;return null;case 22:case 23:return o.lanes=0,u_(s,o,c)}return Bi(s,o,c)}var __,Cd,y_,v_;__=function(s,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Cd=function(){},y_=function(s,o,c,d){var p=s.memoizedProps;if(p!==d){s=o.stateNode,ms(wi.current);var y=null;switch(c){case"input":p=rs(s,p),d=rs(s,d),y=[];break;case"select":p=B({},p,{value:void 0}),d=B({},d,{value:void 0}),y=[];break;case"textarea":p=Hn(s,p),d=Hn(s,d),y=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=ou)}Vs(c,d);var w;c=null;for(b in p)if(!d.hasOwnProperty(b)&&p.hasOwnProperty(b)&&p[b]!=null)if(b==="style"){var P=p[b];for(w in P)P.hasOwnProperty(w)&&(c||(c={}),c[w]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(i.hasOwnProperty(b)?y||(y=[]):(y=y||[]).push(b,null));for(b in d){var M=d[b];if(P=p!=null?p[b]:void 0,d.hasOwnProperty(b)&&M!==P&&(M!=null||P!=null))if(b==="style")if(P){for(w in P)!P.hasOwnProperty(w)||M&&M.hasOwnProperty(w)||(c||(c={}),c[w]="");for(w in M)M.hasOwnProperty(w)&&P[w]!==M[w]&&(c||(c={}),c[w]=M[w])}else c||(y||(y=[]),y.push(b,c)),c=M;else b==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,P=P?P.__html:void 0,M!=null&&P!==M&&(y=y||[]).push(b,M)):b==="children"?typeof M!="string"&&typeof M!="number"||(y=y||[]).push(b,""+M):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(i.hasOwnProperty(b)?(M!=null&&b==="onScroll"&&He("scroll",s),y||P===M||(y=[])):(y=y||[]).push(b,M))}c&&(y=y||[]).push("style",c);var b=y;(o.updateQueue=b)&&(o.flags|=4)}},v_=function(s,o,c,d){c!==d&&(o.flags|=4)};function Ml(s,o){if(!et)switch(s.tailMode){case"hidden":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function bt(s){var o=s.alternate!==null&&s.alternate.child===s.child,c=0,d=0;if(o)for(var p=s.child;p!==null;)c|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)c|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=d,s.childLanes=c,o}function Kx(s,o,c){var d=o.pendingProps;switch(Xh(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(o),null;case 1:return nn(o.type)&&au(),bt(o),null;case 3:return d=o.stateNode,uo(),Ze(tn),Ze(Nt),rd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(fu(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,qn!==null&&(Dd(qn),qn=null))),Cd(s,o),bt(o),null;case 5:nd(o);var p=ms(Il.current);if(c=o.type,s!==null&&o.stateNode!=null)y_(s,o,c,d,p),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return bt(o),null}if(s=ms(wi.current),fu(o)){d=o.stateNode,c=o.type;var y=o.memoizedProps;switch(d[xi]=o,d[El]=y,s=(o.mode&1)!==0,c){case"dialog":He("cancel",d),He("close",d);break;case"iframe":case"object":case"embed":He("load",d);break;case"video":case"audio":for(p=0;p<vl.length;p++)He(vl[p],d);break;case"source":He("error",d);break;case"img":case"image":case"link":He("error",d),He("load",d);break;case"details":He("toggle",d);break;case"input":hr(d,y),He("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},He("invalid",d);break;case"textarea":Oi(d,y),He("invalid",d)}Vs(c,y),p=null;for(var w in y)if(y.hasOwnProperty(w)){var P=y[w];w==="children"?typeof P=="string"?d.textContent!==P&&(y.suppressHydrationWarning!==!0&&su(d.textContent,P,s),p=["children",P]):typeof P=="number"&&d.textContent!==""+P&&(y.suppressHydrationWarning!==!0&&su(d.textContent,P,s),p=["children",""+P]):i.hasOwnProperty(w)&&P!=null&&w==="onScroll"&&He("scroll",d)}switch(c){case"input":gn(d),pn(d,y,!0);break;case"textarea":gn(d),ct(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=ou)}d=p,o.updateQueue=d,d!==null&&(o.flags|=4)}else{w=p.nodeType===9?p:p.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Ws(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=w.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=w.createElement(c,{is:d.is}):(s=w.createElement(c),c==="select"&&(w=s,d.multiple?w.multiple=!0:d.size&&(w.size=d.size))):s=w.createElementNS(s,c),s[xi]=o,s[El]=d,__(s,o,!1,!1),o.stateNode=s;e:{switch(w=Bs(c,d),c){case"dialog":He("cancel",s),He("close",s),p=d;break;case"iframe":case"object":case"embed":He("load",s),p=d;break;case"video":case"audio":for(p=0;p<vl.length;p++)He(vl[p],s);p=d;break;case"source":He("error",s),p=d;break;case"img":case"image":case"link":He("error",s),He("load",s),p=d;break;case"details":He("toggle",s),p=d;break;case"input":hr(s,d),p=rs(s,d),He("invalid",s);break;case"option":p=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},p=B({},d,{value:void 0}),He("invalid",s);break;case"textarea":Oi(s,d),p=Hn(s,d),He("invalid",s);break;default:p=d}Vs(c,p),P=p;for(y in P)if(P.hasOwnProperty(y)){var M=P[y];y==="style"?ja(s,M):y==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&os(s,M)):y==="children"?typeof M=="string"?(c!=="textarea"||M!=="")&&ls(s,M):typeof M=="number"&&ls(s,""+M):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(i.hasOwnProperty(y)?M!=null&&y==="onScroll"&&He("scroll",s):M!=null&&I(s,y,M,w))}switch(c){case"input":gn(s),pn(s,d,!1);break;case"textarea":gn(s),ct(s);break;case"option":d.value!=null&&s.setAttribute("value",""+Pe(d.value));break;case"select":s.multiple=!!d.multiple,y=d.value,y!=null?Mn(s,!!d.multiple,y,!1):d.defaultValue!=null&&Mn(s,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(s.onclick=ou)}switch(c){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return bt(o),null;case 6:if(s&&o.stateNode!=null)v_(s,o,s.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(c=ms(Il.current),ms(wi.current),fu(o)){if(d=o.stateNode,c=o.memoizedProps,d[xi]=o,(y=d.nodeValue!==c)&&(s=vn,s!==null))switch(s.tag){case 3:su(d.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&su(d.nodeValue,c,(s.mode&1)!==0)}y&&(o.flags|=4)}else d=(c.nodeType===9?c:c.ownerDocument).createTextNode(d),d[xi]=o,o.stateNode=d}return bt(o),null;case 13:if(Ze(tt),d=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(et&&xn!==null&&o.mode&1&&!(o.flags&128))Em(),so(),o.flags|=98560,y=!1;else if(y=fu(o),d!==null&&d.dehydrated!==null){if(s===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[xi]=o}else so(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;bt(o),y=!1}else qn!==null&&(Dd(qn),qn=null),y=!0;if(!y)return o.flags&65536?o:null}return o.flags&128?(o.lanes=c,o):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(o.child.flags|=8192,o.mode&1&&(s===null||tt.current&1?yt===0&&(yt=3):zd())),o.updateQueue!==null&&(o.flags|=4),bt(o),null);case 4:return uo(),Cd(s,o),s===null&&xl(o.stateNode.containerInfo),bt(o),null;case 10:return qh(o.type._context),bt(o),null;case 17:return nn(o.type)&&au(),bt(o),null;case 19:if(Ze(tt),y=o.memoizedState,y===null)return bt(o),null;if(d=(o.flags&128)!==0,w=y.rendering,w===null)if(d)Ml(y,!1);else{if(yt!==0||s!==null&&s.flags&128)for(s=o.child;s!==null;){if(w=vu(s),w!==null){for(o.flags|=128,Ml(y,!1),d=w.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=c,c=o.child;c!==null;)y=c,s=d,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=s,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,s=w.dependencies,y.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return Ke(tt,tt.current&1|2),o.child}s=s.sibling}y.tail!==null&&dt()>go&&(o.flags|=128,d=!0,Ml(y,!1),o.lanes=4194304)}else{if(!d)if(s=vu(w),s!==null){if(o.flags|=128,d=!0,c=s.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),Ml(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!et)return bt(o),null}else 2*dt()-y.renderingStartTime>go&&c!==1073741824&&(o.flags|=128,d=!0,Ml(y,!1),o.lanes=4194304);y.isBackwards?(w.sibling=o.child,o.child=w):(c=y.last,c!==null?c.sibling=w:o.child=w,y.last=w)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=dt(),o.sibling=null,c=tt.current,Ke(tt,d?c&1|2:c&1),o):(bt(o),null);case 22:case 23:return Nd(),d=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(o.flags|=8192),d&&o.mode&1?wn&1073741824&&(bt(o),o.subtreeFlags&6&&(o.flags|=8192)):bt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function Hx(s,o){switch(Xh(o),o.tag){case 1:return nn(o.type)&&au(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return uo(),Ze(tn),Ze(Nt),rd(),s=o.flags,s&65536&&!(s&128)?(o.flags=s&-65537|128,o):null;case 5:return nd(o),null;case 13:if(Ze(tt),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));so()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return Ze(tt),null;case 4:return uo(),null;case 10:return qh(o.type._context),null;case 22:case 23:return Nd(),null;case 24:return null;default:return null}}var Pu=!1,Gt=!1,Zx=typeof WeakSet=="function"?WeakSet:Set,ue=null;function ho(s,o){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(d){ot(s,o,d)}else c.current=null}function Sd(s,o,c){try{c()}catch(d){ot(s,o,d)}}var x_=!1;function $x(s,o){if(Nh=Ha,s=Qp(),Ph(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var w=0,P=-1,M=-1,b=0,Z=0,q=s,H=null;t:for(;;){for(var oe;q!==c||p!==0&&q.nodeType!==3||(P=w+p),q!==y||d!==0&&q.nodeType!==3||(M=w+d),q.nodeType===3&&(w+=q.nodeValue.length),(oe=q.firstChild)!==null;)H=q,q=oe;for(;;){if(q===s)break t;if(H===c&&++b===p&&(P=w),H===y&&++Z===d&&(M=w),(oe=q.nextSibling)!==null)break;q=H,H=q.parentNode}q=oe}c=P===-1||M===-1?null:{start:P,end:M}}else c=null}c=c||{start:0,end:0}}else c=null;for(zh={focusedElem:s,selectionRange:c},Ha=!1,ue=o;ue!==null;)if(o=ue,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,ue=s;else for(;ue!==null;){o=ue;try{var he=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var de=he.memoizedProps,ft=he.memoizedState,D=o.stateNode,A=D.getSnapshotBeforeUpdate(o.elementType===o.type?de:Qn(o.type,de),ft);D.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var O=o.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(J){ot(o,o.return,J)}if(s=o.sibling,s!==null){s.return=o.return,ue=s;break}ue=o.return}return he=x_,x_=!1,he}function Al(s,o,c){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&s)===s){var y=p.destroy;p.destroy=void 0,y!==void 0&&Sd(o,c,y)}p=p.next}while(p!==d)}}function Lu(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&s)===s){var d=c.create;c.destroy=d()}c=c.next}while(c!==o)}}function Td(s){var o=s.ref;if(o!==null){var c=s.stateNode;switch(s.tag){case 5:s=c;break;default:s=c}typeof o=="function"?o(s):o.current=s}}function w_(s){var o=s.alternate;o!==null&&(s.alternate=null,w_(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[xi],delete o[El],delete o[Wh],delete o[Mx],delete o[Ax])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function E_(s){return s.tag===5||s.tag===3||s.tag===4}function C_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||E_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Rd(s,o,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(s,o):c.insertBefore(s,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(s,c)):(o=c,o.appendChild(s)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=ou));else if(d!==4&&(s=s.child,s!==null))for(Rd(s,o,c),s=s.sibling;s!==null;)Rd(s,o,c),s=s.sibling}function Id(s,o,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?c.insertBefore(s,o):c.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(Id(s,o,c),s=s.sibling;s!==null;)Id(s,o,c),s=s.sibling}var Lt=null,Jn=!1;function Rr(s,o,c){for(c=c.child;c!==null;)S_(s,o,c),c=c.sibling}function S_(s,o,c){if(vi&&typeof vi.onCommitFiberUnmount=="function")try{vi.onCommitFiberUnmount(Ua,c)}catch{}switch(c.tag){case 5:Gt||ho(c,o);case 6:var d=Lt,p=Jn;Lt=null,Rr(s,o,c),Lt=d,Jn=p,Lt!==null&&(Jn?(s=Lt,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):Lt.removeChild(c.stateNode));break;case 18:Lt!==null&&(Jn?(s=Lt,c=c.stateNode,s.nodeType===8?jh(s.parentNode,c):s.nodeType===1&&jh(s,c),hl(s)):jh(Lt,c.stateNode));break;case 4:d=Lt,p=Jn,Lt=c.stateNode.containerInfo,Jn=!0,Rr(s,o,c),Lt=d,Jn=p;break;case 0:case 11:case 14:case 15:if(!Gt&&(d=c.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var y=p,w=y.destroy;y=y.tag,w!==void 0&&(y&2||y&4)&&Sd(c,o,w),p=p.next}while(p!==d)}Rr(s,o,c);break;case 1:if(!Gt&&(ho(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(P){ot(c,o,P)}Rr(s,o,c);break;case 21:Rr(s,o,c);break;case 22:c.mode&1?(Gt=(d=Gt)||c.memoizedState!==null,Rr(s,o,c),Gt=d):Rr(s,o,c);break;default:Rr(s,o,c)}}function T_(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new Zx),o.forEach(function(d){var p=sw.bind(null,s,d);c.has(d)||(c.add(d),d.then(p,p))})}}function ei(s,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var p=c[d];try{var y=s,w=o,P=w;e:for(;P!==null;){switch(P.tag){case 5:Lt=P.stateNode,Jn=!1;break e;case 3:Lt=P.stateNode.containerInfo,Jn=!0;break e;case 4:Lt=P.stateNode.containerInfo,Jn=!0;break e}P=P.return}if(Lt===null)throw Error(t(160));S_(y,w,p),Lt=null,Jn=!1;var M=p.alternate;M!==null&&(M.return=null),p.return=null}catch(b){ot(p,o,b)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)R_(o,s),o=o.sibling}function R_(s,o){var c=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ei(o,s),Ci(s),d&4){try{Al(3,s,s.return),Lu(3,s)}catch(de){ot(s,s.return,de)}try{Al(5,s,s.return)}catch(de){ot(s,s.return,de)}}break;case 1:ei(o,s),Ci(s),d&512&&c!==null&&ho(c,c.return);break;case 5:if(ei(o,s),Ci(s),d&512&&c!==null&&ho(c,c.return),s.flags&32){var p=s.stateNode;try{ls(p,"")}catch(de){ot(s,s.return,de)}}if(d&4&&(p=s.stateNode,p!=null)){var y=s.memoizedProps,w=c!==null?c.memoizedProps:y,P=s.type,M=s.updateQueue;if(s.updateQueue=null,M!==null)try{P==="input"&&y.type==="radio"&&y.name!=null&&mi(p,y),Bs(P,w);var b=Bs(P,y);for(w=0;w<M.length;w+=2){var Z=M[w],q=M[w+1];Z==="style"?ja(p,q):Z==="dangerouslySetInnerHTML"?os(p,q):Z==="children"?ls(p,q):I(p,Z,q,b)}switch(P){case"input":Dt(p,y);break;case"textarea":Ni(p,y);break;case"select":var H=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var oe=y.value;oe!=null?Mn(p,!!y.multiple,oe,!1):H!==!!y.multiple&&(y.defaultValue!=null?Mn(p,!!y.multiple,y.defaultValue,!0):Mn(p,!!y.multiple,y.multiple?[]:"",!1))}p[El]=y}catch(de){ot(s,s.return,de)}}break;case 6:if(ei(o,s),Ci(s),d&4){if(s.stateNode===null)throw Error(t(162));p=s.stateNode,y=s.memoizedProps;try{p.nodeValue=y}catch(de){ot(s,s.return,de)}}break;case 3:if(ei(o,s),Ci(s),d&4&&c!==null&&c.memoizedState.isDehydrated)try{hl(o.containerInfo)}catch(de){ot(s,s.return,de)}break;case 4:ei(o,s),Ci(s);break;case 13:ei(o,s),Ci(s),p=s.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(kd=dt())),d&4&&T_(s);break;case 22:if(Z=c!==null&&c.memoizedState!==null,s.mode&1?(Gt=(b=Gt)||Z,ei(o,s),Gt=b):ei(o,s),Ci(s),d&8192){if(b=s.memoizedState!==null,(s.stateNode.isHidden=b)&&!Z&&s.mode&1)for(ue=s,Z=s.child;Z!==null;){for(q=ue=Z;ue!==null;){switch(H=ue,oe=H.child,H.tag){case 0:case 11:case 14:case 15:Al(4,H,H.return);break;case 1:ho(H,H.return);var he=H.stateNode;if(typeof he.componentWillUnmount=="function"){d=H,c=H.return;try{o=d,he.props=o.memoizedProps,he.state=o.memoizedState,he.componentWillUnmount()}catch(de){ot(d,c,de)}}break;case 5:ho(H,H.return);break;case 22:if(H.memoizedState!==null){L_(q);continue}}oe!==null?(oe.return=H,ue=oe):L_(q)}Z=Z.sibling}e:for(Z=null,q=s;;){if(q.tag===5){if(Z===null){Z=q;try{p=q.stateNode,b?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(P=q.stateNode,M=q.memoizedProps.style,w=M!=null&&M.hasOwnProperty("display")?M.display:null,P.style.display=Us("display",w))}catch(de){ot(s,s.return,de)}}}else if(q.tag===6){if(Z===null)try{q.stateNode.nodeValue=b?"":q.memoizedProps}catch(de){ot(s,s.return,de)}}else if((q.tag!==22&&q.tag!==23||q.memoizedState===null||q===s)&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===s)break e;for(;q.sibling===null;){if(q.return===null||q.return===s)break e;Z===q&&(Z=null),q=q.return}Z===q&&(Z=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:ei(o,s),Ci(s),d&4&&T_(s);break;case 21:break;default:ei(o,s),Ci(s)}}function Ci(s){var o=s.flags;if(o&2){try{e:{for(var c=s.return;c!==null;){if(E_(c)){var d=c;break e}c=c.return}throw Error(t(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(ls(p,""),d.flags&=-33);var y=C_(s);Id(s,y,p);break;case 3:case 4:var w=d.stateNode.containerInfo,P=C_(s);Rd(s,P,w);break;default:throw Error(t(161))}}catch(M){ot(s,s.return,M)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function qx(s,o,c){ue=s,I_(s)}function I_(s,o,c){for(var d=(s.mode&1)!==0;ue!==null;){var p=ue,y=p.child;if(p.tag===22&&d){var w=p.memoizedState!==null||Pu;if(!w){var P=p.alternate,M=P!==null&&P.memoizedState!==null||Gt;P=Pu;var b=Gt;if(Pu=w,(Gt=M)&&!b)for(ue=p;ue!==null;)w=ue,M=w.child,w.tag===22&&w.memoizedState!==null?k_(p):M!==null?(M.return=w,ue=M):k_(p);for(;y!==null;)ue=y,I_(y),y=y.sibling;ue=p,Pu=P,Gt=b}P_(s)}else p.subtreeFlags&8772&&y!==null?(y.return=p,ue=y):P_(s)}}function P_(s){for(;ue!==null;){var o=ue;if(o.flags&8772){var c=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Gt||Lu(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!Gt)if(c===null)d.componentDidMount();else{var p=o.elementType===o.type?c.memoizedProps:Qn(o.type,c.memoizedProps);d.componentDidUpdate(p,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&Lm(o,y,d);break;case 3:var w=o.updateQueue;if(w!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}Lm(o,w,c)}break;case 5:var P=o.stateNode;if(c===null&&o.flags&4){c=P;var M=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&c.focus();break;case"img":M.src&&(c.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var b=o.alternate;if(b!==null){var Z=b.memoizedState;if(Z!==null){var q=Z.dehydrated;q!==null&&hl(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Gt||o.flags&512&&Td(o)}catch(H){ot(o,o.return,H)}}if(o===s){ue=null;break}if(c=o.sibling,c!==null){c.return=o.return,ue=c;break}ue=o.return}}function L_(s){for(;ue!==null;){var o=ue;if(o===s){ue=null;break}var c=o.sibling;if(c!==null){c.return=o.return,ue=c;break}ue=o.return}}function k_(s){for(;ue!==null;){var o=ue;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{Lu(4,o)}catch(M){ot(o,c,M)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var p=o.return;try{d.componentDidMount()}catch(M){ot(o,p,M)}}var y=o.return;try{Td(o)}catch(M){ot(o,y,M)}break;case 5:var w=o.return;try{Td(o)}catch(M){ot(o,w,M)}}}catch(M){ot(o,o.return,M)}if(o===s){ue=null;break}var P=o.sibling;if(P!==null){P.return=o.return,ue=P;break}ue=o.return}}var Qx=Math.ceil,ku=L.ReactCurrentDispatcher,Pd=L.ReactCurrentOwner,Gn=L.ReactCurrentBatchConfig,Ne=0,Ct=null,pt=null,kt=0,wn=0,fo=wr(0),yt=0,Dl=null,ys=0,Fu=0,Ld=0,Ol=null,sn=null,kd=0,go=1/0,Xi=null,Mu=!1,Fd=null,Ir=null,Au=!1,Pr=null,Du=0,Nl=0,Md=null,Ou=-1,Nu=0;function Zt(){return Ne&6?dt():Ou!==-1?Ou:Ou=dt()}function Lr(s){return s.mode&1?Ne&2&&kt!==0?kt&-kt:Ox.transition!==null?(Nu===0&&(Nu=Cp()),Nu):(s=Ue,s!==0||(s=window.event,s=s===void 0?16:Mp(s.type)),s):1}function ti(s,o,c,d){if(50<Nl)throw Nl=0,Md=null,Error(t(185));ol(s,c,d),(!(Ne&2)||s!==Ct)&&(s===Ct&&(!(Ne&2)&&(Fu|=c),yt===4&&kr(s,kt)),on(s,d),c===1&&Ne===0&&!(o.mode&1)&&(go=dt()+500,cu&&Cr()))}function on(s,o){var c=s.callbackNode;O1(s,o);var d=Xa(s,s===Ct?kt:0);if(d===0)c!==null&&xp(c),s.callbackNode=null,s.callbackPriority=0;else if(o=d&-d,s.callbackPriority!==o){if(c!=null&&xp(c),o===1)s.tag===0?Dx(M_.bind(null,s)):_m(M_.bind(null,s)),kx(function(){!(Ne&6)&&Cr()}),c=null;else{switch(Sp(d)){case 1:c=hh;break;case 4:c=wp;break;case 16:c=Wa;break;case 536870912:c=Ep;break;default:c=Wa}c=j_(c,F_.bind(null,s))}s.callbackPriority=o,s.callbackNode=c}}function F_(s,o){if(Ou=-1,Nu=0,Ne&6)throw Error(t(327));var c=s.callbackNode;if(po()&&s.callbackNode!==c)return null;var d=Xa(s,s===Ct?kt:0);if(d===0)return null;if(d&30||d&s.expiredLanes||o)o=zu(s,d);else{o=d;var p=Ne;Ne|=2;var y=D_();(Ct!==s||kt!==o)&&(Xi=null,go=dt()+500,xs(s,o));do try{tw();break}catch(P){A_(s,P)}while(!0);$h(),ku.current=y,Ne=p,pt!==null?o=0:(Ct=null,kt=0,o=yt)}if(o!==0){if(o===2&&(p=dh(s),p!==0&&(d=p,o=Ad(s,p))),o===1)throw c=Dl,xs(s,0),kr(s,d),on(s,dt()),c;if(o===6)kr(s,d);else{if(p=s.current.alternate,!(d&30)&&!Jx(p)&&(o=zu(s,d),o===2&&(y=dh(s),y!==0&&(d=y,o=Ad(s,y))),o===1))throw c=Dl,xs(s,0),kr(s,d),on(s,dt()),c;switch(s.finishedWork=p,s.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:ws(s,sn,Xi);break;case 3:if(kr(s,d),(d&130023424)===d&&(o=kd+500-dt(),10<o)){if(Xa(s,0)!==0)break;if(p=s.suspendedLanes,(p&d)!==d){Zt(),s.pingedLanes|=s.suspendedLanes&p;break}s.timeoutHandle=Gh(ws.bind(null,s,sn,Xi),o);break}ws(s,sn,Xi);break;case 4:if(kr(s,d),(d&4194240)===d)break;for(o=s.eventTimes,p=-1;0<d;){var w=31-Zn(d);y=1<<w,w=o[w],w>p&&(p=w),d&=~y}if(d=p,d=dt()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Qx(d/1960))-d,10<d){s.timeoutHandle=Gh(ws.bind(null,s,sn,Xi),d);break}ws(s,sn,Xi);break;case 5:ws(s,sn,Xi);break;default:throw Error(t(329))}}}return on(s,dt()),s.callbackNode===c?F_.bind(null,s):null}function Ad(s,o){var c=Ol;return s.current.memoizedState.isDehydrated&&(xs(s,o).flags|=256),s=zu(s,o),s!==2&&(o=sn,sn=c,o!==null&&Dd(o)),s}function Dd(s){sn===null?sn=s:sn.push.apply(sn,s)}function Jx(s){for(var o=s;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var d=0;d<c.length;d++){var p=c[d],y=p.getSnapshot;p=p.value;try{if(!$n(y(),p))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function kr(s,o){for(o&=~Ld,o&=~Fu,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var c=31-Zn(o),d=1<<c;s[c]=-1,o&=~d}}function M_(s){if(Ne&6)throw Error(t(327));po();var o=Xa(s,0);if(!(o&1))return on(s,dt()),null;var c=zu(s,o);if(s.tag!==0&&c===2){var d=dh(s);d!==0&&(o=d,c=Ad(s,d))}if(c===1)throw c=Dl,xs(s,0),kr(s,o),on(s,dt()),c;if(c===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,ws(s,sn,Xi),on(s,dt()),null}function Od(s,o){var c=Ne;Ne|=1;try{return s(o)}finally{Ne=c,Ne===0&&(go=dt()+500,cu&&Cr())}}function vs(s){Pr!==null&&Pr.tag===0&&!(Ne&6)&&po();var o=Ne;Ne|=1;var c=Gn.transition,d=Ue;try{if(Gn.transition=null,Ue=1,s)return s()}finally{Ue=d,Gn.transition=c,Ne=o,!(Ne&6)&&Cr()}}function Nd(){wn=fo.current,Ze(fo)}function xs(s,o){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,Lx(c)),pt!==null)for(c=pt.return;c!==null;){var d=c;switch(Xh(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&au();break;case 3:uo(),Ze(tn),Ze(Nt),rd();break;case 5:nd(d);break;case 4:uo();break;case 13:Ze(tt);break;case 19:Ze(tt);break;case 10:qh(d.type._context);break;case 22:case 23:Nd()}c=c.return}if(Ct=s,pt=s=Fr(s.current,null),kt=wn=o,yt=0,Dl=null,Ld=Fu=ys=0,sn=Ol=null,ps!==null){for(o=0;o<ps.length;o++)if(c=ps[o],d=c.interleaved,d!==null){c.interleaved=null;var p=d.next,y=c.pending;if(y!==null){var w=y.next;y.next=p,d.next=w}c.pending=d}ps=null}return s}function A_(s,o){do{var c=pt;try{if($h(),xu.current=Su,wu){for(var d=nt.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}wu=!1}if(_s=0,Et=_t=nt=null,Pl=!1,Ll=0,Pd.current=null,c===null||c.return===null){yt=1,Dl=o,pt=null;break}e:{var y=s,w=c.return,P=c,M=o;if(o=kt,P.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var b=M,Z=P,q=Z.tag;if(!(Z.mode&1)&&(q===0||q===11||q===15)){var H=Z.alternate;H?(Z.updateQueue=H.updateQueue,Z.memoizedState=H.memoizedState,Z.lanes=H.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var oe=r_(w);if(oe!==null){oe.flags&=-257,s_(oe,w,P,y,o),oe.mode&1&&i_(y,b,o),o=oe,M=b;var he=o.updateQueue;if(he===null){var de=new Set;de.add(M),o.updateQueue=de}else he.add(M);break e}else{if(!(o&1)){i_(y,b,o),zd();break e}M=Error(t(426))}}else if(et&&P.mode&1){var ft=r_(w);if(ft!==null){!(ft.flags&65536)&&(ft.flags|=256),s_(ft,w,P,y,o),Hh(co(M,P));break e}}y=M=co(M,P),yt!==4&&(yt=2),Ol===null?Ol=[y]:Ol.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var D=t_(y,M,o);Pm(y,D);break e;case 1:P=M;var A=y.type,O=y.stateNode;if(!(y.flags&128)&&(typeof A.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Ir===null||!Ir.has(O)))){y.flags|=65536,o&=-o,y.lanes|=o;var J=n_(y,P,o);Pm(y,J);break e}}y=y.return}while(y!==null)}N_(c)}catch(fe){o=fe,pt===c&&c!==null&&(pt=c=c.return);continue}break}while(!0)}function D_(){var s=ku.current;return ku.current=Su,s===null?Su:s}function zd(){(yt===0||yt===3||yt===2)&&(yt=4),Ct===null||!(ys&268435455)&&!(Fu&268435455)||kr(Ct,kt)}function zu(s,o){var c=Ne;Ne|=2;var d=D_();(Ct!==s||kt!==o)&&(Xi=null,xs(s,o));do try{ew();break}catch(p){A_(s,p)}while(!0);if($h(),Ne=c,ku.current=d,pt!==null)throw Error(t(261));return Ct=null,kt=0,yt}function ew(){for(;pt!==null;)O_(pt)}function tw(){for(;pt!==null&&!R1();)O_(pt)}function O_(s){var o=G_(s.alternate,s,wn);s.memoizedProps=s.pendingProps,o===null?N_(s):pt=o,Pd.current=null}function N_(s){var o=s;do{var c=o.alternate;if(s=o.return,o.flags&32768){if(c=Hx(c,o),c!==null){c.flags&=32767,pt=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{yt=6,pt=null;return}}else if(c=Kx(c,o,wn),c!==null){pt=c;return}if(o=o.sibling,o!==null){pt=o;return}pt=o=s}while(o!==null);yt===0&&(yt=5)}function ws(s,o,c){var d=Ue,p=Gn.transition;try{Gn.transition=null,Ue=1,nw(s,o,c,d)}finally{Gn.transition=p,Ue=d}return null}function nw(s,o,c,d){do po();while(Pr!==null);if(Ne&6)throw Error(t(327));c=s.finishedWork;var p=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var y=c.lanes|c.childLanes;if(N1(s,y),s===Ct&&(pt=Ct=null,kt=0),!(c.subtreeFlags&2064)&&!(c.flags&2064)||Au||(Au=!0,j_(Wa,function(){return po(),null})),y=(c.flags&15990)!==0,c.subtreeFlags&15990||y){y=Gn.transition,Gn.transition=null;var w=Ue;Ue=1;var P=Ne;Ne|=4,Pd.current=null,$x(s,c),R_(c,s),Ex(zh),Ha=!!Nh,zh=Nh=null,s.current=c,qx(c),I1(),Ne=P,Ue=w,Gn.transition=y}else s.current=c;if(Au&&(Au=!1,Pr=s,Du=p),y=s.pendingLanes,y===0&&(Ir=null),k1(c.stateNode),on(s,dt()),o!==null)for(d=s.onRecoverableError,c=0;c<o.length;c++)p=o[c],d(p.value,{componentStack:p.stack,digest:p.digest});if(Mu)throw Mu=!1,s=Fd,Fd=null,s;return Du&1&&s.tag!==0&&po(),y=s.pendingLanes,y&1?s===Md?Nl++:(Nl=0,Md=s):Nl=0,Cr(),null}function po(){if(Pr!==null){var s=Sp(Du),o=Gn.transition,c=Ue;try{if(Gn.transition=null,Ue=16>s?16:s,Pr===null)var d=!1;else{if(s=Pr,Pr=null,Du=0,Ne&6)throw Error(t(331));var p=Ne;for(Ne|=4,ue=s.current;ue!==null;){var y=ue,w=y.child;if(ue.flags&16){var P=y.deletions;if(P!==null){for(var M=0;M<P.length;M++){var b=P[M];for(ue=b;ue!==null;){var Z=ue;switch(Z.tag){case 0:case 11:case 15:Al(8,Z,y)}var q=Z.child;if(q!==null)q.return=Z,ue=q;else for(;ue!==null;){Z=ue;var H=Z.sibling,oe=Z.return;if(w_(Z),Z===b){ue=null;break}if(H!==null){H.return=oe,ue=H;break}ue=oe}}}var he=y.alternate;if(he!==null){var de=he.child;if(de!==null){he.child=null;do{var ft=de.sibling;de.sibling=null,de=ft}while(de!==null)}}ue=y}}if(y.subtreeFlags&2064&&w!==null)w.return=y,ue=w;else e:for(;ue!==null;){if(y=ue,y.flags&2048)switch(y.tag){case 0:case 11:case 15:Al(9,y,y.return)}var D=y.sibling;if(D!==null){D.return=y.return,ue=D;break e}ue=y.return}}var A=s.current;for(ue=A;ue!==null;){w=ue;var O=w.child;if(w.subtreeFlags&2064&&O!==null)O.return=w,ue=O;else e:for(w=A;ue!==null;){if(P=ue,P.flags&2048)try{switch(P.tag){case 0:case 11:case 15:Lu(9,P)}}catch(fe){ot(P,P.return,fe)}if(P===w){ue=null;break e}var J=P.sibling;if(J!==null){J.return=P.return,ue=J;break e}ue=P.return}}if(Ne=p,Cr(),vi&&typeof vi.onPostCommitFiberRoot=="function")try{vi.onPostCommitFiberRoot(Ua,s)}catch{}d=!0}return d}finally{Ue=c,Gn.transition=o}}return!1}function z_(s,o,c){o=co(c,o),o=t_(s,o,1),s=Tr(s,o,1),o=Zt(),s!==null&&(ol(s,1,o),on(s,o))}function ot(s,o,c){if(s.tag===3)z_(s,s,c);else for(;o!==null;){if(o.tag===3){z_(o,s,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ir===null||!Ir.has(d))){s=co(c,s),s=n_(o,s,1),o=Tr(o,s,1),s=Zt(),o!==null&&(ol(o,1,s),on(o,s));break}}o=o.return}}function iw(s,o,c){var d=s.pingCache;d!==null&&d.delete(o),o=Zt(),s.pingedLanes|=s.suspendedLanes&c,Ct===s&&(kt&c)===c&&(yt===4||yt===3&&(kt&130023424)===kt&&500>dt()-kd?xs(s,0):Ld|=c),on(s,o)}function b_(s,o){o===0&&(s.mode&1?(o=Ba,Ba<<=1,!(Ba&130023424)&&(Ba=4194304)):o=1);var c=Zt();s=Ui(s,o),s!==null&&(ol(s,o,c),on(s,c))}function rw(s){var o=s.memoizedState,c=0;o!==null&&(c=o.retryLane),b_(s,c)}function sw(s,o){var c=0;switch(s.tag){case 13:var d=s.stateNode,p=s.memoizedState;p!==null&&(c=p.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),b_(s,c)}var G_;G_=function(s,o,c){if(s!==null)if(s.memoizedProps!==o.pendingProps||tn.current)rn=!0;else{if(!(s.lanes&c)&&!(o.flags&128))return rn=!1,Yx(s,o,c);rn=!!(s.flags&131072)}else rn=!1,et&&o.flags&1048576&&ym(o,du,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Iu(s,o),s=o.pendingProps;var p=no(o,Nt.current);ao(o,c),p=ld(null,o,d,s,p,c);var y=ad();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,nn(d)?(y=!0,uu(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,ed(o),p.updater=Tu,o.stateNode=p,p._reactInternals=o,gd(o,d,s,c),o=yd(null,o,d,!0,y,c)):(o.tag=0,et&&y&&Bh(o),Ht(null,o,p,c),o=o.child),o;case 16:d=o.elementType;e:{switch(Iu(s,o),s=o.pendingProps,p=d._init,d=p(d._payload),o.type=d,p=o.tag=lw(d),s=Qn(d,s),p){case 0:o=_d(null,o,d,s,c);break e;case 1:o=h_(null,o,d,s,c);break e;case 11:o=o_(null,o,d,s,c);break e;case 14:o=l_(null,o,d,Qn(d.type,s),c);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Qn(d,p),_d(s,o,d,p,c);case 1:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Qn(d,p),h_(s,o,d,p,c);case 3:e:{if(d_(o),s===null)throw Error(t(387));d=o.pendingProps,y=o.memoizedState,p=y.element,Im(s,o),yu(o,d,null,c);var w=o.memoizedState;if(d=w.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=co(Error(t(423)),o),o=f_(s,o,d,c,p);break e}else if(d!==p){p=co(Error(t(424)),o),o=f_(s,o,d,c,p);break e}else for(xn=xr(o.stateNode.containerInfo.firstChild),vn=o,et=!0,qn=null,c=Tm(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(so(),d===p){o=Bi(s,o,c);break e}Ht(s,o,d,c)}o=o.child}return o;case 5:return km(o),s===null&&Kh(o),d=o.type,p=o.pendingProps,y=s!==null?s.memoizedProps:null,w=p.children,bh(d,p)?w=null:y!==null&&bh(d,y)&&(o.flags|=32),c_(s,o),Ht(s,o,w,c),o.child;case 6:return s===null&&Kh(o),null;case 13:return g_(s,o,c);case 4:return td(o,o.stateNode.containerInfo),d=o.pendingProps,s===null?o.child=oo(o,null,d,c):Ht(s,o,d,c),o.child;case 11:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Qn(d,p),o_(s,o,d,p,c);case 7:return Ht(s,o,o.pendingProps,c),o.child;case 8:return Ht(s,o,o.pendingProps.children,c),o.child;case 12:return Ht(s,o,o.pendingProps.children,c),o.child;case 10:e:{if(d=o.type._context,p=o.pendingProps,y=o.memoizedProps,w=p.value,Ke(pu,d._currentValue),d._currentValue=w,y!==null)if($n(y.value,w)){if(y.children===p.children&&!tn.current){o=Bi(s,o,c);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var P=y.dependencies;if(P!==null){w=y.child;for(var M=P.firstContext;M!==null;){if(M.context===d){if(y.tag===1){M=Vi(-1,c&-c),M.tag=2;var b=y.updateQueue;if(b!==null){b=b.shared;var Z=b.pending;Z===null?M.next=M:(M.next=Z.next,Z.next=M),b.pending=M}}y.lanes|=c,M=y.alternate,M!==null&&(M.lanes|=c),Qh(y.return,c,o),P.lanes|=c;break}M=M.next}}else if(y.tag===10)w=y.type===o.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(t(341));w.lanes|=c,P=w.alternate,P!==null&&(P.lanes|=c),Qh(w,c,o),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===o){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}Ht(s,o,p.children,c),o=o.child}return o;case 9:return p=o.type,d=o.pendingProps.children,ao(o,c),p=zn(p),d=d(p),o.flags|=1,Ht(s,o,d,c),o.child;case 14:return d=o.type,p=Qn(d,o.pendingProps),p=Qn(d.type,p),l_(s,o,d,p,c);case 15:return a_(s,o,o.type,o.pendingProps,c);case 17:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Qn(d,p),Iu(s,o),o.tag=1,nn(d)?(s=!0,uu(o)):s=!1,ao(o,c),Jm(o,d,p),gd(o,d,p,c),yd(null,o,d,!0,s,c);case 19:return m_(s,o,c);case 22:return u_(s,o,c)}throw Error(t(156,o.tag))};function j_(s,o){return vp(s,o)}function ow(s,o,c,d){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(s,o,c,d){return new ow(s,o,c,d)}function bd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function lw(s){if(typeof s=="function")return bd(s)?1:0;if(s!=null){if(s=s.$$typeof,s===ee)return 11;if(s===se)return 14}return 2}function Fr(s,o){var c=s.alternate;return c===null?(c=jn(s.tag,o,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=o,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,o=s.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function bu(s,o,c,d,p,y){var w=2;if(d=s,typeof s=="function")bd(s)&&(w=1);else if(typeof s=="string")w=5;else e:switch(s){case N:return Es(c.children,p,y,o);case z:w=8,p|=8;break;case G:return s=jn(12,c,o,p|2),s.elementType=G,s.lanes=y,s;case le:return s=jn(13,c,o,p),s.elementType=le,s.lanes=y,s;case $:return s=jn(19,c,o,p),s.elementType=$,s.lanes=y,s;case ae:return Gu(c,p,y,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case re:w=10;break e;case te:w=9;break e;case ee:w=11;break e;case se:w=14;break e;case X:w=16,d=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=jn(w,c,o,p),o.elementType=s,o.type=d,o.lanes=y,o}function Es(s,o,c,d){return s=jn(7,s,d,o),s.lanes=c,s}function Gu(s,o,c,d){return s=jn(22,s,d,o),s.elementType=ae,s.lanes=c,s.stateNode={isHidden:!1},s}function Gd(s,o,c){return s=jn(6,s,null,o),s.lanes=c,s}function jd(s,o,c){return o=jn(4,s.children!==null?s.children:[],s.key,o),o.lanes=c,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function aw(s,o,c,d,p){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fh(0),this.expirationTimes=fh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fh(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Wd(s,o,c,d,p,y,w,P,M){return s=new aw(s,o,c,P,M),o===1?(o=1,y===!0&&(o|=8)):o=0,y=jn(3,null,null,o),s.current=y,y.stateNode=s,y.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},ed(y),s}function uw(s,o,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:d==null?null:""+d,children:s,containerInfo:o,implementation:c}}function W_(s){if(!s)return Er;s=s._reactInternals;e:{if(cs(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(nn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var c=s.type;if(nn(c))return pm(s,c,o)}return o}function U_(s,o,c,d,p,y,w,P,M){return s=Wd(c,d,!0,s,p,y,w,P,M),s.context=W_(null),c=s.current,d=Zt(),p=Lr(c),y=Vi(d,p),y.callback=o??null,Tr(c,y,p),s.current.lanes=p,ol(s,p,d),on(s,d),s}function ju(s,o,c,d){var p=o.current,y=Zt(),w=Lr(p);return c=W_(c),o.context===null?o.context=c:o.pendingContext=c,o=Vi(y,w),o.payload={element:s},d=d===void 0?null:d,d!==null&&(o.callback=d),s=Tr(p,o,w),s!==null&&(ti(s,p,w,y),_u(s,p,w)),w}function Wu(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function V_(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<o?c:o}}function Ud(s,o){V_(s,o),(s=s.alternate)&&V_(s,o)}function cw(){return null}var B_=typeof reportError=="function"?reportError:function(s){console.error(s)};function Vd(s){this._internalRoot=s}Uu.prototype.render=Vd.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));ju(s,o,null,null)},Uu.prototype.unmount=Vd.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;vs(function(){ju(null,s,null,null)}),o[bi]=null}};function Uu(s){this._internalRoot=s}Uu.prototype.unstable_scheduleHydration=function(s){if(s){var o=Ip();s={blockedOn:null,target:s,priority:o};for(var c=0;c<_r.length&&o!==0&&o<_r[c].priority;c++);_r.splice(c,0,s),c===0&&kp(s)}};function Bd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Vu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function X_(){}function hw(s,o,c,d,p){if(p){if(typeof d=="function"){var y=d;d=function(){var b=Wu(w);y.call(b)}}var w=U_(o,d,s,0,null,!1,!1,"",X_);return s._reactRootContainer=w,s[bi]=w.current,xl(s.nodeType===8?s.parentNode:s),vs(),w}for(;p=s.lastChild;)s.removeChild(p);if(typeof d=="function"){var P=d;d=function(){var b=Wu(M);P.call(b)}}var M=Wd(s,0,!1,null,null,!1,!1,"",X_);return s._reactRootContainer=M,s[bi]=M.current,xl(s.nodeType===8?s.parentNode:s),vs(function(){ju(o,M,c,d)}),M}function Bu(s,o,c,d,p){var y=c._reactRootContainer;if(y){var w=y;if(typeof p=="function"){var P=p;p=function(){var M=Wu(w);P.call(M)}}ju(o,w,s,p)}else w=hw(c,o,s,p,d);return Wu(w)}Tp=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var c=sl(o.pendingLanes);c!==0&&(gh(o,c|1),on(o,dt()),!(Ne&6)&&(go=dt()+500,Cr()))}break;case 13:vs(function(){var d=Ui(s,1);if(d!==null){var p=Zt();ti(d,s,1,p)}}),Ud(s,1)}},ph=function(s){if(s.tag===13){var o=Ui(s,134217728);if(o!==null){var c=Zt();ti(o,s,134217728,c)}Ud(s,134217728)}},Rp=function(s){if(s.tag===13){var o=Lr(s),c=Ui(s,o);if(c!==null){var d=Zt();ti(c,s,o,d)}Ud(s,o)}},Ip=function(){return Ue},Pp=function(s,o){var c=Ue;try{return Ue=s,o()}finally{Ue=c}},us=function(s,o,c){switch(o){case"input":if(Dt(s,c),o=c.name,c.type==="radio"&&o!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==s&&d.form===s.form){var p=lu(d);if(!p)throw Error(t(90));cr(d),Dt(d,p)}}}break;case"textarea":Ni(s,c);break;case"select":o=c.value,o!=null&&Mn(s,!!c.multiple,o,!1)}},Yt=Od,yi=vs;var dw={usingClientEntryPoint:!1,Events:[Cl,eo,lu,il,rl,Od]},zl={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fw={bundleType:zl.bundleType,version:zl.version,rendererPackageName:zl.rendererPackageName,rendererConfig:zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=_p(s),s===null?null:s.stateNode},findFiberByHostInstance:zl.findFiberByHostInstance||cw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xu.isDisabled&&Xu.supportsFiber)try{Ua=Xu.inject(fw),vi=Xu}catch{}}return ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dw,ln.createPortal=function(s,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bd(o))throw Error(t(200));return uw(s,o,null,c)},ln.createRoot=function(s,o){if(!Bd(s))throw Error(t(299));var c=!1,d="",p=B_;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=Wd(s,1,!1,null,null,c,!1,d,p),s[bi]=o.current,xl(s.nodeType===8?s.parentNode:s),new Vd(o)},ln.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=_p(o),s=s===null?null:s.stateNode,s},ln.flushSync=function(s){return vs(s)},ln.hydrate=function(s,o,c){if(!Vu(o))throw Error(t(200));return Bu(null,s,o,!0,c)},ln.hydrateRoot=function(s,o,c){if(!Bd(s))throw Error(t(405));var d=c!=null&&c.hydratedSources||null,p=!1,y="",w=B_;if(c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),o=U_(o,null,s,1,c??null,p,!1,y,w),s[bi]=o.current,xl(s),d)for(s=0;s<d.length;s++)c=d[s],p=c._getVersion,p=p(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,p]:o.mutableSourceEagerHydrationData.push(c,p);return new Uu(o)},ln.render=function(s,o,c){if(!Vu(o))throw Error(t(200));return Bu(null,s,o,!1,c)},ln.unmountComponentAtNode=function(s){if(!Vu(s))throw Error(t(40));return s._reactRootContainer?(vs(function(){Bu(null,null,s,!1,function(){s._reactRootContainer=null,s[bi]=null})}),!0):!1},ln.unstable_batchedUpdates=Od,ln.unstable_renderSubtreeIntoContainer=function(s,o,c,d){if(!Vu(c))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Bu(s,o,c,!1,d)},ln.version="18.3.1-next-f1338f8080-20240426",ln}var e0;function _y(){if(e0)return Hd.exports;e0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Hd.exports=Cw(),Hd.exports}var t0;function Sw(){if(t0)return Ku;t0=1;var r=_y();return Ku.createRoot=r.createRoot,Ku.hydrateRoot=r.hydrateRoot,Ku}var yy=Sw(),Gl={},n0;function Tw(){if(n0)return Gl;n0=1,Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.parse=a,Gl.serialize=f;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,l=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function a(_,v){const x=new l,E=_.length;if(E<2)return x;const C=(v==null?void 0:v.decode)||g;let S=0;do{const T=_.indexOf("=",S);if(T===-1)break;const I=_.indexOf(";",S),L=I===-1?E:I;if(T>L){S=_.lastIndexOf(";",T-1)+1;continue}const k=u(_,S,T),j=h(_,T,k),N=_.slice(k,j);if(x[N]===void 0){let z=u(_,T+1,L),G=h(_,L,z);const re=C(_.slice(z,G));x[N]=re}S=L+1}while(S<E);return x}function u(_,v,x){do{const E=_.charCodeAt(v);if(E!==32&&E!==9)return v}while(++v<x);return x}function h(_,v,x){for(;v>x;){const E=_.charCodeAt(--v);if(E!==32&&E!==9)return v+1}return x}function f(_,v,x){const E=(x==null?void 0:x.encode)||encodeURIComponent;if(!r.test(_))throw new TypeError(`argument name is invalid: ${_}`);const C=E(v);if(!e.test(C))throw new TypeError(`argument val is invalid: ${v}`);let S=_+"="+C;if(!x)return S;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);S+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);S+="; Domain="+x.domain}if(x.path){if(!n.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);S+="; Path="+x.path}if(x.expires){if(!m(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);S+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(S+="; HttpOnly"),x.secure&&(S+="; Secure"),x.partitioned&&(S+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return S}function g(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function m(_){return i.call(_)==="[object Date]"}return Gl}Tw();/**
 * react-router v7.0.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var i0="popstate";function Rw(r={}){function e(n,i){let{pathname:l,search:a,hash:u}=n.location;return If("",{pathname:l,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:ia(i)}return Pw(e,t,null,r)}function st(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function es(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Iw(){return Math.random().toString(36).substring(2,10)}function r0(r,e){return{usr:r.state,key:r.key,idx:e}}function If(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?qo(e):e,state:t,key:e&&e.key||n||Iw()}}function ia({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function qo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function Pw(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:l=!1}=n,a=i.history,u="POP",h=null,f=g();f==null&&(f=0,a.replaceState({...a.state,idx:f},""));function g(){return(a.state||{idx:null}).idx}function m(){u="POP";let C=g(),S=C==null?null:C-f;f=C,h&&h({action:u,location:E.location,delta:S})}function _(C,S){u="PUSH";let T=If(E.location,C,S);f=g()+1;let I=r0(T,f),L=E.createHref(T);try{a.pushState(I,"",L)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(L)}l&&h&&h({action:u,location:E.location,delta:1})}function v(C,S){u="REPLACE";let T=If(E.location,C,S);f=g();let I=r0(T,f),L=E.createHref(T);a.replaceState(I,"",L),l&&h&&h({action:u,location:E.location,delta:0})}function x(C){let S=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof C=="string"?C:ia(C);return T=T.replace(/ $/,"%20"),st(S,`No window.location.(origin|href) available to create URL for href: ${T}`),new URL(T,S)}let E={get action(){return u},get location(){return r(i,a)},listen(C){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(i0,m),h=C,()=>{i.removeEventListener(i0,m),h=null}},createHref(C){return e(i,C)},createURL:x,encodeLocation(C){let S=x(C);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:_,replace:v,go(C){return a.go(C)}};return E}function vy(r,e,t="/"){return Lw(r,e,t,!1)}function Lw(r,e,t,n){let i=typeof e=="string"?qo(e):e,l=$r(i.pathname||"/",t);if(l==null)return null;let a=xy(r);kw(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=Ww(l);u=Gw(a[h],f,n)}return u}function xy(r,e=[],t=[],n=""){let i=(l,a,u)=>{let h={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:a,route:l};h.relativePath.startsWith("/")&&(st(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length));let f=Qi([n,h.relativePath]),g=t.concat(h);l.children&&l.children.length>0&&(st(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),xy(l.children,e,g,f)),!(l.path==null&&!l.index)&&e.push({path:f,score:zw(f,l.index),routesMeta:g})};return r.forEach((l,a)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))i(l,a);else for(let h of wy(l.path))i(l,a,h)}),e}function wy(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),l=t.replace(/\?$/,"");if(n.length===0)return i?[l,""]:[l];let a=wy(n.join("/")),u=[];return u.push(...a.map(h=>h===""?l:[l,h].join("/"))),i&&u.push(...a),u.map(h=>r.startsWith("/")&&h===""?"/":h)}function kw(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:bw(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var Fw=/^:[\w-]+$/,Mw=3,Aw=2,Dw=1,Ow=10,Nw=-2,s0=r=>r==="*";function zw(r,e){let t=r.split("/"),n=t.length;return t.some(s0)&&(n+=Nw),e&&(n+=Aw),t.filter(i=>!s0(i)).reduce((i,l)=>i+(Fw.test(l)?Mw:l===""?Dw:Ow),n)}function bw(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function Gw(r,e,t=!1){let{routesMeta:n}=r,i={},l="/",a=[];for(let u=0;u<n.length;++u){let h=n[u],f=u===n.length-1,g=l==="/"?e:e.slice(l.length)||"/",m=xc({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),_=h.route;if(!m&&f&&t&&!n[n.length-1].route.index&&(m=xc({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:Qi([l,m.pathname]),pathnameBase:Xw(Qi([l,m.pathnameBase])),route:_}),m.pathnameBase!=="/"&&(l=Qi([l,m.pathnameBase]))}return a}function xc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=jw(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let l=i[0],a=l.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((f,{paramName:g,isOptional:m},_)=>{if(g==="*"){let x=u[_]||"";a=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const v=u[_];return m&&!v?f[g]=void 0:f[g]=(v||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:a,pattern:r}}function jw(r,e=!1,t=!0){es(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(n.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Ww(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return es(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function $r(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function Uw(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?qo(r):r;return{pathname:t?t.startsWith("/")?t:Vw(t,e):e,search:Yw(n),hash:Kw(i)}}function Vw(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function qd(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Bw(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ey(r){let e=Bw(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function Cy(r,e,t,n=!1){let i;typeof r=="string"?i=qo(r):(i={...r},st(!i.pathname||!i.pathname.includes("?"),qd("?","pathname","search",i)),st(!i.pathname||!i.pathname.includes("#"),qd("#","pathname","hash",i)),st(!i.search||!i.search.includes("#"),qd("#","search","hash",i)));let l=r===""||i.pathname==="",a=l?"/":i.pathname,u;if(a==null)u=t;else{let m=e.length-1;if(!n&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),m-=1;i.pathname=_.join("/")}u=m>=0?e[m]:"/"}let h=Uw(i,u),f=a&&a!=="/"&&a.endsWith("/"),g=(l||a===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var Qi=r=>r.join("/").replace(/\/\/+/g,"/"),Xw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Yw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Kw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Hw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Sy=["POST","PUT","PATCH","DELETE"];new Set(Sy);var Zw=["GET",...Sy];new Set(Zw);var Qo=K.createContext(null);Qo.displayName="DataRouter";var jc=K.createContext(null);jc.displayName="DataRouterState";var Ty=K.createContext({isTransitioning:!1});Ty.displayName="ViewTransition";var $w=K.createContext(new Map);$w.displayName="Fetchers";var qw=K.createContext(null);qw.displayName="Await";var Mi=K.createContext(null);Mi.displayName="Navigation";var Ea=K.createContext(null);Ea.displayName="Location";var lr=K.createContext({outlet:null,matches:[],isDataRoute:!1});lr.displayName="Route";var tg=K.createContext(null);tg.displayName="RouteError";function Qw(r,{relative:e}={}){st(Ca(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=K.useContext(Mi),{hash:i,pathname:l,search:a}=Sa(r,{relative:e}),u=l;return t!=="/"&&(u=l==="/"?t:Qi([t,l])),n.createHref({pathname:u,search:a,hash:i})}function Ca(){return K.useContext(Ea)!=null}function zs(){return st(Ca(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(Ea).location}var Ry="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Iy(r){K.useContext(Mi).static||K.useLayoutEffect(r)}function Jw(){let{isDataRoute:r}=K.useContext(lr);return r?dE():eE()}function eE(){st(Ca(),"useNavigate() may be used only in the context of a <Router> component.");let r=K.useContext(Qo),{basename:e,navigator:t}=K.useContext(Mi),{matches:n}=K.useContext(lr),{pathname:i}=zs(),l=JSON.stringify(Ey(n)),a=K.useRef(!1);return Iy(()=>{a.current=!0}),K.useCallback((h,f={})=>{if(es(a.current,Ry),!a.current)return;if(typeof h=="number"){t.go(h);return}let g=Cy(h,JSON.parse(l),i,f.relative==="path");r==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Qi([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,l,i,r])}K.createContext(null);function Sa(r,{relative:e}={}){let{matches:t}=K.useContext(lr),{pathname:n}=zs(),i=JSON.stringify(Ey(t));return K.useMemo(()=>Cy(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function tE(r,e){return Py(r,e)}function Py(r,e,t,n){var E;st(Ca(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=K.useContext(Mi),{matches:l}=K.useContext(lr),a=l[l.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=zs(),g;if(e){let C=typeof e=="string"?qo(e):e;st(h==="/"||((E=C.pathname)==null?void 0:E.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${C.pathname}" was given in the \`location\` prop.`),g=C}else g=f;let m=g.pathname||"/",_=m;if(h!=="/"){let C=h.replace(/^\//,"").split("/");_="/"+m.replace(/^\//,"").split("/").slice(C.length).join("/")}let v=vy(r,{pathname:_}),x=oE(v&&v.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:Qi([h,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:Qi([h,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),l,t,n);return e&&x?K.createElement(Ea.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},x):x}function nE(){let r=hE(),e=Hw(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:i},t):null,null)}var iE=K.createElement(nE,null),rE=class extends K.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?K.createElement(lr.Provider,{value:this.props.routeContext},K.createElement(tg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sE({routeContext:r,match:e,children:t}){let n=K.useContext(Qo);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(lr.Provider,{value:r},t)}function oE(r,e=[],t=null,n=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,l=t==null?void 0:t.errors;if(l!=null){let h=i.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);st(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let a=!1,u=-1;if(t)for(let h=0;h<i.length;h++){let f=i[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:g,errors:m}=t,_=f.route.loader&&!g.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||_){a=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((h,f,g)=>{let m,_=!1,v=null,x=null;t&&(m=l&&f.route.id?l[f.route.id]:void 0,v=f.route.errorElement||iE,a&&(u<0&&g===0?(fE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,x=null):u===g&&(_=!0,x=f.route.hydrateFallbackElement||null)));let E=e.concat(i.slice(0,g+1)),C=()=>{let S;return m?S=v:_?S=x:f.route.Component?S=K.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,K.createElement(sE,{match:f,routeContext:{outlet:h,matches:E,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?K.createElement(rE,{location:t.location,revalidation:t.revalidation,component:v,error:m,children:C(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):C()},null)}function ng(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lE(r){let e=K.useContext(Qo);return st(e,ng(r)),e}function aE(r){let e=K.useContext(jc);return st(e,ng(r)),e}function uE(r){let e=K.useContext(lr);return st(e,ng(r)),e}function ig(r){let e=uE(r),t=e.matches[e.matches.length-1];return st(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function cE(){return ig("useRouteId")}function hE(){var n;let r=K.useContext(tg),e=aE("useRouteError"),t=ig("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function dE(){let{router:r}=lE("useNavigate"),e=ig("useNavigate"),t=K.useRef(!1);return Iy(()=>{t.current=!0}),K.useCallback(async(i,l={})=>{es(t.current,Ry),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...l}))},[r,e])}var o0={};function fE(r,e,t){o0[r]||(o0[r]=!0,es(!1,t))}K.memo(gE);function gE({routes:r,future:e,state:t}){return Py(r,void 0,t,e)}function Ly(r){st(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function pE({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:l=!1}){st(!Ca(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=r.replace(/^\/*/,"/"),u=K.useMemo(()=>({basename:a,navigator:i,static:l,future:{}}),[a,i,l]);typeof t=="string"&&(t=qo(t));let{pathname:h="/",search:f="",hash:g="",state:m=null,key:_="default"}=t,v=K.useMemo(()=>{let x=$r(h,a);return x==null?null:{location:{pathname:x,search:f,hash:g,state:m,key:_},navigationType:n}},[a,h,f,g,m,_,n]);return es(v!=null,`<Router basename="${a}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:K.createElement(Mi.Provider,{value:u},K.createElement(Ea.Provider,{children:e,value:v}))}function mE({children:r,location:e}){return tE(Pf(r),e)}function Pf(r,e=[]){let t=[];return K.Children.forEach(r,(n,i)=>{if(!K.isValidElement(n))return;let l=[...e,i];if(n.type===K.Fragment){t.push.apply(t,Pf(n.props.children,l));return}st(n.type===Ly,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),st(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Pf(n.props.children,l)),t.push(a)}),t}var fc="get",gc="application/x-www-form-urlencoded";function Wc(r){return r!=null&&typeof r.tagName=="string"}function _E(r){return Wc(r)&&r.tagName.toLowerCase()==="button"}function yE(r){return Wc(r)&&r.tagName.toLowerCase()==="form"}function vE(r){return Wc(r)&&r.tagName.toLowerCase()==="input"}function xE(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function wE(r,e){return r.button===0&&(!e||e==="_self")&&!xE(r)}var Hu=null;function EE(){if(Hu===null)try{new FormData(document.createElement("form"),0),Hu=!1}catch{Hu=!0}return Hu}var CE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qd(r){return r!=null&&!CE.has(r)?(es(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gc}"`),null):r}function SE(r,e){let t,n,i,l,a;if(yE(r)){let u=r.getAttribute("action");n=u?$r(u,e):null,t=r.getAttribute("method")||fc,i=Qd(r.getAttribute("enctype"))||gc,l=new FormData(r)}else if(_E(r)||vE(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=r.getAttribute("formaction")||u.getAttribute("action");if(n=h?$r(h,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||fc,i=Qd(r.getAttribute("formenctype"))||Qd(u.getAttribute("enctype"))||gc,l=new FormData(u,r),!EE()){let{name:f,type:g,value:m}=r;if(g==="image"){let _=f?`${f}.`:"";l.append(`${_}x`,"0"),l.append(`${_}y`,"0")}else f&&l.append(f,m)}}else{if(Wc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=fc,n=null,i=gc,a=r}return l&&i==="text/plain"&&(a=l,l=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:l,body:a}}function rg(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function TE(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RE(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function IE(r,e,t){let n=await Promise.all(r.map(async i=>{let l=e.routes[i.route.id];if(l){let a=await TE(l,t);return a.links?a.links():[]}return[]}));return FE(n.flat(1).filter(RE).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function l0(r,e,t,n,i,l){let a=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,u=(h,f)=>{var g;return t[f].pathname!==h.pathname||((g=t[f].route.path)==null?void 0:g.endsWith("*"))&&t[f].params["*"]!==h.params["*"]};return l==="assets"?e.filter((h,f)=>a(h,f)||u(h,f)):l==="data"?e.filter((h,f)=>{var m;let g=n.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(a(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let _=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(r,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function PE(r,e){return LE(r.map(t=>{let n=e.routes[t.route.id];if(!n)return[];let i=[n.module];return n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function LE(r){return[...new Set(r)]}function kE(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function FE(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let l=JSON.stringify(kE(i));return t.has(l)||(t.add(l),n.push({key:l,link:i})),n},[])}function ME(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function AE(){let r=K.useContext(Qo);return rg(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function DE(){let r=K.useContext(jc);return rg(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var sg=K.createContext(void 0);sg.displayName="FrameworkContext";function ky(){let r=K.useContext(sg);return rg(r,"You must render this element inside a <HydratedRouter> element"),r}function OE(r,e){let t=K.useContext(sg),[n,i]=K.useState(!1),[l,a]=K.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:m}=e,_=K.useRef(null);K.useEffect(()=>{if(r==="render"&&a(!0),r==="viewport"){let E=S=>{S.forEach(T=>{a(T.isIntersecting)})},C=new IntersectionObserver(E,{threshold:.5});return _.current&&C.observe(_.current),()=>{C.disconnect()}}},[r]),K.useEffect(()=>{if(n){let E=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(E)}}},[n]);let v=()=>{i(!0)},x=()=>{i(!1),a(!1)};return t?r!=="intent"?[l,_,{}]:[l,_,{onFocus:jl(u,v),onBlur:jl(h,x),onMouseEnter:jl(f,v),onMouseLeave:jl(g,x),onTouchStart:jl(m,v)}]:[!1,_,{}]}function jl(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function NE({page:r,...e}){let{router:t}=AE(),n=K.useMemo(()=>vy(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?K.createElement(bE,{page:r,matches:n,...e}):(console.warn(`Tried to prefetch ${r} but no routes matched.`),null)}function zE(r){let{manifest:e,routeModules:t}=ky(),[n,i]=K.useState([]);return K.useEffect(()=>{let l=!1;return IE(r,e,t).then(a=>{l||i(a)}),()=>{l=!0}},[r,e,t]),n}function bE({page:r,matches:e,...t}){let n=zs(),{manifest:i,routeModules:l}=ky(),{loaderData:a,matches:u}=DE(),h=K.useMemo(()=>l0(r,e,u,i,n,"data"),[r,e,u,i,n]),f=K.useMemo(()=>l0(r,e,u,i,n,"assets"),[r,e,u,i,n]),g=K.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let v=new Set,x=!1;if(e.forEach(C=>{var T;let S=i.routes[C.route.id];!S||!S.hasLoader||(!h.some(I=>I.route.id===C.route.id)&&C.route.id in a&&((T=l[C.route.id])!=null&&T.shouldRevalidate)||S.hasClientLoader?x=!0:v.add(C.route.id))}),v.size===0)return[];let E=ME(r);return x&&v.size>0&&E.searchParams.set("_routes",e.filter(C=>v.has(C.route.id)).map(C=>C.route.id).join(",")),[E.pathname+E.search]},[a,n,i,h,e,r,l]),m=K.useMemo(()=>PE(f,i),[f,i]),_=zE(f);return K.createElement(K.Fragment,null,g.map(v=>K.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),m.map(v=>K.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),_.map(({key:v,link:x})=>K.createElement("link",{key:v,...x})))}function GE(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Fy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Fy&&(window.__reactRouterVersion="7.0.1")}catch{}function jE({basename:r,children:e,window:t}){let n=K.useRef();n.current==null&&(n.current=Rw({window:t,v5Compat:!0}));let i=n.current,[l,a]=K.useState({action:i.action,location:i.location}),u=K.useCallback(h=>{K.startTransition(()=>a(h))},[a]);return K.useLayoutEffect(()=>i.listen(u),[i,u]),K.createElement(pE,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:i})}var My=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ay=K.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:l,replace:a,state:u,target:h,to:f,preventScrollReset:g,viewTransition:m,..._},v){let{basename:x}=K.useContext(Mi),E=typeof f=="string"&&My.test(f),C,S=!1;if(typeof f=="string"&&E&&(C=f,Fy))try{let G=new URL(window.location.href),re=f.startsWith("//")?new URL(G.protocol+f):new URL(f),te=$r(re.pathname,x);re.origin===G.origin&&te!=null?f=te+re.search+re.hash:S=!0}catch{es(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=Qw(f,{relative:i}),[I,L,k]=OE(n,_),j=BE(f,{replace:a,state:u,target:h,preventScrollReset:g,relative:i,viewTransition:m});function N(G){e&&e(G),G.defaultPrevented||j(G)}let z=K.createElement("a",{..._,...k,href:C||T,onClick:S||l?e:N,ref:GE(v,L),target:h,"data-discover":!E&&t==="render"?"true":void 0});return I&&!E?K.createElement(K.Fragment,null,z,K.createElement(NE,{page:T})):z});Ay.displayName="Link";var WE=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:l,to:a,viewTransition:u,children:h,...f},g){let m=Sa(a,{relative:f.relative}),_=zs(),v=K.useContext(jc),{navigator:x,basename:E}=K.useContext(Mi),C=v!=null&&ZE(m)&&u===!0,S=x.encodeLocation?x.encodeLocation(m).pathname:m.pathname,T=_.pathname,I=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(T=T.toLowerCase(),I=I?I.toLowerCase():null,S=S.toLowerCase()),I&&E&&(I=$r(I,E)||I);const L=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let k=T===S||!i&&T.startsWith(S)&&T.charAt(L)==="/",j=I!=null&&(I===S||!i&&I.startsWith(S)&&I.charAt(S.length)==="/"),N={isActive:k,isPending:j,isTransitioning:C},z=k?e:void 0,G;typeof n=="function"?G=n(N):G=[n,k?"active":null,j?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let re=typeof l=="function"?l(N):l;return K.createElement(Ay,{...f,"aria-current":z,className:G,ref:g,style:re,to:a,viewTransition:u},typeof h=="function"?h(N):h)});WE.displayName="NavLink";var UE=K.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:l,method:a=fc,action:u,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:m,..._},v)=>{let x=KE(),E=HE(u,{relative:f}),C=a.toLowerCase()==="get"?"get":"post",S=typeof u=="string"&&My.test(u),T=I=>{if(h&&h(I),I.defaultPrevented)return;I.preventDefault();let L=I.nativeEvent.submitter,k=(L==null?void 0:L.getAttribute("formmethod"))||a;x(L||I.currentTarget,{fetcherKey:e,method:k,navigate:t,replace:i,state:l,relative:f,preventScrollReset:g,viewTransition:m})};return K.createElement("form",{ref:v,method:C,action:E,onSubmit:n?h:T,..._,"data-discover":!S&&r==="render"?"true":void 0})});UE.displayName="Form";function VE(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Dy(r){let e=K.useContext(Qo);return st(e,VE(r)),e}function BE(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:l,viewTransition:a}={}){let u=Jw(),h=zs(),f=Sa(r,{relative:l});return K.useCallback(g=>{if(wE(g,e)){g.preventDefault();let m=t!==void 0?t:ia(h)===ia(f);u(r,{replace:m,state:n,preventScrollReset:i,relative:l,viewTransition:a})}},[h,u,f,t,n,e,r,i,l,a])}var XE=0,YE=()=>`__${String(++XE)}__`;function KE(){let{router:r}=Dy("useSubmit"),{basename:e}=K.useContext(Mi),t=cE();return K.useCallback(async(n,i={})=>{let{action:l,method:a,encType:u,formData:h,body:f}=SE(n,e);if(i.navigate===!1){let g=i.fetcherKey||YE();await r.fetch(g,t,i.action||l,{preventScrollReset:i.preventScrollReset,formData:h,body:f,formMethod:i.method||a,formEncType:i.encType||u,flushSync:i.flushSync})}else await r.navigate(i.action||l,{preventScrollReset:i.preventScrollReset,formData:h,body:f,formMethod:i.method||a,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function HE(r,{relative:e}={}){let{basename:t}=K.useContext(Mi),n=K.useContext(lr);st(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),l={...Sa(r||".",{relative:e})},a=zs();if(r==null){l.search=a.search;let u=new URLSearchParams(l.search),h=u.getAll("index");if(h.some(g=>g==="")){u.delete("index"),h.filter(m=>m).forEach(m=>u.append("index",m));let g=u.toString();l.search=g?`?${g}`:""}}return(!r||r===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Qi([t,l.pathname])),ia(l)}function ZE(r,e={}){let t=K.useContext(Ty);st(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Dy("useViewTransitionState"),i=Sa(r,{relative:e.relative});if(!t.isTransitioning)return!1;let l=$r(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=$r(t.nextLocation.pathname,n)||t.nextLocation.pathname;return xc(i.pathname,a)!=null||xc(i.pathname,l)!=null}new TextEncoder;class Kn{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Wo={PROPERTYCHANGE:"propertychange"};class Uc{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function $E(r,e,t){let n,i;t=t||Pi;let l=0,a=r.length,u=!1;for(;l<a;)n=l+(a-l>>1),i=+t(r[n],e),i<0?l=n+1:(a=n,u=!i);return u?l:~l}function Pi(r,e){return r>e?1:r<e?-1:0}function og(r,e,t){if(r[0]<=e)return 0;const n=r.length;if(e<=r[n-1])return n-1;if(typeof t=="function"){for(let i=1;i<n;++i){const l=r[i];if(l===e)return i;if(l<e)return t(e,r[i-1],l)>0?i-1:i}return n-1}if(t>0){for(let i=1;i<n;++i)if(r[i]<e)return i-1;return n-1}if(t<0){for(let i=1;i<n;++i)if(r[i]<=e)return i;return n-1}for(let i=1;i<n;++i){if(r[i]==e)return i;if(r[i]<e)return r[i-1]-e<e-r[i]?i-1:i}return n-1}function qE(r,e,t){for(;e<t;){const n=r[e];r[e]=r[t],r[t]=n,++e,--t}}function Li(r,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let i=0;i<n;i++)r[r.length]=t[i]}function ar(r,e){const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function QE(r,e,t){const n=e||Pi;return r.every(function(i,l){if(l===0)return!0;const a=n(r[l-1],i);return!(a>0||a===0)})}function qr(){return!0}function Jo(){return!1}function Uo(){}function Oy(r){let e,t,n;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==n||!ar(i,t))&&(n=this,t=i,e=r.apply(this,arguments)),e}}function JE(r){function e(){let t;try{t=r()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Ta(r){for(const e in r)delete r[e]}function As(r){let e;for(e in r)return!1;return!e}class Vc extends Uc{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),i=n[e]||(n[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const l=t?new Kn(e):e;l.target||(l.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});n in a||(a[n]=0,u[n]=0),++a[n];let h;for(let f=0,g=i.length;f<g;++f)if("handleEvent"in i[f]?h=i[f].handleEvent(l):h=i[f].call(this,l),h===!1||l.propagationStopped){h=!1;break}if(--a[n]===0){let f=u[n];for(delete u[n];f--;)this.removeEventListener(n,Uo);delete a[n]}return h}disposeInternal(){this.listeners_&&Ta(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const i=n.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[i]=Uo,++this.pendingRemovals_[e]):(n.splice(i,1),n.length===0&&delete this.listeners_[e]))}}const xe={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Oe(r,e,t,n,i){if(i){const a=t;t=function(){r.removeEventListener(e,t),a.apply(n??this,arguments)}}else n&&n!==r&&(t=t.bind(n));const l={target:r,type:e,listener:t};return r.addEventListener(e,t),l}function wc(r,e,t,n){return Oe(r,e,t,n,!0)}function Xe(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),Ta(r))}class Ra extends Vc{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(xe.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=Oe(this,e[l],t);return i}return Oe(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const i=e.length;n=new Array(i);for(let l=0;l<i;++l)n[l]=wc(this,e[l],t)}else n=wc(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)eC(n);else if(Array.isArray(e))for(let i=0,l=e.length;i<l;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}Ra.prototype.on;Ra.prototype.once;Ra.prototype.un;function eC(r){if(Array.isArray(r))for(let e=0,t=r.length;e<t;++e)Xe(r[e]);else Xe(r)}function Le(){throw new Error("Unimplemented abstract method.")}let tC=0;function Se(r){return r.ol_uid||(r.ol_uid=String(++tC))}class a0 extends Kn{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class Ai extends Ra{constructor(e){super(),this.on,this.once,this.un,Se(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new a0(n,e,t)),n=Wo.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new a0(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const i=this.values_||(this.values_={});if(n)i[e]=t;else{const l=i[e];i[e]=t,l!==t&&this.notify(e,l)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],As(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}const Vt={ADD:"add",REMOVE:"remove"},u0={LENGTH:"length"};class Zu extends Kn{constructor(e,t,n){super(e),this.element=t,this.index=n}}class Jt extends Ai{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,i=t.length;n<i;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(u0.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Zu(Vt.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,i=t.length;n<i;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Zu(Vt.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Zu(Vt.REMOVE,i,e)),this.dispatchEvent(new Zu(Vt.ADD,t,e))}updateLength_(){this.set(u0.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}}function be(r,e){if(!r)throw new Error(e)}class Wn extends Ai{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Wn(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Xe(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Oe(e,xe.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?nC(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function nC(r){if(typeof r=="function")return r;let e;return Array.isArray(r)?e=r:(be(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[r]),function(){return e}}const Ny=new Array(6);function Bn(){return[1,0,0,1,0,0]}function c0(r){return ag(r,1,0,0,1,0,0)}function lg(r,e){const t=r[0],n=r[1],i=r[2],l=r[3],a=r[4],u=r[5],h=e[0],f=e[1],g=e[2],m=e[3],_=e[4],v=e[5];return r[0]=t*h+i*f,r[1]=n*h+l*f,r[2]=t*g+i*m,r[3]=n*g+l*m,r[4]=t*_+i*v+a,r[5]=n*_+l*v+u,r}function ag(r,e,t,n,i,l,a){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=l,r[5]=a,r}function iC(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function Pt(r,e){const t=e[0],n=e[1];return e[0]=r[0]*t+r[2]*n+r[4],e[1]=r[1]*t+r[3]*n+r[5],e}function Jd(r,e,t){return lg(r,ag(Ny,e,0,0,t,0,0))}function rC(r,e,t){return lg(r,ag(Ny,1,0,0,1,e,t))}function rr(r,e,t,n,i,l,a,u){const h=Math.sin(l),f=Math.cos(l);return r[0]=n*f,r[1]=i*h,r[2]=-n*h,r[3]=i*f,r[4]=a*n*f-u*n*h+e,r[5]=a*i*h+u*i*f+t,r}function zy(r,e){const t=sC(e);be(t!==0,"Transformation matrix cannot be inverted");const n=e[0],i=e[1],l=e[2],a=e[3],u=e[4],h=e[5];return r[0]=a/t,r[1]=-i/t,r[2]=-l/t,r[3]=n/t,r[4]=(l*h-a*u)/t,r[5]=-(n*h-i*u)/t,r}function sC(r){return r[0]*r[3]-r[1]*r[2]}const h0=[1e6,1e6,1e6,1e6,2,2];function oC(r){return"matrix("+r.map((t,n)=>Math.round(t*h0[n])/h0[n]).join(", ")+")"}const It={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Rn(r){const e=Xn();for(let t=0,n=r.length;t<n;++t)ea(e,r[t]);return e}function Ji(r,e,t){return t?(t[0]=r[0]-e,t[1]=r[1]-e,t[2]=r[2]+e,t[3]=r[3]+e,t):[r[0]-e,r[1]-e,r[2]+e,r[3]+e]}function by(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r.slice()}function bs(r,e,t){let n,i;return e<r[0]?n=r[0]-e:r[2]<e?n=e-r[2]:n=0,t<r[1]?i=r[1]-t:r[3]<t?i=t-r[3]:i=0,n*n+i*i}function Vo(r,e){return ug(r,e[0],e[1])}function Is(r,e){return r[0]<=e[0]&&e[2]<=r[2]&&r[1]<=e[1]&&e[3]<=r[3]}function ug(r,e,t){return r[0]<=e&&e<=r[2]&&r[1]<=t&&t<=r[3]}function Lf(r,e){const t=r[0],n=r[1],i=r[2],l=r[3],a=e[0],u=e[1];let h=It.UNKNOWN;return a<t?h=h|It.LEFT:a>i&&(h=h|It.RIGHT),u<n?h=h|It.BELOW:u>l&&(h=h|It.ABOVE),h===It.UNKNOWN&&(h=It.INTERSECTING),h}function Xn(){return[1/0,1/0,-1/0,-1/0]}function sr(r,e,t,n,i){return i?(i[0]=r,i[1]=e,i[2]=t,i[3]=n,i):[r,e,t,n]}function Ia(r){return sr(1/0,1/0,-1/0,-1/0,r)}function Jl(r,e){const t=r[0],n=r[1];return sr(t,n,t,n,e)}function cg(r,e,t,n,i){const l=Ia(i);return jy(l,r,e,t,n)}function Bo(r,e){return r[0]==e[0]&&r[2]==e[2]&&r[1]==e[1]&&r[3]==e[3]}function Gy(r,e){return e[0]<r[0]&&(r[0]=e[0]),e[2]>r[2]&&(r[2]=e[2]),e[1]<r[1]&&(r[1]=e[1]),e[3]>r[3]&&(r[3]=e[3]),r}function ea(r,e){e[0]<r[0]&&(r[0]=e[0]),e[0]>r[2]&&(r[2]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>r[3]&&(r[3]=e[1])}function jy(r,e,t,n,i){for(;t<n;t+=i)lC(r,e[t],e[t+1]);return r}function lC(r,e,t){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}function hg(r,e){let t;return t=e(Bc(r)),t||(t=e(Xc(r)),t)||(t=e(Yc(r)),t)||(t=e(ts(r)),t)?t:!1}function ra(r){let e=0;return Kc(r)||(e=We(r)*Bt(r)),e}function Bc(r){return[r[0],r[1]]}function Xc(r){return[r[2],r[1]]}function or(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function aC(r,e){let t;if(e==="bottom-left")t=Bc(r);else if(e==="bottom-right")t=Xc(r);else if(e==="top-left")t=ts(r);else if(e==="top-right")t=Yc(r);else throw new Error("Invalid corner");return t}function kf(r,e,t,n,i){const[l,a,u,h,f,g,m,_]=uC(r,e,t,n);return sr(Math.min(l,u,f,m),Math.min(a,h,g,_),Math.max(l,u,f,m),Math.max(a,h,g,_),i)}function uC(r,e,t,n){const i=e*n[0]/2,l=e*n[1]/2,a=Math.cos(t),u=Math.sin(t),h=i*a,f=i*u,g=l*a,m=l*u,_=r[0],v=r[1];return[_-h+m,v-f-g,_-h-m,v-f+g,_+h-m,v+f+g,_+h+m,v+f-g,_-h+m,v-f-g]}function Bt(r){return r[3]-r[1]}function kn(r,e,t){const n=t||Xn();return gt(r,e)?(r[0]>e[0]?n[0]=r[0]:n[0]=e[0],r[1]>e[1]?n[1]=r[1]:n[1]=e[1],r[2]<e[2]?n[2]=r[2]:n[2]=e[2],r[3]<e[3]?n[3]=r[3]:n[3]=e[3]):Ia(n),n}function ts(r){return[r[0],r[3]]}function Yc(r){return[r[2],r[3]]}function We(r){return r[2]-r[0]}function gt(r,e){return r[0]<=e[2]&&r[2]>=e[0]&&r[1]<=e[3]&&r[3]>=e[1]}function Kc(r){return r[2]<r[0]||r[3]<r[1]}function cC(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r}function hC(r,e,t){let n=!1;const i=Lf(r,e),l=Lf(r,t);if(i===It.INTERSECTING||l===It.INTERSECTING)n=!0;else{const a=r[0],u=r[1],h=r[2],f=r[3],g=e[0],m=e[1],_=t[0],v=t[1],x=(v-m)/(_-g);let E,C;l&It.ABOVE&&!(i&It.ABOVE)&&(E=_-(v-f)/x,n=E>=a&&E<=h),!n&&l&It.RIGHT&&!(i&It.RIGHT)&&(C=v-(_-h)*x,n=C>=u&&C<=f),!n&&l&It.BELOW&&!(i&It.BELOW)&&(E=_-(v-u)/x,n=E>=a&&E<=h),!n&&l&It.LEFT&&!(i&It.LEFT)&&(C=v-(_-a)*x,n=C>=u&&C<=f)}return n}function Wy(r,e){const t=e.getExtent(),n=or(r);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const i=We(t),a=Math.floor((n[0]-t[0])/i)*i;r[0]-=a,r[2]-=a}return r}function dg(r,e,t){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[n[0],r[1],n[2],r[3]]];Wy(r,e);const i=We(n);if(We(r)>i&&!t)return[[n[0],r[1],n[2],r[3]]];if(r[0]<n[0])return[[r[0]+i,r[1],n[2],r[3]],[n[0],r[1],r[2],r[3]]];if(r[2]>n[2])return[[r[0],r[1],n[2],r[3]],[n[0],r[1],r[2]-i,r[3]]]}return[r]}const fg={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class gg{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||fg[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Pa=6378137,ko=Math.PI*Pa,dC=[-ko,-ko,ko,ko],fC=[-180,-85,180,85],$u=Pa*Math.log(Math.tan(Math.PI/2));class mo extends gg{constructor(e){super({code:e,units:"m",extent:dC,global:!0,worldExtent:fC,getPointResolution:function(t,n){return t/Math.cosh(n[1]/Pa)}})}}const d0=[new mo("EPSG:3857"),new mo("EPSG:102100"),new mo("EPSG:102113"),new mo("EPSG:900913"),new mo("http://www.opengis.net/def/crs/EPSG/0/3857"),new mo("http://www.opengis.net/gml/srs/epsg.xml#3857")];function gC(r,e,t,n){const i=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(i));for(let l=0;l<i;l+=n){e[l]=ko*r[l]/180;let a=Pa*Math.log(Math.tan(Math.PI*(+r[l+1]+90)/360));a>$u?a=$u:a<-$u&&(a=-$u),e[l+1]=a}return e}function pC(r,e,t,n){const i=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(i));for(let l=0;l<i;l+=n)e[l]=180*r[l]/ko,e[l+1]=360*Math.atan(Math.exp(r[l+1]/Pa))/Math.PI-90;return e}const mC=6378137,f0=[-180,-90,180,90],_C=Math.PI*mC/180;class Cs extends gg{constructor(e,t){super({code:e,units:"degrees",extent:f0,axisOrientation:t,global:!0,metersPerUnit:_C,worldExtent:f0})}}const g0=[new Cs("CRS:84"),new Cs("EPSG:4326","neu"),new Cs("urn:ogc:def:crs:OGC:1.3:CRS84"),new Cs("urn:ogc:def:crs:OGC:2:84"),new Cs("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Cs("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Cs("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Ff={};function yC(r){return Ff[r]||Ff[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function vC(r,e){Ff[r]=e}let Do={};function Ec(r,e,t){const n=r.getCode(),i=e.getCode();n in Do||(Do[n]={}),Do[n][i]=t}function xC(r,e){let t;return r in Do&&e in Do[r]&&(t=Do[r][e]),t}function rt(r,e,t){return Math.min(Math.max(r,e),t)}function wC(r,e,t,n,i,l){const a=i-t,u=l-n;if(a!==0||u!==0){const h=((r-t)*a+(e-n)*u)/(a*a+u*u);h>1?(t=i,n=l):h>0&&(t+=a*h,n+=u*h)}return er(r,e,t,n)}function er(r,e,t,n){const i=t-r,l=n-e;return i*i+l*l}function EC(r){const e=r.length;for(let n=0;n<e;n++){let i=n,l=Math.abs(r[n][n]);for(let u=n+1;u<e;u++){const h=Math.abs(r[u][n]);h>l&&(l=h,i=u)}if(l===0)return null;const a=r[i];r[i]=r[n],r[n]=a;for(let u=n+1;u<e;u++){const h=-r[u][n]/r[n][n];for(let f=n;f<e+1;f++)n==f?r[u][f]=0:r[u][f]+=h*r[n][f]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=r[n][e]/r[n][n];for(let i=n-1;i>=0;i--)r[i][e]-=r[i][n]*t[n]}return t}function pc(r){return r*Math.PI/180}function Oo(r,e){const t=r%e;return t*e<0?t+e:t}function In(r,e,t){return r+t*(e-r)}function Hc(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}function qu(r,e){return Math.floor(Hc(r,e))}function Qu(r,e){return Math.ceil(Hc(r,e))}function CC(r,e){return r[0]+=+e[0],r[1]+=+e[1],r}function Uy(r,e){const t=r[0],n=r[1],i=e[0],l=e[1],a=i[0],u=i[1],h=l[0],f=l[1],g=h-a,m=f-u,_=g===0&&m===0?0:(g*(t-a)+m*(n-u))/(g*g+m*m||0);let v,x;return _<=0?(v=a,x=u):_>=1?(v=h,x=f):(v=a+_*g,x=u+_*m),[v,x]}function hi(r,e){let t=!0;for(let n=r.length-1;n>=0;--n)if(r[n]!=e[n]){t=!1;break}return t}function pg(r,e){const t=Math.cos(e),n=Math.sin(e),i=r[0]*t-r[1]*n,l=r[1]*t+r[0]*n;return r[0]=i,r[1]=l,r}function SC(r,e){return r[0]*=e,r[1]*=e,r}function Xo(r,e){const t=r[0]-e[0],n=r[1]-e[1];return t*t+n*n}function Cc(r,e){return Math.sqrt(Xo(r,e))}function TC(r,e){return Xo(r,Uy(r,e))}function mg(r,e){if(e.canWrapX()){const t=We(e.getExtent()),n=RC(r,e,t);n&&(r[0]-=n*t)}return r}function RC(r,e,t){const n=e.getExtent();let i=0;return e.canWrapX()&&(r[0]<n[0]||r[0]>n[2])&&(t=t||We(n),i=Math.floor((r[0]-n[0])/t)),i}const IC=63710088e-1;function p0(r,e,t){t=t||IC;const n=pc(r[1]),i=pc(e[1]),l=(i-n)/2,a=pc(e[0]-r[0])/2,u=Math.sin(l)*Math.sin(l)+Math.sin(a)*Math.sin(a)*Math.cos(n)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function Vy(...r){console.warn(...r)}let Mf=!0;function PC(r){Mf=!1}function _g(r,e){if(e!==void 0){for(let t=0,n=r.length;t<n;++t)e[t]=r[t];e=e}else e=r.slice();return e}function By(r,e){if(e!==void 0&&r!==e){for(let t=0,n=r.length;t<n;++t)e[t]=r[t];r=e}return r}function LC(r){vC(r.getCode(),r),Ec(r,r,_g)}function kC(r){r.forEach(LC)}function At(r){return typeof r=="string"?yC(r):r||null}function m0(r,e,t,n){r=At(r);let i;const l=r.getPointResolutionFunc();if(l)i=l(e,t);else{const a=r.getUnits();if(a=="degrees"&&!n||n=="degrees")i=e;else{const u=Zc(r,At("EPSG:4326"));if(u===By&&a!=="degrees")i=e*r.getMetersPerUnit();else{let f=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];f=u(f,f,2);const g=p0(f.slice(0,2),f.slice(2,4)),m=p0(f.slice(4,6),f.slice(6,8));i=(g+m)/2}const h=r.getMetersPerUnit();h!==void 0&&(i/=h)}}return i}function _0(r){kC(r),r.forEach(function(e){r.forEach(function(t){e!==t&&Ec(e,t,_g)})})}function FC(r,e,t,n){r.forEach(function(i){e.forEach(function(l){Ec(i,l,t),Ec(l,i,n)})})}function yg(r,e){return r?typeof r=="string"?At(r):r:At(e)}function mc(r,e){if(r===e)return!0;const t=r.getUnits()===e.getUnits();return(r.getCode()===e.getCode()||Zc(r,e)===_g)&&t}function Zc(r,e){const t=r.getCode(),n=e.getCode();let i=xC(t,n);return i||(i=By),i}function sa(r,e){const t=At(r),n=At(e);return Zc(t,n)}function MC(r,e,t){return sa(e,t)(r,void 0,r.length)}let AC=null;function DC(){return AC}function Yo(r,e){return r}function it(r,e){return Mf&&!hi(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(Mf=!1,Vy("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function $c(r,e){return r}function qi(r,e){return r}function OC(){_0(d0),_0(g0),FC(g0,d0,gC,pC)}OC();function Hr(r,e,t,n,i,l,a){l=l||[],a=a||2;let u=0;for(let h=e;h<t;h+=n){const f=r[h],g=r[h+1];l[u++]=i[0]*f+i[2]*g+i[4],l[u++]=i[1]*f+i[3]*g+i[5];for(let m=2;m<a;m++)l[u++]=r[h+m]}return l&&l.length!=u&&(l.length=u),l}function vg(r,e,t,n,i,l,a){a=a||[];const u=Math.cos(i),h=Math.sin(i),f=l[0],g=l[1];let m=0;for(let _=e;_<t;_+=n){const v=r[_]-f,x=r[_+1]-g;a[m++]=f+v*u-x*h,a[m++]=g+v*h+x*u;for(let E=_+2;E<_+n;++E)a[m++]=r[E]}return a&&a.length!=m&&(a.length=m),a}function NC(r,e,t,n,i,l,a,u){u=u||[];const h=a[0],f=a[1];let g=0;for(let m=e;m<t;m+=n){const _=r[m]-h,v=r[m+1]-f;u[g++]=h+i*_,u[g++]=f+l*v;for(let x=m+2;x<m+n;++x)u[g++]=r[x]}return u&&u.length!=g&&(u.length=g),u}function zC(r,e,t,n,i,l,a){a=a||[];let u=0;for(let h=e;h<t;h+=n){a[u++]=r[h]+i,a[u++]=r[h+1]+l;for(let f=h+2;f<h+n;++f)a[u++]=r[f]}return a&&a.length!=u&&(a.length=u),a}const y0=Bn();class Xy extends Ai{constructor(){super(),this.extent_=Xn(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Oy((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Le()}closestPointXY(e,t,n,i){return Le()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Le()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Ia(t),this.extentRevision_=this.getRevision()}return cC(this.extent_,e)}rotate(e,t){Le()}scale(e,t,n){Le()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Le()}getType(){return Le()}applyTransform(e){Le()}intersectsExtent(e){return Le()}translate(e,t){Le()}transform(e,t){const n=At(e),i=n.getUnits()=="tile-pixels"?function(l,a,u){const h=n.getExtent(),f=n.getWorldExtent(),g=Bt(f)/Bt(h);return rr(y0,f[0],f[3],g,-g,0,0,0),Hr(l,0,l.length,u,y0,a),sa(n,t)(l,a,u)}:sa(n,t);return this.applyTransform(i),this}}class ns extends Xy{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return cg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Le()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Sc(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Le()}setLayout(e,t,n){let i;if(e)i=Sc(e);else{for(let l=0;l<n;++l){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=bC(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const i=this.getStride();vg(n,0,n.length,i,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=or(this.getExtent()));const i=this.getFlatCoordinates();if(i){const l=this.getStride();NC(i,0,i.length,l,e,t,n,i),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const i=this.getStride();zC(n,0,n.length,i,e,t,n),this.changed()}}}function bC(r){let e;return r==2?e="XY":r==3?e="XYZ":r==4&&(e="XYZM"),e}function Sc(r){let e;return r=="XY"?e=2:r=="XYZ"||r=="XYM"?e=3:r=="XYZM"&&(e=4),e}function GC(r,e,t){const n=r.getFlatCoordinates();if(!n)return null;const i=r.getStride();return Hr(n,0,n.length,i,e,t)}function v0(r,e,t,n,i,l,a){const u=r[e],h=r[e+1],f=r[t]-u,g=r[t+1]-h;let m;if(f===0&&g===0)m=e;else{const _=((i-u)*f+(l-h)*g)/(f*f+g*g);if(_>1)m=t;else if(_>0){for(let v=0;v<n;++v)a[v]=In(r[e+v],r[t+v],_);a.length=n;return}else m=e}for(let _=0;_<n;++_)a[_]=r[m+_];a.length=n}function xg(r,e,t,n,i){let l=r[e],a=r[e+1];for(e+=n;e<t;e+=n){const u=r[e],h=r[e+1],f=er(l,a,u,h);f>i&&(i=f),l=u,a=h}return i}function wg(r,e,t,n,i){for(let l=0,a=t.length;l<a;++l){const u=t[l];i=xg(r,e,u,n,i),e=u}return i}function jC(r,e,t,n,i){for(let l=0,a=t.length;l<a;++l){const u=t[l];i=wg(r,e,u,n,i),e=u[u.length-1]}return i}function Eg(r,e,t,n,i,l,a,u,h,f,g){if(e==t)return f;let m,_;if(i===0){if(_=er(a,u,r[e],r[e+1]),_<f){for(m=0;m<n;++m)h[m]=r[e+m];return h.length=n,_}return f}g=g||[NaN,NaN];let v=e+n;for(;v<t;)if(v0(r,v-n,v,n,a,u,g),_=er(a,u,g[0],g[1]),_<f){for(f=_,m=0;m<n;++m)h[m]=g[m];h.length=n,v+=n}else v+=n*Math.max((Math.sqrt(_)-Math.sqrt(f))/i|0,1);if(l&&(v0(r,t-n,e,n,a,u,g),_=er(a,u,g[0],g[1]),_<f)){for(f=_,m=0;m<n;++m)h[m]=g[m];h.length=n}return f}function Cg(r,e,t,n,i,l,a,u,h,f,g){g=g||[NaN,NaN];for(let m=0,_=t.length;m<_;++m){const v=t[m];f=Eg(r,e,v,n,i,l,a,u,h,f,g),e=v}return f}function WC(r,e,t,n,i,l,a,u,h,f,g){g=g||[NaN,NaN];for(let m=0,_=t.length;m<_;++m){const v=t[m];f=Cg(r,e,v,n,i,l,a,u,h,f,g),e=v[v.length-1]}return f}function Yy(r,e,t,n){for(let i=0,l=t.length;i<l;++i)r[e++]=t[i];return e}function qc(r,e,t,n){for(let i=0,l=t.length;i<l;++i){const a=t[i];for(let u=0;u<n;++u)r[e++]=a[u]}return e}function Sg(r,e,t,n,i){i=i||[];let l=0;for(let a=0,u=t.length;a<u;++a){const h=qc(r,e,t[a],n);i[l++]=h,e=h}return i.length=l,i}function UC(r,e,t,n,i){i=i||[];let l=0;for(let a=0,u=t.length;a<u;++a){const h=Sg(r,e,t[a],n,i[l]);h.length===0&&(h[0]=e),i[l++]=h,e=h[h.length-1]}return i.length=l,i}function Qc(r,e,t,n,i,l,a){const u=(t-e)/n;if(u<3){for(;e<t;e+=n)l[a++]=r[e],l[a++]=r[e+1];return a}const h=new Array(u);h[0]=1,h[u-1]=1;const f=[e,t-n];let g=0;for(;f.length>0;){const m=f.pop(),_=f.pop();let v=0;const x=r[_],E=r[_+1],C=r[m],S=r[m+1];for(let T=_+n;T<m;T+=n){const I=r[T],L=r[T+1],k=wC(I,L,x,E,C,S);k>v&&(g=T,v=k)}v>i&&(h[(g-e)/n]=1,_+n<g&&f.push(_,g),g+n<m&&f.push(g,m))}for(let m=0;m<u;++m)h[m]&&(l[a++]=r[e+m*n],l[a++]=r[e+m*n+1]);return a}function Ky(r,e,t,n,i,l,a,u){for(let h=0,f=t.length;h<f;++h){const g=t[h];a=Qc(r,e,g,n,i,l,a),u.push(a),e=g}return a}function Ts(r,e){return e*Math.round(r/e)}function VC(r,e,t,n,i,l,a){if(e==t)return a;let u=Ts(r[e],i),h=Ts(r[e+1],i);e+=n,l[a++]=u,l[a++]=h;let f,g;do if(f=Ts(r[e],i),g=Ts(r[e+1],i),e+=n,e==t)return l[a++]=f,l[a++]=g,a;while(f==u&&g==h);for(;e<t;){const m=Ts(r[e],i),_=Ts(r[e+1],i);if(e+=n,m==f&&_==g)continue;const v=f-u,x=g-h,E=m-u,C=_-h;if(v*C==x*E&&(v<0&&E<v||v==E||v>0&&E>v)&&(x<0&&C<x||x==C||x>0&&C>x)){f=m,g=_;continue}l[a++]=f,l[a++]=g,u=f,h=g,f=m,g=_}return l[a++]=f,l[a++]=g,a}function Tg(r,e,t,n,i,l,a,u){for(let h=0,f=t.length;h<f;++h){const g=t[h];a=VC(r,e,g,n,i,l,a),u.push(a),e=g}return a}function BC(r,e,t,n,i,l,a,u){for(let h=0,f=t.length;h<f;++h){const g=t[h],m=[];a=Tg(r,e,g,n,i,l,a,m),u.push(m),e=g[g.length-1]}return a}function Xr(r,e,t,n,i){i=i!==void 0?i:[];let l=0;for(let a=e;a<t;a+=n)i[l++]=r.slice(a,a+n);return i.length=l,i}function oa(r,e,t,n,i){i=i!==void 0?i:[];let l=0;for(let a=0,u=t.length;a<u;++a){const h=t[a];i[l++]=Xr(r,e,h,n,i[l]),e=h}return i.length=l,i}function Af(r,e,t,n,i){i=i!==void 0?i:[];let l=0;for(let a=0,u=t.length;a<u;++a){const h=t[a];i[l++]=h.length===1&&h[0]===e?[]:oa(r,e,h,n,i[l]),e=h[h.length-1]}return i.length=l,i}function Hy(r,e,t,n){let i=0;const l=r[t-n],a=r[t-n+1];let u=0,h=0;for(;e<t;e+=n){const f=r[e]-l,g=r[e+1]-a;i+=h*f-u*g,u=f,h=g}return i/2}function Zy(r,e,t,n){let i=0;for(let l=0,a=t.length;l<a;++l){const u=t[l];i+=Hy(r,e,u,n),e=u}return i}function XC(r,e,t,n){let i=0;for(let l=0,a=t.length;l<a;++l){const u=t[l];i+=Zy(r,e,u,n),e=u[u.length-1]}return i}class la extends ns{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new la(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,i){return i<bs(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(xg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Eg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,i))}getArea(){return Hy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Xr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Qc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new la(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qc(this.flatCoordinates,0,e,this.stride),this.changed()}}class fi extends ns{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new fi(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,i){const l=this.flatCoordinates,a=er(e,t,l[0],l[1]);if(a<i){const u=this.stride;for(let h=0;h<u;++h)n[h]=l[h];return n.length=u,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Jl(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return ug(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yy(this.flatCoordinates,0,e,this.stride),this.changed()}}function YC(r,e,t,n,i){return!hg(i,function(a){return!Ps(r,e,t,n,a[0],a[1])})}function Ps(r,e,t,n,i,l){let a=0,u=r[t-n],h=r[t-n+1];for(;e<t;e+=n){const f=r[e],g=r[e+1];h<=l?g>l&&(f-u)*(l-h)-(i-u)*(g-h)>0&&a++:g<=l&&(f-u)*(l-h)-(i-u)*(g-h)<0&&a--,u=f,h=g}return a!==0}function Rg(r,e,t,n,i,l){if(t.length===0||!Ps(r,e,t[0],n,i,l))return!1;for(let a=1,u=t.length;a<u;++a)if(Ps(r,t[a-1],t[a],n,i,l))return!1;return!0}function KC(r,e,t,n,i,l){if(t.length===0)return!1;for(let a=0,u=t.length;a<u;++a){const h=t[a];if(Rg(r,e,h,n,i,l))return!0;e=h[h.length-1]}return!1}function Ig(r,e,t,n,i,l,a){let u,h,f,g,m,_,v;const x=i[l+1],E=[];for(let T=0,I=t.length;T<I;++T){const L=t[T];for(g=r[L-n],_=r[L-n+1],u=e;u<L;u+=n)m=r[u],v=r[u+1],(x<=_&&v<=x||_<=x&&x<=v)&&(f=(x-_)/(v-_)*(m-g)+g,E.push(f)),g=m,_=v}let C=NaN,S=-1/0;for(E.sort(Pi),g=E[0],u=1,h=E.length;u<h;++u){m=E[u];const T=Math.abs(m-g);T>S&&(f=(g+m)/2,Rg(r,e,t,n,f,x)&&(C=f,S=T)),g=m}return isNaN(C)&&(C=i[l]),a?(a.push(C,x,S),a):[C,x,S]}function $y(r,e,t,n,i){let l=[];for(let a=0,u=t.length;a<u;++a){const h=t[a];l=Ig(r,e,h,n,i,2*a,l),e=h[h.length-1]}return l}function qy(r,e,t,n,i){let l;for(e+=n;e<t;e+=n)if(l=i(r.slice(e-n,e),r.slice(e,e+n)),l)return l;return!1}function Jc(r,e,t,n,i){const l=jy(Xn(),r,e,t,n);return gt(i,l)?Is(i,l)||l[0]>=i[0]&&l[2]<=i[2]||l[1]>=i[1]&&l[3]<=i[3]?!0:qy(r,e,t,n,function(a,u){return hC(i,a,u)}):!1}function HC(r,e,t,n,i){for(let l=0,a=t.length;l<a;++l){if(Jc(r,e,t[l],n,i))return!0;e=t[l]}return!1}function Qy(r,e,t,n,i){return!!(Jc(r,e,t,n,i)||Ps(r,e,t,n,i[0],i[1])||Ps(r,e,t,n,i[0],i[3])||Ps(r,e,t,n,i[2],i[1])||Ps(r,e,t,n,i[2],i[3]))}function Jy(r,e,t,n,i){if(!Qy(r,e,t[0],n,i))return!1;if(t.length===1)return!0;for(let l=1,a=t.length;l<a;++l)if(YC(r,t[l-1],t[l],n,i)&&!Jc(r,t[l-1],t[l],n,i))return!1;return!0}function ZC(r,e,t,n,i){for(let l=0,a=t.length;l<a;++l){const u=t[l];if(Jy(r,e,u,n,i))return!0;e=u[u.length-1]}return!1}function $C(r,e,t,n){for(;e<t-n;){for(let i=0;i<n;++i){const l=r[e+i];r[e+i]=r[t-n+i],r[t-n+i]=l}e+=n,t-=n}}function Pg(r,e,t,n){let i=0,l=r[t-n],a=r[t-n+1];for(;e<t;e+=n){const u=r[e],h=r[e+1];i+=(u-l)*(h+a),l=u,a=h}return i===0?void 0:i>0}function ev(r,e,t,n,i){i=i!==void 0?i:!1;for(let l=0,a=t.length;l<a;++l){const u=t[l],h=Pg(r,e,u,n);if(l===0){if(i&&h||!i&&!h)return!1}else if(i&&!h||!i&&h)return!1;e=u}return!0}function qC(r,e,t,n,i){for(let l=0,a=t.length;l<a;++l){const u=t[l];if(!ev(r,e,u,n,i))return!1;u.length&&(e=u[u.length-1])}return!0}function Df(r,e,t,n,i){i=i!==void 0?i:!1;for(let l=0,a=t.length;l<a;++l){const u=t[l],h=Pg(r,e,u,n);(l===0?i&&h||!i&&!h:i&&!h||!i&&h)&&$C(r,e,u,n),e=u}return e}function x0(r,e,t,n,i){for(let l=0,a=t.length;l<a;++l)e=Df(r,e,t[l],n,i);return e}function tv(r,e){const t=[];let n=0,i=0,l;for(let a=0,u=e.length;a<u;++a){const h=e[a],f=Pg(r,n,h,2);if(l===void 0&&(l=f),f===l)t.push(e.slice(i,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=a+1,n=h}return t}class Fi extends ns{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Li(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Fi(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,i){return i<bs(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wg(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Cg(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,i))}containsXY(e,t){return Rg(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return Zy(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Df(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,oa(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=or(this.getExtent());this.flatInteriorPoint_=Ig(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new fi(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new la(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,i=[];let l=0;for(let a=0,u=n.length;a<u;++a){const h=n[a],f=new la(t.slice(l,h),e);i.push(f),l=h}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;ev(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Df(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=Tg(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new Fi(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return Jy(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Sg(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function w0(r){if(Kc(r))throw new Error("Cannot create polygon from empty extent");const e=r[0],t=r[1],n=r[2],i=r[3],l=[e,t,e,i,n,i,n,t,e,t];return new Fi(l,"XY",[l.length])}const Un={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ke={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},aa={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Ft={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Ft.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Ft.max=Ft.whitepoint[2].D65;Ft.rgb=function(r,e){e=e||Ft.whitepoint[2].E;var t=r[0]/e[0],n=r[1]/e[1],i=r[2]/e[2],l,a,u;return l=t*3.240969941904521+n*-1.537383177570093+i*-.498610760293,a=t*-.96924363628087+n*1.87596750150772+i*.041555057407175,u=t*.055630079696993+n*-.20397695888897+i*1.056971514242878,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u=u*12.92,l=Math.min(Math.max(0,l),1),a=Math.min(Math.max(0,a),1),u=Math.min(Math.max(0,u),1),[l*255,a*255,u*255]};aa.xyz=function(r,e){var t=r[0]/255,n=r[1]/255,i=r[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var l=t*.41239079926595+n*.35758433938387+i*.18048078840183,a=t*.21263900587151+n*.71516867876775+i*.072192315360733,u=t*.019330818715591+n*.11919477979462+i*.95053215224966;return e=e||Ft.whitepoint[2].E,[l*e[0],a*e[1],u*e[2]]};const Lg={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(r,e,t){var n,i,l,a,u,h,f,g,m,_,v,x,E;if(l=r[0],a=r[1],u=r[2],l===0)return[0,0,0];var C=.0011070564598794539;return e=e||"D65",t=t||2,m=Ft.whitepoint[t][e][0],_=Ft.whitepoint[t][e][1],v=Ft.whitepoint[t][e][2],x=4*m/(m+15*_+3*v),E=9*_/(m+15*_+3*v),n=a/(13*l)+x||0,i=u/(13*l)+E||0,f=l>8?_*Math.pow((l+16)/116,3):_*l*C,h=f*9*n/(4*i)||0,g=f*(12-3*n-20*i)/(4*i)||0,[h,f,g]}};Ft.luv=function(r,e,t){var n,i,l,a,u,h,f,g,m,_,v,x,E,C=.008856451679035631,S=903.2962962962961;e=e||"D65",t=t||2,m=Ft.whitepoint[t][e][0],_=Ft.whitepoint[t][e][1],v=Ft.whitepoint[t][e][2],x=4*m/(m+15*_+3*v),E=9*_/(m+15*_+3*v),h=r[0],f=r[1],g=r[2],n=4*h/(h+15*f+3*g)||0,i=9*f/(h+15*f+3*g)||0;var T=f/_;return l=T<=C?S*T:116*Math.pow(T,1/3)-16,a=13*l*(n-x),u=13*l*(i-E),[l,a,u]};var nv={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(r){var e=r[0],t=r[1],n=r[2],i,l,a;return a=n/360*2*Math.PI,i=t*Math.cos(a),l=t*Math.sin(a),[e,i,l]},xyz:function(r){return Lg.xyz(nv.luv(r))}};Lg.lchuv=function(r){var e=r[0],t=r[1],n=r[2],i=Math.sqrt(t*t+n*n),l=Math.atan2(n,t),a=l*360/2/Math.PI;return a<0&&(a+=360),[e,i,a]};Ft.lchuv=function(r){return Lg.lchuv(Ft.luv(r))};const E0={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var C0={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function QC(r){var g,m;var e,t=[],n=1,i;if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(r=String(r).toLowerCase(),E0[r])t=E0[r].slice(),i="rgb";else if(r==="transparent")n=0,i="rgb",t=[0,0,0];else if(r[0]==="#"){var l=r.slice(1),a=l.length,u=a<=4;n=1,u?(t=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],a===4&&(n=parseInt(l[3]+l[3],16)/255)):(t=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],a===8&&(n=parseInt(l[6]+l[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),i="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(r)){var h=e[1];i=h.replace(/a$/,"");var f=i==="cmyk"?4:i==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=t.shift()),t=t.map(function(_,v){if(_[_.length-1]==="%")return _=parseFloat(_)/100,v===3?_:i==="rgb"?_*255:i[0]==="h"||i[0]==="l"&&!v?_*100:i==="lab"?_*125:i==="lch"?v<2?_*150:_*360:i[0]==="o"&&!v?_:i==="oklab"?_*.4:i==="oklch"?v<2?_*.4:_*360:_;if(i[v]==="h"||v===2&&i[i.length-1]==="h"){if(C0[_]!==void 0)return C0[_];if(_.endsWith("deg"))return parseFloat(_);if(_.endsWith("turn"))return parseFloat(_)*360;if(_.endsWith("grad"))return parseFloat(_)*360/400;if(_.endsWith("rad"))return parseFloat(_)*180/Math.PI}return _==="none"?0:parseFloat(_)}),n=t.length>f?t.pop():1}else/[0-9](?:\s|\/|,)/.test(r)&&(t=r.match(/([0-9]+)/g).map(function(_){return parseFloat(_)}),i=((m=(g=r.match(/([a-z])/ig))==null?void 0:g.join(""))==null?void 0:m.toLowerCase())||"rgb");return{space:i,values:t,alpha:n}}const ef={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100,i,l,a,u,h,f=0;if(t===0)return h=n*255,[h,h,h];for(l=n<.5?n*(1+t):n+t-n*t,i=2*n-l,u=[0,0,0];f<3;)a=e+1/3*-(f-1),a<0?a++:a>1&&a--,h=6*a<1?i+(l-i)*6*a:2*a<1?l:3*a<2?i+(l-i)*(2/3-a)*6:i,u[f++]=h*255;return u}};aa.hsl=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,i=Math.min(e,t,n),l=Math.max(e,t,n),a=l-i,u,h,f;return l===i?u=0:e===l?u=(t-n)/a:t===l?u=2+(n-e)/a:n===l&&(u=4+(e-t)/a),u=Math.min(u*60,360),u<0&&(u+=360),f=(i+l)/2,l===i?h=0:f<=.5?h=a/(l+i):h=a/(2-l-i),[u,h*100,f*100]};function JC(r){Array.isArray(r)&&r.raw&&(r=String.raw(...arguments)),r instanceof Number&&(r=+r);var e,t=QC(r);if(!t.space)return[];const n=t.space[0]==="h"?ef.min:aa.min,i=t.space[0]==="h"?ef.max:aa.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],n[0]),i[0]),e[1]=Math.min(Math.max(t.values[1],n[1]),i[1]),e[2]=Math.min(Math.max(t.values[2],n[2]),i[2]),t.space[0]==="h"&&(e=ef.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}const kg=[NaN,NaN,NaN,0];function eS(r){return typeof r=="string"?r:Mg(r)}const tS=1024,Wl={};let tf=0;function nS(r){if(r.length===4)return r;const e=r.slice();return e[3]=1,e}function S0(r){const e=Ft.lchuv(aa.xyz(r));return e[3]=r[3],e}function iS(r){const e=Ft.rgb(nv.xyz(r));return e[3]=r[3],e}function Fg(r){if(r==="none")return kg;if(Wl.hasOwnProperty(r))return Wl[r];if(tf>=tS){let t=0;for(const n in Wl)t++&3||(delete Wl[n],--tf)}const e=JC(r);if(e.length!==4)throw new Error('failed to parse "'+r+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+r+'" as color');return iv(e),Wl[r]=e,++tf,e}function ua(r){return Array.isArray(r)?r:Fg(r)}function iv(r){return r[0]=rt(r[0]+.5|0,0,255),r[1]=rt(r[1]+.5|0,0,255),r[2]=rt(r[2]+.5|0,0,255),r[3]=rt(r[3],0,1),r}function Mg(r){let e=r[0];e!=(e|0)&&(e=e+.5|0);let t=r[1];t!=(t|0)&&(t=t+.5|0);let n=r[2];n!=(n|0)&&(n=n+.5|0);const i=r[3]===void 0?1:Math.round(r[3]*1e3)/1e3;return"rgba("+e+","+t+","+n+","+i+")"}const Qr=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",rS=Qr.includes("firefox"),sS=Qr.includes("safari")&&!Qr.includes("chrom");sS&&(Qr.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Qr));const oS=Qr.includes("webkit")&&!Qr.includes("edge"),rv=Qr.includes("macintosh"),sv=typeof devicePixelRatio<"u"?devicePixelRatio:1,ov=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,lv=typeof Image<"u"&&Image.prototype.decode,av=function(){let r=!1;try{const e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return r}();function ut(r,e,t,n){let i;return t&&t.length?i=t.shift():ov?i=new OffscreenCanvas(r||300,e||300):i=document.createElement("canvas"),r&&(i.width=r),e&&(i.height=e),i.getContext("2d",n)}let nf;function Tc(){return nf||(nf=ut(1,1)),nf}function Ds(r){const e=r.canvas;e.width=1,e.height=1,r.clearRect(0,0,1,1)}function T0(r,e){const t=e.parentNode;t&&t.replaceChild(r,e)}function lS(r){for(;r.lastChild;)r.lastChild.remove()}function aS(r,e){const t=r.childNodes;for(let n=0;;++n){const i=t[n],l=e[n];if(!i&&!l)break;if(i!==l){if(!i){r.appendChild(l);continue}if(!l){r.removeChild(i),--n;continue}r.insertBefore(l,i)}}}function uS(r,e,t){const n=r;let i=!0,l=!1,a=!1;const u=[wc(n,xe.LOAD,function(){a=!0,l||e()})];return n.src&&lv?(l=!0,n.decode().then(function(){i&&e()}).catch(function(h){i&&(a?e():t())})):u.push(wc(n,xe.ERROR,t)),function(){i=!1,u.forEach(Xe)}}function cS(r,e){return new Promise((t,n)=>{function i(){a(),t(r)}function l(){a(),n(new Error("Image load error"))}function a(){r.removeEventListener("load",i),r.removeEventListener("error",l)}r.addEventListener("load",i),r.addEventListener("error",l)})}function hS(r,e){return e&&(r.src=e),r.src&&lv?new Promise((t,n)=>r.decode().then(()=>t(r)).catch(i=>r.complete&&r.width?t(r):n(i))):cS(r)}class dS{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const i=rf(e,t,n);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,n){const i=rf(e,t,n);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,n,i,l){const a=rf(e,t,n),u=a in this.cache_;this.cache_[a]=i,l&&(i.getImageState()===ke.IDLE&&i.load(),i.getImageState()===ke.LOADING?i.ready().then(()=>{this.patternCache_[a]=Tc().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=Tc().createPattern(i.getImage(1),"repeat")),u||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function rf(r,e,t){const n=t?ua(t):"null";return e+":"+r+":"+n}const Ri=new dS;let Ul=null;class fS extends Vc{constructor(e,t,n,i,l){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=l,this.imageState_=i===void 0?ke.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ke.LOADED){Ul||(Ul=ut(1,1,void 0,{willReadFrequently:!0})),Ul.drawImage(this.image_,0,0);try{Ul.getImageData(0,0,1,1),this.tainted_=!1}catch{Ul=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(xe.CHANGE)}handleImageError_(){this.imageState_=ke.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ke.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=ut(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ke.IDLE){this.image_||this.initializeImage_(),this.imageState_=ke.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&hS(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ke.LOADED)return;const t=this.image_,n=ut(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=n.canvas;n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=eS(this.color_),n.fillRect(0,0,i.width/e,i.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===ke.LOADED||this.imageState_===ke.ERROR)e();else{const t=()=>{(this.imageState_===ke.LOADED||this.imageState_===ke.ERROR)&&(this.removeEventListener(xe.CHANGE,t),e())};this.addEventListener(xe.CHANGE,t)}})),this.ready_}}function Ag(r,e,t,n,i,l){let a=e===void 0?void 0:Ri.get(e,t,i);return a||(a=new fS(r,r&&"src"in r?r.src||void 0:e,t,n,i),Ri.set(e,t,i,a,l)),l&&a&&!Ri.getPattern(e,t,i)&&Ri.set(e,t,i,a,l),a}class Jr{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Jr({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=Ag(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===ke.IDLE&&t.load(),t.getImageState()===ke.LOADING&&(this.patternImage_=t)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function Rc(r,e,t,n,i,l,a){let u,h;const f=(t-e)/n;if(f===1)u=e;else if(f===2)u=e,h=i;else if(f!==0){let g=r[e],m=r[e+1],_=0;const v=[0];for(let C=e+n;C<t;C+=n){const S=r[C],T=r[C+1];_+=Math.sqrt((S-g)*(S-g)+(T-m)*(T-m)),v.push(_),g=S,m=T}const x=i*_,E=$E(v,x);E<0?(h=(x-v[-E-2])/(v[-E-1]-v[-E-2]),u=e+(-E-2)*n):u=e+E*n}a=a>1?a:2,l=l||new Array(a);for(let g=0;g<a;++g)l[g]=u===void 0?NaN:h===void 0?r[u+g]:In(r[u+g],r[u+n+g],h);return l}function Of(r,e,t,n,i,l){if(t==e)return null;let a;if(i<r[e+n-1])return l?(a=r.slice(e,e+n),a[n-1]=i,a):null;if(r[t-1]<i)return l?(a=r.slice(t-n,t),a[n-1]=i,a):null;if(i==r[e+n-1])return r.slice(e,e+n);let u=e/n,h=t/n;for(;u<h;){const _=u+h>>1;i<r[(_+1)*n-1]?h=_:u=_+1}const f=r[u*n-1];if(i==f)return r.slice((u-1)*n,(u-1)*n+n);const g=r[(u+1)*n-1],m=(i-f)/(g-f);a=[];for(let _=0;_<n-1;++_)a.push(In(r[(u-1)*n+_],r[u*n+_],m));return a.push(i),a}function gS(r,e,t,n,i,l,a){if(a)return Of(r,e,t[t.length-1],n,i,l);let u;if(i<r[n-1])return l?(u=r.slice(0,n),u[n-1]=i,u):null;if(r[r.length-1]<i)return l?(u=r.slice(r.length-n),u[n-1]=i,u):null;for(let h=0,f=t.length;h<f;++h){const g=t[h];if(e!=g){if(i<r[e+n-1])return null;if(i<=r[g-1])return Of(r,e,g,n,i,!1);e=g}}return null}function uv(r,e,t,n){let i=r[e],l=r[e+1],a=0;for(let u=e+n;u<t;u+=n){const h=r[u],f=r[u+1];a+=Math.sqrt((h-i)*(h-i)+(f-l)*(f-l)),i=h,l=f}return a}class ki extends ns{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Li(this.flatCoordinates,e),this.changed()}clone(){const e=new ki(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,i){return i<bs(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(xg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Eg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,i))}forEachSegment(e){return qy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,Of(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Xr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Rc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return uv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Qc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new ki(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Jc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qc(this.flatCoordinates,0,e,this.stride),this.changed()}}class Zr{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Zr({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function R0(r){return r[0]>0&&r[1]>0}function pS(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function Xt(r,e){return Array.isArray(r)?r:(e===void 0?e=[r,r]:(e[0]=r,e[1]=r),e)}class eh{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Xt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new eh({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Le()}getImage(e){return Le()}getHitDetectionImage(){return Le()}getPixelRatio(e){return 1}getImageState(){return Le()}getImageSize(){return Le()}getOrigin(){return Le()}getSize(){return Le()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Xt(e)}listenImageChange(e){Le()}load(){Le()}unlistenImageChange(e){Le()}ready(){return Promise.resolve()}}function Ii(r){return r?Array.isArray(r)?Mg(r):typeof r=="object"&&"src"in r?mS(r):r:null}function mS(r){if(!r.offset||!r.size)return Ri.getPattern(r.src,"anonymous",r.color);const e=r.src+":"+r.offset,t=Ri.getPattern(e,void 0,r.color);if(t)return t;const n=Ri.get(r.src,"anonymous",null);if(n.getImageState()!==ke.LOADED)return null;const i=ut(r.size[0],r.size[1]);return i.drawImage(n.getImage(1),r.offset[0],r.offset[1],r.size[0],r.size[1],0,0,r.size[0],r.size[1]),Ag(i.canvas,e,void 0,ke.LOADED,r.color,!0),Ri.getPattern(e,void 0,r.color)}const Ju="ol-hidden",th="ol-unselectable",Dg="ol-control",I0="ol-collapsed",_S=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),P0=["style","variant","weight","size","lineHeight","family"],cv=function(r){const e=r.match(_S);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,i=P0.length;n<i;++n){const l=e[n+1];l!==void 0&&(t[P0[n]]=l)}return t.families=t.family.split(/,\s?/),t},hv="10px sans-serif",cn="#000",Ko="round",tr=[],nr=0,Ho="round",ca=10,ha="#000",da="center",Ic="middle",Ls=[0,0,0,0],fa=1,Hi=new Ai;let Ro=null,Nf;const zf={},yS=function(){const e="32px ",t=["monospace","serif"],n=t.length,i="wmytzilWMYTZIL@#/&?$%10";let l,a;function u(f,g,m){let _=!0;for(let v=0;v<n;++v){const x=t[v];if(a=Pc(f+" "+g+" "+e+x,i),m!=x){const E=Pc(f+" "+g+" "+e+m+","+x,i);_=_&&E!=a}}return!!_}function h(){let f=!0;const g=Hi.getKeys();for(let m=0,_=g.length;m<_;++m){const v=g[m];if(Hi.get(v)<100){const[x,E,C]=v.split(`
`);u(x,E,C)?(Ta(zf),Ro=null,Nf=void 0,Hi.set(v,100)):(Hi.set(v,Hi.get(v)+1,!0),f=!1)}}f&&(clearInterval(l),l=void 0)}return function(f){const g=cv(f);if(!g)return;const m=g.families;for(let _=0,v=m.length;_<v;++_){const x=m[_],E=g.style+`
`+g.weight+`
`+x;Hi.get(E)===void 0&&(Hi.set(E,100,!0),u(g.style,g.weight,x)||(Hi.set(E,0,!0),l===void 0&&(l=setInterval(h,32))))}}}(),vS=function(){let r;return function(e){let t=zf[e];if(t==null){if(ov){const n=cv(e),i=dv(e,"g");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);zf[e]=t}return t}}();function dv(r,e){return Ro||(Ro=ut(1,1)),r!=Nf&&(Ro.font=r,Nf=Ro.font),Ro.measureText(e)}function Pc(r,e){return dv(r,e).width}function L0(r,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((i,l)=>Math.max(i,Pc(r,l)),0);return t[e]=n,n}function xS(r,e){const t=[],n=[],i=[];let l=0,a=0,u=0,h=0;for(let f=0,g=e.length;f<=g;f+=2){const m=e[f];if(m===`
`||f===g){l=Math.max(l,a),i.push(a),a=0,u+=h,h=0;continue}const _=e[f+1]||r.font,v=Pc(_,m);t.push(v),a+=v;const x=vS(_);n.push(x),h=Math.max(h,x)}return{width:l,height:u,widths:t,heights:n,lineWidths:i}}function wS(r,e,t,n,i,l,a,u,h,f,g){r.save(),t!==1&&(r.globalAlpha===void 0?r.globalAlpha=m=>m.globalAlpha*=t:r.globalAlpha*=t),e&&r.transform.apply(r,e),n.contextInstructions?(r.translate(h,f),r.scale(g[0],g[1]),ES(n,r)):g[0]<0||g[1]<0?(r.translate(h,f),r.scale(g[0],g[1]),r.drawImage(n,i,l,a,u,0,0,a,u)):r.drawImage(n,i,l,a,u,h,f,a*g[0],u*g[1]),r.restore()}function ES(r,e){const t=r.contextInstructions;for(let n=0,i=t.length;n<i;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class La extends eh{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ke.LOADING:ke.LOADED,this.imageState_===ke.LOADING&&this.ready().then(()=>this.imageState_=ke.LOADED),this.render()}clone(){const e=this.getScale(),t=new La({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.canvases_[e];if(!t){const n=this.renderOptions_,i=ut(n.size*e,n.size*e);this.draw_(n,i,e),t=i.canvas,this.canvases_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,l=this.radius2_===void 0?i:this.radius2_;if(i<l){const j=i;i=l,l=j}const a=this.radius2_===void 0?this.points_:this.points_*2,u=2*Math.PI/a,h=l*Math.sin(u),f=Math.sqrt(l*l-h*h),g=i-f,m=Math.sqrt(h*h+g*g),_=m/h;if(e==="miter"&&_<=n)return _*t;const v=t/2/_,x=t/2*(g/m),C=Math.sqrt((i+v)*(i+v)+x*x)-i;if(this.radius2_===void 0||e==="bevel")return C*2;const S=i*Math.sin(u),T=Math.sqrt(i*i-S*S),I=l-T,k=Math.sqrt(S*S+I*I)/S;if(k<=n){const j=k*t/2-l-i;return 2*Math.max(C,j)}return C*2}createRenderOptions(){let e=Ko,t=Ho,n=0,i=null,l=0,a,u=0;this.stroke_&&(a=Ii(this.stroke_.getColor()??ha),u=this.stroke_.getWidth()??fa,i=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Ho,e=this.stroke_.getLineCap()??Ko,n=this.stroke_.getMiterLimit()??ca);const h=this.calculateLineJoinSize_(t,u,n),f=Math.max(this.radius,this.radius2_||0),g=Math.ceil(2*f+h);return{strokeStyle:a,strokeWidth:u,size:g,lineCap:e,lineDash:i,lineDashOffset:l,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=cn),t.fillStyle=Ii(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),i=0;typeof n=="string"&&(n=ua(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0&&(t=ut(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const i=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const l=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let u=0;u<t;u++){const h=l+u*a,f=u%2===0?n:i;e.lineTo(f*Math.cos(h),f*Math.sin(h))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=cn,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class el extends La{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new el({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class fn{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=k0,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new fn({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=k0,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function CS(r){let e;if(typeof r=="function")e=r;else{let t;Array.isArray(r)?t=r:(be(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[r]),e=function(){return t}}return e}let sf=null;function fv(r,e){if(!sf){const t=new Jr({color:"rgba(255,255,255,0.4)"}),n=new Zr({color:"#3399CC",width:1.25});sf=[new fn({image:new el({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return sf}function gv(){const r={},e=[255,255,255,1],t=[0,153,255,1],n=3;return r.Polygon=[new fn({fill:new Jr({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new fn({stroke:new Zr({color:e,width:n+2})}),new fn({stroke:new Zr({color:t,width:n})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new fn({image:new el({radius:n*2,fill:new Jr({color:t}),stroke:new Zr({color:e,width:n/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function k0(r){return r.getGeometry()}const SS="#333";class nh{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Xt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Jr({color:SS}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new nh({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Xt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Ve={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class pv extends Ai{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ve.OPACITY]=e.opacity!==void 0?e.opacity:1,be(typeof t[Ve.OPACITY]=="number","Layer opacity must be a number"),t[Ve.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ve.Z_INDEX]=e.zIndex,t[Ve.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ve.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ve.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ve.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=rt(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Le()}getLayerStatesArray(e){return Le()}getExtent(){return this.get(Ve.EXTENT)}getMaxResolution(){return this.get(Ve.MAX_RESOLUTION)}getMinResolution(){return this.get(Ve.MIN_RESOLUTION)}getMinZoom(){return this.get(Ve.MIN_ZOOM)}getMaxZoom(){return this.get(Ve.MAX_ZOOM)}getOpacity(){return this.get(Ve.OPACITY)}getSourceState(){return Le()}getVisible(){return this.get(Ve.VISIBLE)}getZIndex(){return this.get(Ve.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ve.EXTENT,e)}setMaxResolution(e){this.set(Ve.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ve.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ve.MAX_ZOOM,e)}setMinZoom(e){this.set(Ve.MIN_ZOOM,e)}setOpacity(e){be(typeof e=="number","Layer opacity must be a number"),this.set(Ve.OPACITY,e)}setVisible(e){this.set(Ve.VISIBLE,e)}setZIndex(e){this.set(Ve.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const lt={ANIMATING:0,INTERACTING:1},ni={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},mv=42,Og=256;function F0(r,e,t){return function(n,i,l,a,u){if(!n)return;if(!i&&!e)return n;const h=e?0:l[0]*i,f=e?0:l[1]*i,g=u?u[0]:0,m=u?u[1]:0;let _=r[0]+h/2+g,v=r[2]-h/2+g,x=r[1]+f/2+m,E=r[3]-f/2+m;_>v&&(_=(v+_)/2,v=_),x>E&&(x=(E+x)/2,E=x);let C=rt(n[0],_,v),S=rt(n[1],x,E);if(a&&t&&i){const T=30*i;C+=-T*Math.log(1+Math.max(0,_-n[0])/T)+T*Math.log(1+Math.max(0,n[0]-v)/T),S+=-T*Math.log(1+Math.max(0,x-n[1])/T)+T*Math.log(1+Math.max(0,n[1]-E)/T)}return[C,S]}}function TS(r){return r}function Ng(r,e,t,n){const i=We(e)/t[0],l=Bt(e)/t[1];return n?Math.min(r,Math.max(i,l)):Math.min(r,Math.min(i,l))}function zg(r,e,t){let n=Math.min(r,e);const i=50;return n*=Math.log(1+i*Math.max(0,r/e-1))/i+1,t&&(n=Math.max(n,t),n/=Math.log(1+i*Math.max(0,t/r-1))/i+1),rt(n,t/2,e*2)}function RS(r,e,t,n){return e=e!==void 0?e:!0,function(i,l,a,u){if(i!==void 0){const h=r[0],f=r[r.length-1],g=t?Ng(h,t,a,n):h;if(u)return e?zg(i,g,f):rt(i,f,g);const m=Math.min(g,i),_=Math.floor(og(r,m,l));return r[_]>g&&_<r.length-1?r[_+1]:r[_]}}}function IS(r,e,t,n,i,l){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(a,u,h,f){if(a!==void 0){const g=i?Ng(e,i,h,l):e;if(f)return n?zg(a,g,t):rt(a,t,g);const m=1e-9,_=Math.ceil(Math.log(e/g)/Math.log(r)-m),v=-u*(.5-m)+.5,x=Math.min(g,a),E=Math.floor(Math.log(e/x)/Math.log(r)+v),C=Math.max(_,E),S=e/Math.pow(r,C);return rt(S,t,g)}}}function M0(r,e,t,n,i){return t=t!==void 0?t:!0,function(l,a,u,h){if(l!==void 0){const f=n?Ng(r,n,u,i):r;return!t||!h?rt(l,e,f):zg(l,f,e)}}}function bg(r){if(r!==void 0)return 0}function A0(r){if(r!==void 0)return r}function PS(r){const e=2*Math.PI/r;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function LS(r){const e=pc(5);return function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t}}function _v(r){return Math.pow(r,3)}function tl(r){return 1-_v(1-r)}function kS(r){return 3*r*r-2*r*r*r}function FS(r){return r}const of=0;class Ti extends Ai{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=yg(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&PC(),e.center&&(e.center=it(e.center,this.projection_)),e.extent&&(e.extent=qi(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const u in ni)delete t[u];this.setProperties(t,!0);const n=AS(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const i=MS(e),l=n.constraint,a=DS(e);this.constraints_={center:i,resolution:l,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const i=e||[0,0,0,0];t=t||[0,0,0,0];const l=this.getResolution(),a=l/2*(i[3]-t[3]+t[1]-i[1]),u=l/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([n[0]+a,n[1]-u])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let i=arguments[n];i.center&&(i=Object.assign({},i),i.center=it(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=it(i.anchor,this.getProjection())),t[n]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const g=arguments[i];g.center&&this.setCenterInternal(g.center),g.zoom!==void 0?this.setZoom(g.zoom):g.resolution&&this.setResolution(g.resolution),g.rotation!==void 0&&this.setRotation(g.rotation)}if(i===t){n&&ec(n,!0);return}let l=Date.now(),a=this.targetCenter_.slice(),u=this.targetResolution_,h=this.targetRotation_;const f=[];for(;i<t;++i){const g=arguments[i],m={start:l,complete:!1,anchor:g.anchor,duration:g.duration!==void 0?g.duration:1e3,easing:g.easing||kS,callback:n};if(g.center&&(m.sourceCenter=a,m.targetCenter=g.center.slice(),a=m.targetCenter),g.zoom!==void 0?(m.sourceResolution=u,m.targetResolution=this.getResolutionForZoom(g.zoom),u=m.targetResolution):g.resolution&&(m.sourceResolution=u,m.targetResolution=g.resolution,u=m.targetResolution),g.rotation!==void 0){m.sourceRotation=h;const _=Oo(g.rotation-h+Math.PI,2*Math.PI)-Math.PI;m.targetRotation=h+_,h=m.targetRotation}OS(m)?m.complete=!0:l+=m.duration,f.push(m)}this.animations_.push(f),this.setHint(lt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[lt.ANIMATING]>0}getInteracting(){return this.hints_[lt.INTERACTING]>0}cancelAnimations(){this.setHint(lt.ANIMATING,-this.hints_[lt.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const i=this.animations_[t];if(i[0].callback&&ec(i[0].callback,!1),!e)for(let l=0,a=i.length;l<a;++l){const u=i[l];if(!u.complete){e=u.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let l=!0;for(let a=0,u=i.length;a<u;++a){const h=i[a];if(h.complete)continue;const f=e-h.start;let g=h.duration>0?f/h.duration:1;g>=1?(h.complete=!0,g=1):l=!1;const m=h.easing(g);if(h.sourceCenter){const _=h.sourceCenter[0],v=h.sourceCenter[1],x=h.targetCenter[0],E=h.targetCenter[1];this.nextCenter_=h.targetCenter;const C=_+m*(x-_),S=v+m*(E-v);this.targetCenter_=[C,S]}if(h.sourceResolution&&h.targetResolution){const _=m===1?h.targetResolution:h.sourceResolution+m*(h.targetResolution-h.sourceResolution);if(h.anchor){const v=this.getViewportSize_(this.getRotation()),x=this.constraints_.resolution(_,0,v,!0);this.targetCenter_=this.calculateCenterZoom(x,h.anchor)}this.nextResolution_=h.targetResolution,this.targetResolution_=_,this.applyTargetState_(!0)}if(h.sourceRotation!==void 0&&h.targetRotation!==void 0){const _=m===1?Oo(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+m*(h.targetRotation-h.sourceRotation);if(h.anchor){const v=this.constraints_.rotation(_,!0);this.targetCenter_=this.calculateCenterRotate(v,h.anchor)}this.nextRotation_=h.targetRotation,this.targetRotation_=_}if(this.applyTargetState_(!0),t=!0,!h.complete)break}if(l){this.animations_[n]=null,this.setHint(lt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&ec(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const i=this.getCenterInternal();return i!==void 0&&(n=[i[0]-t[0],i[1]-t[1]],pg(n,e-this.getRotation()),CC(n,t)),n}calculateCenterZoom(e,t){let n;const i=this.getCenterInternal(),l=this.getResolution();if(i!==void 0&&l!==void 0){const a=t[0]-e*(t[0]-i[0])/l,u=t[1]-e*(t[1]-i[1])/l;n=[a,u]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],i=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Yo(e,this.getProjection())}getCenterInternal(){return this.get(ni.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return $c(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();be(t,"The view center is not defined");const n=this.getResolution();be(n!==void 0,"The view resolution is not defined");const i=this.getRotation();return be(i!==void 0,"The view rotation is not defined"),kf(t,n,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ni.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(qi(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=We(e)/t[0],i=Bt(e)/t[1];return Math.max(n,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(t/n)/Math.log(e);return function(l){return t/Math.pow(e,l*i)}}getRotation(){return this.get(ni.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,l=Math.log(n/i)/t;return function(a){return Math.log(n/a)/t/l}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const l=this.padding_;if(l){const a=this.getViewportSizeMinusPadding_();i=lf(i,this.getViewportSize_(),[a[0]/2+l[3],a[1]/2+l[0]],t,n)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,i;if(this.resolutions_){const l=og(this.resolutions_,e,1);t=l,n=this.resolutions_[l],l==this.resolutions_.length-1?i=2:i=n/this.resolutions_[l+1]}else n=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(n/e)/Math.log(i)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const n=rt(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,rt(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(be(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){be(!Kc(e),"Cannot fit empty extent provided as `geometry`");const i=qi(e,this.getProjection());n=w0(i)}else if(e.getType()==="Circle"){const i=qi(e.getExtent(),this.getProjection());n=w0(i),n.rotate(this.getRotation(),or(i))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),i=Math.sin(-t),l=e.getFlatCoordinates(),a=e.getStride();let u=1/0,h=1/0,f=-1/0,g=-1/0;for(let m=0,_=l.length;m<_;m+=a){const v=l[m]*n-l[m+1]*i,x=l[m]*i+l[m+1]*n;u=Math.min(u,v),h=Math.min(h,x),f=Math.max(f,v),g=Math.max(g,x)}return[u,h,f,g]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],l=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const u=this.rotatedExtentForGeometry(e);let h=this.getResolutionForExtentInternal(u,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);h=isNaN(h)?a:Math.max(h,a),h=this.getConstrainedResolution(h,l?0:1);const f=this.getRotation(),g=Math.sin(f),m=Math.cos(f),_=or(u);_[0]+=(i[1]-i[3])/2*h,_[1]+=(i[0]-i[2])/2*h;const v=_[0]*m-_[1]*g,x=_[1]*m+_[0]*g,E=this.getConstrainedCenter([v,x],h),C=t.callback?t.callback:Uo;t.duration!==void 0?this.animateInternal({resolution:h,center:E,duration:t.duration,easing:t.easing},C):(this.targetResolution_=h,this.targetCenter_=E,this.applyTargetState_(!1,!0),ec(C,!0))}centerOn(e,t,n){this.centerOnInternal(it(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(lf(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,i){let l;const a=this.padding_;if(a&&e){const u=this.getViewportSizeMinusPadding_(-n),h=lf(e,i,[u[0]/2+a[3],u[1]/2+a[0]],t,n);l=[e[0]-h[0],e[1]-h[1]]}return l}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Yo(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&it(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*e,0,i,n);t&&(this.targetCenter_=this.calculateCenterZoom(l,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=it(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&it(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,n),l=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,l,n),u=this.constraints_.center(this.targetCenter_,a,l,n,this.calculateCenterShift(this.targetCenter_,a,i,l));this.get(ni.ROTATION)!==i&&this.set(ni.ROTATION,i),this.get(ni.RESOLUTION)!==a&&(this.set(ni.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!u||!this.get(ni.CENTER)||!hi(this.get(ni.CENTER),u))&&this.set(ni.CENTER,u),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const i=t||0,l=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(l),u=this.constraints_.resolution(this.targetResolution_,i,a),h=this.constraints_.center(this.targetCenter_,u,a,!1,this.calculateCenterShift(this.targetCenter_,u,l,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=u,this.targetRotation_=l,this.targetCenter_=h,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==u||this.getRotation()!==l||!this.getCenterInternal()||!hi(this.getCenterInternal(),h))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:h,resolution:u,duration:e,easing:tl,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(lt.INTERACTING,1)}endInteraction(e,t,n){n=n&&it(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(lt.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function ec(r,e){setTimeout(function(){r(e)},0)}function MS(r){if(r.extent!==void 0){const t=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return F0(r.extent,r.constrainOnlyCenter,t)}const e=yg(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,F0(t,!1,!1)}return TS}function AS(r){let e,t,n,a=r.minZoom!==void 0?r.minZoom:of,u=r.maxZoom!==void 0?r.maxZoom:28;const h=r.zoomFactor!==void 0?r.zoomFactor:2,f=r.multiWorld!==void 0?r.multiWorld:!1,g=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,m=r.showFullExtent!==void 0?r.showFullExtent:!1,_=yg(r.projection,"EPSG:3857"),v=_.getExtent();let x=r.constrainOnlyCenter,E=r.extent;if(!f&&!E&&_.isGlobal()&&(x=!1,E=v),r.resolutions!==void 0){const C=r.resolutions;t=C[a],n=C[u]!==void 0?C[u]:C[C.length-1],r.constrainResolution?e=RS(C,g,!x&&E,m):e=M0(t,n,g,!x&&E,m)}else{const S=(v?Math.max(We(v),Bt(v)):360*fg.degrees/_.getMetersPerUnit())/Og/Math.pow(2,of),T=S/Math.pow(2,28-of);t=r.maxResolution,t!==void 0?a=0:t=S/Math.pow(h,a),n=r.minResolution,n===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?n=t/Math.pow(h,u):n=S/Math.pow(h,u):n=T),u=a+Math.floor(Math.log(t/n)/Math.log(h)),n=t/Math.pow(h,u-a),r.constrainResolution?e=IS(h,t,n,g,!x&&E,m):e=M0(t,n,g,!x&&E,m)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:a,zoomFactor:h}}function DS(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const t=r.constrainRotation;return t===void 0||t===!0?LS():t===!1?A0:typeof t=="number"?PS(t):A0}return bg}function OS(r){return!(r.sourceCenter&&r.targetCenter&&!hi(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function lf(r,e,t,n,i){const l=Math.cos(-i);let a=Math.sin(-i),u=r[0]*l-r[1]*a,h=r[1]*l+r[0]*a;u+=(e[0]/2-t[0])*n,h+=(t[1]-e[1]/2)*n,a=-a;const f=u*l-h*a,g=h*l+u*a;return[f,g]}class ih extends pv{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ve.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ve.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Xe(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Oe(e,xe.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof Ti?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let i;t.layerStatesArray?i=t.layerStatesArray.find(a=>a.layer===this):i=this.getLayerState();const l=this.getExtent();return Gg(i,t.viewState)&&(!l||gt(l,t.extent))}getAttributions(e){var l;if(!this.isVisible(e))return[];const t=(l=this.getSource())==null?void 0:l.getAttributions();if(!t)return[];const n=e instanceof Ti?e.getViewStateAndExtent():e;let i=t(n);return Array.isArray(i)||(i=[i]),i}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Ve.MAP,e)}getMapInternal(){return this.get(Ve.MAP)}setMap(e){this.mapPrecomposeKey_&&(Xe(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Xe(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Oe(e,Un.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Oe(this,xe.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,n=this.getLayerState(!1);be(!t.some(i=>i.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(n)}setSource(e){this.set(Ve.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Gg(r,e){if(!r.visible)return!1;const t=e.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;const n=e.zoom;return n>r.minZoom&&n<=r.maxZoom}function yv(r,e,t=0,n=r.length-1,i=NS){for(;n>t;){if(n-t>600){const h=n-t+1,f=e-t+1,g=Math.log(h),m=.5*Math.exp(2*g/3),_=.5*Math.sqrt(g*m*(h-m)/h)*(f-h/2<0?-1:1),v=Math.max(t,Math.floor(e-f*m/h+_)),x=Math.min(n,Math.floor(e+(h-f)*m/h+_));yv(r,e,v,x,i)}const l=r[e];let a=t,u=n;for(Vl(r,t,e),i(r[n],l)>0&&Vl(r,t,n);a<u;){for(Vl(r,a,u),a++,u--;i(r[a],l)<0;)a++;for(;i(r[u],l)>0;)u--}i(r[t],l)===0?Vl(r,t,u):(u++,Vl(r,u,n)),u<=e&&(t=u+1),e<=u&&(n=u-1)}}function Vl(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}function NS(r,e){return r<e?-1:r>e?1:0}let vv=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!nc(e,t))return n;const i=this.toBBox,l=[];for(;t;){for(let a=0;a<t.children.length;a++){const u=t.children[a],h=t.leaf?i(u):u;nc(e,h)&&(t.leaf?n.push(u):uf(e,h)?this._all(u,n):l.push(u))}t=l.pop()}return n}collides(e){let t=this.data;if(!nc(e,t))return!1;const n=[];for(;t;){for(let i=0;i<t.children.length;i++){const l=t.children[i],a=t.leaf?this.toBBox(l):l;if(nc(e,a)){if(t.leaf||uf(e,a))return!0;n.push(l)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Io([]),this}remove(e,t){if(!e)return this;let n=this.data;const i=this.toBBox(e),l=[],a=[];let u,h,f;for(;n||l.length;){if(n||(n=l.pop(),h=l[l.length-1],u=a.pop(),f=!0),n.leaf){const g=zS(e,n.children,t);if(g!==-1)return n.children.splice(g,1),l.push(n),this._condense(l),this}!f&&!n.leaf&&uf(n,i)?(l.push(n),a.push(u),u=0,h=n,n=n.children[0]):h?(u++,n=h.children[u],f=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,i){const l=n-t+1;let a=this._maxEntries,u;if(l<=a)return u=Io(e.slice(t,n+1)),_o(u,this.toBBox),u;i||(i=Math.ceil(Math.log(l)/Math.log(a)),a=Math.ceil(l/Math.pow(a,i-1))),u=Io([]),u.leaf=!1,u.height=i;const h=Math.ceil(l/a),f=h*Math.ceil(Math.sqrt(a));D0(e,t,n,f,this.compareMinX);for(let g=t;g<=n;g+=f){const m=Math.min(g+f-1,n);D0(e,g,m,h,this.compareMinY);for(let _=g;_<=m;_+=h){const v=Math.min(_+h-1,m);u.children.push(this._build(e,_,v,i-1))}}return _o(u,this.toBBox),u}_chooseSubtree(e,t,n,i){for(;i.push(t),!(t.leaf||i.length-1===n);){let l=1/0,a=1/0,u;for(let h=0;h<t.children.length;h++){const f=t.children[h],g=af(f),m=jS(e,f)-g;m<a?(a=m,l=g<l?g:l,u=f):m===a&&g<l&&(l=g,u=f)}t=u||t.children[0]}return t}_insert(e,t,n){const i=n?e:this.toBBox(e),l=[],a=this._chooseSubtree(i,this.data,t,l);for(a.children.push(e),Kl(a,i);t>=0&&l[t].children.length>this._maxEntries;)this._split(l,t),t--;this._adjustParentBBoxes(i,l,t)}_split(e,t){const n=e[t],i=n.children.length,l=this._minEntries;this._chooseSplitAxis(n,l,i);const a=this._chooseSplitIndex(n,l,i),u=Io(n.children.splice(a,n.children.length-a));u.height=n.height,u.leaf=n.leaf,_o(n,this.toBBox),_o(u,this.toBBox),t?e[t-1].children.push(u):this._splitRoot(n,u)}_splitRoot(e,t){this.data=Io([e,t]),this.data.height=e.height+1,this.data.leaf=!1,_o(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let i,l=1/0,a=1/0;for(let u=t;u<=n-t;u++){const h=Yl(e,0,u,this.toBBox),f=Yl(e,u,n,this.toBBox),g=WS(h,f),m=af(h)+af(f);g<l?(l=g,i=u,a=m<a?m:a):g===l&&m<a&&(a=m,i=u)}return i||n-t}_chooseSplitAxis(e,t,n){const i=e.leaf?this.compareMinX:bS,l=e.leaf?this.compareMinY:GS,a=this._allDistMargin(e,t,n,i),u=this._allDistMargin(e,t,n,l);a<u&&e.children.sort(i)}_allDistMargin(e,t,n,i){e.children.sort(i);const l=this.toBBox,a=Yl(e,0,t,l),u=Yl(e,n-t,n,l);let h=tc(a)+tc(u);for(let f=t;f<n-t;f++){const g=e.children[f];Kl(a,e.leaf?l(g):g),h+=tc(a)}for(let f=n-t-1;f>=t;f--){const g=e.children[f];Kl(u,e.leaf?l(g):g),h+=tc(u)}return h}_adjustParentBBoxes(e,t,n){for(let i=n;i>=0;i--)Kl(t[i],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():_o(e[t],this.toBBox)}};function zS(r,e,t){if(!t)return e.indexOf(r);for(let n=0;n<e.length;n++)if(t(r,e[n]))return n;return-1}function _o(r,e){Yl(r,0,r.children.length,e,r)}function Yl(r,e,t,n,i){i||(i=Io(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let l=e;l<t;l++){const a=r.children[l];Kl(i,r.leaf?n(a):a)}return i}function Kl(r,e){return r.minX=Math.min(r.minX,e.minX),r.minY=Math.min(r.minY,e.minY),r.maxX=Math.max(r.maxX,e.maxX),r.maxY=Math.max(r.maxY,e.maxY),r}function bS(r,e){return r.minX-e.minX}function GS(r,e){return r.minY-e.minY}function af(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function tc(r){return r.maxX-r.minX+(r.maxY-r.minY)}function jS(r,e){return(Math.max(e.maxX,r.maxX)-Math.min(e.minX,r.minX))*(Math.max(e.maxY,r.maxY)-Math.min(e.minY,r.minY))}function WS(r,e){const t=Math.max(r.minX,e.minX),n=Math.max(r.minY,e.minY),i=Math.min(r.maxX,e.maxX),l=Math.min(r.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,l-n)}function uf(r,e){return r.minX<=e.minX&&r.minY<=e.minY&&e.maxX<=r.maxX&&e.maxY<=r.maxY}function nc(r,e){return e.minX<=r.maxX&&e.minY<=r.maxY&&e.maxX>=r.minX&&e.maxY>=r.minY}function Io(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function D0(r,e,t,n,i){const l=[e,t];for(;l.length;){if(t=l.pop(),e=l.pop(),t-e<=n)continue;const a=e+Math.ceil((t-e)/n/2)*n;yv(r,a,e,t,i),l.push(e,a,a,t)}}function O0(r,e,t,n){return t!==void 0&&n!==void 0?[t/r,n/e]:t!==void 0?t/r:n!==void 0?n/e:1}class ka extends eh{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,l=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:l,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let u=e.src;be(!(u!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(u===void 0||u.length===0)&&a&&(u=a.src||Se(a)),be(u!==void 0&&u.length>0,"A defined and non-empty `src` or `image` must be provided"),be(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let h;if(e.src!==void 0?h=ke.IDLE:a!==void 0&&("complete"in a?a.complete?h=a.src?ke.LOADED:ke.IDLE:h=ke.LOADING:h=ke.LOADED),this.color_=e.color!==void 0?ua(e.color):null,this.iconImage_=Ag(a,u,this.crossOrigin_,h,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let f,g;if(e.size)[f,g]=e.size;else{const m=this.getImage(1);if(m.width&&m.height)f=m.width,g=m.height;else if(m instanceof HTMLImageElement){this.initialOptions_=e;const _=()=>{if(this.unlistenImageChange(_),!this.initialOptions_)return;const v=this.iconImage_.getSize();this.setScale(O0(v[0],v[1],e.width,e.height))};this.listenImageChange(_);return}}f!==void 0&&this.setScale(O0(f,g,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new ka({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ke.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ke.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(xe.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(xe.CHANGE,e)}ready(){return this.iconImage_.ready()}}let Gs=0;const Qt=1<<Gs++,Me=1<<Gs++,hn=1<<Gs++,di=1<<Gs++,Os=1<<Gs++,Hl=1<<Gs++,ic=Math.pow(2,Gs)-1,jg={[Qt]:"boolean",[Me]:"number",[hn]:"string",[di]:"color",[Os]:"number[]",[Hl]:"size"},US=Object.keys(jg).map(Number).sort(Pi);function VS(r){return r in jg}function Zl(r){const e=[];for(const t of US)$l(r,t)&&e.push(jg[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function $l(r,e){return(r&e)===e}function Ar(r,e){return r===e}class xt{constructor(e,t){if(!VS(e))throw new Error(`literal expressions must have a specific type, got ${Zl(e)}`);this.type=e,this.value=t}}class BS{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function xv(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function Mt(r,e,t){switch(typeof r){case"boolean":{if(Ar(e,hn))return new xt(hn,r?"true":"false");if(!$l(e,Qt))throw new Error(`got a boolean, but expected ${Zl(e)}`);return new xt(Qt,r)}case"number":{if(Ar(e,Hl))return new xt(Hl,Xt(r));if(Ar(e,Qt))return new xt(Qt,!!r);if(Ar(e,hn))return new xt(hn,r.toString());if(!$l(e,Me))throw new Error(`got a number, but expected ${Zl(e)}`);return new xt(Me,r)}case"string":{if(Ar(e,di))return new xt(di,Fg(r));if(Ar(e,Qt))return new xt(Qt,!!r);if(!$l(e,hn))throw new Error(`got a string, but expected ${Zl(e)}`);return new xt(hn,r)}}if(!Array.isArray(r))throw new Error("expression must be an array or a primitive value");if(r.length===0)throw new Error("empty expression");if(typeof r[0]=="string")return tT(r,e,t);for(const n of r)if(typeof n!="number")throw new Error("expected an array of numbers");if(Ar(e,Hl)){if(r.length!==2)throw new Error(`expected an array of two values for a size, got ${r.length}`);return new xt(Hl,r)}if(Ar(e,di)){if(r.length===3)return new xt(di,[...r,1]);if(r.length===4)return new xt(di,r);throw new Error(`expected an array of 3 or 4 values for a color, got ${r.length}`)}if(!$l(e,Os))throw new Error(`got an array of numbers, but expected ${Zl(e)}`);return new xt(Os,r)}const V={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},XS={[V.Get]:Ce(Ie(1,1/0),N0),[V.Var]:Ce(Ie(1,1),YS),[V.Has]:Ce(Ie(1,1/0),N0),[V.Id]:Ce(KS,yo),[V.Concat]:Ce(Ie(2,1/0),je(hn)),[V.GeometryType]:Ce(HS,yo),[V.LineMetric]:Ce(yo),[V.Resolution]:Ce(yo),[V.Zoom]:Ce(yo),[V.Time]:Ce(yo),[V.Any]:Ce(Ie(2,1/0),je(Qt)),[V.All]:Ce(Ie(2,1/0),je(Qt)),[V.Not]:Ce(Ie(1,1),je(Qt)),[V.Equal]:Ce(Ie(2,2),je(ic)),[V.NotEqual]:Ce(Ie(2,2),je(ic)),[V.GreaterThan]:Ce(Ie(2,2),je(Me)),[V.GreaterThanOrEqualTo]:Ce(Ie(2,2),je(Me)),[V.LessThan]:Ce(Ie(2,2),je(Me)),[V.LessThanOrEqualTo]:Ce(Ie(2,2),je(Me)),[V.Multiply]:Ce(Ie(2,1/0),z0),[V.Coalesce]:Ce(Ie(2,1/0),z0),[V.Divide]:Ce(Ie(2,2),je(Me)),[V.Add]:Ce(Ie(2,1/0),je(Me)),[V.Subtract]:Ce(Ie(2,2),je(Me)),[V.Clamp]:Ce(Ie(3,3),je(Me)),[V.Mod]:Ce(Ie(2,2),je(Me)),[V.Pow]:Ce(Ie(2,2),je(Me)),[V.Abs]:Ce(Ie(1,1),je(Me)),[V.Floor]:Ce(Ie(1,1),je(Me)),[V.Ceil]:Ce(Ie(1,1),je(Me)),[V.Round]:Ce(Ie(1,1),je(Me)),[V.Sin]:Ce(Ie(1,1),je(Me)),[V.Cos]:Ce(Ie(1,1),je(Me)),[V.Atan]:Ce(Ie(1,2),je(Me)),[V.Sqrt]:Ce(Ie(1,1),je(Me)),[V.Match]:Ce(Ie(4,1/0),b0,$S),[V.Between]:Ce(Ie(3,3),je(Me)),[V.Interpolate]:Ce(Ie(6,1/0),b0,qS),[V.Case]:Ce(Ie(3,1/0),ZS,QS),[V.In]:Ce(Ie(2,2),JS),[V.Number]:Ce(Ie(1,1/0),je(ic)),[V.String]:Ce(Ie(1,1/0),je(ic)),[V.Array]:Ce(Ie(1,1/0),je(Me)),[V.Color]:Ce(Ie(1,4),je(Me)),[V.Band]:Ce(Ie(1,3),je(Me)),[V.Palette]:Ce(Ie(2,2),eT),[V.ToString]:Ce(Ie(1,1),je(Qt|Me|hn|di))};function N0(r,e,t){const n=r.length-1,i=new Array(n);for(let l=0;l<n;++l){const a=r[l+1];switch(typeof a){case"number":{i[l]=new xt(Me,a);break}case"string":{i[l]=new xt(hn,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}l===0&&t.properties.add(String(a))}return i}function YS(r,e,t){const n=r[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return t.variables.add(n),[new xt(hn,n)]}function KS(r,e,t){t.featureId=!0}function HS(r,e,t){t.geometryType=!0}function yo(r,e,t){const n=r[0];if(r.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function Ie(r,e){return function(t,n,i){const l=t[0],a=t.length-1;if(r===e){if(a!==r){const u=r===1?"":"s";throw new Error(`expected ${r} argument${u} for ${l}, got ${a}`)}}else if(a<r||a>e){const u=e===1/0?`${r} or more`:`${r} to ${e}`;throw new Error(`expected ${u} arguments for ${l}, got ${a}`)}}}function z0(r,e,t){const n=r.length-1,i=new Array(n);for(let l=0;l<n;++l){const a=Mt(r[l+1],e,t);i[l]=a}return i}function je(r){return function(e,t,n){const i=e.length-1,l=new Array(i);for(let a=0;a<i;++a){const u=Mt(e[a+1],r,n);l[a]=u}return l}}function ZS(r,e,t){const n=r[0],i=r.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${i} instead`)}function b0(r,e,t){const n=r[0],i=r.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${i} instead`)}function $S(r,e,t){const n=r.length-1,i=hn|Me|Qt,l=Mt(r[1],i,t),a=Mt(r[r.length-1],e,t),u=new Array(n-2);for(let h=0;h<n-2;h+=2){try{const f=Mt(r[h+2],l.type,t);u[h]=f}catch(f){throw new Error(`failed to parse argument ${h+1} of match expression: ${f.message}`)}try{const f=Mt(r[h+3],a.type,t);u[h+1]=f}catch(f){throw new Error(`failed to parse argument ${h+2} of match expression: ${f.message}`)}}return[l,...u,a]}function qS(r,e,t){const n=r[1];let i;switch(n[0]){case"linear":i=1;break;case"exponential":const h=n[1];if(typeof h!="number"||h<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(h)} instead`);i=h;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const l=new xt(Me,i);let a;try{a=Mt(r[2],Me,t)}catch(h){throw new Error(`failed to parse argument 1 in interpolate expression: ${h.message}`)}const u=new Array(r.length-3);for(let h=0;h<u.length;h+=2){try{const f=Mt(r[h+3],Me,t);u[h]=f}catch(f){throw new Error(`failed to parse argument ${h+2} for interpolate expression: ${f.message}`)}try{const f=Mt(r[h+4],e,t);u[h+1]=f}catch(f){throw new Error(`failed to parse argument ${h+3} for interpolate expression: ${f.message}`)}}return[l,a,...u]}function QS(r,e,t){const n=Mt(r[r.length-1],e,t),i=new Array(r.length-1);for(let l=0;l<i.length-1;l+=2){try{const a=Mt(r[l+1],Qt,t);i[l]=a}catch(a){throw new Error(`failed to parse argument ${l} of case expression: ${a.message}`)}try{const a=Mt(r[l+2],n.type,t);i[l+1]=a}catch(a){throw new Error(`failed to parse argument ${l+1} of case expression: ${a.message}`)}}return i[i.length-1]=n,i}function JS(r,e,t){let n=r[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],i=hn}else i=Me;const l=new Array(n.length);for(let u=0;u<l.length;u++)try{const h=Mt(n[u],i,t);l[u]=h}catch(h){throw new Error(`failed to parse haystack item ${u} for "in" expression: ${h.message}`)}return[Mt(r[1],i,t),...l]}function eT(r,e,t){let n;try{n=Mt(r[1],Me,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const i=r[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const l=new Array(i.length);for(let a=0;a<l.length;a++){let u;try{u=Mt(i[a],di,t)}catch(h){throw new Error(`failed to parse color at index ${a} in palette expression: ${h.message}`)}if(!(u instanceof xt))throw new Error(`the palette color at index ${a} must be a literal value`);l[a]=u}return[n,...l]}function Ce(...r){return function(e,t,n){const i=e[0];let l;for(let a=0;a<r.length;a++){const u=r[a](e,t,n);if(a==r.length-1){if(!u)throw new Error("expected last argument validator to return the parsed args");l=u}}return new BS(t,i,...l)}}function tT(r,e,t){const n=r[0],i=XS[n];if(!i)throw new Error(`unknown operator: ${n}`);return i(r,e,t)}function wv(r){if(!r)return"";const e=r.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return wv(r.getGeometries()[0]);default:return""}}function Ev(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function ur(r,e,t){const n=Mt(r,e,t);return gi(n)}function gi(r,e){if(r instanceof xt){if(r.type===di&&typeof r.value=="string"){const n=Fg(r.value);return function(){return n}}return function(){return r.value}}const t=r.operator;switch(t){case V.Number:case V.String:case V.Coalesce:return nT(r);case V.Get:case V.Var:case V.Has:return iT(r);case V.Id:return n=>n.featureId;case V.GeometryType:return n=>n.geometryType;case V.Concat:{const n=r.args.map(i=>gi(i));return i=>"".concat(...n.map(l=>l(i).toString()))}case V.Resolution:return n=>n.resolution;case V.Any:case V.All:case V.Between:case V.In:case V.Not:return sT(r);case V.Equal:case V.NotEqual:case V.LessThan:case V.LessThanOrEqualTo:case V.GreaterThan:case V.GreaterThanOrEqualTo:return rT(r);case V.Multiply:case V.Divide:case V.Add:case V.Subtract:case V.Clamp:case V.Mod:case V.Pow:case V.Abs:case V.Floor:case V.Ceil:case V.Round:case V.Sin:case V.Cos:case V.Atan:case V.Sqrt:return oT(r);case V.Case:return lT(r);case V.Match:return aT(r);case V.Interpolate:return uT(r);case V.ToString:return cT(r);default:throw new Error(`Unsupported operator ${t}`)}}function nT(r,e){const t=r.operator,n=r.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=gi(r.args[l]);switch(t){case V.Coalesce:return l=>{for(let a=0;a<n;++a){const u=i[a](l);if(typeof u<"u"&&u!==null)return u}throw new Error("Expected one of the values to be non-null")};case V.Number:case V.String:return l=>{for(let a=0;a<n;++a){const u=i[a](l);if(typeof u===t)return u}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function iT(r,e){const n=r.args[0].value;switch(r.operator){case V.Get:return i=>{const l=r.args;let a=i.properties[n];for(let u=1,h=l.length;u<h;++u){const g=l[u].value;a=a[g]}return a};case V.Var:return i=>i.variables[n];case V.Has:return i=>{const l=r.args;if(!(n in i.properties))return!1;let a=i.properties[n];for(let u=1,h=l.length;u<h;++u){const g=l[u].value;if(!a||!Object.hasOwn(a,g))return!1;a=a[g]}return!0};default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function rT(r,e){const t=r.operator,n=gi(r.args[0]),i=gi(r.args[1]);switch(t){case V.Equal:return l=>n(l)===i(l);case V.NotEqual:return l=>n(l)!==i(l);case V.LessThan:return l=>n(l)<i(l);case V.LessThanOrEqualTo:return l=>n(l)<=i(l);case V.GreaterThan:return l=>n(l)>i(l);case V.GreaterThanOrEqualTo:return l=>n(l)>=i(l);default:throw new Error(`Unsupported comparison operator ${t}`)}}function sT(r,e){const t=r.operator,n=r.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=gi(r.args[l]);switch(t){case V.Any:return l=>{for(let a=0;a<n;++a)if(i[a](l))return!0;return!1};case V.All:return l=>{for(let a=0;a<n;++a)if(!i[a](l))return!1;return!0};case V.Between:return l=>{const a=i[0](l),u=i[1](l),h=i[2](l);return a>=u&&a<=h};case V.In:return l=>{const a=i[0](l);for(let u=1;u<n;++u)if(a===i[u](l))return!0;return!1};case V.Not:return l=>!i[0](l);default:throw new Error(`Unsupported logical operator ${t}`)}}function oT(r,e){const t=r.operator,n=r.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=gi(r.args[l]);switch(t){case V.Multiply:return l=>{let a=1;for(let u=0;u<n;++u)a*=i[u](l);return a};case V.Divide:return l=>i[0](l)/i[1](l);case V.Add:return l=>{let a=0;for(let u=0;u<n;++u)a+=i[u](l);return a};case V.Subtract:return l=>i[0](l)-i[1](l);case V.Clamp:return l=>{const a=i[0](l),u=i[1](l);if(a<u)return u;const h=i[2](l);return a>h?h:a};case V.Mod:return l=>i[0](l)%i[1](l);case V.Pow:return l=>Math.pow(i[0](l),i[1](l));case V.Abs:return l=>Math.abs(i[0](l));case V.Floor:return l=>Math.floor(i[0](l));case V.Ceil:return l=>Math.ceil(i[0](l));case V.Round:return l=>Math.round(i[0](l));case V.Sin:return l=>Math.sin(i[0](l));case V.Cos:return l=>Math.cos(i[0](l));case V.Atan:return n===2?l=>Math.atan2(i[0](l),i[1](l)):l=>Math.atan(i[0](l));case V.Sqrt:return l=>Math.sqrt(i[0](l));default:throw new Error(`Unsupported numeric operator ${t}`)}}function lT(r,e){const t=r.args.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=gi(r.args[i]);return i=>{for(let l=0;l<t-1;l+=2)if(n[l](i))return n[l+1](i);return n[t-1](i)}}function aT(r,e){const t=r.args.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=gi(r.args[i]);return i=>{const l=n[0](i);for(let a=1;a<t;a+=2)if(l===n[a](i))return n[a+1](i);return n[t-1](i)}}function uT(r,e){const t=r.args.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=gi(r.args[i]);return i=>{const l=n[0](i),a=n[1](i);let u,h;for(let f=2;f<t;f+=2){const g=n[f](i);let m=n[f+1](i);const _=Array.isArray(m);if(_&&(m=nS(m)),g>=a)return f===2?m:_?hT(l,a,u,h,g,m):ql(l,a,u,h,g,m);u=g,h=m}return h}}function cT(r,e){const t=r.operator,n=r.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=gi(r.args[l]);switch(t){case V.ToString:return l=>{const a=i[0](l);return r.args[0].type===di?Mg(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function ql(r,e,t,n,i,l){const a=i-t;if(a===0)return n;const u=e-t,h=r===1?u/a:(Math.pow(r,u)-1)/(Math.pow(r,a)-1);return n+h*(l-n)}function hT(r,e,t,n,i,l){if(i-t===0)return n;const u=S0(n),h=S0(l);let f=h[2]-u[2];f>180?f-=360:f<-180&&(f+=360);const g=[ql(r,e,t,u[0],i,h[0]),ql(r,e,t,u[1],i,h[1]),u[2]+ql(r,e,t,0,i,f),ql(r,e,t,n[3],i,l[3])];return iv(iS(g))}function dT(r){return!0}function fT(r){const e=xv(),t=gT(r,e),n=Ev();return function(i,l){if(n.properties=i.getPropertiesInternal(),n.resolution=l,e.featureId){const a=i.getId();a!==void 0?n.featureId=a:n.featureId=null}return e.geometryType&&(n.geometryType=wv(i.getGeometry())),t(n)}}function G0(r){const e=xv(),t=r.length,n=new Array(t);for(let a=0;a<t;++a)n[a]=bf(r[a],e);const i=Ev(),l=new Array(t);return function(a,u){if(i.properties=a.getPropertiesInternal(),i.resolution=u,e.featureId){const f=a.getId();f!==void 0?i.featureId=f:i.featureId=null}let h=0;for(let f=0;f<t;++f){const g=n[f](i);g&&(l[h]=g,h+=1)}return l.length=h,l}}function gT(r,e){const t=r.length,n=new Array(t);for(let i=0;i<t;++i){const l=r[i],a="filter"in l?ur(l.filter,Qt,e):dT;let u;if(Array.isArray(l.style)){const h=l.style.length;u=new Array(h);for(let f=0;f<h;++f)u[f]=bf(l.style[f],e)}else u=[bf(l.style,e)];n[i]={filter:a,styles:u}}return function(i){const l=[];let a=!1;for(let u=0;u<t;++u){const h=n[u].filter;if(h(i)&&!(r[u].else&&a)){a=!0;for(const f of n[u].styles){const g=f(i);g&&l.push(g)}}}return l}}function bf(r,e){const t=ga(r,"",e),n=pa(r,"",e),i=pT(r,e),l=mT(r,e),a=dn(r,"z-index",e);if(!t&&!n&&!i&&!l&&!As(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));const u=new fn;return function(h){let f=!0;if(t){const g=t(h);g&&(f=!1),u.setFill(g)}if(n){const g=n(h);g&&(f=!1),u.setStroke(g)}if(i){const g=i(h);g&&(f=!1),u.setText(g)}if(l){const g=l(h);g&&(f=!1),u.setImage(g)}return a&&u.setZIndex(a(h)),f?null:u}}function ga(r,e,t){let n;if(e+"fill-pattern-src"in r)n=xT(r,e+"fill-",t);else{if(r[e+"fill-color"]==="none")return l=>null;n=Wg(r,e+"fill-color",t)}if(!n)return null;const i=new Jr;return function(l){const a=n(l);return a===kg?null:(i.setColor(a),i)}}function pa(r,e,t){const n=dn(r,e+"stroke-width",t),i=Wg(r,e+"stroke-color",t);if(!n&&!i)return null;const l=Zi(r,e+"stroke-line-cap",t),a=Zi(r,e+"stroke-line-join",t),u=Cv(r,e+"stroke-line-dash",t),h=dn(r,e+"stroke-line-dash-offset",t),f=dn(r,e+"stroke-miter-limit",t),g=new Zr;return function(m){if(i){const _=i(m);if(_===kg)return null;g.setColor(_)}if(n&&g.setWidth(n(m)),l){const _=l(m);if(_!=="butt"&&_!=="round"&&_!=="square")throw new Error("Expected butt, round, or square line cap");g.setLineCap(_)}if(a){const _=a(m);if(_!=="bevel"&&_!=="round"&&_!=="miter")throw new Error("Expected bevel, round, or miter line join");g.setLineJoin(_)}return u&&g.setLineDash(u(m)),h&&g.setLineDashOffset(h(m)),f&&g.setMiterLimit(f(m)),g}}function pT(r,e){const t="text-",n=Zi(r,t+"value",e);if(!n)return null;const i=ga(r,t,e),l=ga(r,t+"background-",e),a=pa(r,t,e),u=pa(r,t+"background-",e),h=Zi(r,t+"font",e),f=dn(r,t+"max-angle",e),g=dn(r,t+"offset-x",e),m=dn(r,t+"offset-y",e),_=ma(r,t+"overflow",e),v=Zi(r,t+"placement",e),x=dn(r,t+"repeat",e),E=rh(r,t+"scale",e),C=ma(r,t+"rotate-with-view",e),S=dn(r,t+"rotation",e),T=Zi(r,t+"align",e),I=Zi(r,t+"justify",e),L=Zi(r,t+"baseline",e),k=Cv(r,t+"padding",e),j=sh(r,t+"declutter-mode"),N=new nh({declutterMode:j});return function(z){if(N.setText(n(z)),i&&N.setFill(i(z)),l&&N.setBackgroundFill(l(z)),a&&N.setStroke(a(z)),u&&N.setBackgroundStroke(u(z)),h&&N.setFont(h(z)),f&&N.setMaxAngle(f(z)),g&&N.setOffsetX(g(z)),m&&N.setOffsetY(m(z)),_&&N.setOverflow(_(z)),v){const G=v(z);if(G!=="point"&&G!=="line")throw new Error("Expected point or line for text-placement");N.setPlacement(G)}if(x&&N.setRepeat(x(z)),E&&N.setScale(E(z)),C&&N.setRotateWithView(C(z)),S&&N.setRotation(S(z)),T){const G=T(z);if(G!=="left"&&G!=="center"&&G!=="right"&&G!=="end"&&G!=="start")throw new Error("Expected left, right, center, start, or end for text-align");N.setTextAlign(G)}if(I){const G=I(z);if(G!=="left"&&G!=="right"&&G!=="center")throw new Error("Expected left, right, or center for text-justify");N.setJustify(G)}if(L){const G=L(z);if(G!=="bottom"&&G!=="top"&&G!=="middle"&&G!=="alphabetic"&&G!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");N.setTextBaseline(G)}return k&&N.setPadding(k(z)),N}}function mT(r,e){return"icon-src"in r?_T(r,e):"shape-points"in r?yT(r,e):"circle-radius"in r?vT(r,e):null}function _T(r,e){const t="icon-",n=t+"src",i=Sv(r[n],n),l=Lc(r,t+"anchor",e),a=rh(r,t+"scale",e),u=dn(r,t+"opacity",e),h=Lc(r,t+"displacement",e),f=dn(r,t+"rotation",e),g=ma(r,t+"rotate-with-view",e),m=W0(r,t+"anchor-origin"),_=U0(r,t+"anchor-x-units"),v=U0(r,t+"anchor-y-units"),x=ST(r,t+"color"),E=ET(r,t+"cross-origin"),C=CT(r,t+"offset"),S=W0(r,t+"offset-origin"),T=kc(r,t+"width"),I=kc(r,t+"height"),L=wT(r,t+"size"),k=sh(r,t+"declutter-mode"),j=new ka({src:i,anchorOrigin:m,anchorXUnits:_,anchorYUnits:v,color:x,crossOrigin:E,offset:C,offsetOrigin:S,height:I,width:T,size:L,declutterMode:k});return function(N){return u&&j.setOpacity(u(N)),h&&j.setDisplacement(h(N)),f&&j.setRotation(f(N)),g&&j.setRotateWithView(g(N)),a&&j.setScale(a(N)),l&&j.setAnchor(l(N)),j}}function yT(r,e){const t="shape-",n=t+"points",i=t+"radius",l=Gf(r[n],n),a=Gf(r[i],i),u=ga(r,t,e),h=pa(r,t,e),f=rh(r,t+"scale",e),g=Lc(r,t+"displacement",e),m=dn(r,t+"rotation",e),_=ma(r,t+"rotate-with-view",e),v=kc(r,t+"radius2"),x=kc(r,t+"angle"),E=sh(r,t+"declutter-mode"),C=new La({points:l,radius:a,radius2:v,angle:x,declutterMode:E});return function(S){return u&&C.setFill(u(S)),h&&C.setStroke(h(S)),g&&C.setDisplacement(g(S)),m&&C.setRotation(m(S)),_&&C.setRotateWithView(_(S)),f&&C.setScale(f(S)),C}}function vT(r,e){const t="circle-",n=ga(r,t,e),i=pa(r,t,e),l=dn(r,t+"radius",e),a=rh(r,t+"scale",e),u=Lc(r,t+"displacement",e),h=dn(r,t+"rotation",e),f=ma(r,t+"rotate-with-view",e),g=sh(r,t+"declutter-mode"),m=new el({radius:5,declutterMode:g});return function(_){return l&&m.setRadius(l(_)),n&&m.setFill(n(_)),i&&m.setStroke(i(_)),u&&m.setDisplacement(u(_)),h&&m.setRotation(h(_)),f&&m.setRotateWithView(f(_)),a&&m.setScale(a(_)),m}}function dn(r,e,t){if(!(e in r))return;const n=ur(r[e],Me,t);return function(i){return Gf(n(i),e)}}function Zi(r,e,t){if(!(e in r))return null;const n=ur(r[e],hn,t);return function(i){return Sv(n(i),e)}}function xT(r,e,t){const n=Zi(r,e+"pattern-src",t),i=j0(r,e+"pattern-offset",t),l=j0(r,e+"pattern-size",t),a=Wg(r,e+"color",t);return function(u){return{src:n(u),offset:i&&i(u),size:l&&l(u),color:a&&a(u)}}}function ma(r,e,t){if(!(e in r))return null;const n=ur(r[e],Qt,t);return function(i){const l=n(i);if(typeof l!="boolean")throw new Error(`Expected a boolean for ${e}`);return l}}function Wg(r,e,t){if(!(e in r))return null;const n=ur(r[e],di,t);return function(i){return Tv(n(i),e)}}function Cv(r,e,t){if(!(e in r))return null;const n=ur(r[e],Os,t);return function(i){return Fa(n(i),e)}}function Lc(r,e,t){if(!(e in r))return null;const n=ur(r[e],Os,t);return function(i){const l=Fa(n(i),e);if(l.length!==2)throw new Error(`Expected two numbers for ${e}`);return l}}function j0(r,e,t){if(!(e in r))return null;const n=ur(r[e],Os,t);return function(i){return Rv(n(i),e)}}function rh(r,e,t){if(!(e in r))return null;const n=ur(r[e],Os|Me,t);return function(i){return TT(n(i),e)}}function kc(r,e){const t=r[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function wT(r,e){const t=r[e];if(t!==void 0){if(typeof t=="number")return Xt(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function ET(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function W0(r,e){const t=r[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function U0(r,e){const t=r[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function CT(r,e){const t=r[e];if(t!==void 0)return Fa(t,e)}function sh(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function ST(r,e){const t=r[e];if(t!==void 0)return Tv(t,e)}function Fa(r,e){if(!Array.isArray(r))throw new Error(`Expected an array for ${e}`);const t=r.length;for(let n=0;n<t;++n)if(typeof r[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return r}function Sv(r,e){if(typeof r!="string")throw new Error(`Expected a string for ${e}`);return r}function Gf(r,e){if(typeof r!="number")throw new Error(`Expected a number for ${e}`);return r}function Tv(r,e){if(typeof r=="string")return r;const t=Fa(r,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function Rv(r,e){const t=Fa(r,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function TT(r,e){return typeof r=="number"?r:Rv(r,e)}const V0={RENDER_ORDER:"renderOrder"};class Ug extends ih{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(V0.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new vv(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(V0.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?fv:e;const t=RT(e);this.styleFunction_=e===null?void 0:CS(t),this.changed()}}function RT(r){if(r===void 0)return fv;if(!r)return null;if(typeof r=="function"||r instanceof fn)return r;if(!Array.isArray(r))return G0([r]);if(r.length===0)return[];const e=r.length,t=r[0];if(t instanceof fn){const i=new Array(e);for(let l=0;l<e;++l){const a=r[l];if(!(a instanceof fn))throw new Error("Expected a list of style instances");i[l]=a}return i}if("style"in t){const i=new Array(e);for(let l=0;l<e;++l){const a=r[l];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[l]=a}return fT(i)}return G0(r)}const pe={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},rc=[pe.FILL],Yr=[pe.STROKE],ks=[pe.BEGIN_PATH],B0=[pe.CLOSE_PATH];class Iv{drawCustom(e,t,n,i,l){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class Ma extends Iv{constructor(e,t,n,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,l=this.coordinates;let a=l.length;for(let u=0,h=e.length;u<h;u+=t)i[0]=e[u],i[1]=e[u+1],Vo(n,i)&&(l[a++]=i[0],l[a++]=i[1]);return a}appendFlatLineCoordinates(e,t,n,i,l,a){const u=this.coordinates;let h=u.length;const f=this.getBufferedMaxExtent();a&&(t+=i);let g=e[t],m=e[t+1];const _=this.tmpCoordinate_;let v=!0,x,E,C;for(x=t+i;x<n;x+=i)_[0]=e[x],_[1]=e[x+1],C=Lf(f,_),C!==E?(v&&(u[h++]=g,u[h++]=m,v=!1),u[h++]=_[0],u[h++]=_[1]):C===It.INTERSECTING?(u[h++]=_[0],u[h++]=_[1],v=!1):v=!0,g=_[0],m=_[1],E=C;return(l&&v||x===t+i)&&(u[h++]=g,u[h++]=m),h}drawCustomCoordinates_(e,t,n,i,l){for(let a=0,u=n.length;a<u;++a){const h=n[a],f=this.appendFlatLineCoordinates(e,t,h,i,!1,!1);l.push(f),t=h}return t}drawCustom(e,t,n,i,l){this.beginGeometry(e,t,l);const a=e.getType(),u=e.getStride(),h=this.coordinates.length;let f,g,m,_,v;switch(a){case"MultiPolygon":f=e.getOrientedFlatCoordinates(),_=[];const x=e.getEndss();v=0;for(let E=0,C=x.length;E<C;++E){const S=[];v=this.drawCustomCoordinates_(f,v,x[E],u,S),_.push(S)}this.instructions.push([pe.CUSTOM,h,_,e,n,Af,l]),this.hitDetectionInstructions.push([pe.CUSTOM,h,_,e,i||n,Af,l]);break;case"Polygon":case"MultiLineString":m=[],f=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),v=this.drawCustomCoordinates_(f,0,e.getEnds(),u,m),this.instructions.push([pe.CUSTOM,h,m,e,n,oa,l]),this.hitDetectionInstructions.push([pe.CUSTOM,h,m,e,i||n,oa,l]);break;case"LineString":case"Circle":f=e.getFlatCoordinates(),g=this.appendFlatLineCoordinates(f,0,f.length,u,!1,!1),this.instructions.push([pe.CUSTOM,h,g,e,n,Xr,l]),this.hitDetectionInstructions.push([pe.CUSTOM,h,g,e,i||n,Xr,l]);break;case"MultiPoint":f=e.getFlatCoordinates(),g=this.appendFlatPointCoordinates(f,u),g>h&&(this.instructions.push([pe.CUSTOM,h,g,e,n,Xr,l]),this.hitDetectionInstructions.push([pe.CUSTOM,h,g,e,i||n,Xr,l]));break;case"Point":f=e.getFlatCoordinates(),this.coordinates.push(f[0],f[1]),g=this.coordinates.length,this.instructions.push([pe.CUSTOM,h,g,e,n,void 0,l]),this.hitDetectionInstructions.push([pe.CUSTOM,h,g,e,i||n,void 0,l]);break}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[pe.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[pe.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let i,l,a=-1;for(t=0;t<n;++t)i=e[t],l=i[0],l==pe.END_GEOMETRY?a=t:l==pe.BEGIN_GEOMETRY&&(i[2]=t,qE(this.hitDetectionInstructions,a,t),a=-1)}setFillStrokeStyle(e,t){const n=this.state;if(e){const i=e.getColor();n.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,n.fillStyle=Ii(i||cn)}else n.fillStyle=void 0;if(t){const i=t.getColor();n.strokeStyle=Ii(i||ha);const l=t.getLineCap();n.lineCap=l!==void 0?l:Ko;const a=t.getLineDash();n.lineDash=a?a.slice():tr;const u=t.getLineDashOffset();n.lineDashOffset=u||nr;const h=t.getLineJoin();n.lineJoin=h!==void 0?h:Ho;const f=t.getWidth();n.lineWidth=f!==void 0?f:fa;const g=t.getMiterLimit();n.miterLimit=g!==void 0?g:ca,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[pe.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[pe.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,i=e.lineCap,l=e.lineDash,a=e.lineDashOffset,u=e.lineJoin,h=e.lineWidth,f=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=i||l!=e.currentLineDash&&!ar(e.currentLineDash,l)||e.currentLineDashOffset!=a||e.currentLineJoin!=u||e.currentLineWidth!=h||e.currentMiterLimit!=f)&&(n!==void 0&&t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=i,e.currentLineDash=l,e.currentLineDashOffset=a,e.currentLineJoin=u,e.currentLineWidth=h,e.currentMiterLimit=f)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[pe.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=by(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Ji(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class IT extends Ma{constructor(e,t,n,i){super(e,t,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!Vo(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);const i=e.getFlatCoordinates(),l=e.getStride(),a=this.coordinates.length,u=this.appendFlatPointCoordinates(i,l);this.instructions.push([pe.DRAW_IMAGE,a,u,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([pe.DRAW_IMAGE,a,u,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);const i=e.getFlatCoordinates(),l=[];for(let h=0,f=i.length;h<f;h+=e.getStride())(!this.maxExtent||Vo(this.maxExtent,i.slice(h,h+2)))&&l.push(i[h],i[h+1]);const a=this.coordinates.length,u=this.appendFlatPointCoordinates(l,2);this.instructions.push([pe.DRAW_IMAGE,a,u,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([pe.DRAW_IMAGE,a,u,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),i=e.getSize(),l=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class PT extends Ma{constructor(e,t,n,i){super(e,t,n,i)}drawFlatCoordinates_(e,t,n,i){const l=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,n,i,!1,!1),u=[pe.MOVE_TO_LINE_TO,l,a];return this.instructions.push(u),this.hitDetectionInstructions.push(u),n}drawLineString(e,t,n){const i=this.state,l=i.strokeStyle,a=i.lineWidth;if(l===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([pe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,tr,nr],ks);const u=e.getFlatCoordinates(),h=e.getStride();this.drawFlatCoordinates_(u,0,u.length,h),this.hitDetectionInstructions.push(Yr),this.endGeometry(t)}drawMultiLineString(e,t,n){const i=this.state,l=i.strokeStyle,a=i.lineWidth;if(l===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([pe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,tr,nr],ks);const u=e.getEnds(),h=e.getFlatCoordinates(),f=e.getStride();let g=0;for(let m=0,_=u.length;m<_;++m)g=this.drawFlatCoordinates_(h,g,u[m],f);this.hitDetectionInstructions.push(Yr),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Yr),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Yr),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(ks)}}class X0 extends Ma{constructor(e,t,n,i){super(e,t,n,i)}drawFlatCoordinatess_(e,t,n,i){const l=this.state,a=l.fillStyle!==void 0,u=l.strokeStyle!==void 0,h=n.length;this.instructions.push(ks),this.hitDetectionInstructions.push(ks);for(let f=0;f<h;++f){const g=n[f],m=this.coordinates.length,_=this.appendFlatLineCoordinates(e,t,g,i,!0,!u),v=[pe.MOVE_TO_LINE_TO,m,_];this.instructions.push(v),this.hitDetectionInstructions.push(v),u&&(this.instructions.push(B0),this.hitDetectionInstructions.push(B0)),t=g}return a&&(this.instructions.push(rc),this.hitDetectionInstructions.push(rc)),u&&(this.instructions.push(Yr),this.hitDetectionInstructions.push(Yr)),t}drawCircle(e,t,n){const i=this.state,l=i.fillStyle,a=i.strokeStyle;if(l===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([pe.SET_FILL_STYLE,cn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([pe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,tr,nr]);const u=e.getFlatCoordinates(),h=e.getStride(),f=this.coordinates.length;this.appendFlatLineCoordinates(u,0,u.length,h,!1,!1);const g=[pe.CIRCLE,f];this.instructions.push(ks,g),this.hitDetectionInstructions.push(ks,g),i.fillStyle!==void 0&&(this.instructions.push(rc),this.hitDetectionInstructions.push(rc)),i.strokeStyle!==void 0&&(this.instructions.push(Yr),this.hitDetectionInstructions.push(Yr)),this.endGeometry(t)}drawPolygon(e,t,n){const i=this.state,l=i.fillStyle,a=i.strokeStyle;if(l===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([pe.SET_FILL_STYLE,cn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([pe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,tr,nr]);const u=e.getEnds(),h=e.getOrientedFlatCoordinates(),f=e.getStride();this.drawFlatCoordinatess_(h,0,u,f),this.endGeometry(t)}drawMultiPolygon(e,t,n){const i=this.state,l=i.fillStyle,a=i.strokeStyle;if(l===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([pe.SET_FILL_STYLE,cn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([pe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,tr,nr]);const u=e.getEndss(),h=e.getOrientedFlatCoordinates(),f=e.getStride();let g=0;for(let m=0,_=u.length;m<_;++m)g=this.drawFlatCoordinatess_(h,g,u[m],f);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,i=t.length;n<i;++n)t[n]=Ts(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function LT(r,e,t,n,i){const l=[];let a=t,u=0,h=e.slice(t,2);for(;u<r&&a+i<n;){const[f,g]=h.slice(-2),m=e[a+i],_=e[a+i+1],v=Math.sqrt((m-f)*(m-f)+(_-g)*(_-g));if(u+=v,u>=r){const x=(r-u+v)/v,E=In(f,m,x),C=In(g,_,x);h.push(E,C),l.push(h),h=[E,C],u==r&&(a+=i),u=0}else if(u<r)h.push(e[a+i],e[a+i+1]),a+=i;else{const x=v-u,E=In(f,m,x/v),C=In(g,_,x/v);h.push(E,C),l.push(h),h=[E,C],u=0,a+=i}}return u>0&&l.push(h),l}function kT(r,e,t,n,i){let l=t,a=t,u=0,h=0,f=t,g,m,_,v,x,E,C,S,T,I;for(m=t;m<n;m+=i){const L=e[m],k=e[m+1];x!==void 0&&(T=L-x,I=k-E,v=Math.sqrt(T*T+I*I),C!==void 0&&(h+=_,g=Math.acos((C*T+S*I)/(_*v)),g>r&&(h>u&&(u=h,l=f,a=m),h=0,f=m-i)),_=v,C=T,S=I),x=L,E=k}return h+=v,h>u?[f,m]:[l,a]}const Fc={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class FT extends Ma{constructor(e,t,n,i){super(e,t,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[cn]={fillStyle:cn},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){const i=this.textFillState_,l=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!l)return;const u=this.coordinates;let h=u.length;const f=e.getType();let g=null,m=e.getStride();if(a.placement==="line"&&(f=="LineString"||f=="MultiLineString"||f=="Polygon"||f=="MultiPolygon")){if(!gt(this.maxExtent,e.getExtent()))return;let _;if(g=e.getFlatCoordinates(),f=="LineString")_=[g.length];else if(f=="MultiLineString")_=e.getEnds();else if(f=="Polygon")_=e.getEnds().slice(0,1);else if(f=="MultiPolygon"){const C=e.getEndss();_=[];for(let S=0,T=C.length;S<T;++S)_.push(C[S][0])}this.beginGeometry(e,t,n);const v=a.repeat,x=v?void 0:a.textAlign;let E=0;for(let C=0,S=_.length;C<S;++C){let T;v?T=LT(v*this.resolution,g,E,_[C],m):T=[g.slice(E,_[C])];for(let I=0,L=T.length;I<L;++I){const k=T[I];let j=0,N=k.length;if(x==null){const G=kT(a.maxAngle,k,0,k.length,2);j=G[0],N=G[1]}for(let G=j;G<N;G+=m)u.push(k[G],k[G+1]);const z=u.length;E=_[C],this.drawChars_(h,z),h=z}}this.endGeometry(t)}else{let _=a.overflow?null:[];switch(f){case"Point":case"MultiPoint":g=e.getFlatCoordinates();break;case"LineString":g=e.getFlatMidpoint();break;case"Circle":g=e.getCenter();break;case"MultiLineString":g=e.getFlatMidpoints(),m=2;break;case"Polygon":g=e.getFlatInteriorPoint(),a.overflow||_.push(g[2]/this.resolution),m=3;break;case"MultiPolygon":const T=e.getFlatInteriorPoints();g=[];for(let I=0,L=T.length;I<L;I+=3)a.overflow||_.push(T[I+2]/this.resolution),g.push(T[I],T[I+1]);if(g.length===0)return;m=2;break}const v=this.appendFlatPointCoordinates(g,m);if(v===h)return;if(_&&(v-h)/2!==g.length/m){let T=h/2;_=_.filter((I,L)=>{const k=u[(T+L)*2]===g[L*m]&&u[(T+L)*2+1]===g[L*m+1];return k||--T,k})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&this.updateFillStyle(this.state,this.createFill),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,n);let x=a.padding;if(x!=Ls&&(a.scale[0]<0||a.scale[1]<0)){let T=a.padding[0],I=a.padding[1],L=a.padding[2],k=a.padding[3];a.scale[0]<0&&(I=-I,k=-k),a.scale[1]<0&&(T=-T,L=-L),x=[T,I,L,k]}const E=this.pixelRatio;this.instructions.push([pe.DRAW_IMAGE,h,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,x==Ls?Ls:x.map(function(T){return T*E}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]);const C=1/E,S=this.state.fillStyle;a.backgroundFill&&(this.state.fillStyle=cn,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([pe.DRAW_IMAGE,h,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[C,C],NaN,this.declutterMode_,this.declutterImageWithText_,x,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?cn:this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]),a.backgroundFill&&(this.state.fillStyle=S,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:t.font,textAlign:t.textAlign||da,justify:t.justify,textBaseline:t.textBaseline||Ic,scale:t.scale});const a=this.fillKey_;n&&(a in this.fillStates||(this.fillStates[a]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,i=this.textState_,l=this.strokeKey_,a=this.textKey_,u=this.fillKey_;this.saveTextStates_();const h=this.pixelRatio,f=Fc[i.textBaseline],g=this.textOffsetY_*h,m=this.text_,_=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([pe.DRAW_CHARS,e,t,f,i.overflow,u,i.maxAngle,h,g,l,_*h,m,a,1,this.declutterMode_]),this.hitDetectionInstructions.push([pe.DRAW_CHARS,e,t,f,i.overflow,u&&cn,i.maxAngle,h,g,l,_*h,m,a,1/h,this.declutterMode_])}setTextStyle(e,t){let n,i,l;if(!e)this.text_="";else{const a=e.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Ii(a.getColor()||cn)):(i=null,this.textFillState_=i);const u=e.getStroke();if(!u)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const x=u.getLineDash(),E=u.getLineDashOffset(),C=u.getWidth(),S=u.getMiterLimit();l.lineCap=u.getLineCap()||Ko,l.lineDash=x?x.slice():tr,l.lineDashOffset=E===void 0?nr:E,l.lineJoin=u.getLineJoin()||Ho,l.lineWidth=C===void 0?fa:C,l.miterLimit=S===void 0?ca:S,l.strokeStyle=Ii(u.getColor()||ha)}n=this.textState_;const h=e.getFont()||hv;yS(h);const f=e.getScaleArray();n.overflow=e.getOverflow(),n.font=h,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||Ic,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||Ls,n.scale=f===void 0?[1,1]:f;const g=e.getOffsetX(),m=e.getOffsetY(),_=e.getRotateWithView(),v=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=g===void 0?0:g,this.textOffsetY_=m===void 0?0:m,this.textRotateWithView_=_===void 0?!1:_,this.textRotation_=v===void 0?0:v,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:Se(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Se(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const MT={Circle:X0,Default:Ma,Image:IT,LineString:PT,Polygon:X0,Text:FT};class Pv{constructor(e,t,n,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const i in n){const l=n[i].finish();e[t][i]=l}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[n];i===void 0&&(i={},this.buildersByZIndex_[n]=i);let l=i[t];if(l===void 0){const a=MT[t];l=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=l}return l}}const AT=5;class DT extends Ra{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=AT}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Le()}getData(e){return null}prepareFrame(e){return Le()}renderFrame(e,t){return Le()}forEachFeatureAtCoordinate(e,t,n,i,l){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ke.LOADED||t.getState()===ke.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ke.LOADED&&t!=ke.ERROR&&e.addEventListener(xe.CHANGE,this.boundHandleImageChange_),t==ke.IDLE&&(e.load(),t=e.getState()),t==ke.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class Lv extends Kn{constructor(e,t,n,i){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=i}}class Vg{constructor(){$e(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Tc(),{get:(e,t)=>{if(typeof Tc()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,n),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,i=t.length;n<i;++n){const l=t[n];if(typeof l=="function"){l(e);continue}const a=t[++n];if(typeof e[l]=="function")e[l](...a);else{if(typeof a=="function"){e[l]=a(e);continue}e[l]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Y0=[];let Po=null;function OT(){Po=ut(1,1,void 0,{willReadFrequently:!0})}class kv extends DT{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Bn(),this.pixelTransform=Bn(),this.inversePixelTransform=Bn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){Po||OT(),Po.clearRect(0,0,1,1);let i;try{Po.drawImage(e,t,n,1,1,0,0,1,1),i=Po.getImageData(0,0,1,1).data}catch{return Po=null,null}return i}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const i=this.getLayer().getClassName();let l,a;if(e&&e.className===i&&(!n||e&&e.style.backgroundColor&&ar(ua(e.style.backgroundColor),ua(n)))){const u=e.firstElementChild;u instanceof HTMLCanvasElement&&(a=u.getContext("2d"))}if(a&&a.canvas.style.transform===t?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){l=document.createElement("div"),l.className=i;let u=l.style;u.position="absolute",u.width="100%",u.height="100%",a=ut();const h=a.canvas;l.appendChild(h),u=h.style,u.position="absolute",u.left="0",u.transformOrigin="top left",this.container=l,this.context=a}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const i=ts(n),l=Yc(n),a=Xc(n),u=Bc(n);Pt(t.coordinateToPixelTransform,i),Pt(t.coordinateToPixelTransform,l),Pt(t.coordinateToPixelTransform,a),Pt(t.coordinateToPixelTransform,u);const h=this.inversePixelTransform;Pt(h,i),Pt(h,l),Pt(h,a),Pt(h,u),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(u[0]),Math.round(u[1])),e.clip()}prepareContainer(e,t){const n=e.extent,i=e.viewState.resolution,l=e.viewState.rotation,a=e.pixelRatio,u=Math.round(We(n)/i*a),h=Math.round(Bt(n)/i*a);rr(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,l,-u/2,-h/2),zy(this.inversePixelTransform,this.pixelTransform);const f=oC(this.pixelTransform);if(this.useContainer(t,f,this.getBackground(e)),!this.containerReused){const g=this.context.canvas;g.width!=u||g.height!=h?(g.width=u,g.height=h):this.context.clearRect(0,0,u,h),f!==g.style.transform&&(g.style.transform=f)}}dispatchRenderEvent_(e,t,n){const i=this.getLayer();if(i.hasListener(e)){const l=new Lv(e,this.inversePixelTransform,n,t);i.dispatchEvent(l)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Un.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Un.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new Vg),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Un.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Un.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,i,l,a,u){const h=l/2,f=a/2,g=i/t,m=-g,_=-e[0]+u,v=-e[1];return rr(this.tempTransform,h,f,g,m,-n,_,v)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function NT(r,e,t,n,i,l,a,u,h,f,g,m){let _=r[e],v=r[e+1],x=0,E=0,C=0,S=0;function T(){x=_,E=v,e+=n,_=r[e],v=r[e+1],S+=C,C=Math.sqrt((_-x)*(_-x)+(v-E)*(v-E))}do T();while(e<t-n&&S+C<l);let I=C===0?0:(l-S)/C;const L=In(x,_,I),k=In(E,v,I),j=e-n,N=S,z=l+u*h(f,i,g);for(;e<t-n&&S+C<z;)T();I=C===0?0:(z-S)/C;const G=In(x,_,I),re=In(E,v,I);let te;if(m){const X=[L,k,G,re];vg(X,0,4,2,m,X,X),te=X[0]>X[2]}else te=L>G;const ee=Math.PI,le=[],$=j+n===e;e=j,C=0,S=N,_=r[e],v=r[e+1];let se;if($){T(),se=Math.atan2(v-E,_-x),te&&(se+=se>0?-ee:ee);const X=(G+L)/2,ae=(re+k)/2;return le[0]=[X,ae,(z-l)/2,se,i],le}i=i.replace(/\n/g," ");for(let X=0,ae=i.length;X<ae;){T();let Y=Math.atan2(v-E,_-x);if(te&&(Y+=Y>0?-ee:ee),se!==void 0){let U=Y-se;if(U+=U>ee?-2*ee:U<-ee?2*ee:0,Math.abs(U)>a)return null}se=Y;const ne=X;let B=0;for(;X<ae;++X){const U=te?ae-X-1:X,we=u*h(f,i[U],g);if(e+n<t&&S+C<l+B+we/2)break;B+=we}if(X===ne)continue;const F=te?i.substring(ae-ne,ae-X):i.substring(ne,X);I=C===0?0:(l+B/2-S)/C;const W=In(x,_,I),ge=In(E,v,I);le.push([W,ge,B/2,Y,F]),l+=B}return le}const vo=Xn(),Dr=[],Yi=[],Ki=[],Or=[];function K0(r){return r[3].declutterBox}const H0=new RegExp("[-----]");function cf(r,e){return e==="start"?e=H0.test(r)?"right":"left":e==="end"&&(e=H0.test(r)?"left":"right"),Fc[e]}function zT(r,e,t){return t>0&&r.push(`
`,""),r.push(e,""),r}class bT{constructor(e,t,n,i,l){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Bn(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=l?new Vg:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,i){const l=e+t+n+i;if(this.labels_[l])return this.labels_[l];const a=i?this.strokeStates[i]:null,u=n?this.fillStates[n]:null,h=this.textStates[t],f=this.pixelRatio,g=[h.scale[0]*f,h.scale[1]*f],m=h.justify?Fc[h.justify]:cf(Array.isArray(e)?e[0]:e,h.textAlign||da),_=i&&a.lineWidth?a.lineWidth:0,v=Array.isArray(e)?e:String(e).split(`
`).reduce(zT,[]),{width:x,height:E,widths:C,heights:S,lineWidths:T}=xS(h,v),I=x+_,L=[],k=(I+2)*g[0],j=(E+_)*g[1],N={width:k<0?Math.floor(k):Math.ceil(k),height:j<0?Math.floor(j):Math.ceil(j),contextInstructions:L};(g[0]!=1||g[1]!=1)&&L.push("scale",g),i&&(L.push("strokeStyle",a.strokeStyle),L.push("lineWidth",_),L.push("lineCap",a.lineCap),L.push("lineJoin",a.lineJoin),L.push("miterLimit",a.miterLimit),L.push("setLineDash",[a.lineDash]),L.push("lineDashOffset",a.lineDashOffset)),n&&L.push("fillStyle",u.fillStyle),L.push("textBaseline","middle"),L.push("textAlign","center");const z=.5-m;let G=m*I+z*_;const re=[],te=[];let ee=0,le=0,$=0,se=0,X;for(let ae=0,Y=v.length;ae<Y;ae+=2){const ne=v[ae];if(ne===`
`){le+=ee,ee=0,G=m*I+z*_,++se;continue}const B=v[ae+1]||h.font;B!==X&&(i&&re.push("font",B),n&&te.push("font",B),X=B),ee=Math.max(ee,S[$]);const F=[ne,G+z*C[$]+m*(C[$]-T[se]),.5*(_+ee)+le];G+=C[$],i&&re.push("strokeText",F),n&&te.push("fillText",F),++$}return Array.prototype.push.apply(L,re),Array.prototype.push.apply(L,te),this.labels_[l]=N,N}replayTextBackground_(e,t,n,i,l,a,u){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,l),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],this.fill_(e)),u&&(this.setStrokeStyle_(e,u),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,i,l,a,u,h,f,g,m,_,v,x,E,C){u*=_[0],h*=_[1];let S=n-u,T=i-h;const I=l+f>e?e-f:l,L=a+g>t?t-g:a,k=x[3]+I*_[0]+x[1],j=x[0]+L*_[1]+x[2],N=S-x[3],z=T-x[0];(E||m!==0)&&(Dr[0]=N,Or[0]=N,Dr[1]=z,Yi[1]=z,Yi[0]=N+k,Ki[0]=Yi[0],Ki[1]=z+j,Or[1]=Ki[1]);let G;return m!==0?(G=rr(Bn(),n,i,1,1,m,-n,-i),Pt(G,Dr),Pt(G,Yi),Pt(G,Ki),Pt(G,Or),sr(Math.min(Dr[0],Yi[0],Ki[0],Or[0]),Math.min(Dr[1],Yi[1],Ki[1],Or[1]),Math.max(Dr[0],Yi[0],Ki[0],Or[0]),Math.max(Dr[1],Yi[1],Ki[1],Or[1]),vo)):sr(Math.min(N,N+k),Math.min(z,z+j),Math.max(N,N+k),Math.max(z,z+j),vo),v&&(S=Math.round(S),T=Math.round(T)),{drawImageX:S,drawImageY:T,drawImageW:I,drawImageH:L,originX:f,originY:g,declutterBox:{minX:vo[0],minY:vo[1],maxX:vo[2],maxY:vo[3],value:C},canvasTransform:G,scale:_}}replayImageOrLabel_(e,t,n,i,l,a,u){const h=!!(a||u),f=i.declutterBox,g=u?u[2]*i.scale[0]/2:0;return f.minX-g<=t[0]&&f.maxX+g>=0&&f.minY-g<=t[1]&&f.maxY+g>=0&&(h&&this.replayTextBackground_(e,Dr,Yi,Ki,Or,a,u),wS(e,i.canvasTransform,l,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const n=Pt(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(n[0]%i,n[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,n,i){const l=this.textStates[t],a=this.createLabel(e,t,i,n),u=this.strokeStates[n],h=this.pixelRatio,f=cf(Array.isArray(e)?e[0]:e,l.textAlign||da),g=Fc[l.textBaseline||Ic],m=u&&u.lineWidth?u.lineWidth:0,_=a.width/h-2*l.scale[0],v=f*_+2*(.5-f)*m,x=g*a.height/h+2*(.5-g)*m;return{label:a,anchorX:v,anchorY:x}}execute_(e,t,n,i,l,a,u,h){const f=this.zIndexContext_;let g;this.pixelCoordinates_&&ar(n,this.renderedTransform_)?g=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),g=Hr(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),iC(this.renderedTransform_,n));let m=0;const _=i.length;let v=0,x,E,C,S,T,I,L,k,j,N,z,G,re,te=0,ee=0,le=null,$=null;const se=this.coordinateCache_,X=this.viewRotation_,ae=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,Y={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:X},ne=this.instructions!=i||this.overlaps?0:200;let B,F,W,ge;for(;m<_;){const U=i[m];switch(U[0]){case pe.BEGIN_GEOMETRY:B=U[1],ge=U[3],B.getGeometry()?u!==void 0&&!gt(u,ge.getExtent())?m=U[2]+1:++m:m=U[2],f&&(f.zIndex=U[4]);break;case pe.BEGIN_PATH:te>ne&&(this.fill_(e),te=0),ee>ne&&(e.stroke(),ee=0),!te&&!ee&&(e.beginPath(),T=NaN,I=NaN),++m;break;case pe.CIRCLE:v=U[1];const ve=g[v],Te=g[v+1],Pe=g[v+2],De=g[v+3],Ye=Pe-ve,gn=De-Te,cr=Math.sqrt(Ye*Ye+gn*gn);e.moveTo(ve+cr,Te),e.arc(ve,Te,cr,0,2*Math.PI,!0),++m;break;case pe.CLOSE_PATH:e.closePath(),++m;break;case pe.CUSTOM:v=U[1],x=U[2];const Di=U[3],rs=U[4],hr=U[5];Y.geometry=Di,Y.feature=B,m in se||(se[m]=[]);const mi=se[m];hr?hr(g,v,x,2,mi):(mi[0]=g[v],mi[1]=g[v+1],mi.length=2),f&&(f.zIndex=U[6]),rs(mi,Y),++m;break;case pe.DRAW_IMAGE:v=U[1],x=U[2],j=U[3],E=U[4],C=U[5];let Dt=U[6];const pn=U[7],_i=U[8],Fn=U[9],Mn=U[10];let Hn=U[11];const Oi=U[12];let Ni=U[13];S=U[14]||"declutter";const ct=U[15];if(!j&&U.length>=20){N=U[19],z=U[20],G=U[21],re=U[22];const Yt=this.drawLabelWithPointPlacement_(N,z,G,re);j=Yt.label,U[3]=j;const yi=U[23];E=(Yt.anchorX-yi)*this.pixelRatio,U[4]=E;const Ot=U[24];C=(Yt.anchorY-Ot)*this.pixelRatio,U[5]=C,Dt=j.height,U[6]=Dt,Ni=j.width,U[13]=Ni}let Ws;U.length>25&&(Ws=U[25]);let ss,zi,os;U.length>17?(ss=U[16],zi=U[17],os=U[18]):(ss=Ls,zi=!1,os=!1),Mn&&ae?Hn+=X:!Mn&&!ae&&(Hn-=X);let ls=0;for(;v<x;v+=2){if(Ws&&Ws[ls++]<Ni/this.pixelRatio)continue;const Yt=this.calculateImageOrLabelDimensions_(j.width,j.height,g[v],g[v+1],Ni,Dt,E,C,_i,Fn,Hn,Oi,l,ss,zi||os,B),yi=[e,t,j,Yt,pn,zi?le:null,os?$:null];if(h){let Ot,mn,wt;if(ct){const Je=x-v;if(!ct[Je]){ct[Je]={args:yi,declutterMode:S};continue}const ht=ct[Je];Ot=ht.args,mn=ht.declutterMode,delete ct[Je],wt=K0(Ot)}let _n,Kt;if(Ot&&(mn!=="declutter"||!h.collides(wt))&&(_n=!0),(S!=="declutter"||!h.collides(Yt.declutterBox))&&(Kt=!0),mn==="declutter"&&S==="declutter"){const Je=_n&&Kt;_n=Je,Kt=Je}_n&&(mn!=="none"&&h.insert(wt),this.replayImageOrLabel_.apply(this,Ot)),Kt&&(S!=="none"&&h.insert(Yt.declutterBox),this.replayImageOrLabel_.apply(this,yi))}else this.replayImageOrLabel_.apply(this,yi)}++m;break;case pe.DRAW_CHARS:const dr=U[1],Ga=U[2],Us=U[3],ja=U[4];re=U[5];const uh=U[6],Vs=U[7],Bs=U[8];G=U[9];const as=U[10];N=U[11],z=U[12];const Xs=[U[13],U[13]];S=U[14]||"declutter";const us=this.textStates[z],An=us.font,Dn=[us.scale[0]*Vs,us.scale[1]*Vs];let fr;An in this.widths_?fr=this.widths_[An]:(fr={},this.widths_[An]=fr);const il=uv(g,dr,Ga,2),rl=Math.abs(Dn[0])*L0(An,N,fr);if(ja||rl<=il){const Yt=this.textStates[z].textAlign,yi=(il-rl)*cf(N,Yt),Ot=NT(g,dr,Ga,2,N,yi,uh,Math.abs(Dn[0]),L0,An,fr,ae?0:this.viewRotation_);e:if(Ot){const mn=[];let wt,_n,Kt,Je,ht;if(G)for(wt=0,_n=Ot.length;wt<_n;++wt){ht=Ot[wt],Kt=ht[4],Je=this.createLabel(Kt,z,"",G),E=ht[2]+(Dn[0]<0?-as:as),C=Us*Je.height+(.5-Us)*2*as*Dn[1]/Dn[0]-Bs;const en=this.calculateImageOrLabelDimensions_(Je.width,Je.height,ht[0],ht[1],Je.width,Je.height,E,C,0,0,ht[3],Xs,!1,Ls,!1,B);if(h&&S==="declutter"&&h.collides(en.declutterBox))break e;mn.push([e,t,Je,en,1,null,null])}if(re)for(wt=0,_n=Ot.length;wt<_n;++wt){ht=Ot[wt],Kt=ht[4],Je=this.createLabel(Kt,z,re,""),E=ht[2],C=Us*Je.height-Bs;const en=this.calculateImageOrLabelDimensions_(Je.width,Je.height,ht[0],ht[1],Je.width,Je.height,E,C,0,0,ht[3],Xs,!1,Ls,!1,B);if(h&&S==="declutter"&&h.collides(en.declutterBox))break e;mn.push([e,t,Je,en,1,null,null])}h&&S!=="none"&&h.load(mn.map(K0));for(let en=0,Ys=mn.length;en<Ys;++en)this.replayImageOrLabel_.apply(this,mn[en])}}++m;break;case pe.END_GEOMETRY:if(a!==void 0){B=U[1];const Yt=a(B,ge,S);if(Yt)return Yt}++m;break;case pe.FILL:ne?te++:this.fill_(e),++m;break;case pe.MOVE_TO_LINE_TO:for(v=U[1],x=U[2],F=g[v],W=g[v+1],e.moveTo(F,W),T=F+.5|0,I=W+.5|0,v+=2;v<x;v+=2)F=g[v],W=g[v+1],L=F+.5|0,k=W+.5|0,(v==x-2||L!==T||k!==I)&&(e.lineTo(F,W),T=L,I=k);++m;break;case pe.SET_FILL_STYLE:le=U,this.alignAndScaleFill_=U[2],te&&(this.fill_(e),te=0,ee&&(e.stroke(),ee=0)),e.fillStyle=U[1],++m;break;case pe.SET_STROKE_STYLE:$=U,ee&&(e.stroke(),ee=0),this.setStrokeStyle_(e,U),++m;break;case pe.STROKE:ne?ee++:e.stroke(),++m;break;default:++m;break}}te&&this.fill_(e),ee&&e.stroke()}execute(e,t,n,i,l,a){this.viewRotation_=i,this.execute_(e,t,n,this.instructions,l,void 0,void 0,a)}executeHitDetection(e,t,n,i,l){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,l)}}const Fo=["Polygon","Circle","LineString","Image","Text","Default"],Mc=["Image","Text"],GT=Fo.filter(r=>!Mc.includes(r));class Fv{constructor(e,t,n,i,l,a,u){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Bn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(l,u)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(const n in e){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const l=e[n];for(const a in l){const u=l[a];i[a]=new bT(this.resolution_,this.pixelRatio_,this.overlaps_,u,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let i=0,l=e.length;i<l;++i)if(e[i]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,i,l,a){i=Math.round(i);const u=i*2+1,h=rr(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-n,-e[0],-e[1]),f=!this.hitDetectionContext_;f&&(this.hitDetectionContext_=ut(u,u,void 0,{willReadFrequently:!0}));const g=this.hitDetectionContext_;g.canvas.width!==u||g.canvas.height!==u?(g.canvas.width=u,g.canvas.height=u):f||g.clearRect(0,0,u,u);let m;this.renderBuffer_!==void 0&&(m=Xn(),ea(m,e),Ji(m,t*(this.renderBuffer_+i),m));const _=jT(i);let v;function x(k,j,N){const z=g.getImageData(0,0,u,u).data;for(let G=0,re=_.length;G<re;G++)if(z[_[G]]>0){if(!a||N==="none"||v!=="Image"&&v!=="Text"||a.includes(k)){const te=(_[G]-3)/4,ee=i-te%u,le=i-(te/u|0),$=l(k,j,ee*ee+le*le);if($)return $}g.clearRect(0,0,u,u);break}}const E=Object.keys(this.executorsByZIndex_).map(Number);E.sort(Pi);let C,S,T,I,L;for(C=E.length-1;C>=0;--C){const k=E[C].toString();for(T=this.executorsByZIndex_[k],S=Fo.length-1;S>=0;--S)if(v=Fo[S],I=T[v],I!==void 0&&(L=I.executeHitDetection(g,h,n,x,m),L))return L}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],i=t[1],l=t[2],a=t[3],u=[n,i,n,a,l,a,l,i];return Hr(u,0,8,2,e,u),u}isEmpty(){return As(this.executorsByZIndex_)}execute(e,t,n,i,l,a,u){const h=Object.keys(this.executorsByZIndex_).map(Number);h.sort(Pi),a=a||Fo;const f=Fo.length;let g,m,_,v,x;for(u&&h.reverse(),g=0,m=h.length;g<m;++g){const E=h[g].toString();for(x=this.executorsByZIndex_[E],_=0,v=a.length;_<v;++_){const C=a[_],S=x[C];if(S!==void 0){const T=u===null?void 0:S.getZIndexContext(),I=T?T.getContext():e,L=this.maxExtent_&&C!=="Image"&&C!=="Text";if(L&&(I.save(),this.clip(I,n)),!T||C==="Text"||C==="Image"?S.execute(I,t,n,i,l,u):T.pushFunction(k=>S.execute(k,t,n,i,l,u)),L&&I.restore(),T){T.offset();const k=h[g]*f+_;this.deferredZIndexContexts_[k]||(this.deferredZIndexContexts_[k]=[]),this.deferredZIndexContexts_[k].push(T)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Pi);for(let n=0,i=t.length;n<i;++n)e[t[n]].forEach(l=>{l.draw(this.renderedContext_),l.clear()}),e[t[n]].length=0}}const hf={};function jT(r){if(hf[r]!==void 0)return hf[r];const e=r*2+1,t=r*r,n=new Array(t+1);for(let l=0;l<=r;++l)for(let a=0;a<=r;++a){const u=l*l+a*a;if(u>t)break;let h=n[u];h||(h=[],n[u]=h),h.push(((r+l)*e+(r+a))*4+3),l>0&&h.push(((r-l)*e+(r+a))*4+3),a>0&&(h.push(((r+l)*e+(r-a))*4+3),l>0&&h.push(((r-l)*e+(r-a))*4+3))}const i=[];for(let l=0,a=n.length;l<a;++l)n[l]&&i.push(...n[l]);return hf[r]=i,i}class WT extends Iv{constructor(e,t,n,i,l,a,u){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=i,this.transformRotation_=i?Hc(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=l,this.squaredTolerance_=a,this.userTransform_=u,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Bn()}drawImages_(e,t,n,i){if(!this.image_)return;const l=Hr(e,t,n,i,this.transform_,this.pixelCoordinates_),a=this.context_,u=this.tmpLocalTransform_,h=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=h*this.imageOpacity_);let f=this.imageRotation_;this.transformRotation_===0&&(f-=this.viewRotation_),this.imageRotateWithView_&&(f+=this.viewRotation_);for(let g=0,m=l.length;g<m;g+=2){const _=l[g]-this.imageAnchorX_,v=l[g+1]-this.imageAnchorY_;if(f!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const x=_+this.imageAnchorX_,E=v+this.imageAnchorY_;rr(u,x,E,1,1,f,-x,-E),a.save(),a.transform.apply(a,u),a.translate(x,E),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,_,v,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=h)}drawText_(e,t,n,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const l=Hr(e,t,n,i,this.transform_,this.pixelCoordinates_),a=this.context_;let u=this.textRotation_;for(this.transformRotation_===0&&(u-=this.viewRotation_),this.textRotateWithView_&&(u+=this.viewRotation_);t<n;t+=i){const h=l[t]+this.textOffsetX_,f=l[t+1]+this.textOffsetY_;u!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(h-this.textOffsetX_,f-this.textOffsetY_),a.rotate(u),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,h,f),this.textFillState_&&a.fillText(this.text_,h,f))}}moveToLineTo_(e,t,n,i,l){const a=this.context_,u=Hr(e,t,n,i,this.transform_,this.pixelCoordinates_);a.moveTo(u[0],u[1]);let h=u.length;l&&(h-=2);for(let f=2;f<h;f+=2)a.lineTo(u[f],u[f+1]);return l&&a.closePath(),n}drawRings_(e,t,n,i){for(let l=0,a=n.length;l<a;++l)t=this.moveToLineTo_(e,t,n[l],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!gt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=GC(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],i=t[3]-t[1],l=Math.sqrt(n*n+i*i),a=this.context_;a.beginPath(),a.arc(t[0],t[1],l,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,i=t.length;n<i;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!gt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(gt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getFlatCoordinates();let l=0;const a=e.getEnds(),u=e.getStride();n.beginPath();for(let h=0,f=a.length;h<f;++h)l=this.moveToLineTo_(i,l,a[h],u,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!gt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!gt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let i=0;const l=e.getEndss(),a=e.getStride();t.beginPath();for(let u=0,h=l.length;u<h;++u){const f=l[u];i=this.drawRings_(n,i,f,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),ar(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,i=e.textAlign?e.textAlign:da;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=i&&(n.textAlign=i,t.textAlign=i),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:Ii(n||cn)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),i=t.getLineCap(),l=t.getLineDash(),a=t.getLineDashOffset(),u=t.getLineJoin(),h=t.getWidth(),f=t.getMiterLimit(),g=l||tr;this.strokeState_={lineCap:i!==void 0?i:Ko,lineDash:this.pixelRatio_===1?g:g.map(m=>m*this.pixelRatio_),lineDashOffset:(a||nr)*this.pixelRatio_,lineJoin:u!==void 0?u:Ho,lineWidth:(h!==void 0?h:fa)*this.pixelRatio_,miterLimit:f!==void 0?f:ca,strokeStyle:Ii(n||ha)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),l=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=l[0],this.imageOriginY_=l[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/n,a[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const v=t.getColor();this.textFillState_={fillStyle:Ii(v||cn)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const v=n.getColor(),x=n.getLineCap(),E=n.getLineDash(),C=n.getLineDashOffset(),S=n.getLineJoin(),T=n.getWidth(),I=n.getMiterLimit();this.textStrokeState_={lineCap:x!==void 0?x:Ko,lineDash:E||tr,lineDashOffset:C||nr,lineJoin:S!==void 0?S:Ho,lineWidth:T!==void 0?T:fa,miterLimit:I!==void 0?I:ca,strokeStyle:Ii(v||ha)}}const i=e.getFont(),l=e.getOffsetX(),a=e.getOffsetY(),u=e.getRotateWithView(),h=e.getRotation(),f=e.getScaleArray(),g=e.getText(),m=e.getTextAlign(),_=e.getTextBaseline();this.textState_={font:i!==void 0?i:hv,textAlign:m!==void 0?m:da,textBaseline:_!==void 0?_:Ic},this.text_=g!==void 0?Array.isArray(g)?g.reduce((v,x,E)=>v+=E%2?" ":x,""):g:"",this.textOffsetX_=l!==void 0?this.pixelRatio_*l:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=u!==void 0?u:!1,this.textRotation_=h!==void 0?h:0,this.textScale_=[this.pixelRatio_*f[0],this.pixelRatio_*f[1]]}}}const Ln=.5;function Mv(r,e,t,n,i,l,a,u,h){const f=h?$c(i):i,g=r[0]*Ln,m=r[1]*Ln,_=ut(g,m);_.imageSmoothingEnabled=!1;const v=_.canvas,x=new WT(_,Ln,i,null,a,u,h?Zc(DC(),h):null),E=t.length,C=Math.floor((256*256*256-1)/E),S={};for(let I=1;I<=E;++I){const L=t[I-1],k=L.getStyleFunction()||n;if(!k)continue;let j=k(L,l);if(!j)continue;Array.isArray(j)||(j=[j]);const z=(I*C).toString(16).padStart(7,"#00000");for(let G=0,re=j.length;G<re;++G){const te=j[G],ee=te.getGeometryFunction()(L);if(!ee||!gt(f,ee.getExtent()))continue;const le=te.clone(),$=le.getFill();$&&$.setColor(z);const se=le.getStroke();se&&(se.setColor(z),se.setLineDash(null)),le.setText(void 0);const X=te.getImage();if(X){const B=X.getImageSize();if(!B)continue;const F=ut(B[0],B[1],void 0,{alpha:!1}),W=F.canvas;F.fillStyle=z,F.fillRect(0,0,W.width,W.height),le.setImage(new ka({img:W,anchor:X.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:X.getOrigin(),opacity:1,size:X.getSize(),scale:X.getScale(),rotation:X.getRotation(),rotateWithView:X.getRotateWithView()}))}const ae=le.getZIndex()||0;let Y=S[ae];Y||(Y={},S[ae]=Y,Y.Polygon=[],Y.Circle=[],Y.LineString=[],Y.Point=[]);const ne=ee.getType();if(ne==="GeometryCollection"){const B=ee.getGeometriesArrayRecursive();for(let F=0,W=B.length;F<W;++F){const ge=B[F];Y[ge.getType().replace("Multi","")].push(ge,le)}}else Y[ne.replace("Multi","")].push(ee,le)}}const T=Object.keys(S).map(Number).sort(Pi);for(let I=0,L=T.length;I<L;++I){const k=S[T[I]];for(const j in k){const N=k[j];for(let z=0,G=N.length;z<G;z+=2){x.setStyle(N[z+1]);for(let re=0,te=e.length;re<te;++re)x.setTransform(e[re]),x.drawGeometry(N[z])}}}return _.getImageData(0,0,v.width,v.height)}function Av(r,e,t){const n=[];if(t){const i=Math.floor(Math.round(r[0])*Ln),l=Math.floor(Math.round(r[1])*Ln),a=(rt(i,0,t.width-1)+rt(l,0,t.height-1)*t.width)*4,u=t.data[a],h=t.data[a+1],g=t.data[a+2]+256*(h+256*u),m=Math.floor((256*256*256-1)/e.length);g&&g%m===0&&n.push(e[g/m-1])}return n}const UT=.5,Dv={Point:$T,LineString:KT,Polygon:QT,MultiPoint:qT,MultiLineString:HT,MultiPolygon:ZT,GeometryCollection:YT,Circle:BT};function VT(r,e){return parseInt(Se(r),10)-parseInt(Se(e),10)}function jf(r,e){const t=Ov(r,e);return t*t}function Ov(r,e){return UT*r/e}function BT(r,e,t,n,i){const l=t.getFill(),a=t.getStroke();if(l||a){const h=r.getBuilder(t.getZIndex(),"Circle");h.setFillStrokeStyle(l,a),h.drawCircle(e,n,i)}const u=t.getText();if(u&&u.getText()){const h=r.getBuilder(t.getZIndex(),"Text");h.setTextStyle(u),h.drawText(e,n)}}function Ac(r,e,t,n,i,l,a,u){const h=[],f=t.getImage();if(f){let _=!0;const v=f.getImageState();v==ke.LOADED||v==ke.ERROR?_=!1:v==ke.IDLE&&f.load(),_&&h.push(f.ready())}const g=t.getFill();g&&g.loading()&&h.push(g.ready());const m=h.length>0;return m&&Promise.all(h).then(()=>i(null)),XT(r,e,t,n,l,a,u),m}function XT(r,e,t,n,i,l,a){const u=t.getGeometryFunction()(e);if(!u)return;const h=u.simplifyTransformed(n,i);if(t.getRenderer())Nv(r,h,t,e,a);else{const g=Dv[h.getType()];g(r,h,t,e,a,l)}}function Nv(r,e,t,n,i){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let u=0,h=a.length;u<h;++u)Nv(r,a[u],t,n,i);return}r.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer(),i)}function YT(r,e,t,n,i,l){const a=e.getGeometriesArray();let u,h;for(u=0,h=a.length;u<h;++u){const f=Dv[a[u].getType()];f(r,a[u],t,n,i,l)}}function KT(r,e,t,n,i){const l=t.getStroke();if(l){const u=r.getBuilder(t.getZIndex(),"LineString");u.setFillStrokeStyle(null,l),u.drawLineString(e,n,i)}const a=t.getText();if(a&&a.getText()){const u=r.getBuilder(t.getZIndex(),"Text");u.setTextStyle(a),u.drawText(e,n,i)}}function HT(r,e,t,n,i){const l=t.getStroke();if(l){const u=r.getBuilder(t.getZIndex(),"LineString");u.setFillStrokeStyle(null,l),u.drawMultiLineString(e,n,i)}const a=t.getText();if(a&&a.getText()){const u=r.getBuilder(t.getZIndex(),"Text");u.setTextStyle(a),u.drawText(e,n,i)}}function ZT(r,e,t,n,i){const l=t.getFill(),a=t.getStroke();if(a||l){const h=r.getBuilder(t.getZIndex(),"Polygon");h.setFillStrokeStyle(l,a),h.drawMultiPolygon(e,n,i)}const u=t.getText();if(u&&u.getText()){const h=r.getBuilder(t.getZIndex(),"Text");h.setTextStyle(u),h.drawText(e,n,i)}}function $T(r,e,t,n,i,l){const a=t.getImage(),u=t.getText(),h=u&&u.getText(),f=l&&a&&h?{}:void 0;if(a){if(a.getImageState()!=ke.LOADED)return;const g=r.getBuilder(t.getZIndex(),"Image");g.setImageStyle(a,f),g.drawPoint(e,n,i)}if(h){const g=r.getBuilder(t.getZIndex(),"Text");g.setTextStyle(u,f),g.drawText(e,n,i)}}function qT(r,e,t,n,i,l){const a=t.getImage(),u=a&&a.getOpacity()!==0,h=t.getText(),f=h&&h.getText(),g=l&&u&&f?{}:void 0;if(u){if(a.getImageState()!=ke.LOADED)return;const m=r.getBuilder(t.getZIndex(),"Image");m.setImageStyle(a,g),m.drawMultiPoint(e,n,i)}if(f){const m=r.getBuilder(t.getZIndex(),"Text");m.setTextStyle(h,g),m.drawText(e,n,i)}}function QT(r,e,t,n,i){const l=t.getFill(),a=t.getStroke();if(l||a){const h=r.getBuilder(t.getZIndex(),"Polygon");h.setFillStrokeStyle(l,a),h.drawPolygon(e,n,i)}const u=t.getText();if(u&&u.getText()){const h=r.getBuilder(t.getZIndex(),"Text");h.setTextStyle(u),h.drawText(e,n,i)}}class JT extends kv{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Xn(),this.wrappedRenderedExtent_=Xn(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){const i=t.extent,l=t.viewState,a=l.center,u=l.resolution,h=l.projection,f=l.rotation,g=h.getExtent(),m=this.getLayer().getSource(),_=this.getLayer().getDeclutter(),v=t.pixelRatio,x=t.viewHints,E=!(x[lt.ANIMATING]||x[lt.INTERACTING]),C=this.context,S=Math.round(We(i)/u*v),T=Math.round(Bt(i)/u*v),I=m.getWrapX()&&h.canWrapX(),L=I?We(g):null,k=I?Math.ceil((i[2]-g[2])/L)+1:1;let j=I?Math.floor((i[0]-g[0])/L):0;do{let N=this.getRenderTransform(a,u,0,v,S,T,j*L);t.declutter&&(N=N.slice(0)),e.execute(C,[C.canvas.width,C.canvas.height],N,f,E,n===void 0?Fo:n?Mc:GT,n?_&&t.declutter[_]:void 0)}while(++j<k)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=ut(this.context.canvas.width,this.context.canvas.height,Y0))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Ds(this.context),Y0.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const i=e.viewState;this.prepareContainer(e,t);const l=this.context,a=this.replayGroup_;let u=a&&!a.isEmpty();if(!u&&!(this.getLayer().hasListener(Un.PRERENDER)||this.getLayer().hasListener(Un.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(l,e),i.projection,this.clipped_=!1,u&&n.extent&&this.clipping){const h=qi(n.extent);u=gt(h,e.extent),this.clipped_=u&&!Is(h,e.extent),this.clipped_&&this.clipUnrotated(l,e,h)}return u&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&l.restore(),this.postRender(l,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),i=this.renderedCenter_,l=this.renderedResolution_,a=this.renderedRotation_,u=this.renderedProjection_,h=this.wrappedRenderedExtent_,f=this.getLayer(),g=[],m=n[0]*Ln,_=n[1]*Ln;g.push(this.getRenderTransform(i,l,a,Ln,m,_,0).slice());const v=f.getSource(),x=u.getExtent();if(v.getWrapX()&&u.canWrapX()&&!Is(x,h)){let E=h[0];const C=We(x);let S=0,T;for(;E<x[0];)--S,T=C*S,g.push(this.getRenderTransform(i,l,a,Ln,m,_,T).slice()),E+=C;for(S=0,E=h[2];E>x[2];)++S,T=C*S,g.push(this.getRenderTransform(i,l,a,Ln,m,_,T).slice()),E-=C}this.hitDetectionImageData_=Mv(n,g,this.renderedFeatures_,f.getStyleFunction(),h,l,a,jf(l,this.renderedPixelRatio_),null)}t(Av(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,i,l){if(!this.replayGroup_)return;const a=t.viewState.resolution,u=t.viewState.rotation,h=this.getLayer(),f={},g=function(x,E,C){const S=Se(x),T=f[S];if(T){if(T!==!0&&C<T.distanceSq){if(C===0)return f[S]=!0,l.splice(l.lastIndexOf(T),1),i(x,h,E);T.geometry=E,T.distanceSq=C}}else{if(C===0)return f[S]=!0,i(x,h,E);l.push(f[S]={feature:x,layer:h,geometry:E,distanceSq:C,callback:i})}};let m;const _=[this.replayGroup_],v=this.getLayer().getDeclutter();return _.some(x=>m=x.forEachFeatureAtCoordinate(e,a,u,n,g,v&&t.declutter[v]?t.declutter[v].all().map(E=>E.value):null)),m}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const i=e.viewHints[lt.ANIMATING],l=e.viewHints[lt.INTERACTING],a=t.getUpdateWhileAnimating(),u=t.getUpdateWhileInteracting();if(this.ready&&!a&&i||!u&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const h=e.extent,f=e.viewState,g=f.projection,m=f.resolution,_=e.pixelRatio,v=t.getRevision(),x=t.getRenderBuffer();let E=t.getRenderOrder();E===void 0&&(E=VT);const C=f.center.slice(),S=Ji(h,x*m),T=S.slice(),I=[S.slice()],L=g.getExtent();if(n.getWrapX()&&g.canWrapX()&&!Is(L,e.extent)){const $=We(L),se=Math.max(We(S)/2,$);S[0]=L[0]-se,S[2]=L[2]+se,mg(C,g);const X=Wy(I[0],g);X[0]<L[0]&&X[2]<L[2]?I.push([X[0]+$,X[1],X[2]+$,X[3]]):X[0]>L[0]&&X[2]>L[2]&&I.push([X[0]-$,X[1],X[2]-$,X[3]])}if(this.ready&&this.renderedResolution_==m&&this.renderedRevision_==v&&this.renderedRenderOrder_==E&&this.renderedFrameDeclutter_===!!e.declutter&&Is(this.wrappedRenderedExtent_,S))return ar(this.renderedExtent_,T)||(this.hitDetectionImageData_=null,this.renderedExtent_=T),this.renderedCenter_=C,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const k=new Pv(Ov(m,_),S,m,_);let j;for(let $=0,se=I.length;$<se;++$)n.loadFeatures(I[$],m,g);const N=jf(m,_);let z=!0;const G=($,se)=>{let X;const ae=$.getStyleFunction()||t.getStyleFunction();if(ae&&(X=ae($,m)),X){const Y=this.renderFeature($,N,X,k,j,this.getLayer().getDeclutter(),se);z=z&&!Y}},re=$c(S),te=n.getFeaturesInExtent(re);E&&te.sort(E);for(let $=0,se=te.length;$<se;++$)G(te[$],$);this.renderedFeatures_=te,this.ready=z;const ee=k.finish(),le=new Fv(S,m,_,n.getOverlaps(),ee,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=m,this.renderedRevision_=v,this.renderedRenderOrder_=E,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=T,this.wrappedRenderedExtent_=S,this.renderedCenter_=C,this.renderedProjection_=g,this.renderedPixelRatio_=_,this.replayGroup_=le,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,i,l,a,u){if(!n)return!1;let h=!1;if(Array.isArray(n))for(let f=0,g=n.length;f<g;++f)h=Ac(i,e,n[f],t,this.boundHandleStyleImageChange_,l,a,u)||h;else h=Ac(i,e,n,t,this.boundHandleStyleImageChange_,l,a,u);return h}}class zv extends Ug{constructor(e){super(e)}createRenderer(){return new JT(this)}}class Wf{constructor(e){this.rbush_=new vv(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[Se(t)]=n}load(e,t){const n=new Array(t.length);for(let i=0,l=t.length;i<l;i++){const a=e[i],u=t[i],h={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:u};n[i]=h,this.items_[Se(u)]=h}this.rbush_.load(n)}remove(e){const t=Se(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[Se(t)],i=[n.minX,n.minY,n.maxX,n.maxY];Bo(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let i=0,l=e.length;i<l;i++)if(n=t(e[i]),n)return n;return n}isEmpty(){return As(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return sr(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class oh extends ns{constructor(e,t,n){super(),n!==void 0&&t===void 0?this.setFlatCoordinates(n,e):(t=t||0,this.setCenterAndRadius(e,t,n))}clone(){const e=new oh(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,i){const l=this.flatCoordinates,a=e-l[0],u=t-l[1],h=a*a+u*u;if(h<i){if(h===0)for(let f=0;f<this.stride;++f)n[f]=l[f];else{const f=this.getRadius()/Math.sqrt(h);n[0]=l[0]+f*a,n[1]=l[1]+f*u;for(let g=2;g<this.stride;++g)n[g]=l[g]}return n.length=this.stride,h}return i}containsXY(e,t){const n=this.flatCoordinates,i=e-n[0],l=t-n[1];return i*i+l*l<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,n=t[this.stride]-t[0];return sr(t[0]-n,t[1]-n,t[0]+n,t[1]+n,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(gt(e,t)){const n=this.getCenter();return e[0]<=n[0]&&e[2]>=n[0]||e[1]<=n[1]&&e[3]>=n[1]?!0:hg(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,n=this.flatCoordinates[t]-this.flatCoordinates[0],i=e.slice();i[t]=i[0]+n;for(let l=1;l<t;++l)i[t+l]=e[l];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(e,t,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let l=Yy(i,0,e,this.stride);i[l++]=i[0]+t;for(let a=1,u=this.stride;a<u;++a)i[l++]=i[a];i.length=l,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const n=this.getCenter(),i=this.getStride();this.setCenter(vg(n,0,n.length,i,e,t,n)),this.changed()}}oh.prototype.transform;class Dc extends Xy{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Xe),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,n=e.length;t<n;++t)this.changeEventsKeys_.push(Oe(e[t],xe.CHANGE,this.changed,this))}clone(){const e=new Dc(df(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,n,i){if(i<bs(this.getExtent(),e,t))return i;const l=this.geometries_;for(let a=0,u=l.length;a<u;++a)i=l[a].closestPointXY(e,t,n,i);return i}containsXY(e,t){const n=this.geometries_;for(let i=0,l=n.length;i<l;++i)if(n[i].containsXY(e,t))return!0;return!1}computeExtent(e){Ia(e);const t=this.geometries_;for(let n=0,i=t.length;n<i;++n)Gy(e,t[n].getExtent());return e}getGeometries(){return df(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,i=t.length;n<i;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let i=!1;for(let l=0,a=n.length;l<a;++l){const u=n[l],h=u.getSimplifiedGeometry(e);t.push(h),h!==u&&(i=!0)}return i?new Dc(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,i=t.length;n<i;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const n=this.geometries_;for(let i=0,l=n.length;i<l;++i)n[i].rotate(e,t);this.changed()}scale(e,t,n){n||(n=or(this.getExtent()));const i=this.geometries_;for(let l=0,a=i.length;l<a;++l)i[l].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(df(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,i=t.length;n<i;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let i=0,l=n.length;i<l;++i)n[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function df(r){return r.map(e=>e.clone())}class Zo extends ns{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{const i=e,l=[],a=[];for(let h=0,f=i.length;h<f;++h){const g=i[h];Li(l,g.getFlatCoordinates()),a.push(l.length)}const u=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(u,l),this.ends_=a}}appendLineString(e){Li(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Zo(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,i){return i<bs(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wg(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Cg(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,i))}getCoordinateAtM(e,t,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,n=n!==void 0?n:!1,gS(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return oa(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new ki(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,i=[];let l=0;for(let a=0,u=t.length;a<u;++a){const h=t[a],f=new ki(e.slice(l,h),n);i.push(f),l=h}return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const i=this.ends_,l=this.stride;for(let a=0,u=i.length;a<u;++a){const h=i[a],f=Rc(t,n,h,l,.5);Li(e,f),n=h}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=Ky(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new Zo(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return HC(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Sg(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class Aa extends ns{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Li(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new Aa(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,i){if(i<bs(this.getExtent(),e,t))return i;const l=this.flatCoordinates,a=this.stride;for(let u=0,h=l.length;u<h;u+=a){const f=er(e,t,l[u],l[u+1]);if(f<i){i=f;for(let g=0;g<a;++g)n[g]=l[u+g];n.length=a}}return i}getCoordinates(){return Xr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new fi(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,i=[];for(let l=0,a=e.length;l<a;l+=n){const u=new fi(e.slice(l,l+n),t);i.push(u)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let i=0,l=t.length;i<l;i+=n){const a=t[i],u=t[i+1];if(ug(e,a,u))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qc(this.flatCoordinates,0,e,this.stride),this.changed()}}function bv(r,e,t,n){const i=[];let l=Xn();for(let a=0,u=t.length;a<u;++a){const h=t[a];l=cg(r,e,h[0],n),i.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=h[h.length-1]}return i}class $o extends ns{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const i=e,l=[],a=[];for(let u=0,h=i.length;u<h;++u){const f=i[u],g=l.length,m=f.getEnds();for(let _=0,v=m.length;_<v;++_)m[_]+=g;Li(l,f.getFlatCoordinates()),a.push(m)}t=i.length===0?this.getLayout():i[0].getLayout(),e=l,n=a}t!==void 0&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;Li(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,l=t.length;i<l;++i)t[i]+=n}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const n=new $o(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,i){return i<bs(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(jC(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),WC(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,i))}containsXY(e,t){return KC(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return XC(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),x0(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,Af(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=bv(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=$y(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Aa(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;qC(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=x0(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=BC(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new $o(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const l=this.endss_[e-1];t=l[l.length-1]}const n=this.endss_[e].slice(),i=n[n.length-1];if(t!==0)for(let l=0,a=n.length;l<a;++l)n[l]-=t;return new Fi(this.flatCoordinates.slice(t,i),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,i=[];let l=0;for(let a=0,u=n.length;a<u;++a){const h=n[a].slice(),f=h[h.length-1];if(l!==0)for(let m=0,_=h.length;m<_;++m)h[m]-=l;const g=new Fi(t.slice(l,f),e,h);i.push(g),l=f}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return ZC(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=UC(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const i=n[n.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const Z0=Bn();class Pn{constructor(e,t,n,i,l,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=l,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Jl(this.flatCoordinates_):cg(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=or(this.getExtent());this.flatInteriorPoints_=Ig(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=tv(this.flatCoordinates_,this.ends_),t=bv(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=$y(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Rc(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let i=0,l=n.length;i<l;++i){const a=n[i],u=Rc(e,t,a,2,.5);Li(this.flatMidpoints_,u),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=At(e);const t=e.getExtent(),n=e.getWorldExtent();if(t&&n){const i=Bt(n)/Bt(t);rr(Z0,n[0],n[3],i,-i,0,0,0),Hr(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Z0,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new Pn(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Oy((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const n=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":n.length=Qc(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),i=[n.length];break;case"MultiLineString":i=[],n.length=Ky(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,i);break;case"Polygon":i=[],n.length=Tg(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,i);break}return i&&(this.simplifiedGeometry_=new Pn(this.type_,n,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Pn.prototype.getFlatCoordinates=Pn.prototype.getOrientedFlatCoordinates;class Gv extends Ai{constructor(e){super(),this.projection=At(e.projection),this.attributions_=$0(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,i){t.viewResolver=n,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=$0(e),this.changed()}setState(e){this.state_=e,this.changed()}}function $0(r){return r?typeof r=="function"?r:(Array.isArray(r)||(r=[r]),e=>r):null}const an={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function eR(r,e){return[[-1/0,-1/0,1/0,1/0]]}let tR=!1;function jv(r,e,t,n,i,l,a){const u=new XMLHttpRequest;u.open("GET",typeof r=="function"?r(t,n,i):r,!0),e.getType()=="arraybuffer"&&(u.responseType="arraybuffer"),u.withCredentials=tR,u.onload=function(h){if(!u.status||u.status>=200&&u.status<300){const f=e.getType();try{let g;f=="text"||f=="json"?g=u.responseText:f=="xml"?g=u.responseXML||u.responseText:f=="arraybuffer"&&(g=u.response),g?l(e.readFeatures(g,{extent:t,featureProjection:i}),e.readProjection(g)):a()}catch{a()}}else a()},u.onerror=a,u.send()}function q0(r,e){return function(t,n,i,l,a){const u=this;jv(r,e,t,n,i,function(h,f){u.addFeatures(h),l!==void 0&&l(h)},a||Uo)}}class Nr extends Kn{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class Wv extends Gv{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Uo,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(be(this.format_,"`format` must be set when `url` is set"),this.loader_=q0(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:eR;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Wf:null,this.loadedExtentsRtree_=new Wf,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,i;Array.isArray(e.features)?i=e.features:e.features&&(n=e.features,i=n.getArray()),!t&&n===void 0&&(n=new Jt(i)),i!==void 0&&this.addFeaturesInternal(i),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Se(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Nr(an.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Pn||(this.featureChangeKeys_[e]=[Oe(t,xe.CHANGE,this.handleFeatureChange_,this),Oe(t,Wo.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof Pn){const l=this.idIndex_[i];l instanceof Pn?Array.isArray(l)?l.push(t):this.idIndex_[i]=[l,t]:n=!1}else n=!1}return n&&(be(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],i=[];for(let l=0,a=e.length;l<a;l++){const u=e[l],h=Se(u);this.addToIndex_(h,u)&&n.push(u)}for(let l=0,a=n.length;l<a;l++){const u=n[l],h=Se(u);this.setupChangeEvents_(h,u);const f=u.getGeometry();if(f){const g=f.getExtent();t.push(g),i.push(u)}else this.nullGeometryFeatures_[h]=u}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(an.ADDFEATURE))for(let l=0,a=n.length;l<a;l++)this.dispatchEvent(new Nr(an.ADDFEATURE,n[l]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(an.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(an.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(Vt.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(Vt.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Xe);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=i=>{this.removeFeatureInternal(i)};this.featuresRtree_.forEach(n);for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Nr(an.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(i){const l=i.getGeometry();if(l instanceof Pn||l.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const i=n.getGeometry();if(i instanceof Pn||i.intersectsExtent(e)){const l=t(n);if(l)return l}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),As(this.nullGeometryFeatures_)||Li(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=dg(e,t);return[].concat(...i.map(l=>this.featuresRtree_.getInExtent(l)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],i=e[1];let l=null;const a=[NaN,NaN];let u=1/0;const h=[-1/0,-1/0,1/0,1/0];return t=t||qr,this.featuresRtree_.forEachInExtent(h,function(f){if(t(f)){const g=f.getGeometry(),m=u;if(u=g instanceof Pn?0:g.closestPointXY(n,i,a,u),u<m){l=f;const _=Math.sqrt(u);h[0]=n-_,h[1]=i-_,h[2]=n+_,h[3]=i+_}}}),l}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=Se(t),i=t.getGeometry();if(!i)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const a=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const l=t.getId();if(l!==void 0){const a=l.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new Nr(an.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Se(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&As(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const i=this.loadedExtentsRtree_,l=this.strategy_(e,t,n);for(let a=0,u=l.length;a<u;++a){const h=l[a];i.forEachInExtent(h,function(g){return Is(g.extent,h)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Nr(an.FEATURESLOADSTART)),this.loader_.call(this,h,t,n,g=>{--this.loadingExtentsCount_,this.dispatchEvent(new Nr(an.FEATURESLOADEND,void 0,g))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Nr(an.FEATURESLOADERROR))}),i.insert(h,{extent:h.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let n;t.forEachInExtent(e,function(i){if(Bo(i.extent,e))return n=i,!0}),n&&t.remove(n)}removeFeatures(e){let t=!1;for(let n=0,i=e.length;n<i;++n)t=this.removeFeatureInternal(e[n])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Se(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const n=this.featureChangeKeys_[t];n==null||n.forEach(Xe),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const l=i.toString(),a=this.idIndex_[l];a===e?delete this.idIndex_[l]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[l]=a[0]))}return delete this.uidIndex_[t],this.hasListener(an.REMOVEFEATURE)&&this.dispatchEvent(new Nr(an.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){be(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(q0(e,this.format_))}}const Q={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Da extends Vc{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(xe.CHANGE)}release(){this.state===Q.ERROR&&this.setState(Q.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Q.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Le()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const i=t-n+1e3/60;return i>=this.transition_?1:_v(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class Uv extends Da{constructor(e,t,n,i,l,a){super(e,t,a),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=l}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Q.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Q.ERROR,this.unlistenImage_(),this.image_=nR(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Q.LOADED:this.state=Q.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Q.ERROR&&(this.state=Q.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Q.IDLE&&(this.state=Q.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=uS(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function nR(){const r=ut(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}class iR{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const i=this.points_[t+2]-this.points_[n+2];if(i<1e3/60)return!1;const l=this.points_[t]-this.points_[n],a=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(a,l),this.initialVelocity_=Math.sqrt(l*l+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class rR extends Uc{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Le()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;rr(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),zy(i,n)}forEachFeatureAtCoordinate(e,t,n,i,l,a,u,h){let f;const g=t.viewState;function m(L,k,j,N){return l.call(a,k,L?j:null,N)}const _=g.projection,v=mg(e.slice(),_),x=[[0,0]];if(_.canWrapX()&&i){const L=_.getExtent(),k=We(L);x.push([-k,0],[k,0])}const E=t.layerStatesArray,C=E.length,S=[],T=[];for(let L=0;L<x.length;L++)for(let k=C-1;k>=0;--k){const j=E[k],N=j.layer;if(N.hasRenderer()&&Gg(j,g)&&u.call(h,N)){const z=N.getRenderer(),G=N.getSource();if(z&&G){const re=G.getWrapX()?v:e,te=m.bind(null,j.managed);T[0]=re[0]+x[L][0],T[1]=re[1]+x[L][1],f=z.forEachFeatureAtCoordinate(T,t,n,te,S)}if(f)return f}}if(S.length===0)return;const I=1/S.length;return S.forEach((L,k)=>L.distanceSq+=k*I),S.sort((L,k)=>L.distanceSq-k.distanceSq),S.some(L=>f=L.callback(L.feature,L.layer,L.geometry)),f}hasFeatureAtCoordinate(e,t,n,i,l,a){return this.forEachFeatureAtCoordinate(e,t,n,i,qr,this,l,a)!==void 0}getMap(){return this.map_}renderFrame(e){Le()}scheduleExpireIconCache(e){Ri.canExpireCache()&&e.postRenderFunctions.push(sR)}}function sR(r,e){Ri.expire()}class oR extends rR{constructor(e){super(e),this.fontChangeListenerKey_=Oe(Hi,Wo.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=th+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const i=new Lv(e,void 0,t);n.dispatchEvent(i)}}disposeInternal(){Xe(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Un.PRECOMPOSE,e);const t=e.layerStatesArray.sort((u,h)=>u.zIndex-h.zIndex);t.some(u=>u.layer instanceof Ug&&u.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const l=[];let a=null;for(let u=0,h=t.length;u<h;++u){const f=t[u];e.layerIndex=u;const g=f.layer,m=g.getSourceState();if(!Gg(f,i)||m!="ready"&&m!="undefined"){g.unrender();continue}const _=g.render(e,a);_&&(_!==a&&(this.children_.push(_),a=_),l.push(f))}this.declutter(e,l),aS(this.element_,this.children_),this.dispatchRenderEvent(Un.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let n=t.length-1;n>=0;--n){const i=t[n],l=i.layer;l.getDeclutter()&&l.renderDeclutter(e,i)}t.forEach(n=>n.layer.renderDeferred(e))}}}class Vr extends Kn{constructor(e,t){super(e),this.layer=t}}const ff={LAYERS:"layers"};class nl extends pv{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(ff.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Jt(n.slice(),{unique:!0}):be(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new Jt(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Xe),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Oe(e,Vt.ADD,this.handleLayersAdd_,this),Oe(e,Vt.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Xe);Ta(this.listenerKeys_);const t=e.getArray();for(let n=0,i=t.length;n<i;n++){const l=t[n];this.registerLayerListeners_(l),this.dispatchEvent(new Vr("addlayer",l))}this.changed()}registerLayerListeners_(e){const t=[Oe(e,Wo.PROPERTYCHANGE,this.handleLayerChange_,this),Oe(e,xe.CHANGE,this.handleLayerChange_,this)];e instanceof nl&&t.push(Oe(e,"addlayer",this.handleLayerGroupAdd_,this),Oe(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Se(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Vr("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Vr("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Vr("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=Se(t);this.listenerKeys_[n].forEach(Xe),delete this.listenerKeys_[n],this.dispatchEvent(new Vr("removelayer",t)),this.changed()}getLayers(){return this.get(ff.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let i=0,l=n.length;i<l;++i)this.dispatchEvent(new Vr("removelayer",n[i]))}this.set(ff.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const i=this.getLayerState();let l=i.zIndex;!e&&i.zIndex===void 0&&(l=0);for(let a=n,u=t.length;a<u;a++){const h=t[a];h.opacity*=i.opacity,h.visible=h.visible&&i.visible,h.maxResolution=Math.min(h.maxResolution,i.maxResolution),h.minResolution=Math.max(h.minResolution,i.minResolution),h.minZoom=Math.max(h.minZoom,i.minZoom),h.maxZoom=Math.min(h.maxZoom,i.maxZoom),i.extent!==void 0&&(h.extent!==void 0?h.extent=kn(h.extent,i.extent):h.extent=i.extent),h.zIndex===void 0&&(h.zIndex=l)}return t}getSourceState(){return"ready"}}class Lo extends Kn{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}class Si extends Lo{constructor(e,t,n,i,l,a){super(e,t,l),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ae={SINGLECLICK:"singleclick",CLICK:xe.CLICK,DBLCLICK:xe.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Uf={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class lR extends Vc{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Oe(n,Uf.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Oe(n,Uf.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(xe.TOUCHMOVE,this.boundHandleTouchMove_,av?{passive:!1}:!1)}emulateClick_(e){let t=new Si(Ae.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Si(Ae.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Si(Ae.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==Ae.POINTERUP||t.type==Ae.POINTERCANCEL){delete this.trackedTouches_[n];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==Ae.POINTERDOWN||t.type==Ae.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Si(Ae.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Xe),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Si(Ae.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Oe(n,Ae.POINTERMOVE,this.handlePointerMove_,this),Oe(n,Ae.POINTERUP,this.handlePointerUp_,this),Oe(this.element_,Ae.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Oe(this.element_.getRootNode(),Ae.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Si(Ae.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Si(Ae.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Xe(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(xe.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Xe(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Xe),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const br={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},jt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Oc=1/0;class aR{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Ta(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(e){be(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Oc?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,i=t.length,l=t[e],a=n[e],u=e;for(;e<i>>1;){const h=this.getLeftChildIndex_(e),f=this.getRightChildIndex_(e),g=f<i&&n[f]<n[h]?f:h;t[e]=t[g],n[e]=n[g],e=g}t[e]=l,n[e]=a,this.siftDown_(u,e)}siftDown_(e,t){const n=this.elements_,i=this.priorities_,l=n[t],a=i[t];for(;t>e;){const u=this.getParentIndex_(t);if(i[u]>a)n[t]=n[u],i[t]=i[u],t=u;else break}n[t]=l,i[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let i=0;const l=t.length;let a,u,h;for(u=0;u<l;++u)a=t[u],h=e(a),h==Oc?delete this.queuedElements_[this.keyFunction_(a)]:(n[i]=h,t[i++]=a);t.length=i,n.length=i,this.heapify_()}}class uR extends aR{constructor(e,t){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(xe.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===Q.LOADED||n===Q.ERROR||n===Q.EMPTY){n!==Q.ERROR&&t.removeEventListener(xe.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;){const i=this.dequeue()[0],l=i.getKey();i.getState()===Q.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++n,i.load())}}}function cR(r,e,t,n,i){if(!r||!(t in r.wantedTiles)||!r.wantedTiles[t][e.getKey()])return Oc;const l=r.viewState.center,a=n[0]-l[0],u=n[1]-l[1];return 65536*Math.log(i)+Math.sqrt(a*a+u*u)/i}class Bg extends Ai{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let n=0,i=this.listenerKeys.length;n<i;++n)Xe(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_??e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Uo&&this.listenerKeys.push(Oe(e,br.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class hR extends Bg{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",l=e.collapseLabel!==void 0?e.collapseLabel:"",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=a):this.collapseLabel_=l;const u=e.label!==void 0?e.label:"i";typeof u=="string"?(this.label_=document.createElement("span"),this.label_.textContent=u,this.label_.className=i):this.label_=u;const h=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(h),this.toggleButton_.addEventListener(xe.CLICK,this.handleClick_.bind(this),!1);const f=t+" "+th+" "+Dg+(this.collapsed_&&this.collapsible_?" "+I0:"")+(this.collapsible_?"":" ol-uncollapsible"),g=this.element;g.className=f,g.appendChild(this.toggleButton_),g.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),n=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>n.add(i)):n.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(l=>{var a;return((a=l.getSource())==null?void 0:a.getAttributionsCollapsible())===!1});this.setCollapsible(i)}return Array.from(n)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>JE(()=>i))),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!ar(t,this.renderedAttributions_)){lS(this.ulElement_);for(let i=0,l=t.length;i<l;++i){const a=document.createElement("li");a.innerHTML=t[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(I0),this.collapsed_?T0(this.collapseLabel_,this.label_):T0(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class dR extends Bg{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const l=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=l,a.appendChild(this.label_),a.addEventListener(xe.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+th+" "+Dg,h=this.element;h.className=u,h.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Ju)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:tl}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const i="rotate("+n+"rad)";if(this.autoHide_){const l=this.element.classList.contains(Ju);!l&&n===0?this.element.classList.add(Ju):l&&n!==0&&this.element.classList.remove(Ju)}this.label_.style.transform=i}this.rotation_=n}}class fR extends Bg{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",l=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",u=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",h=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",f=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",g=document.createElement("button");g.className=i,g.setAttribute("type","button"),g.title=h,g.appendChild(typeof a=="string"?document.createTextNode(a):a),g.addEventListener(xe.CLICK,this.handleClick_.bind(this,n),!1);const m=document.createElement("button");m.className=l,m.setAttribute("type","button"),m.title=f,m.appendChild(typeof u=="string"?document.createTextNode(u):u),m.addEventListener(xe.CLICK,this.handleClick_.bind(this,-n),!1);const _=t+" "+th+" "+Dg,v=this.element;v.className=_,v.appendChild(g),v.appendChild(m),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const i=n.getZoom();if(i!==void 0){const l=n.getConstrainedZoom(i+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:l,duration:this.duration_,easing:tl})):n.setZoom(l)}}}function gR(r){r=r||{};const e=new Jt;return(r.zoom!==void 0?r.zoom:!0)&&e.push(new fR(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&e.push(new dR(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&e.push(new hR(r.attributionOptions)),e}const Nc={ACTIVE:"active"};class Oa extends Ai{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Nc.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Nc.ACTIVE,e)}setMap(e){this.map_=e}}function pR(r,e,t){const n=r.getCenterInternal();if(n){const i=[n[0]+e[0],n[1]+e[1]];r.animateInternal({duration:t!==void 0?t:250,easing:FS,center:r.getConstrainedCenter(i)})}}function Xg(r,e,t,n){const i=r.getZoom();if(i===void 0)return;const l=r.getConstrainedZoom(i+e),a=r.getResolutionForZoom(l);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:a,anchor:t,duration:n!==void 0?n:250,easing:tl})}class Vv extends Oa{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Ae.DBLCLICK){const n=e.originalEvent,i=e.map,l=e.coordinate,a=n.shiftKey?-this.delta_:this.delta_,u=i.getView();Xg(u,a,l,this.duration_),n.preventDefault(),t=!0}return!t}}class is extends Oa{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ae.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ae.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==Ae.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==Ae.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Yg(r){const e=r.length;let t=0,n=0;for(let i=0;i<e;i++)t+=r[i].clientX,n+=r[i].clientY;return{clientX:t/e,clientY:n/e}}function Vf(r){const e=arguments;return function(t){let n=!0;for(let i=0,l=e.length;i<l&&(n=n&&e[i](t),!!n);++i);return n}}const mR=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},_R=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},yR=function(r){const e=r.map.getTargetElement(),t=e.getRootNode(),n=r.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(n):e.contains(n)},Bv=function(r){const e=r.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?yR(r):!0},_a=qr,Xv=function(r){const e=r.originalEvent;return e.button==0&&!(oS&&rv&&e.ctrlKey)},vR=Jo,xR=function(r){return r.type==Ae.SINGLECLICK},Kg=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},wR=function(r){const e=r.originalEvent;return rv?e.metaKey:e.ctrlKey},Yv=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Kv=function(r){const e=r.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},gf=function(r){const e=r.originalEvent;return be(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},Hv=function(r){const e=r.originalEvent;return be(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class Zv extends is{constructor(e){super({stopDown:Jo}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:Vf(Kg,Hv);this.condition_=e.onFocusOnly?Vf(Bv,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,i=t.getEventPixel(Yg(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const l=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],u=e.map.getView();SC(l,u.getResolution()),pg(l,u.getRotation()),u.adjustCenterInternal(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),a=n.getCenterInternal(),u=t.getPixelFromCoordinateInternal(a),h=t.getCoordinateFromPixelInternal([u[0]-i*Math.cos(l),u[1]-i*Math.sin(l)]);n.animateInternal({center:n.getConstrainedCenter(h),duration:500,easing:tl})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class $v extends is{constructor(e){e=e||{},super({stopDown:Jo}),this.condition_=e.condition?e.condition:_R,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!gf(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===bg)return;const i=t.getSize(),l=e.pixel,a=Math.atan2(i[1]/2-l[1],l[0]-i[0]/2);if(this.lastAngle_!==void 0){const u=a-this.lastAngle_;n.adjustRotationInternal(-u)}this.lastAngle_=a}handleUpEvent(e){return gf(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return gf(e)&&Xv(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class ER extends Uc{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+n,i.top=Math.min(e[1],t[1])+n,i.width=Math.abs(t[0]-e[0])+n,i.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Fi([i])}getGeometry(){return this.geometry_}}const xo={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Bl extends Kn{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class qv extends is{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new ER(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??Xv,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const i=n[0]-t[0],l=n[1]-t[1];return i*i+l*l>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Bl(xo.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Bl(t?xo.BOXEND:xo.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Bl(xo.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Bl(xo.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Bl(xo.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class Qv extends qv{constructor(e){e=e||{};const t=e.condition?e.condition:Yv;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let i=this.getGeometry();if(this.out_){const l=n.rotatedExtentForGeometry(i),a=n.getResolutionForExtentInternal(l),u=n.getResolution()/a;i=i.clone(),i.scale(u*u)}n.fitInternal(i,{duration:this.duration_,easing:tl})}}const Ss={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Jv extends Oa{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Kg(t)&&Kv(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==xe.KEYDOWN){const n=e.originalEvent,i=n.key;if(this.condition_(e)&&(i==Ss.DOWN||i==Ss.LEFT||i==Ss.RIGHT||i==Ss.UP)){const a=e.map.getView(),u=a.getResolution()*this.pixelDelta_;let h=0,f=0;i==Ss.DOWN?f=-u:i==Ss.LEFT?h=-u:i==Ss.RIGHT?h=u:f=u;const g=[h,f];pg(g,a.getRotation()),pR(a,g,this.duration_),n.preventDefault(),t=!0}}return!t}}class e1 extends Oa{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!wR(t)&&Kv(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==xe.KEYDOWN||e.type==xe.KEYPRESS){const n=e.originalEvent,i=n.key;if(this.condition_(e)&&(i==="+"||i==="-")){const l=e.map,a=i==="+"?this.delta_:-this.delta_,u=l.getView();Xg(u,a,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}class t1 extends Oa{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:_a;this.condition_=e.onFocusOnly?Vf(Bv,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==xe.WHEEL)return!0;const n=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let l;if(e.type==xe.WHEEL&&(l=i.deltaY,rS&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(l/=sv),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(l*=40)),l===0)return!1;this.lastDelta_=l;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?"trackpad":"wheel");const u=n.getView();if(this.mode_==="trackpad"&&!(u.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(u.getAnimating()&&u.cancelAnimations(),u.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),u.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=l;const h=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),h),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-rt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Xg(t,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class n1 extends is{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Jo),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],i=this.targetPointers[1],l=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(this.lastAngle_!==void 0){const h=l-this.lastAngle_;this.rotationDelta_+=h,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=h}this.lastAngle_=l;const a=e.map,u=a.getView();u.getConstraints().rotation!==bg&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Yg(this.targetPointers))),this.rotating_&&(a.render(),u.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class i1 extends is{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Jo),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],i=this.targetPointers[1],l=n.clientX-i.clientX,a=n.clientY-i.clientY,u=Math.sqrt(l*l+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/u),this.lastDistance_=u;const h=e.map,f=h.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=h.getCoordinateFromPixelInternal(h.getEventPixel(Yg(this.targetPointers))),h.render(),f.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function CR(r){r=r||{};const e=new Jt,t=new iR(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&e.push(new $v),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&e.push(new Vv({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&e.push(new Zv({onFocusOnly:r.onFocusOnly,kinetic:t})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&e.push(new n1),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&e.push(new i1({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(e.push(new Jv),e.push(new e1({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&e.push(new t1({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&e.push(new Qv({duration:r.zoomDuration})),e}function r1(r){if(r instanceof ih){r.setMapInternal(null);return}r instanceof nl&&r.getLayers().forEach(r1)}function s1(r,e){if(r instanceof ih){r.setMapInternal(e);return}if(r instanceof nl){const t=r.getLayers().getArray();for(let n=0,i=t.length;n<i;++n)s1(t[n],e)}}let SR=class extends Ai{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=TR(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:sv,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Bn(),this.pixelToCoordinateTransform_=Bn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||gR(),this.interactions=t.interactions||CR({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new uR(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(jt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(jt.VIEW,this.handleViewChanged_),this.addChangeListener(jt.SIZE,this.handleSizeChanged_),this.addChangeListener(jt.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof Ti)&&e.view.then(function(i){n.setView(new Ti(i))}),this.controls.addEventListener(Vt.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(Vt.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(Vt.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(Vt.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(Vt.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(Vt.REMOVE,i=>{const l=i.element.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){s1(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const l=n.hitTolerance!==void 0?n.hitTolerance:0,a=n.layerFilter!==void 0?n.layerFilter:qr,u=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,l,u,t,null,a,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(i){n.push(i)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(i){i instanceof nl?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:qr,l=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,l,a,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),i=this.getSize(),l=n.width/i[0],a=n.height/i[1],u="changedTouches"in e?e.changedTouches[0]:e;return[(u.clientX-n.left)/l,(u.clientY-n.top)/a]}getTarget(){return this.get(jt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Yo(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Pt(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(jt.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Jt){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const i=e[t];if(!i.visible)continue;const l=i.layer.getRenderer();if(l&&!l.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=it(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Pt(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(jt.SIZE)}getView(){return this.get(jt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,i){return cR(this.frameState_,e,t,n,i)}handleBrowserEvent(e,t){t=t||e.type;const n=new Si(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===Uf.POINTERDOWN||n===xe.WHEEL||n===xe.KEYDOWN){const i=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=t.target,u=l instanceof ShadowRoot?l.host===a?l.host.ownerDocument:l:l===i?i.documentElement:l;if(this.overlayContainerStopEvent_.contains(a)||!u.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let l=i.length-1;l>=0;l--){const a=i[l];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,l=i;if(e){const a=e.viewHints;if(a[lt.ANIMATING]||a[lt.INTERACTING]){const u=Date.now()-e.time>8;i=u?0:8,l=u?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,l))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Un.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Un.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Lo(br.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Lo(br.LOADSTART,this,e))));const n=this.postRenderFunctions_;for(let i=0,l=n.length;i<l;++i)n[i](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,i=this.targetChangeHandlerKeys_.length;n<i;++n)Xe(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(xe.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(xe.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new oR(this)),this.mapBrowserEventHandler_=new lR(this,this.moveTolerance_);for(const l in Ae)this.mapBrowserEventHandler_.addEventListener(Ae[l],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(xe.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(xe.WHEEL,this.boundHandleBrowserEvent_,av?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const l=t.getRootNode();n=l instanceof ShadowRoot?l.host:t}this.targetChangeHandlerKeys_=[Oe(n,xe.KEYDOWN,this.handleBrowserEvent,this),Oe(n,xe.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Xe(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Xe(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Oe(e,Wo.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Oe(e,xe.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Xe),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Vr("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Oe(e,Wo.PROPERTYCHANGE,this.render,this),Oe(e,xe.CHANGE,this.render,this),Oe(e,"addlayer",this.handleLayerAdd_,this),Oe(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){r1(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),i=this.frameState_;let l=null;if(t!==void 0&&R0(t)&&n&&n.isDef()){const a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=n.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:kf(u.center,u.resolution,u.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:u,viewHints:a,wantedTiles:{},mapId:Se(this),renderTargets:{}},u.nextCenter&&u.nextResolution){const h=isNaN(u.nextRotation)?u.rotation:u.nextRotation;l.nextExtent=kf(u.nextCenter,u.nextResolution,h,t)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),i&&(!this.previousExtent_||!Kc(this.previousExtent_)&&!Bo(l.extent,this.previousExtent_))&&(this.dispatchEvent(new Lo(br.MOVESTART,this,i)),this.previousExtent_=Ia(this.previousExtent_)),this.previousExtent_&&!l.viewHints[lt.ANIMATING]&&!l.viewHints[lt.INTERACTING]&&!Bo(l.extent,this.previousExtent_)&&(this.dispatchEvent(new Lo(br.MOVEEND,this,l)),by(l.extent,this.previousExtent_))),this.dispatchEvent(new Lo(br.POSTRENDER,this,l)),this.renderComplete_=(this.hasListener(br.LOADSTART)||this.hasListener(br.LOADEND)||this.hasListener(Un.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Vr("removelayer",t)),this.set(jt.LAYERGROUP,e)}setSize(e){this.set(jt.SIZE,e)}setTarget(e){this.set(jt.TARGET,e)}setView(e){if(!e||e instanceof Ti){this.set(jt.VIEW,e);return}this.set(jt.VIEW,new Ti);const t=this;e.then(function(n){t.setView(new Ti(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),l=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),a=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(l)&&!isNaN(a)&&(t=[Math.max(0,l),Math.max(0,a)],!R0(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Vy("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!ar(t,n))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function TR(r){let e=null;r.keyboardEventTarget!==void 0&&(e=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const t={},n=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new nl({layers:r.layers});t[jt.LAYERGROUP]=n,t[jt.TARGET]=r.target,t[jt.VIEW]=r.view instanceof Ti?r.view:new Ti;let i;r.controls!==void 0&&(Array.isArray(r.controls)?i=new Jt(r.controls.slice()):(be(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=r.controls));let l;r.interactions!==void 0&&(Array.isArray(r.interactions)?l=new Jt(r.interactions.slice()):(be(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=r.interactions));let a;return r.overlays!==void 0?Array.isArray(r.overlays)?a=new Jt(r.overlays.slice()):(be(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=r.overlays):a=new Jt,{controls:i,interactions:l,keyboardEventTarget:e,overlays:a,values:t}}let RR=class{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();){const t=this.pop();t instanceof Uc&&t.dispose()}}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return be(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return be(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){be(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}};function zc(r,e,t,n){return n!==void 0?(n[0]=r,n[1]=e,n[2]=t,n):[r,e,t]}function IR(r,e,t){return r+"/"+e+"/"+t}function PR(r){return LR(r[0],r[1],r[2])}function LR(r,e,t){return(e<<r)+t}function kR(r,e){const t=r[0],n=r[1],i=r[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const l=e.getFullTileRange(t);return l?l.containsXY(n,i):!0}class Hg{constructor(e,t,n,i){this.minX=e,this.maxX=t,this.minY=n,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function wo(r,e,t,n,i){return i!==void 0?(i.minX=r,i.maxX=e,i.minY=t,i.maxY=n,i):new Hg(r,e,t,n)}const Q0=[];class FR extends Da{constructor(e,t,n,i,l){super(e,t,{transition:0}),this.context_=null,this.executorGroups=[],this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=l,this.wrappedTileCoord=n}getContext(){return this.context_||(this.context_=ut(1,1,Q0)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Se(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(Ds(this.context_),Q0.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let MR=class extends Da{constructor(e,t,n,i,l,a){super(e,t,a),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=l,this.url_=n,this.key=n}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Q.IDLE&&(this.setState(Q.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(Q.ERROR)}setFeatures(e){this.features_=e,this.setState(Q.LOADED)}setLoader(e){this.loader_=e}};const Yn=at.createContext({});var AR={};const un=typeof process>"u"||typeof AR.RLAYERS_DEBUG>"u"?()=>{}:console.debug.bind(window.console),o1="_rlayers_handlers";class Vn extends at.PureComponent{static getOLObject(e,t){let n=t.get(e);return n===void 0&&(n={},t.set(e,n)),n}get handlers(){return Vn.getOLObject(o1,this.ol)}getCurrentEvents(){return Object.keys(this.props).filter(e=>e.startsWith("on")).map(e=>({event:e.toLowerCase().slice(2),prop:e})).reduce((e,t)=>Object.assign(Object.assign({},e),{[t.event]:this.props[t.prop]}),{})}getHandlerProp(e){for(const t of Object.keys(this.props))if(t.toLowerCase()==="on"+e)return t}incrementHandlers(e){}decrementHandlers(e){}attachEventHandlers(){var e;const t=this.handlers,n=Object.keys(t??{}),i=(e=this.eventSources)!==null&&e!==void 0?e:[this.ol],l=this.getCurrentEvents(),a=Object.keys(l),u=a.concat(n.filter(h=>!a.includes(h)));for(const h of u){if(t[h]!==void 0&&l[h]===void 0){un("removing previously installed handler",this,h,t[h]);for(const f of i)f.un(h,t[h]);t[h]=void 0,this.decrementHandlers(h)}if(t[h]===void 0&&l[h]!==void 0){un("installing handler",this,h,l[h]);const f=this.getHandlerProp(h);if(!f)throw new Error("Internal error");t[h]=g=>this.props[f].call(this,g);for(const g of i)g.on(h,t[h]);this.incrementHandlers(h)}}}attachOldEventHandlers(e){const t=this.handlers,n=this.getCurrentEvents();for(const i of Object.keys(n))n[i]&&(un("reinstalling existing handler",this,i,n[i]),e.on(i,t[i]))}refresh(e){this.attachEventHandlers()}on(e,t){this.ol.on(e,t),this.incrementHandlers(e)}un(e,t){this.decrementHandlers(e),this.ol.un(e,t)}componentDidMount(){un("didMount",this),this.refresh()}propsDiff(e){if(this.props===null||e===null)return this.props!==e?(un("null props differ",this.props,e),!0):!1;for(const t of Object.keys(this.props))if(this.props[t]!==e[t])return un("because of",t,this.props[t],e[t]),!0;return!1}componentDidUpdate(e,t,n){this.props!==e&&(un("willRefresh",this,e,this.props),this.refresh(e))}componentWillUnmount(){var e;const t=this.handlers;un("willUnmount",this,t);const n=(e=this.eventSources)!==null&&e!==void 0?e:[this.ol];for(const i of Object.keys(t??{}))if(un("cleaning up handler",this,i,t[i]),t[i]){for(const l of n)l.un(i,t[i]);t[i]=void 0,this.decrementHandlers(i)}}render(){return null}}Vn.contextType=Yn;class DR extends Vn{constructor(e){super(e),this.updateView=t=>{var n;const i=this.ol.getView();typeof((n=this.props)===null||n===void 0?void 0:n.view[1])=="function"&&this.props.view[1]({center:i.getCenter(),zoom:i.getZoom(),resolution:i.getResolution()})},this.target=at.createRef(),this.ol=new SR({controls:e.noDefaultControls?[]:void 0,interactions:e.noDefaultInteractions?[]:void 0,view:new Ti({projection:e.projection,center:e.initial.center,zoom:e.initial.resolution===void 0?e.initial.zoom:void 0,resolution:e.initial.resolution,extent:e.extent,minResolution:e.minResolution,maxResolution:e.maxResolution,constrainResolution:e.constrainResolution,minZoom:e.minZoom,maxZoom:e.maxZoom,enableRotation:e.enableRotation,constrainRotation:e.constrainRotation})}),this.props.view&&this.ol.on("moveend",this.updateView)}componentDidMount(){super.componentDidMount(),this.ol.setTarget(this.target.current)}refresh(e){super.refresh(e);const t=this.ol.getView();for(const n of["minZoom","maxZoom","constrainResolution"]){const i=n.charAt(0).toUpperCase()+n.substring(1);(!e||this.props[n]!==e[n])&&t["set"+i](this.props[n])}this.props.view&&(t.setCenter(this.props.view[0].center),this.props.view[0].resolution===void 0?t.setZoom(this.props.view[0].zoom):t.setResolution(this.props.view[0].resolution)),this.props.properties&&this.ol.setProperties(this.props.properties),this.props.view?this.ol.on("moveend",this.updateView):this.ol.un("moveend",this.updateView)}render(){return at.createElement("div",{className:this.props.className,style:{width:this.props.width,height:this.props.height},ref:this.target},at.createElement(Yn.Provider,{value:{map:this.ol,rMap:this}},this.props.children))}}class l1 extends Vn{constructor(e,t){var n,i;if(super(e,t),!(!((i=(n=this.context)===null||n===void 0?void 0:n.map)===null||i===void 0)&&i.addLayer))throw new Error("A layer must be part of a map")}refresh(e){super.refresh(e);for(const t of["visible","opacity","zIndex","minResolution","maxResolution","minZoom","maxZoom"]){const n=t.charAt(0).toUpperCase()+t.substring(1);this.props[t]!==(e&&e[t])&&this.ol["set"+n](this.props[t])}this.source&&this.props.attributions&&this.source.setAttributions(this.props.attributions),this.props.properties&&this.ol.setProperties(this.props.properties)}componentDidMount(){super.componentDidMount(),this.context.map.addLayer(this.ol)}componentWillUnmount(){super.componentWillUnmount(),this.context.map.removeLayer(this.ol)}render(){return at.createElement("div",{className:"_rlayers_RLayer"},at.createElement(Yn.Provider,{value:Object.assign(Object.assign({},this.context),{layer:this.ol,source:this.source,rLayer:this})},this.props.children))}}const a1=.5;function bc(r){return r instanceof Image||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageBitmap?r:null}function OR(r){return r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Float32Array||r instanceof DataView?r:null}const NR=new Error("disposed");let Eo=null;function zR(r){Eo||(Eo=ut(r.width,r.height,void 0,{willReadFrequently:!0}));const e=Eo.canvas,t=r.width;e.width!==t&&(e.width=t);const n=r.height;return e.height!==n&&(e.height=n),Eo.clearRect(0,0,t,n),Eo.drawImage(r,0,0),Eo.getImageData(0,0,t,n).data}const bR=[256,256];class Bf extends Da{constructor(e){const t=Q.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=bc(this.data_);return e?[e.width,e.height]:bR}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Q.IDLE&&this.state!==Q.ERROR)return;this.state=Q.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Q.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Q.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(NR),this.controller_=null),super.disposeInternal()}}const GR=10,J0=.25;class u1{constructor(e,t,n,i,l,a){this.sourceProj_=e,this.targetProj_=t;let u={};const h=sa(this.targetProj_,this.sourceProj_);this.transformInv_=function(T){const I=T[0]+"/"+T[1];return u[I]||(u[I]=h(T)),u[I]},this.maxSourceExtent_=i,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&We(i)>=We(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?We(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?We(this.targetProj_.getExtent()):null;const f=ts(n),g=Yc(n),m=Xc(n),_=Bc(n),v=this.transformInv_(f),x=this.transformInv_(g),E=this.transformInv_(m),C=this.transformInv_(_),S=GR+(a?Math.max(0,Math.ceil(Math.log2(ra(n)/(a*a*256*256)))):0);if(this.addQuad_(f,g,m,_,v,x,E,C,S),this.wrapsXInSource_){let T=1/0;this.triangles_.forEach(function(I,L,k){T=Math.min(T,I.source[0][0],I.source[1][0],I.source[2][0])}),this.triangles_.forEach(I=>{if(Math.max(I.source[0][0],I.source[1][0],I.source[2][0])-T>this.sourceWorldWidth_/2){const L=[[I.source[0][0],I.source[0][1]],[I.source[1][0],I.source[1][1]],[I.source[2][0],I.source[2][1]]];L[0][0]-T>this.sourceWorldWidth_/2&&(L[0][0]-=this.sourceWorldWidth_),L[1][0]-T>this.sourceWorldWidth_/2&&(L[1][0]-=this.sourceWorldWidth_),L[2][0]-T>this.sourceWorldWidth_/2&&(L[2][0]-=this.sourceWorldWidth_);const k=Math.min(L[0][0],L[1][0],L[2][0]);Math.max(L[0][0],L[1][0],L[2][0])-k<this.sourceWorldWidth_/2&&(I.source=L)}})}u={}}addTriangle_(e,t,n,i,l,a){this.triangles_.push({source:[i,l,a],target:[e,t,n]})}addQuad_(e,t,n,i,l,a,u,h,f){const g=Rn([l,a,u,h]),m=this.sourceWorldWidth_?We(g)/this.sourceWorldWidth_:null,_=this.sourceWorldWidth_,v=this.sourceProj_.canWrapX()&&m>.5&&m<1;let x=!1;if(f>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const C=Rn([e,t,n,i]);x=We(C)/this.targetWorldWidth_>J0||x}!v&&this.sourceProj_.isGlobal()&&m&&(x=m>J0||x)}if(!x&&this.maxSourceExtent_&&isFinite(g[0])&&isFinite(g[1])&&isFinite(g[2])&&isFinite(g[3])&&!gt(g,this.maxSourceExtent_))return;let E=0;if(!x&&(!isFinite(l[0])||!isFinite(l[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(h[0])||!isFinite(h[1]))){if(f>0)x=!0;else if(E=(!isFinite(l[0])||!isFinite(l[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(u[0])||!isFinite(u[1])?2:0)+(!isFinite(h[0])||!isFinite(h[1])?1:0),E!=1&&E!=2&&E!=4&&E!=8)return}if(f>0){if(!x){const C=[(e[0]+n[0])/2,(e[1]+n[1])/2],S=this.transformInv_(C);let T;v?T=(Oo(l[0],_)+Oo(u[0],_))/2-Oo(S[0],_):T=(l[0]+u[0])/2-S[0];const I=(l[1]+u[1])/2-S[1];x=T*T+I*I>this.errorThresholdSquared_}if(x){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const C=[(t[0]+n[0])/2,(t[1]+n[1])/2],S=this.transformInv_(C),T=[(i[0]+e[0])/2,(i[1]+e[1])/2],I=this.transformInv_(T);this.addQuad_(e,t,C,T,l,a,S,I,f-1),this.addQuad_(T,C,n,i,I,S,u,h,f-1)}else{const C=[(e[0]+t[0])/2,(e[1]+t[1])/2],S=this.transformInv_(C),T=[(n[0]+i[0])/2,(n[1]+i[1])/2],I=this.transformInv_(T);this.addQuad_(e,C,T,i,l,S,I,h,f-1),this.addQuad_(C,t,n,T,S,a,u,I,f-1)}return}}if(v){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}E&11||this.addTriangle_(e,n,i,l,u,h),E&14||this.addTriangle_(e,n,t,l,u,a),E&&(E&13||this.addTriangle_(t,i,e,a,h,l),E&7||this.addTriangle_(t,i,n,a,h,u))}calculateSourceExtent(){const e=Xn();return this.triangles_.forEach(function(t,n,i){const l=t.source;ea(e,l[0]),ea(e,l[1]),ea(e,l[2])}),e}getTriangles(){return this.triangles_}}let pf;const ir=[];function ey(r,e,t,n,i){r.beginPath(),r.moveTo(0,0),r.lineTo(e,t),r.lineTo(n,i),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,n)+1,Math.max(t,i)),r.restore()}function mf(r,e){return Math.abs(r[e*4]-210)>2||Math.abs(r[e*4+3]-.75*255)>2}function jR(){if(pf===void 0){const r=ut(6,6,ir);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",ey(r,4,5,4,0),ey(r,4,5,0,5);const e=r.getImageData(0,0,3,3).data;pf=mf(e,0)||mf(e,4)||mf(e,8),Ds(r),ir.push(r.canvas)}return pf}function ty(r,e,t,n){const i=MC(t,e,r);let l=m0(e,n,t);const a=e.getMetersPerUnit();a!==void 0&&(l*=a);const u=r.getMetersPerUnit();u!==void 0&&(l/=u);const h=r.getExtent();if(!h||Vo(h,i)){const f=m0(r,l,i)/l;isFinite(f)&&f>0&&(l/=f)}return l}function c1(r,e,t,n){const i=or(t);let l=ty(r,e,i,n);return(!isFinite(l)||l<=0)&&hg(t,function(a){return l=ty(r,e,a,n),isFinite(l)&&l>0}),l}function h1(r,e,t,n,i,l,a,u,h,f,g,m,_,v){const x=ut(Math.round(t*r),Math.round(t*e),ir);if(m||(x.imageSmoothingEnabled=!1),h.length===0)return x.canvas;x.scale(t,t);function E(k){return Math.round(k*t)/t}x.globalCompositeOperation="lighter";const C=Xn();h.forEach(function(k,j,N){Gy(C,k.extent)});let S;const T=t/n,I=(m?1:1+Math.pow(2,-24))/T;if(!_||h.length!==1||f!==0){if(S=ut(Math.round(We(C)*T),Math.round(Bt(C)*T),ir),m||(S.imageSmoothingEnabled=!1),i&&v){const k=(i[0]-C[0])*T,j=-(i[3]-C[3])*T,N=We(i)*T,z=Bt(i)*T;S.rect(k,j,N,z),S.clip()}h.forEach(function(k,j,N){if(k.image.width>0&&k.image.height>0){if(k.clipExtent){S.save();const ee=(k.clipExtent[0]-C[0])*T,le=-(k.clipExtent[3]-C[3])*T,$=We(k.clipExtent)*T,se=Bt(k.clipExtent)*T;S.rect(m?ee:Math.round(ee),m?le:Math.round(le),m?$:Math.round(ee+$)-Math.round(ee),m?se:Math.round(le+se)-Math.round(le)),S.clip()}const z=(k.extent[0]-C[0])*T,G=-(k.extent[3]-C[3])*T,re=We(k.extent)*T,te=Bt(k.extent)*T;S.drawImage(k.image,f,f,k.image.width-2*f,k.image.height-2*f,m?z:Math.round(z),m?G:Math.round(G),m?re:Math.round(z+re)-Math.round(z),m?te:Math.round(G+te)-Math.round(G)),k.clipExtent&&S.restore()}})}const L=ts(a);return u.getTriangles().forEach(function(k,j,N){const z=k.source,G=k.target;let re=z[0][0],te=z[0][1],ee=z[1][0],le=z[1][1],$=z[2][0],se=z[2][1];const X=E((G[0][0]-L[0])/l),ae=E(-(G[0][1]-L[1])/l),Y=E((G[1][0]-L[0])/l),ne=E(-(G[1][1]-L[1])/l),B=E((G[2][0]-L[0])/l),F=E(-(G[2][1]-L[1])/l),W=re,ge=te;re=0,te=0,ee-=W,le-=ge,$-=W,se-=ge;const U=[[ee,le,0,0,Y-X],[$,se,0,0,B-X],[0,0,ee,le,ne-ae],[0,0,$,se,F-ae]],we=EC(U);if(!we)return;if(x.save(),x.beginPath(),jR()||!m){x.moveTo(Y,ne);const Te=4,Pe=X-Y,De=ae-ne;for(let Ye=0;Ye<Te;Ye++)x.lineTo(Y+E((Ye+1)*Pe/Te),ne+E(Ye*De/(Te-1))),Ye!=Te-1&&x.lineTo(Y+E((Ye+1)*Pe/Te),ne+E((Ye+1)*De/(Te-1)));x.lineTo(B,F)}else x.moveTo(Y,ne),x.lineTo(X,ae),x.lineTo(B,F);x.clip(),x.transform(we[0],we[2],we[1],we[3],X,ae),x.translate(C[0]-W,C[3]-ge);let ve;if(S)ve=S.canvas,x.scale(I,-I);else{const Te=h[0],Pe=Te.extent;ve=Te.image,x.scale(We(Pe)/ve.width,-Bt(Pe)/ve.height)}x.drawImage(ve,0,0),x.restore()}),S&&(Ds(S),ir.push(S.canvas)),g&&(x.save(),x.globalCompositeOperation="source-over",x.strokeStyle="black",x.lineWidth=1,u.getTriangles().forEach(function(k,j,N){const z=k.target,G=(z[0][0]-L[0])/l,re=-(z[0][1]-L[1])/l,te=(z[1][0]-L[0])/l,ee=-(z[1][1]-L[1])/l,le=(z[2][0]-L[0])/l,$=-(z[2][1]-L[1])/l;x.beginPath(),x.moveTo(te,ee),x.lineTo(G,re),x.lineTo(le,$),x.closePath(),x.stroke()}),x.restore()),x.canvas}class WR extends Bf{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,n=t.getExtent(),i=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?i?kn(n,i):n:i;const l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),a=this.targetTileGrid_.getExtent();let u=this.sourceTileGrid_.getExtent();const h=a?kn(l,a):l;if(ra(h)===0){this.state=Q.EMPTY;return}n&&(u?u=kn(u,n):u=n);const f=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),g=e.targetProj,m=c1(t,g,h,f);if(!isFinite(m)||m<=0){this.state=Q.EMPTY;return}const _=e.errorThreshold!==void 0?e.errorThreshold:a1;if(this.triangulation_=new u1(t,g,h,u,m*_,f),this.triangulation_.getTriangles().length===0){this.state=Q.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(m);let v=this.triangulation_.calculateSourceExtent();if(u&&(t.canWrapX()?(v[1]=rt(v[1],u[1],u[3]),v[3]=rt(v[3],u[1],u[3])):v=kn(v,u)),!ra(v))this.state=Q.EMPTY;else{let x=0,E=0;t.canWrapX()&&(x=We(n),E=Math.floor((v[0]-n[0])/x)),dg(v.slice(),t,!0).forEach(S=>{const T=this.sourceTileGrid_.getTileRangeForExtentAndZ(S,this.sourceZ_),I=e.getTileFunction;for(let L=T.minX;L<=T.maxX;L++)for(let k=T.minY;k<=T.maxY;k++){const j=I(this.sourceZ_,L,k,this.pixelRatio_);if(j){const N=E*x;this.sourceTiles_.push({tile:j,offset:N})}}++E}),this.sourceTiles_.length===0&&(this.state=Q.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(x=>{var ae;const E=x.tile;if(!E||E.getState()!==Q.LOADED)return;const C=E.getSize(),S=this.gutter_;let T;const I=OR(E.getData());I?T=I:(t=!0,T=zR(bc(E.getData())));const L=[C[0]+2*S,C[1]+2*S],k=T instanceof Float32Array,j=L[0]*L[1],N=k?Float32Array:Uint8ClampedArray,z=new N(T.buffer),G=N.BYTES_PER_ELEMENT,re=G*z.length/j,te=z.byteLength/L[1],ee=Math.floor(te/G/L[0]),le=j*ee;let $=z;if(z.length!==le){$=new N(le);let Y=0,ne=0;const B=L[0]*ee;for(let F=0;F<L[1];++F){for(let W=0;W<B;++W)$[Y++]=z[ne+W];ne+=te/G}}const se=this.sourceTileGrid_.getTileCoordExtent(E.tileCoord);se[0]+=x.offset,se[2]+=x.offset;const X=(ae=this.clipExtent_)==null?void 0:ae.slice();X&&(X[0]+=x.offset,X[2]+=x.offset),e.push({extent:se,clipExtent:X,data:new Uint8ClampedArray($.buffer),dataType:N,bytesPerPixel:re,pixelSize:L})}),this.sourceTiles_.length=0,e.length===0){this.state=Q.ERROR,this.changed();return}const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),l=typeof i=="number"?i:i[0],a=typeof i=="number"?i:i[1],u=this.targetTileGrid_.getResolution(n),h=this.sourceTileGrid_.getResolution(this.sourceZ_),f=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let g,m;const _=e[0].bytesPerPixel,v=Math.ceil(_/3);for(let x=v-1;x>=0;--x){const E=[];for(let k=0,j=e.length;k<j;++k){const N=e[k],z=N.data,G=N.pixelSize,re=G[0],te=G[1],ee=ut(re,te,ir),le=ee.createImageData(re,te),$=le.data;let se=x*3;for(let X=0,ae=$.length;X<ae;X+=4)$[X]=z[se],$[X+1]=z[se+1],$[X+2]=z[se+2],$[X+3]=255,se+=_;ee.putImageData(le,0,0),E.push({extent:N.extent,clipExtent:N.clipExtent,image:ee.canvas})}const C=h1(l,a,this.pixelRatio_,h,this.sourceTileGrid_.getExtent(),u,f,this.triangulation_,E,this.gutter_,!1,!1,!1);for(let k=0,j=E.length;k<j;++k){const z=E[k].image.getContext("2d");Ds(z),ir.push(z.canvas)}const S=C.getContext("2d"),T=S.getImageData(0,0,C.width,C.height);Ds(S),ir.push(C),g||(m=new Uint8ClampedArray(_*T.width*T.height),g=new e[0].dataType(m.buffer));const I=T.data;let L=x*3;for(let k=0,j=I.length;k<j;k+=4)I[k+3]===255?(m[L]=I[k],m[L+1]=I[k+1],m[L+2]=I[k+2]):(m[L]=0,m[L+1]=0,m[L+2]=0),L+=_}if(t){const x=ut(l,a),E=new ImageData(g,l);x.putImageData(E,0,0),this.reprojData_=x.canvas}else this.reprojData_=g;this.reprojSize_=[Math.round(l*this.pixelRatio_),Math.round(a*this.pixelRatio_)],this.state=Q.LOADED,this.changed()}load(){if(this.state!==Q.IDLE&&this.state!==Q.ERROR)return;this.state=Q.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n!==Q.IDLE&&n!==Q.LOADING)return;e++;const i=Oe(t,xe.CHANGE,()=>{const l=t.getState();(l==Q.LOADED||l==Q.ERROR||l==Q.EMPTY)&&(Xe(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==Q.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Xe),this.sourcesListenerKeys_=null}}class Xf extends Da{constructor(e,t,n,i,l,a,u,h,f,g,m,_){super(l,Q.IDLE,_),this.renderEdges_=m!==void 0?m:!1,this.pixelRatio_=u,this.gutter_=h,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=a||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const v=i.getTileCoordExtent(this.wrappedTileCoord_),x=this.targetTileGrid_.getExtent();let E=this.sourceTileGrid_.getExtent();const C=x?kn(v,x):v;if(ra(C)===0){this.state=Q.EMPTY;return}const S=e.getExtent();S&&(E?E=kn(E,S):E=S);const T=i.getResolution(this.wrappedTileCoord_[0]),I=c1(e,n,C,T);if(!isFinite(I)||I<=0){this.state=Q.EMPTY;return}const L=g!==void 0?g:a1;if(this.triangulation_=new u1(e,n,C,E,I*L,T),this.triangulation_.getTriangles().length===0){this.state=Q.EMPTY;return}this.sourceZ_=t.getZForResolution(I);let k=this.triangulation_.calculateSourceExtent();if(E&&(e.canWrapX()?(k[1]=rt(k[1],E[1],E[3]),k[3]=rt(k[3],E[1],E[3])):k=kn(k,E)),!ra(k))this.state=Q.EMPTY;else{let j=0,N=0;e.canWrapX()&&(j=We(S),N=Math.floor((k[0]-S[0])/j)),dg(k.slice(),e,!0).forEach(G=>{const re=t.getTileRangeForExtentAndZ(G,this.sourceZ_);for(let te=re.minX;te<=re.maxX;te++)for(let ee=re.minY;ee<=re.maxY;ee++){const le=f(this.sourceZ_,te,ee,u);if(le){const $=N*j;this.sourceTiles_.push({tile:le,offset:$})}}++N}),this.sourceTiles_.length===0&&(this.state=Q.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var i;const n=t.tile;if(n&&n.getState()==Q.LOADED){const l=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);l[0]+=t.offset,l[2]+=t.offset;const a=(i=this.clipExtent_)==null?void 0:i.slice();a&&(a[0]+=t.offset,a[2]+=t.offset),e.push({extent:l,clipExtent:a,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Q.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),i=typeof n=="number"?n:n[0],l=typeof n=="number"?n:n[1],a=this.targetTileGrid_.getResolution(t),u=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=h1(i,l,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),a,h,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Q.LOADED}this.changed()}load(){if(this.state==Q.IDLE){this.state=Q.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n==Q.IDLE||n==Q.LOADING){e++;const i=Oe(t,xe.CHANGE,l=>{const a=t.getState();(a==Q.LOADED||a==Q.ERROR||a==Q.EMPTY)&&(Xe(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},n,i){t.getState()==Q.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Xe),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Ds(this.canvas_.getContext("2d")),ir.push(this.canvas_),this.canvas_=null),super.release()}}const Kr={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class UR extends ih{constructor(e){e=e||{};const t=Object.assign({},e),n=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Kr.PRELOAD)}setPreload(e){this.set(Kr.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Kr.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Kr.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function _f(r,e,t,n){return`${r},${IR(e,t,n)}`}function yf(r,e,t){if(!(t in r))return r[t]=new Set([e]),!0;const n=r[t],i=n.has(e);return i||n.add(e),!i}function VR(r,e,t){const n=r[t];return n?n.delete(e):!1}function ny(r,e){const t=r.layerStatesArray[r.layerIndex];t.extent&&(e=kn(e,qi(t.extent,r.viewState.projection)));const n=t.layer.getRenderSource();if(!n.getWrapX()){const i=n.getTileGridForProjection(r.viewState.projection).getExtent();i&&(e=kn(e,i))}return e}class d1 extends kv{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Xn(),this.tempTileRange_=new Hg(0,0,0,0),this.tempTileCoord_=zc(0,0,0);const n=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new RR(n),this.renderedProjection_=void 0,this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,n,i){const l=this.tileCache_,u=this.getLayer().getSource(),h=_f(u.getKey(),e,t,n);let f;if(l.containsKey(h))f=l.get(h);else{if(f=u.getTile(e,t,n,i.pixelRatio,i.viewState.projection),!f)return null;l.set(h,f)}return f}getTile(e,t,n,i){const l=this.getOrCreateTile(e,t,n,i);return l||null}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),i=Pt(t.pixelToCoordinateTransform,e.slice()),l=n.getExtent();if(l&&!Vo(l,i))return null;const a=t.viewState,u=n.getRenderSource(),h=u.getTileGridForProjection(a.projection),f=u.getTilePixelRatio(t.pixelRatio);for(let g=h.getZForResolution(a.resolution);g>=h.getMinZoom();--g){const m=h.getTileCoordForCoordAndZ(i,g),_=this.getTile(g,m[1],m[2],t);if(!_||_.getState()!==Q.LOADED)continue;const v=h.getOrigin(g),x=Xt(h.getTileSize(g)),E=h.getResolution(g);let C;if(_ instanceof Uv||_ instanceof Xf)C=_.getImage();else if(_ instanceof Bf){if(C=bc(_.getData()),!C)continue}else continue;const S=Math.floor(f*((i[0]-v[0])/E-m[1]*x[0])),T=Math.floor(f*((v[1]-i[1])/E-m[2]*x[1])),I=Math.round(f*u.getGutterForProjection(a.projection));return this.getImageData(C,S+I,T+I)}return null}prepareFrame(e){this.renderedProjection_?e.viewState.projection!==this.renderedProjection_&&(this.tileCache_.clear(),this.renderedProjection_=e.viewState.projection):this.renderedProjection_=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const n=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==n&&(this.renderedRevision_=n,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=n,!0}enqueueTiles(e,t,n,i,l){const a=e.viewState,u=this.getLayer(),h=u.getRenderSource(),f=h.getTileGridForProjection(a.projection),g=Se(h);g in e.wantedTiles||(e.wantedTiles[g]={});const m=e.wantedTiles[g],_=u.getMapInternal(),v=Math.max(n-l,f.getMinZoom(),f.getZForResolution(Math.min(u.getMaxResolution(),_?_.getView().getResolutionForZoom(Math.max(u.getMinZoom(),0)):f.getResolution(0)),h.zDirection));for(let x=n;x>=v;--x){const E=f.getTileRangeForExtentAndZ(t,x,this.tempTileRange_),C=f.getResolution(x);for(let S=E.minX;S<=E.maxX;++S)for(let T=E.minY;T<=E.maxY;++T){const I=this.getTile(x,S,T,e);if(!I||!yf(i,I,x))continue;const k=I.getKey();if(m[k]=!0,I.getState()===Q.IDLE&&!e.tileQueue.isKeyQueued(k)){const j=zc(x,S,T,this.tempTileCoord_);e.tileQueue.enqueue([I,g,f.getTileCoordCenter(j),C])}}}}findStaleTile_(e,t){const n=this.tileCache_,i=e[0],l=e[1],a=e[2],u=this.getStaleKeys();for(let h=0;h<u.length;++h){const f=_f(u[h],i,l,a);if(n.containsKey(f)){const g=n.get(f);if(g.getState()===Q.LOADED)return g.endTransition(Se(this)),yf(t,g,i),!0}}return!1}findAltTiles_(e,t,n,i){const l=e.getTileRangeForTileCoordAndZ(t,n,this.tempTileRange_);if(!l)return!1;let a=!0;const u=this.tileCache_,f=this.getLayer().getRenderSource().getKey();for(let g=l.minX;g<=l.maxX;++g)for(let m=l.minY;m<=l.maxY;++m){const _=_f(f,n,g,m);let v=!1;if(u.containsKey(_)){const x=u.get(_);x.getState()===Q.LOADED&&(yf(i,x,n),v=!0)}v||(a=!1)}return a}renderFrame(e,t){this.renderComplete=!0;const n=e.layerStatesArray[e.layerIndex],i=e.viewState,l=i.projection,a=i.resolution,u=i.center,h=e.pixelRatio,f=this.getLayer(),g=f.getSource(),m=g.getRevision(),_=g.getTileGridForProjection(l),v=_.getZForResolution(a,g.zDirection),x=_.getResolution(v),E=g.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==E&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=E):this.renderedSourceKey_=E;let C=e.extent;const S=g.getTilePixelRatio(h);this.prepareContainer(e,t);const T=this.context.canvas.width,I=this.context.canvas.height,L=n.extent&&qi(n.extent);L&&(C=kn(C,qi(n.extent)));const k=x*T/2/S,j=x*I/2/S,N=[u[0]-k,u[1]-j,u[0]+k,u[1]+j],z={};this.renderedTiles.length=0;const G=f.getPreload();if(e.nextExtent){const B=_.getZForResolution(i.nextResolution,g.zDirection),F=ny(e,e.nextExtent);this.enqueueTiles(e,F,B,z,G)}const re=ny(e,C);if(this.enqueueTiles(e,re,v,z,0),G>0&&setTimeout(()=>{this.enqueueTiles(e,re,v-1,z,G-1)},0),!(v in z))return this.container;const te=Se(this),ee=e.time;for(const B of z[v]){const F=B.getState();if((B instanceof Xf||B instanceof WR)&&F===Q.EMPTY)continue;const W=B.tileCoord;if(F===Q.LOADED&&B.getAlpha(te,ee)===1){B.endTransition(te);continue}if(this.renderComplete=!1,this.findStaleTile_(W,z)){VR(z,B,v),e.animate=!0;continue}if(this.findAltTiles_(_,W,v+1,z))continue;const we=_.getMinZoom();for(let ve=v-1;ve>=we&&!this.findAltTiles_(_,W,ve,z);--ve);}const le=x/a*h/S,$=this.getRenderContext(e);rr(this.tempTransform,T/2,I/2,le,le,0,-T/2,-I/2),n.extent&&this.clipUnrotated($,e,L),g.getInterpolate()||($.imageSmoothingEnabled=!1),this.preRender($,e);const se=Object.keys(z).map(Number);se.sort(Pi);let X;const ae=[],Y=[];for(let B=se.length-1;B>=0;--B){const F=se[B],W=g.getTilePixelSize(F,h,l),U=_.getResolution(F)/x,we=W[0]*U*le,ve=W[1]*U*le,Te=_.getTileCoordForCoordAndZ(ts(N),F),Pe=_.getTileCoordExtent(Te),De=Pt(this.tempTransform,[S*(Pe[0]-N[0])/x,S*(N[3]-Pe[3])/x]),Ye=S*g.getGutterForProjection(l);for(const gn of z[F]){if(gn.getState()!==Q.LOADED)continue;const cr=gn.tileCoord,Di=Te[1]-cr[1],rs=Math.round(De[0]-(Di-1)*we),hr=Te[2]-cr[2],mi=Math.round(De[1]-(hr-1)*ve),Dt=Math.round(De[0]-Di*we),pn=Math.round(De[1]-hr*ve),_i=rs-Dt,Fn=mi-pn,Mn=se.length===1;let Hn=!1;X=[Dt,pn,Dt+_i,pn,Dt+_i,pn+Fn,Dt,pn+Fn];for(let Oi=0,Ni=ae.length;Oi<Ni;++Oi)if(!Mn&&F<Y[Oi]){const ct=ae[Oi];gt([Dt,pn,Dt+_i,pn+Fn],[ct[0],ct[3],ct[4],ct[7]])&&(Hn||($.save(),Hn=!0),$.beginPath(),$.moveTo(X[0],X[1]),$.lineTo(X[2],X[3]),$.lineTo(X[4],X[5]),$.lineTo(X[6],X[7]),$.moveTo(ct[6],ct[7]),$.lineTo(ct[4],ct[5]),$.lineTo(ct[2],ct[3]),$.lineTo(ct[0],ct[1]),$.clip())}ae.push(X),Y.push(F),this.drawTile(gn,e,Dt,pn,_i,Fn,Ye,Mn),Hn&&$.restore(),this.renderedTiles.unshift(gn),this.updateUsedTiles(e.usedTiles,g,gn)}}this.renderedRevision=m,this.renderedResolution=x,this.extentChanged=!this.renderedExtent_||!Bo(this.renderedExtent_,N),this.renderedExtent_=N,this.renderedPixelRatio=h,this.renderedProjection=l,this.postRender(this.context,e),n.extent&&$.restore(),$.imageSmoothingEnabled=!0;const ne=(B,F)=>{const W=Se(g),ge=F.wantedTiles[W],U=ge?Object.keys(ge).length:0;this.updateCacheSize(U),this.tileCache_.expireCache()};return e.postRenderFunctions.push(ne),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,n,i,l,a,u,h){let f;if(e instanceof Bf){if(f=bc(e.getData()),!f)throw new Error("Rendering array data is not yet supported")}else f=this.getTileImage(e);if(!f)return;const g=this.getRenderContext(t),m=Se(this),_=t.layerStatesArray[t.layerIndex],v=_.opacity*(h?e.getAlpha(m,t.time):1),x=v!==g.globalAlpha;x&&(g.save(),g.globalAlpha=v),g.drawImage(f,u,u,f.width-2*u,f.height-2*u,n,i,l,a),x&&g.restore(),v!==_.opacity?t.animate=!0:h&&e.endTransition(m)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,n){const i=Se(t);i in e||(e[i]={}),e[i][n.getKey()]=!0}}class BR extends UR{constructor(e){super(e)}createRenderer(){return new d1(this,{cacheSize:this.getCacheSize()})}}const XR={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},iy={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class YR extends d1{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Bn(),this.tileClipContexts_=null}drawTile(e,t,n,i,l,a,u,h){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,n,i,l,a,u,h)}getTile(e,t,n,i){const l=this.getOrCreateTile(e,t,n,i);if(!l)return null;const u=i.viewState.resolution,h=i.viewHints;return(!(h[lt.ANIMATING]||h[lt.INTERACTING])||!l.wantedResolution)&&(l.wantedResolution=u),l}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,n){const i=this.getLayer(),l=i.getRevision(),a=i.getRenderOrder()||null,u=e.wantedResolution,h=e.getReplayState(i);if(!h.dirty&&h.renderedResolution===u&&h.renderedRevision==l&&h.renderedRenderOrder==a)return;const f=i.getSource(),g=!!i.getDeclutter(),m=f.getTileGrid(),v=f.getTileGridForProjection(n).getTileCoordExtent(e.wrappedTileCoord),x=f.getSourceTiles(t,n,e),E=Se(i);delete e.hitDetectionImageData[E],e.executorGroups[E]=[],h.dirty=!1;for(let C=0,S=x.length;C<S;++C){const T=x[C];if(T.getState()!=Q.LOADED)continue;const I=T.tileCoord,L=m.getTileCoordExtent(I),k=kn(v,L),j=Ji(k,i.getRenderBuffer()*u,this.tempExtent),N=Bo(L,k)?null:j,z=new Pv(0,k,u,t),G=jf(u,t),re=function(se,X){let ae;const Y=se.getStyleFunction()||i.getStyleFunction();if(Y&&(ae=Y(se,u)),ae){const ne=this.renderFeature(se,G,ae,z,g,X);h.dirty=h.dirty||ne}},te=T.getFeatures();a&&a!==h.renderedRenderOrder&&te.sort(a);for(let se=0,X=te.length;se<X;++se){const ae=te[se];(!N||gt(N,ae.getGeometry().getExtent()))&&re.call(this,ae,se)}const ee=z.finish(),le=i.getRenderMode()!=="vector"&&g&&x.length===1?null:k,$=new Fv(le,u,t,f.getOverlaps(),ee,i.getRenderBuffer(),!0);e.executorGroups[E].push($)}h.renderedRevision=l,h.renderedRenderOrder=a,h.renderedResolution=u}forEachFeatureAtCoordinate(e,t,n,i,l){const a=t.viewState.resolution,u=t.viewState.rotation;n=n??0;const h=this.getLayer(),g=h.getSource().getTileGridForProjection(t.viewState.projection),m=Rn([e]);Ji(m,a*n,m);const _={},v=function(C,S,T){let I=C.getId();I===void 0&&(I=Se(C));const L=_[I];if(L){if(L!==!0&&T<L.distanceSq){if(T===0)return _[I]=!0,l.splice(l.lastIndexOf(L),1),i(C,h,S);L.geometry=S,L.distanceSq=T}}else{if(T===0)return _[I]=!0,i(C,h,S);l.push(_[I]={feature:C,layer:h,geometry:S,distanceSq:T,callback:i})}},x=this.renderedTiles;let E;for(let C=0,S=x.length;!E&&C<S;++C){const T=x[C],I=g.getTileCoordExtent(T.wrappedTileCoord);if(!gt(I,m))continue;const L=Se(h),k=[T.executorGroups[L]],j=h.getDeclutter();k.some(N=>{const z=j?t.declutter[j].all().map(G=>G.value):null;for(let G=0,re=N.length;G<re;++G)if(E=N[G].forEachFeatureAtCoordinate(e,a,u,n,v,z),E)return!0})}return E}getFeatures(e){return new Promise((t,n)=>{const i=this.getLayer(),l=Se(i),a=i.getSource(),u=this.renderedProjection,h=u.getExtent(),f=this.renderedResolution,g=a.getTileGridForProjection(u),m=Pt(this.renderedPixelToCoordinateTransform_,e.slice()),_=g.getTileCoordForCoordAndResolution(m,f);let v;for(let I=0,L=this.renderedTiles.length;I<L;++I)if(_.toString()===this.renderedTiles[I].tileCoord.toString()){if(v=this.renderedTiles[I],v.getState()===Q.LOADED){const k=g.getTileCoordExtent(v.tileCoord);a.getWrapX()&&u.canWrapX()&&!Is(h,k)&&mg(m,u);break}v=void 0}if(!v||v.loadingSourceTiles>0){t([]);return}const x=g.getTileCoordExtent(v.wrappedTileCoord),E=ts(x),C=[(m[0]-E[0])/f,(E[1]-m[1])/f],S=v.getSourceTiles().reduce(function(I,L){return I.concat(L.getFeatures())},[]);let T=v.hitDetectionImageData[l];if(!T){const I=Xt(g.getTileSize(g.getZForResolution(f,a.zDirection))),L=this.renderedRotation_,k=[this.getRenderTransform(g.getTileCoordCenter(v.wrappedTileCoord),f,0,Ln,I[0]*Ln,I[1]*Ln,0)];T=Mv(I,k,S,i.getStyleFunction(),g.getTileCoordExtent(v.wrappedTileCoord),v.getReplayState(i).renderedResolution,L),v.hitDetectionImageData[l]=T}t(Av(C,S,T))})}getFeaturesInExtent(e){const t=[],n=this.getTileCache();if(n.getCount()===0)return t;const l=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),a=l.getZForResolution(this.renderedResolution),u={};return n.forEach(h=>{if(h.tileCoord[0]!==a||h.getState()!==Q.LOADED)return;const f=h.getSourceTiles();for(let g=0,m=f.length;g<m;++g){const _=f[g],v=_.getKey();if(v in u)continue;u[v]=!0;const x=_.tileCoord;if(gt(e,l.getTileCoordExtent(x))){const E=_.getFeatures();if(E)for(let C=0,S=E.length;C<S;++C){const T=E[C],I=T.getGeometry();gt(e,I.getExtent())&&t.push(T)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const n=this.context,i=n.globalAlpha;n.globalAlpha=t.opacity;const l=e.viewHints,a=!(l[lt.ANIMATING]||l[lt.INTERACTING]),u=this.renderedTiles;for(let h=0,f=u.length;h<f;++h){const g=u[h],m=g.executorGroups[Se(this.getLayer())],_=this.getLayer().getDeclutter();if(m)for(let v=m.length-1;v>=0;--v)m[v].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(g,e),e.viewState.rotation,a,Mc,_?e.declutter[_]:void 0)}n.globalAlpha=i}renderDeferredInternal(e){const n=this.renderedTiles.reduce((u,h,f)=>(h.executorGroups[Se(this.getLayer())].forEach(g=>u.push({executorGroup:g,index:f})),u),[]),i=n.map(({executorGroup:u})=>u.getDeferredZIndexContexts()),l={};for(let u=0,h=n.length;u<h;++u){const f=n[u].executorGroup.getDeferredZIndexContexts();for(const g in f)l[g]=!0}Object.keys(l).sort(Pi).map(Number).forEach(u=>{i.forEach((h,f)=>{h[u]&&(h[u].forEach(g=>{const{executorGroup:m,index:_}=n[f],v=m.getRenderedContext(),x=v.globalAlpha;v.globalAlpha=this.renderedOpacity_;const E=this.tileClipContexts_[_];E&&E.draw(v),g.draw(v),E&&v.restore(),v.globalAlpha=x,g.clear()}),h[u].length=0)})})}getTileRenderTransform(e,t){const n=t.pixelRatio,i=t.viewState,l=i.center,a=i.resolution,u=i.rotation,h=t.size,f=Math.round(h[0]*n),g=Math.round(h[1]*n),_=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),v=e.tileCoord,x=_.getTileCoordExtent(e.wrappedTileCoord),E=_.getTileCoordExtent(v,this.tempExtent)[0]-x[0];return lg(Jd(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(l,a,u,n,f,g,E))}postRender(e,t){var L;const n=t.viewHints,i=!(n[lt.ANIMATING]||n[lt.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const l=this.getLayer(),a=l.getRenderMode(),u=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const h=l.getDeclutter(),f=h?iy[a].filter(k=>!Mc.includes(k)):iy[a],g=t.viewState,m=g.rotation,_=l.getSource(),x=_.getTileGridForProjection(g.projection).getZForResolution(g.resolution,_.zDirection),E=this.renderedTiles,C=[],S=[],T=[];let I=!0;for(let k=E.length-1;k>=0;--k){const j=E[k];I=I&&!j.getReplayState(l).dirty;const N=j.executorGroups[Se(l)].filter($=>$.hasExecutors(f));if(N.length===0)continue;const z=this.getTileRenderTransform(j,t),G=j.tileCoord[0];let re=!1;const te=N[0].getClipCoords(z);let ee=e,le;if(te){le=new Vg,ee=le.getContext();for(let $=0,se=C.length;$<se;++$)if(x!==G&&G<S[$]){const X=C[$];gt([te[0],te[3],te[4],te[7]],[X[0],X[3],X[4],X[7]])&&(re||(ee.save(),re=!0),ee.beginPath(),ee.moveTo(te[0],te[1]),ee.lineTo(te[2],te[3]),ee.lineTo(te[4],te[5]),ee.lineTo(te[6],te[7]),ee.moveTo(X[6],X[7]),ee.lineTo(X[4],X[5]),ee.lineTo(X[2],X[3]),ee.lineTo(X[0],X[1]),ee.clip())}C.push(te),S.push(G)}for(let $=0,se=N.length;$<se;++$)N[$].execute(e,[e.canvas.width,e.canvas.height],z,m,i,f,(L=t.declutter)==null?void 0:L[h]);re&&(ee===e?ee.restore():T[k]=le)}e.globalAlpha=u,this.ready=I,this.tileClipContexts_=T,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,n,i,l,a){if(!n)return!1;let u=!1;if(Array.isArray(n))for(let h=0,f=n.length;h<f;++h)u=Ac(i,e,n[h],t,this.boundHandleStyleImageChange_,void 0,l,a)||u;else u=Ac(i,e,n,t,this.boundHandleStyleImageChange_,void 0,l,a);return u}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const n=e.getReplayState(t),i=t.getRevision(),l=e.wantedResolution;return n.renderedTileResolution!==l||n.renderedTileRevision!==i}renderTileImage_(e,t){const n=this.getLayer(),i=e.getReplayState(n),l=n.getRevision(),a=e.executorGroups[Se(n)];i.renderedTileRevision=l;const u=e.wrappedTileCoord,h=u[0],f=n.getSource();let g=t.pixelRatio;const _=t.viewState.projection,v=f.getTileGridForProjection(_),x=v.getResolution(e.tileCoord[0]),E=t.pixelRatio/e.wantedResolution*x,C=v.getResolution(h),S=e.getContext();g=Math.round(Math.max(g,E/g));const T=f.getTilePixelSize(h,g,_);S.canvas.width=T[0],S.canvas.height=T[1];const I=g/E;if(I!==1){const N=c0(this.tmpTransform_);Jd(N,I,I),S.setTransform.apply(S,N)}const L=v.getTileCoordExtent(u,this.tempExtent),k=E/C,j=c0(this.tmpTransform_);Jd(j,k,-k),rC(j,-L[0],-L[3]);for(let N=0,z=a.length;N<z;++N)a[N].execute(S,[S.canvas.width*I,S.canvas.height*I],j,0,!0,XR[n.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class KR extends Ug{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const n=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n;const i=e.renderMode||"hybrid";be(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new YR(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Kr.PRELOAD)}getUseInterimTilesOnError(){return this.get(Kr.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(Kr.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(Kr.USE_INTERIM_TILES_ON_ERROR,e)}}const vf={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Co=[0,0,0],zr=5;class Zg{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,be(QE(this.resolutions_,(i,l)=>l-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,l=this.resolutions_.length-1;i<l;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,be(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ts(n)),be(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,be(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Og,be(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,l)=>{const a=new Hg(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(n){const u=this.getTileRangeForExtentAndZ(n,l);a.minX=Math.max(u.minX,a.minX),a.maxX=Math.min(u.maxX,a.maxX),a.minY=Math.max(u.minY,a.minY),a.maxY=Math.min(u.maxY,a.maxY)}return a}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const i=this.getTileRangeForExtentAndZ(e,t);for(let l=i.minX,a=i.maxX;l<=a;++l)for(let u=i.minY,h=i.maxY;u<=h;++u)n([t,l,u])}forEachTileCoordParentTileRange(e,t,n,i){let l,a,u,h=null,f=e[0]-1;for(this.zoomFactor_===2?(a=e[1],u=e[2]):h=this.getTileCoordExtent(e,i);f>=this.minZoom;){if(a!==void 0&&u!==void 0?(a=Math.floor(a/2),u=Math.floor(u/2),l=wo(a,a,u,u,n)):l=this.getTileRangeForExtentAndZ(h,f,n),t(f,l))return!0;--f}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const l=e[1]*2,a=e[2]*2;return wo(l,l+1,a,a+1,t)}const i=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],l=e[1],a=e[2];if(t===i)return wo(l,a,l,a,n);if(this.zoomFactor_){const h=Math.pow(this.zoomFactor_,t-i),f=Math.floor(l*h),g=Math.floor(a*h);if(t<i)return wo(f,f,g,g,n);const m=Math.floor(h*(l+1))-1,_=Math.floor(h*(a+1))-1;return wo(f,m,g,_,n)}const u=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(u,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Co);const i=Co[1],l=Co[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Co);const a=Co[1],u=Co[2];return wo(i,a,l,u,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=Xt(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*n,t[1]-(e[2]+.5)*i[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),i=this.getResolution(e[0]),l=Xt(this.getTileSize(e[0]),this.tmpSize_),a=n[0]+e[1]*l[0]*i,u=n[1]-(e[2]+1)*l[1]*i,h=a+l[0]*i,f=u+l[1]*i;return sr(a,u,h,f,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,i,l){const a=this.getZForResolution(n),u=n/this.getResolution(a),h=this.getOrigin(a),f=Xt(this.getTileSize(a),this.tmpSize_);let g=u*(e-h[0])/n/f[0],m=u*(h[1]-t)/n/f[1];return i?(g=Qu(g,zr)-1,m=Qu(m,zr)-1):(g=qu(g,zr),m=qu(m,zr)),zc(a,g,m,l)}getTileCoordForXYAndZ_(e,t,n,i,l){const a=this.getOrigin(n),u=this.getResolution(n),h=Xt(this.getTileSize(n),this.tmpSize_);let f=(e-a[0])/u/h[0],g=(a[1]-t)/u/h[1];return i?(f=Qu(f,zr)-1,g=Qu(g,zr)-1):(f=qu(f,zr),g=qu(g,zr)),zc(n,f,g,l)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=og(this.resolutions_,e,t||0);return rt(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Qy(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let i=this.minZoom;i<t;++i)n[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=n}}function f1(r){let e=r.getDefaultTileGrid();return e||(e=$R(r),r.setDefaultTileGrid(e)),e}function HR(r,e,t){const n=e[0],i=r.getTileCoordCenter(e),l=lh(t);if(!Vo(l,i)){const a=We(l),u=Math.ceil((l[0]-i[0])/a);return i[0]+=a*u,r.getTileCoordForCoordAndZ(i,n)}return e}function ZR(r,e,t,n){n=n!==void 0?n:"top-left";const i=p1(r,e,t);return new Zg({extent:r,origin:aC(r,n),resolutions:i,tileSize:t})}function g1(r){const e=r||{},t=e.extent||At("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:p1(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Zg(n)}function p1(r,e,t,n){e=e!==void 0?e:mv,t=Xt(t!==void 0?t:Og);const i=Bt(r),l=We(r);n=n>0?n:Math.max(l/t[0],i/t[1]);const a=e+1,u=new Array(a);for(let h=0;h<a;++h)u[h]=n/Math.pow(2,h);return u}function $R(r,e,t,n){const i=lh(r);return ZR(i,e,t,n)}function lh(r){r=At(r);let e=r.getExtent();if(!e){const t=180*fg.degrees/r.getMetersPerUnit();e=sr(-t,-t,t,t)}return e}class qR extends Gv{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Xt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Se(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,i,l){return Le()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:f1(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const i=this.getTileGridForProjection(n),l=this.getTilePixelRatio(t),a=Xt(i.getTileSize(e),this.tmpSize);return l==1?a:pS(a,l,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const n=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=HR(n,e,t)),kR(e,n)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class QR extends Kn{constructor(e,t){super(e),this.tile=t}}const JR=/\{z\}/g,eI=/\{x\}/g,tI=/\{y\}/g,nI=/\{-y\}/g;function iI(r,e,t,n,i){return r.replace(JR,e.toString()).replace(eI,t.toString()).replace(tI,n.toString()).replace(nI,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-n).toString()})}function rI(r){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(r);if(t){const n=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let l;for(l=n;l<=i;++l)e.push(r.replace(t[0],String.fromCharCode(l)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r),t){const n=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=n;i++)e.push(r.replace(t[0],i.toString()));return e}return e.push(r),e}function sI(r,e){return function(t,n,i){if(!t)return;let l;const a=t[0];if(e){const u=e.getFullTileRange(a);u&&(l=u.getHeight()-1)}return iI(r,a,t[1],t[2],l)}}function oI(r,e){const t=r.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=sI(r[i],e);return lI(n)}function lI(r){return r.length===1?r[0]:function(e,t,n){if(!e)return;const i=PR(e),l=Oo(i,r.length);return r[l](e,t,n)}}class ah extends qR{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===ah.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=Se(t),i=t.getState();let l;i==Q.LOADING?(this.tileLoadingKeys_[n]=!0,l=vf.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],l=i==Q.ERROR?vf.TILELOADERROR:i==Q.LOADED?vf.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new QR(l,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=rI(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(oI(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}}class aI extends ah{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:uI,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Uv,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!mc(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||mc(t,e)))return this.tileGrid;const n=Se(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=f1(e)),this.tileGridForProjection[n]}createTile_(e,t,n,i,l,a){const u=[e,t,n],h=this.getTileCoordForTileUrlFunction(u,l),f=h?this.tileUrlFunction(h,i,l):void 0,g=new this.tileClass(u,f!==void 0?Q.IDLE:Q.EMPTY,f!==void 0?f:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return g.key=a,g.addEventListener(xe.CHANGE,this.handleTileChange.bind(this)),g}getTile(e,t,n,i,l){const a=this.getProjection();if(!a||!l||mc(a,l))return this.getTileInternal(e,t,n,i,a||l);const u=[e,t,n],h=this.getKey(),f=this.getTileGridForProjection(a),g=this.getTileGridForProjection(l),m=this.getTileCoordForTileUrlFunction(u,l),_=new Xf(a,f,l,g,u,m,this.getTilePixelRatio(i),this.getGutter(),(v,x,E,C)=>this.getTileInternal(v,x,E,C,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return _.key=h,_}getTileInternal(e,t,n,i,l){const a=this.getKey();return this.createTile_(e,t,n,i,l,a)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const n=At(e);if(n){const i=Se(n);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function uI(r,e){r.getImage().src=e}class cI extends aI{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:g1({extent:lh(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}class hI extends ah{constructor(e){const t=e.projection||"EPSG:3857",n=e.extent||lh(t),i=e.tileGrid||g1({extent:n,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:dI,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:MR,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,n){if(n.getState()===Q.IDLE){n.setState(Q.LOADING);const i=n.wrappedTileCoord,l=this.getTileGridForProjection(t),a=l.getTileCoordExtent(i),u=i[0],h=l.getResolution(u);Ji(a,-h,a);const f=this.tileGrid,g=f.getExtent();g&&kn(a,g,a);const m=f.getZForResolution(h,this.zDirection);f.forEachTileCoord(a,m,_=>{const v=this.tileUrlFunction(_,e,t);this.sourceTiles_[v]||(this.sourceTiles_[v]=new this.tileClass(_,v?Q.IDLE:Q.EMPTY,v,this.format_,this.tileLoadFunction));const x=this.sourceTiles_[v];n.sourceTiles.push(x),this.tileKeysBySourceTileUrl_[v]||(this.tileKeysBySourceTileUrl_[v]=[]),this.tileKeysBySourceTileUrl_[v].push(n.getKey());const E=x.getState();if(E<Q.LOADED){const C=S=>{this.handleTileChange(S);const T=x.getState();if(T===Q.LOADED||T===Q.ERROR){const I=x.getKey();I in n.errorTileKeys?x.getState()===Q.LOADED&&delete n.errorTileKeys[I]:n.loadingSourceTiles--,T===Q.ERROR?n.errorTileKeys[I]=!0:x.removeEventListener(xe.CHANGE,C),n.loadingSourceTiles===0&&n.setState(As(n.errorTileKeys)?Q.LOADED:Q.ERROR)}};x.addEventListener(xe.CHANGE,C),n.loadingSourceTiles++}E===Q.IDLE&&(x.extent=f.getTileCoordExtent(_),x.projection=t,x.resolution=f.getResolution(_[0]),x.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(_=>_.getState()===Q.ERROR)?Q.ERROR:Q.LOADED)}return n.sourceTiles}removeSourceTiles(e){const t=e.sourceTiles;for(let n=0,i=t.length;n<i;++n){const l=t[n].getTileUrl(),a=this.getKey();if(!this.tileKeysBySourceTileUrl_[l])return;const u=this.tileKeysBySourceTileUrl_[l][a];u!==-1&&(this.tileKeysBySourceTileUrl_[l].splice(u,1),this.tileKeysBySourceTileUrl_[l].length===0&&(delete this.tileKeysBySourceTileUrl_[l],delete this.sourceTiles_[l]))}}getTile(e,t,n,i,l){const a=[e,t,n];let u=this.getTileCoordForTileUrlFunction(a,l);const h=this.getTileGrid().getExtent(),f=this.getTileGridForProjection(l);if(u&&h){const _=f.getTileCoordExtent(u);Ji(_,-f.getResolution(e),_),gt(h,_)||(u=null)}let g=!0;if(u!==null){const _=this.tileGrid,v=f.getResolution(e),x=_.getZForResolution(v,1),E=f.getTileCoordExtent(u);Ji(E,-v,E),_.forEachTileCoord(E,x,C=>{g=g&&!this.tileUrlFunction(C,i,l)})}const m=new FR(a,g?Q.EMPTY:Q.IDLE,u,this.getSourceTiles.bind(this,i,l),this.removeSourceTiles.bind(this));return m.key=this.getKey(),m}getTileGridForProjection(e){const t=e.getCode();let n=this.tileGrids_[t];if(!n){const i=this.tileGrid,l=i.getResolutions().slice(),a=l.map(function(f,g){return i.getOrigin(g)}),u=l.map(function(f,g){return i.getTileSize(g)}),h=mv+1;for(let f=l.length;f<h;++f)l.push(l[f-1]/2),a.push(a[f-1]),u.push(u[f-1]);n=new Zg({extent:i.getExtent(),origins:a,resolutions:l,tileSizes:u}),this.tileGrids_[t]=n}return n}getTilePixelRatio(e){return e}getTilePixelSize(e,t,n){const i=this.getTileGridForProjection(n),l=Xt(i.getTileSize(e),this.tmpSize);return[Math.round(l[0]*t),Math.round(l[1]*t)]}}function dI(r,e){r.setLoader(function(t,n,i){jv(e,r.getFormat(),t,n,i,r.onLoad.bind(r),r.onError.bind(r))})}const fI='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class gI extends cI{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[fI];const n=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:n,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}class pI extends l1{}const So=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,m1=new Set,Yf=typeof process=="object"&&process?process:{},_1=(r,e,t,n)=>{typeof Yf.emitWarning=="function"?Yf.emitWarning(r,e,t,n):console.error(`[${t}] ${e}: ${r}`)};let Gc=globalThis.AbortController,ry=globalThis.AbortSignal;var gy;if(typeof Gc>"u"){ry=class{constructor(){$e(this,"onabort");$e(this,"_onabort",[]);$e(this,"reason");$e(this,"aborted",!1)}addEventListener(n,i){this._onabort.push(i)}},Gc=class{constructor(){$e(this,"signal",new ry);e()}abort(n){var i,l;if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(const a of this.signal._onabort)a(n);(l=(i=this.signal).onabort)==null||l.call(i,n)}}};let r=((gy=Yf.env)==null?void 0:gy.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{r&&(r=!1,_1("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const mI=r=>!m1.has(r),Gr=r=>r&&r===Math.floor(r)&&r>0&&isFinite(r),y1=r=>Gr(r)?r<=Math.pow(2,8)?Uint8Array:r<=Math.pow(2,16)?Uint16Array:r<=Math.pow(2,32)?Uint32Array:r<=Number.MAX_SAFE_INTEGER?_c:null:null;class _c extends Array{constructor(e){super(e),this.fill(0)}}var zo;const Rs=class Rs{constructor(e,t){$e(this,"heap");$e(this,"length");if(!R(Rs,zo))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}static create(e){const t=y1(e);if(!t)return[];ye(Rs,zo,!0);const n=new Rs(e,t);return ye(Rs,zo,!1),n}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};zo=new WeakMap,ze(Rs,zo,!1);let Kf=Rs;var py,my,ii,En,ri,si,bo,Go,vt,oi,mt,Qe,Re,$t,Cn,Wt,Tt,li,Rt,ai,ui,Sn,ci,Br,qt,ie,Zf,Fs,$i,xa,Tn,v1,Ms,jo,wa,jr,Wr,$f,yc,vc,qe,qf,Ql,Ur,Qf;const gp=class gp{constructor(e){ze(this,ie);ze(this,ii);ze(this,En);ze(this,ri);ze(this,si);ze(this,bo);ze(this,Go);$e(this,"ttl");$e(this,"ttlResolution");$e(this,"ttlAutopurge");$e(this,"updateAgeOnGet");$e(this,"updateAgeOnHas");$e(this,"allowStale");$e(this,"noDisposeOnSet");$e(this,"noUpdateTTL");$e(this,"maxEntrySize");$e(this,"sizeCalculation");$e(this,"noDeleteOnFetchRejection");$e(this,"noDeleteOnStaleGet");$e(this,"allowStaleOnFetchAbort");$e(this,"allowStaleOnFetchRejection");$e(this,"ignoreFetchAbort");ze(this,vt);ze(this,oi);ze(this,mt);ze(this,Qe);ze(this,Re);ze(this,$t);ze(this,Cn);ze(this,Wt);ze(this,Tt);ze(this,li);ze(this,Rt);ze(this,ai);ze(this,ui);ze(this,Sn);ze(this,ci);ze(this,Br);ze(this,qt);ze(this,Fs,()=>{});ze(this,$i,()=>{});ze(this,xa,()=>{});ze(this,Tn,()=>!1);ze(this,Ms,e=>{});ze(this,jo,(e,t,n)=>{});ze(this,wa,(e,t,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});$e(this,py,"LRUCache");const{max:t=0,ttl:n,ttlResolution:i=1,ttlAutopurge:l,updateAgeOnGet:a,updateAgeOnHas:u,allowStale:h,dispose:f,disposeAfter:g,noDisposeOnSet:m,noUpdateTTL:_,maxSize:v=0,maxEntrySize:x=0,sizeCalculation:E,fetchMethod:C,memoMethod:S,noDeleteOnFetchRejection:T,noDeleteOnStaleGet:I,allowStaleOnFetchRejection:L,allowStaleOnFetchAbort:k,ignoreFetchAbort:j}=e;if(t!==0&&!Gr(t))throw new TypeError("max option must be a nonnegative integer");const N=t?y1(t):Array;if(!N)throw new Error("invalid max value: "+t);if(ye(this,ii,t),ye(this,En,v),this.maxEntrySize=x||R(this,En),this.sizeCalculation=E,this.sizeCalculation){if(!R(this,En)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(S!==void 0&&typeof S!="function")throw new TypeError("memoMethod must be a function if defined");if(ye(this,Go,S),C!==void 0&&typeof C!="function")throw new TypeError("fetchMethod must be a function if specified");if(ye(this,bo,C),ye(this,Br,!!C),ye(this,mt,new Map),ye(this,Qe,new Array(t).fill(void 0)),ye(this,Re,new Array(t).fill(void 0)),ye(this,$t,new N(t)),ye(this,Cn,new N(t)),ye(this,Wt,0),ye(this,Tt,0),ye(this,li,Kf.create(t)),ye(this,vt,0),ye(this,oi,0),typeof f=="function"&&ye(this,ri,f),typeof g=="function"?(ye(this,si,g),ye(this,Rt,[])):(ye(this,si,void 0),ye(this,Rt,void 0)),ye(this,ci,!!R(this,ri)),ye(this,qt,!!R(this,si)),this.noDisposeOnSet=!!m,this.noUpdateTTL=!!_,this.noDeleteOnFetchRejection=!!T,this.allowStaleOnFetchRejection=!!L,this.allowStaleOnFetchAbort=!!k,this.ignoreFetchAbort=!!j,this.maxEntrySize!==0){if(R(this,En)!==0&&!Gr(R(this,En)))throw new TypeError("maxSize must be a positive integer if specified");if(!Gr(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");ce(this,ie,v1).call(this)}if(this.allowStale=!!h,this.noDeleteOnStaleGet=!!I,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!u,this.ttlResolution=Gr(i)||i===0?i:1,this.ttlAutopurge=!!l,this.ttl=n||0,this.ttl){if(!Gr(this.ttl))throw new TypeError("ttl must be a positive integer if specified");ce(this,ie,Zf).call(this)}if(R(this,ii)===0&&this.ttl===0&&R(this,En)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!R(this,ii)&&!R(this,En)){const z="LRU_CACHE_UNBOUNDED";mI(z)&&(m1.add(z),_1("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",z,gp))}}static unsafeExposeInternals(e){return{starts:R(e,ui),ttls:R(e,Sn),sizes:R(e,ai),keyMap:R(e,mt),keyList:R(e,Qe),valList:R(e,Re),next:R(e,$t),prev:R(e,Cn),get head(){return R(e,Wt)},get tail(){return R(e,Tt)},free:R(e,li),isBackgroundFetch:t=>{var n;return ce(n=e,ie,qe).call(n,t)},backgroundFetch:(t,n,i,l)=>{var a;return ce(a=e,ie,vc).call(a,t,n,i,l)},moveToTail:t=>{var n;return ce(n=e,ie,Ql).call(n,t)},indexes:t=>{var n;return ce(n=e,ie,jr).call(n,t)},rindexes:t=>{var n;return ce(n=e,ie,Wr).call(n,t)},isStale:t=>{var n;return R(n=e,Tn).call(n,t)}}}get max(){return R(this,ii)}get maxSize(){return R(this,En)}get calculatedSize(){return R(this,oi)}get size(){return R(this,vt)}get fetchMethod(){return R(this,bo)}get memoMethod(){return R(this,Go)}get dispose(){return R(this,ri)}get disposeAfter(){return R(this,si)}getRemainingTTL(e){return R(this,mt).has(e)?1/0:0}*entries(){for(const e of ce(this,ie,jr).call(this))R(this,Re)[e]!==void 0&&R(this,Qe)[e]!==void 0&&!ce(this,ie,qe).call(this,R(this,Re)[e])&&(yield[R(this,Qe)[e],R(this,Re)[e]])}*rentries(){for(const e of ce(this,ie,Wr).call(this))R(this,Re)[e]!==void 0&&R(this,Qe)[e]!==void 0&&!ce(this,ie,qe).call(this,R(this,Re)[e])&&(yield[R(this,Qe)[e],R(this,Re)[e]])}*keys(){for(const e of ce(this,ie,jr).call(this)){const t=R(this,Qe)[e];t!==void 0&&!ce(this,ie,qe).call(this,R(this,Re)[e])&&(yield t)}}*rkeys(){for(const e of ce(this,ie,Wr).call(this)){const t=R(this,Qe)[e];t!==void 0&&!ce(this,ie,qe).call(this,R(this,Re)[e])&&(yield t)}}*values(){for(const e of ce(this,ie,jr).call(this))R(this,Re)[e]!==void 0&&!ce(this,ie,qe).call(this,R(this,Re)[e])&&(yield R(this,Re)[e])}*rvalues(){for(const e of ce(this,ie,Wr).call(this))R(this,Re)[e]!==void 0&&!ce(this,ie,qe).call(this,R(this,Re)[e])&&(yield R(this,Re)[e])}[(my=Symbol.iterator,py=Symbol.toStringTag,my)](){return this.entries()}find(e,t={}){for(const n of ce(this,ie,jr).call(this)){const i=R(this,Re)[n],l=ce(this,ie,qe).call(this,i)?i.__staleWhileFetching:i;if(l!==void 0&&e(l,R(this,Qe)[n],this))return this.get(R(this,Qe)[n],t)}}forEach(e,t=this){for(const n of ce(this,ie,jr).call(this)){const i=R(this,Re)[n],l=ce(this,ie,qe).call(this,i)?i.__staleWhileFetching:i;l!==void 0&&e.call(t,l,R(this,Qe)[n],this)}}rforEach(e,t=this){for(const n of ce(this,ie,Wr).call(this)){const i=R(this,Re)[n],l=ce(this,ie,qe).call(this,i)?i.__staleWhileFetching:i;l!==void 0&&e.call(t,l,R(this,Qe)[n],this)}}purgeStale(){let e=!1;for(const t of ce(this,ie,Wr).call(this,{allowStale:!0}))R(this,Tn).call(this,t)&&(ce(this,ie,Ur).call(this,R(this,Qe)[t],"expire"),e=!0);return e}info(e){const t=R(this,mt).get(e);if(t===void 0)return;const n=R(this,Re)[t],i=ce(this,ie,qe).call(this,n)?n.__staleWhileFetching:n;if(i===void 0)return;const l={value:i};if(R(this,Sn)&&R(this,ui)){const a=R(this,Sn)[t],u=R(this,ui)[t];if(a&&u){const h=a-(So.now()-u);l.ttl=h,l.start=Date.now()}}return R(this,ai)&&(l.size=R(this,ai)[t]),l}dump(){const e=[];for(const t of ce(this,ie,jr).call(this,{allowStale:!0})){const n=R(this,Qe)[t],i=R(this,Re)[t],l=ce(this,ie,qe).call(this,i)?i.__staleWhileFetching:i;if(l===void 0||n===void 0)continue;const a={value:l};if(R(this,Sn)&&R(this,ui)){a.ttl=R(this,Sn)[t];const u=So.now()-R(this,ui)[t];a.start=Math.floor(Date.now()-u)}R(this,ai)&&(a.size=R(this,ai)[t]),e.unshift([n,a])}return e}load(e){this.clear();for(const[t,n]of e){if(n.start){const i=Date.now()-n.start;n.start=So.now()-i}this.set(t,n.value,n)}}set(e,t,n={}){var _,v,x,E,C;if(t===void 0)return this.delete(e),this;const{ttl:i=this.ttl,start:l,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:u=this.sizeCalculation,status:h}=n;let{noUpdateTTL:f=this.noUpdateTTL}=n;const g=R(this,wa).call(this,e,t,n.size||0,u);if(this.maxEntrySize&&g>this.maxEntrySize)return h&&(h.set="miss",h.maxEntrySizeExceeded=!0),ce(this,ie,Ur).call(this,e,"set"),this;let m=R(this,vt)===0?void 0:R(this,mt).get(e);if(m===void 0)m=R(this,vt)===0?R(this,Tt):R(this,li).length!==0?R(this,li).pop():R(this,vt)===R(this,ii)?ce(this,ie,yc).call(this,!1):R(this,vt),R(this,Qe)[m]=e,R(this,Re)[m]=t,R(this,mt).set(e,m),R(this,$t)[R(this,Tt)]=m,R(this,Cn)[m]=R(this,Tt),ye(this,Tt,m),Yu(this,vt)._++,R(this,jo).call(this,m,g,h),h&&(h.set="add"),f=!1;else{ce(this,ie,Ql).call(this,m);const S=R(this,Re)[m];if(t!==S){if(R(this,Br)&&ce(this,ie,qe).call(this,S)){S.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:T}=S;T!==void 0&&!a&&(R(this,ci)&&((_=R(this,ri))==null||_.call(this,T,e,"set")),R(this,qt)&&((v=R(this,Rt))==null||v.push([T,e,"set"])))}else a||(R(this,ci)&&((x=R(this,ri))==null||x.call(this,S,e,"set")),R(this,qt)&&((E=R(this,Rt))==null||E.push([S,e,"set"])));if(R(this,Ms).call(this,m),R(this,jo).call(this,m,g,h),R(this,Re)[m]=t,h){h.set="replace";const T=S&&ce(this,ie,qe).call(this,S)?S.__staleWhileFetching:S;T!==void 0&&(h.oldValue=T)}}else h&&(h.set="update")}if(i!==0&&!R(this,Sn)&&ce(this,ie,Zf).call(this),R(this,Sn)&&(f||R(this,xa).call(this,m,i,l),h&&R(this,$i).call(this,h,m)),!a&&R(this,qt)&&R(this,Rt)){const S=R(this,Rt);let T;for(;T=S==null?void 0:S.shift();)(C=R(this,si))==null||C.call(this,...T)}return this}pop(){var e;try{for(;R(this,vt);){const t=R(this,Re)[R(this,Wt)];if(ce(this,ie,yc).call(this,!0),ce(this,ie,qe).call(this,t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(R(this,qt)&&R(this,Rt)){const t=R(this,Rt);let n;for(;n=t==null?void 0:t.shift();)(e=R(this,si))==null||e.call(this,...n)}}}has(e,t={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=t,l=R(this,mt).get(e);if(l!==void 0){const a=R(this,Re)[l];if(ce(this,ie,qe).call(this,a)&&a.__staleWhileFetching===void 0)return!1;if(R(this,Tn).call(this,l))i&&(i.has="stale",R(this,$i).call(this,i,l));else return n&&R(this,Fs).call(this,l),i&&(i.has="hit",R(this,$i).call(this,i,l)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){const{allowStale:n=this.allowStale}=t,i=R(this,mt).get(e);if(i===void 0||!n&&R(this,Tn).call(this,i))return;const l=R(this,Re)[i];return ce(this,ie,qe).call(this,l)?l.__staleWhileFetching:l}async fetch(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:l=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:u=this.noDisposeOnSet,size:h=0,sizeCalculation:f=this.sizeCalculation,noUpdateTTL:g=this.noUpdateTTL,noDeleteOnFetchRejection:m=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:_=this.allowStaleOnFetchRejection,ignoreFetchAbort:v=this.ignoreFetchAbort,allowStaleOnFetchAbort:x=this.allowStaleOnFetchAbort,context:E,forceRefresh:C=!1,status:S,signal:T}=t;if(!R(this,Br))return S&&(S.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:l,status:S});const I={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:l,ttl:a,noDisposeOnSet:u,size:h,sizeCalculation:f,noUpdateTTL:g,noDeleteOnFetchRejection:m,allowStaleOnFetchRejection:_,allowStaleOnFetchAbort:x,ignoreFetchAbort:v,status:S,signal:T};let L=R(this,mt).get(e);if(L===void 0){S&&(S.fetch="miss");const k=ce(this,ie,vc).call(this,e,L,I,E);return k.__returned=k}else{const k=R(this,Re)[L];if(ce(this,ie,qe).call(this,k)){const re=n&&k.__staleWhileFetching!==void 0;return S&&(S.fetch="inflight",re&&(S.returnedStale=!0)),re?k.__staleWhileFetching:k.__returned=k}const j=R(this,Tn).call(this,L);if(!C&&!j)return S&&(S.fetch="hit"),ce(this,ie,Ql).call(this,L),i&&R(this,Fs).call(this,L),S&&R(this,$i).call(this,S,L),k;const N=ce(this,ie,vc).call(this,e,L,I,E),G=N.__staleWhileFetching!==void 0&&n;return S&&(S.fetch=j?"stale":"refresh",G&&j&&(S.returnedStale=!0)),G?N.__staleWhileFetching:N.__returned=N}}async forceFetch(e,t={}){const n=await this.fetch(e,t);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,t={}){const n=R(this,Go);if(!n)throw new Error("no memoMethod provided to constructor");const{context:i,forceRefresh:l,...a}=t,u=this.get(e,a);if(!l&&u!==void 0)return u;const h=n(e,u,{options:a,context:i});return this.set(e,h,a),h}get(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:l=this.noDeleteOnStaleGet,status:a}=t,u=R(this,mt).get(e);if(u!==void 0){const h=R(this,Re)[u],f=ce(this,ie,qe).call(this,h);return a&&R(this,$i).call(this,a,u),R(this,Tn).call(this,u)?(a&&(a.get="stale"),f?(a&&n&&h.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?h.__staleWhileFetching:void 0):(l||ce(this,ie,Ur).call(this,e,"expire"),a&&n&&(a.returnedStale=!0),n?h:void 0)):(a&&(a.get="hit"),f?h.__staleWhileFetching:(ce(this,ie,Ql).call(this,u),i&&R(this,Fs).call(this,u),h))}else a&&(a.get="miss")}delete(e){return ce(this,ie,Ur).call(this,e,"delete")}clear(){return ce(this,ie,Qf).call(this,"delete")}};ii=new WeakMap,En=new WeakMap,ri=new WeakMap,si=new WeakMap,bo=new WeakMap,Go=new WeakMap,vt=new WeakMap,oi=new WeakMap,mt=new WeakMap,Qe=new WeakMap,Re=new WeakMap,$t=new WeakMap,Cn=new WeakMap,Wt=new WeakMap,Tt=new WeakMap,li=new WeakMap,Rt=new WeakMap,ai=new WeakMap,ui=new WeakMap,Sn=new WeakMap,ci=new WeakMap,Br=new WeakMap,qt=new WeakMap,ie=new WeakSet,Zf=function(){const e=new _c(R(this,ii)),t=new _c(R(this,ii));ye(this,Sn,e),ye(this,ui,t),ye(this,xa,(l,a,u=So.now())=>{if(t[l]=a!==0?u:0,e[l]=a,a!==0&&this.ttlAutopurge){const h=setTimeout(()=>{R(this,Tn).call(this,l)&&ce(this,ie,Ur).call(this,R(this,Qe)[l],"expire")},a+1);h.unref&&h.unref()}}),ye(this,Fs,l=>{t[l]=e[l]!==0?So.now():0}),ye(this,$i,(l,a)=>{if(e[a]){const u=e[a],h=t[a];if(!u||!h)return;l.ttl=u,l.start=h,l.now=n||i();const f=l.now-h;l.remainingTTL=u-f}});let n=0;const i=()=>{const l=So.now();if(this.ttlResolution>0){n=l;const a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref()}return l};this.getRemainingTTL=l=>{const a=R(this,mt).get(l);if(a===void 0)return 0;const u=e[a],h=t[a];if(!u||!h)return 1/0;const f=(n||i())-h;return u-f},ye(this,Tn,l=>{const a=t[l],u=e[l];return!!u&&!!a&&(n||i())-a>u})},Fs=new WeakMap,$i=new WeakMap,xa=new WeakMap,Tn=new WeakMap,v1=function(){const e=new _c(R(this,ii));ye(this,oi,0),ye(this,ai,e),ye(this,Ms,t=>{ye(this,oi,R(this,oi)-e[t]),e[t]=0}),ye(this,wa,(t,n,i,l)=>{if(ce(this,ie,qe).call(this,n))return 0;if(!Gr(i))if(l){if(typeof l!="function")throw new TypeError("sizeCalculation must be a function");if(i=l(n,t),!Gr(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i}),ye(this,jo,(t,n,i)=>{if(e[t]=n,R(this,En)){const l=R(this,En)-e[t];for(;R(this,oi)>l;)ce(this,ie,yc).call(this,!0)}ye(this,oi,R(this,oi)+e[t]),i&&(i.entrySize=n,i.totalCalculatedSize=R(this,oi))})},Ms=new WeakMap,jo=new WeakMap,wa=new WeakMap,jr=function*({allowStale:e=this.allowStale}={}){if(R(this,vt))for(let t=R(this,Tt);!(!ce(this,ie,$f).call(this,t)||((e||!R(this,Tn).call(this,t))&&(yield t),t===R(this,Wt)));)t=R(this,Cn)[t]},Wr=function*({allowStale:e=this.allowStale}={}){if(R(this,vt))for(let t=R(this,Wt);!(!ce(this,ie,$f).call(this,t)||((e||!R(this,Tn).call(this,t))&&(yield t),t===R(this,Tt)));)t=R(this,$t)[t]},$f=function(e){return e!==void 0&&R(this,mt).get(R(this,Qe)[e])===e},yc=function(e){var l,a;const t=R(this,Wt),n=R(this,Qe)[t],i=R(this,Re)[t];return R(this,Br)&&ce(this,ie,qe).call(this,i)?i.__abortController.abort(new Error("evicted")):(R(this,ci)||R(this,qt))&&(R(this,ci)&&((l=R(this,ri))==null||l.call(this,i,n,"evict")),R(this,qt)&&((a=R(this,Rt))==null||a.push([i,n,"evict"]))),R(this,Ms).call(this,t),e&&(R(this,Qe)[t]=void 0,R(this,Re)[t]=void 0,R(this,li).push(t)),R(this,vt)===1?(ye(this,Wt,ye(this,Tt,0)),R(this,li).length=0):ye(this,Wt,R(this,$t)[t]),R(this,mt).delete(n),Yu(this,vt)._--,t},vc=function(e,t,n,i){const l=t===void 0?void 0:R(this,Re)[t];if(ce(this,ie,qe).call(this,l))return l;const a=new Gc,{signal:u}=n;u==null||u.addEventListener("abort",()=>a.abort(u.reason),{signal:a.signal});const h={signal:a.signal,options:n,context:i},f=(E,C=!1)=>{const{aborted:S}=a.signal,T=n.ignoreFetchAbort&&E!==void 0;if(n.status&&(S&&!C?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,T&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),S&&!T&&!C)return m(a.signal.reason);const I=v;return R(this,Re)[t]===v&&(E===void 0?I.__staleWhileFetching?R(this,Re)[t]=I.__staleWhileFetching:ce(this,ie,Ur).call(this,e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,E,h.options))),E},g=E=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=E),m(E)),m=E=>{const{aborted:C}=a.signal,S=C&&n.allowStaleOnFetchAbort,T=S||n.allowStaleOnFetchRejection,I=T||n.noDeleteOnFetchRejection,L=v;if(R(this,Re)[t]===v&&(!I||L.__staleWhileFetching===void 0?ce(this,ie,Ur).call(this,e,"fetch"):S||(R(this,Re)[t]=L.__staleWhileFetching)),T)return n.status&&L.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),L.__staleWhileFetching;if(L.__returned===L)throw E},_=(E,C)=>{var T;const S=(T=R(this,bo))==null?void 0:T.call(this,e,l,h);S&&S instanceof Promise&&S.then(I=>E(I===void 0?void 0:I),C),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(E(void 0),n.allowStaleOnFetchAbort&&(E=I=>f(I,!0)))})};n.status&&(n.status.fetchDispatched=!0);const v=new Promise(_).then(f,g),x=Object.assign(v,{__abortController:a,__staleWhileFetching:l,__returned:void 0});return t===void 0?(this.set(e,x,{...h.options,status:void 0}),t=R(this,mt).get(e)):R(this,Re)[t]=x,x},qe=function(e){if(!R(this,Br))return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Gc},qf=function(e,t){R(this,Cn)[t]=e,R(this,$t)[e]=t},Ql=function(e){e!==R(this,Tt)&&(e===R(this,Wt)?ye(this,Wt,R(this,$t)[e]):ce(this,ie,qf).call(this,R(this,Cn)[e],R(this,$t)[e]),ce(this,ie,qf).call(this,R(this,Tt),e),ye(this,Tt,e))},Ur=function(e,t){var i,l,a,u;let n=!1;if(R(this,vt)!==0){const h=R(this,mt).get(e);if(h!==void 0)if(n=!0,R(this,vt)===1)ce(this,ie,Qf).call(this,t);else{R(this,Ms).call(this,h);const f=R(this,Re)[h];if(ce(this,ie,qe).call(this,f)?f.__abortController.abort(new Error("deleted")):(R(this,ci)||R(this,qt))&&(R(this,ci)&&((i=R(this,ri))==null||i.call(this,f,e,t)),R(this,qt)&&((l=R(this,Rt))==null||l.push([f,e,t]))),R(this,mt).delete(e),R(this,Qe)[h]=void 0,R(this,Re)[h]=void 0,h===R(this,Tt))ye(this,Tt,R(this,Cn)[h]);else if(h===R(this,Wt))ye(this,Wt,R(this,$t)[h]);else{const g=R(this,Cn)[h];R(this,$t)[g]=R(this,$t)[h];const m=R(this,$t)[h];R(this,Cn)[m]=R(this,Cn)[h]}Yu(this,vt)._--,R(this,li).push(h)}}if(R(this,qt)&&((a=R(this,Rt))!=null&&a.length)){const h=R(this,Rt);let f;for(;f=h==null?void 0:h.shift();)(u=R(this,si))==null||u.call(this,...f)}return n},Qf=function(e){var t,n,i;for(const l of ce(this,ie,Wr).call(this,{allowStale:!0})){const a=R(this,Re)[l];if(ce(this,ie,qe).call(this,a))a.__abortController.abort(new Error("deleted"));else{const u=R(this,Qe)[l];R(this,ci)&&((t=R(this,ri))==null||t.call(this,a,u,e)),R(this,qt)&&((n=R(this,Rt))==null||n.push([a,u,e]))}}if(R(this,mt).clear(),R(this,Re).fill(void 0),R(this,Qe).fill(void 0),R(this,Sn)&&R(this,ui)&&(R(this,Sn).fill(0),R(this,ui).fill(0)),R(this,ai)&&R(this,ai).fill(0),ye(this,Wt,0),ye(this,Tt,0),R(this,li).length=0,ye(this,oi,0),ye(this,vt,0),R(this,qt)&&R(this,Rt)){const l=R(this,Rt);let a;for(;a=l==null?void 0:l.shift();)(i=R(this,si))==null||i.call(this,...a)}};let Hf=gp;var _I=_y();class Ns extends at.PureComponent{constructor(e,t){super(e,t),this.style=(n,i)=>{if(this.ol!==this.style)return this.ol;let l;if(this.cache){l=this.props.cacheId(n,i);const f=this.cache.get(l);if(f)return f}const a=new fn({zIndex:this.props.zIndex}),u=at.createElement(Yn.Provider,{value:Object.assign(Object.assign({},this.context),{style:a})},this.props.render(n,i)),h=yy.createRoot(document.createElement("div"));return _I.flushSync(()=>{h.render(u)}),this.cache&&this.cache.set(l,a),a},e.render?this.ol=this.style:this.ol=new fn({zIndex:e.zIndex}),e.render&&e.cacheSize&&e.cacheId&&(this.cache=new Hf({max:e.cacheSize}))}componentDidMount(){this.refresh()}componentDidUpdate(e,t,n){this.props!==e&&(un("willRefresh",this,e,this.props),this.refresh(e))}refresh(e){var t,n,i,l,a,u,h;if(!e||(e==null?void 0:e.render)!==this.props.render){if(!((t=this.context)===null||t===void 0)&&t.styleArray){if(this.ol===this.style)throw new Error("An RStyleArray must contain only static RStyles");this.context.styleArray.includes(this.ol)||this.context.styleArray.push(this.ol)}else!((i=(n=this.context)===null||n===void 0?void 0:n.feature)===null||i===void 0)&&i.setStyle?this.context.feature.setStyle(this.ol):!((a=(l=this.context)===null||l===void 0?void 0:l.vectorlayer)===null||a===void 0)&&a.setStyle?this.context.vectorlayer.setStyle(this.ol):!((h=(u=this.context)===null||u===void 0?void 0:u.vectortilelayer)===null||h===void 0)&&h.setStyle&&this.context.vectortilelayer.setStyle(this.ol);this.cache&&this.cache.clear()}this.ol instanceof fn&&(!e||e.zIndex!==this.props.zIndex)&&this.ol.setZIndex(this.props.zIndex)}render(){return this.props.render?null:at.createElement("div",{className:"_rlayers_RStyle"},at.createElement(Yn.Provider,{value:Object.assign(Object.assign({},this.context),{style:this.ol})},this.props.children))}static getStyle(e){return e==null?e:typeof e.style=="function"?(t,n)=>e.style(t,n):Object.keys(e).includes("current")?(t,n)=>e.current.style(t,n):e}static getStyleStatic(e){if(e==null)return e;let t;if(typeof e.style=="function"&&(t=e),!(Object.keys(e).includes("current")&&(t=e.current,t==null))){if(t){if(t.ol!==void 0&&typeof t.ol!="function")return t.ol;throw new TypeError("RStyle is dynamic and cannot be converted to Style")}if(typeof e=="function")throw new TypeError("StyleLike is dynamic and cannot be converted to Style");return e}}}Ns.contextType=Yn;class sc extends Si{}class Be extends Vn{constructor(e,t){var n,i;if(super(e,t),!(!((n=this===null||this===void 0?void 0:this.context)===null||n===void 0)&&n.vectorlayer))throw new Error("An RFeature must be part of a vector layer");e.feature?this.ol=e.feature:this.ol=new Wn(Object.assign(Object.assign({},(i=e.properties)!==null&&i!==void 0?i:{}),{geometry:e.geometry,style:Ns.getStyle(e.style)})),Be.initEventRelay(this.context.map),this.onchange=()=>this.forceUpdate()}static initEventRelay(e){for(const t of Be.pointerEvents)e.on(t,Be.eventRelay)}incrementHandlers(e){var t;const n=Vn.getOLObject(ta,this.context.vectorlayer);n[e]=((t=n[e])!==null&&t!==void 0?t:0)+1}decrementHandlers(e){const t=Vn.getOLObject(ta,this.context.vectorlayer);t[e]--}static dispatchEvent(e,t){var n;if(!e.feature)return!0;if(e.feature.dispatchEvent&&e.feature.dispatchEvent(t)===!1)return!1;t.target||(t.target=e.feature);const i=(n=e.layer)===null||n===void 0?void 0:n.get(o1)[t.type];return i?i.call(null,t):!0}static eventRelay(e){const t=[];if(e.map.forEachFeatureAtPixel(e.pixel,(n,i)=>t.push({feature:n,layer:i})&&!1,{hitTolerance:Be.hitTolerance,layerFilter:n=>{var i,l,a,u,h;const f=Vn.getOLObject(ta,n);switch(e.type){case"click":return f.click>0;case"dblclick":return f.dblclick>0;case"singleclick":return f.singleclick>0;case"pointermove":return((i=f.pointermove)!==null&&i!==void 0?i:0)+((l=f.pointerenter)!==null&&l!==void 0?l:0)+((a=f.pointerleave)!==null&&a!==void 0?a:0)>0;case"pointerdrag":return((u=f.pointerdrag)!==null&&u!==void 0?u:0)+((h=f.pointerdragend)!==null&&h!==void 0?h:0)>0}return Object.keys(f).reduce((g,m)=>g+f[m],0)>0}}),e.dragging){Be.lastFeaturesDragged.length||(Be.lastFeaturesDragged=[...t]);for(const n of Be.lastFeaturesDragged)t.find(i=>i.feature===n.feature)||t.push(n)}else{for(const n of Be.lastFeaturesDragged)if(Be.dispatchEvent(n,new sc("pointerdragend",e.map,e.originalEvent))===!1)return Be.lastFeaturesDragged=[],!1;Be.lastFeaturesDragged=[]}if(e.type==="pointermove"){for(const n of Be.lastFeaturesEntered)if(!t.find(i=>i.feature===n.feature)){const i=Be.dispatchEvent(n,new sc("pointerleave",e.map,e.originalEvent));if(n.feature=null,n.layer=null,i===!1)return Be.lastFeaturesEntered=Be.lastFeaturesEntered.filter(l=>l.feature),!1}Be.lastFeaturesEntered=Be.lastFeaturesEntered.filter(n=>n.feature);for(const n of t)if(!Be.lastFeaturesEntered.find(i=>i.feature===n.feature)){const i=Be.dispatchEvent(n,new sc("pointerenter",e.map,e.originalEvent));if(Be.lastFeaturesEntered.push(n),i===!1)return!1}}for(const n of t)if(Be.dispatchEvent(n,new sc(e.type,e.map,e.originalEvent))===!1)return!1;return!0}refresh(e){super.refresh(e),this.props.feature!==void 0&&this.props.feature!==this.ol&&(un("replacing bound feature",this.ol),this.componentWillUnmount(),this.ol=this.props.feature,this.componentDidMount()),this.props.properties!==(e==null?void 0:e.properties)&&this.ol.setProperties(this.props.properties),this.props.geometry!==(e==null?void 0:e.geometry)&&this.ol.setGeometry(this.props.geometry),this.props.style!==(e==null?void 0:e.style)&&this.ol.setStyle(Ns.getStyle(this.props.style))}componentDidMount(){un("didMount",this.ol),super.componentDidMount(),this.ol.on("change",this.onchange),this.context.vectorsource.addFeature(this.ol)}componentWillUnmount(){super.componentWillUnmount(),this.ol.un("change",this.onchange),this.context.vectorsource.removeFeature(this.ol)}render(){var e,t;const n=(t=(e=this.ol)===null||e===void 0?void 0:e.getGeometry())===null||t===void 0?void 0:t.getExtent(),i=n&&or(n);return at.createElement("div",{className:"_rlayers_RFeature"},at.createElement(Yn.Provider,{value:Object.assign(Object.assign({},this.context),{feature:this.ol,rFeature:this,location:i})},this.props.children))}}Be.pointerEvents=["click","pointerdrag","pointermove","singleclick","dblclick"];Be.lastFeaturesEntered=[];Be.lastFeaturesDragged=[];Be.hitTolerance=3;const ta="_rlayers_feature_handlers";class yI extends pI{constructor(e,t){super(e,t),this.source=new gI,this.ol=new BR({source:this.source}),this.eventSources=[this.ol,this.source]}refresh(e){super.refresh(e),this.ol.setProperties({label:"OpenStreetMap"})}}class js extends at.PureComponent{constructor(e,t){if(super(e,t),!this.context)throw new Error("A style property must be part of a style");this.ol=this.create(e)}create(e){throw new Error("RBaseStyle is an abstract class")}refresh(e){if(un("refreshStyle",this),!!e)for(const t of this.classProps){const n=t.charAt(0).toUpperCase()+t.substring(1);(e&&e[t])!==this.props[t]&&(this.ol["set"+n]?this.ol["set"+n](this.props[t]):console.error(`Underlying OpenLayers object does not support updating of ${t} after object creation. If you are using an anonymous constant array or object, consider assigning its value to a constant and then passing the constant or use React.useMemo() to avoid this warning and improve performance.`))}}set(e){}componentDidMount(){this.set(this.ol)}componentDidUpdate(e,t,n){e!==this.props&&this.refresh(e)}componentWillUnmount(){this.set(null)}render(){return null}}js.contextType=Yn;js.classProps=[];class ya extends js{create(e){return this.classProps=ya.classProps,new Zr(e)}set(e){if(this.context.style.setStroke)return this.context.style.setStroke(e);throw new Error("Parent element does not support a stroke")}}ya.classProps=["color","width","lineCap","lineJoin","lineDash"];class va extends js{create(e){return this.classProps=va.classProps,new Jr(e)}set(e){if(this.context.style.setFill)return this.context.style.setFill(e);throw new Error("Parent element does not support a fill")}}va.classProps=["color"];class Na extends js{create(e){throw new Error("RImage is an abstract class")}set(e){if(!this.context.style.setImage)throw new Error("Parent element does not support an image");this.context.style.setImage(e)}}Na.classProps=["opacity","rotateWithView","rotation","scale","displacement"];class za extends Na{create(e){throw new Error("RImage is an abstract class")}setStroke(e){this.stroke=e,this.ol=this.create(this.props),super.set(this.ol)}setFill(e){this.fill=e,this.ol=this.create(this.props),super.set(this.ol)}render(){return at.createElement("div",{className:"_rlayers_RStyle"},at.createElement(Yn.Provider,{value:Object.assign(Object.assign({},this.context),{style:this})},this.props.children))}}za.classProps=Na.classProps.concat(["radius"]);class $g extends za{create(e){return this.classProps=$g.classProps,new el(Object.assign(Object.assign({},e),{stroke:this.stroke,fill:this.fill}))}}$g.classProps=za.classProps.concat(["radius"]);class qg extends za{create(e){return this.classProps=qg.classProps,new La(Object.assign(Object.assign({},e),{stroke:this.stroke,fill:this.fill}))}}qg.classProps=za.classProps.concat(["radius1","radius2","points","angle"]);class Qg extends js{create(e){return this.classProps=Qg.classProps,new nh(e)}set(e){if(!this.context.style.setText)throw new Error("Parent element does not support a text");this.context.style.setText(e)}render(){return at.createElement("div",{className:"_rlayers_RStyle_RText"},at.createElement(Yn.Provider,{value:Object.assign(Object.assign({},this.context),{style:this.ol})},this.props.children))}}Qg.classProps=["text","font","offsetY","offsetX","overflow","scale","rotation","textAlign","padding","placement","textBaseline"];class Jg extends js{create(e){this.classProps=Jg.classProps;const t=this.context.style;if(!t.setBackgroundFill||!t.setBackgroundStroke)throw new Error("Parent element does not support a background");return{setFill:t.setBackgroundFill.bind(t),setStroke:t.setBackgroundStroke.bind(t)}}render(){return at.createElement("div",{className:"_rlayers_RStyle_RBackground"},at.createElement(Yn.Provider,{value:Object.assign(Object.assign({},this.context),{style:this.ol})},this.props.children))}}Jg.classProps=[];class ep extends Na{create(e){return this.classProps=ep.classProps,new ka(e)}}ep.classProps=Na.classProps.concat(["anchor","anchorXUnits","anchorYUnits","color","crossOrigin","img","offset","offsetOrigin","size","imgSize","src"]);class sy extends l1{constructor(e,t){super(e,t),this.source=new hI({url:this.props.url,format:this.props.format,projection:this.props.projection,cacheSize:this.props.cacheSize,extent:this.props.extent,overlaps:this.props.overlaps,state:this.props.state,tileClass:this.props.tileClass,tileSize:this.props.tileSize,tileGrid:this.props.tileGrid,tileLoadFunction:this.props.tileLoadFunction,tileUrlFunction:this.props.tileUrlFunction,transition:this.props.transition,wrapX:this.props.wrapX,zDirection:this.props.zDirection}),this.ol=new KR({style:Ns.getStyle(this.props.style),source:this.source,renderBuffer:this.props.renderBuffer}),this.eventSources=[this.ol,this.source],Be.initEventRelay(this.context.map)}incrementHandlers(e){var t;const n=Vn.getOLObject(ta,this.ol);n[e]=((t=n[e])!==null&&t!==void 0?t:0)+1}decrementHandlers(e){const t=Vn.getOLObject(ta,this.ol);t[e]--}refresh(e){super.refresh(e);const t=Object.keys(this.props).filter(n=>n.startsWith("on")).reduce((n,i)=>Object.assign(Object.assign({},n),{["_"+i.toLowerCase()]:this.props[i]}),{});this.ol.setProperties(t),(e==null?void 0:e.style)!==this.props.style&&this.ol.setStyle(Ns.getStyle(this.props.style)),(e==null?void 0:e.url)!==this.props.url&&(this.source.setUrl(this.props.url),this.source.refresh())}render(){return at.createElement("div",{className:"_rlayers_RLayerVectorTile"},at.createElement(Yn.Provider,{value:Object.assign(Object.assign({},this.context),{layer:this.ol,vectortilelayer:this.ol,rLayer:this,rLayerVectorTile:this})},this.props.children))}}class pi extends Vn{constructor(e,t){var n,i;if(super(e,t),!(!((i=(n=this.context)===null||n===void 0?void 0:n.map)===null||i===void 0)&&i.addInteraction))throw new Error("An interaction must be part of a map");this.ol=this.createOL(e)}createOL(e){throw new Error("RBaseInteraction should not be directly instantiated")}refresh(e){for(const t of this.classProps)if(e&&e[t]!==this.props[t]){un("Replacing interaction",this,e),this.componentWillUnmount(),this.ol=this.createOL(this.props),this.componentDidMount();break}super.refresh(e)}componentDidMount(){super.componentDidMount(),this.context.map.addInteraction(this.ol)}componentWillUnmount(){super.componentWillUnmount(),this.context.map.removeInteraction(this.ol)}}pi.classProps=[];class ba extends pi{}ba.classProps=["handleDownEvent","handleDragEvent","handleMoveEvent","handleUpEvent"];class tp extends ba{createOL(e){return this.classProps=tp.classProps,new qv(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}tp.classProps=["className","condition","minArea","boxEndCondition"];const xf={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"};class wf extends Kn{constructor(e,t,n,i,l){super(e),this.features=t,this.coordinate=n,this.startCoordinate=i,this.mapBrowserEvent=l}}class vI extends is{constructor(e){e=e||{},super(e),this.on,this.once,this.un,this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=e.features!==void 0?e.features:null;let t;if(e.layers&&!this.features_)if(typeof e.layers=="function")t=e.layers;else{const n=e.layers;t=function(i){return n.includes(i)}}else t=qr;this.layerFilter_=t,this.filter_=e.filter&&!this.features_?e.filter:qr,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.condition_=e.condition?e.condition:_a,this.lastFeature_=null,this.addChangeListener(Nc.ACTIVE,this.handleActiveChanged_)}handleDownEvent(e){if(!e.originalEvent||!this.condition_(e))return!1;if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);const t=this.features_||new Jt([this.lastFeature_]);return this.dispatchEvent(new wf(xf.TRANSLATESTART,t,e.coordinate,this.startCoordinate_,e)),!0}return!1}handleUpEvent(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);const t=this.features_||new Jt([this.lastFeature_]);return this.dispatchEvent(new wf(xf.TRANSLATEEND,t,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1}handleDragEvent(e){if(this.lastCoordinate_){const t=e.coordinate;e.map.getView().getProjection();const n=it(t),i=it(this.lastCoordinate_),l=n[0]-i[0],a=n[1]-i[1],u=this.features_||new Jt([this.lastFeature_]);u.forEach(function(h){const f=h.getGeometry();f.translate(l,a),h.setGeometry(f)}),this.lastCoordinate_=t,this.dispatchEvent(new wf(xf.TRANSLATING,u,t,this.startCoordinate_,e))}}handleMoveEvent(e){const t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(e,t){return t.forEachFeatureAtPixel(e,(n,i)=>{if(!(!(n instanceof Wn)||!this.filter_(n,i))&&!(this.features_&&!this.features_.getArray().includes(n)))return n},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(e){this.hitTolerance_=e}setMap(e){const t=this.getMap();super.setMap(e),this.updateState_(t)}handleActiveChanged_(){this.updateState_(null)}updateState_(e){let t=this.getMap();const n=this.getActive();(!t||!n)&&(t=t||e,t&&t.getViewport().classList.remove("ol-grab","ol-grabbing"))}}class np extends ba{createOL(e){return this.classProps=np.classProps,new vI(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}np.classProps=["features","layers","filter","hitTolerance"];const oc={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class lc extends Kn{constructor(e,t){super(e),this.feature=t}}function xI(r,e){const t=[];for(let n=0;n<e.length;++n){const l=e[n].getGeometry();x1(r,l,t)}return t}function ac(r,e){return er(r[0],r[1],e[0],e[1])}function Mo(r,e){const t=r.length;return e<0?r[e+t]:e>=t?r[e-t]:r[e]}function uc(r,e,t){let n,i;e<t?(n=e,i=t):(n=t,i=e);const l=Math.ceil(n),a=Math.floor(i);if(l>a){const h=Ao(r,n),f=Ao(r,i);return ac(h,f)}let u=0;if(n<l){const h=Ao(r,n),f=Mo(r,l);u+=ac(h,f)}if(a<i){const h=Mo(r,a),f=Ao(r,i);u+=ac(h,f)}for(let h=l;h<a-1;++h){const f=Mo(r,h),g=Mo(r,h+1);u+=ac(f,g)}return u}function x1(r,e,t){if(e instanceof ki){cc(r,e.getCoordinates(),!1,t);return}if(e instanceof Zo){const n=e.getCoordinates();for(let i=0,l=n.length;i<l;++i)cc(r,n[i],!1,t);return}if(e instanceof Fi){const n=e.getCoordinates();for(let i=0,l=n.length;i<l;++i)cc(r,n[i],!0,t);return}if(e instanceof $o){const n=e.getCoordinates();for(let i=0,l=n.length;i<l;++i){const a=n[i];for(let u=0,h=a.length;u<h;++u)cc(r,a[u],!0,t)}return}if(e instanceof Dc){const n=e.getGeometries();for(let i=0;i<n.length;++i)x1(r,n[i],t);return}}const Ef={index:-1,endIndex:NaN};function wI(r,e,t,n){const i=r[0],l=r[1];let a=1/0,u=-1,h=NaN;for(let m=0;m<e.targets.length;++m){const _=e.targets[m],v=_.coordinates;let x=1/0,E;for(let C=0;C<v.length-1;++C){const S=v[C],T=v[C+1],I=w1(i,l,S,T);I.squaredDistance<x&&(x=I.squaredDistance,E=C+I.along)}x<a&&(a=x,_.ring&&e.targetIndex===m&&(_.endIndex>_.startIndex?E<_.startIndex&&(E+=v.length):_.endIndex<_.startIndex&&E>_.startIndex&&(E-=v.length)),h=E,u=m)}const f=e.targets[u];let g=f.ring;if(e.targetIndex===u&&g){const m=Ao(f.coordinates,h),_=t.getPixelFromCoordinate(m);Cc(_,e.startPx)>n&&(g=!1)}if(g){const m=f.coordinates,_=m.length,v=f.startIndex,x=h;if(v<x){const E=uc(m,v,x);uc(m,v,x-_)<E&&(h-=_)}else{const E=uc(m,v,x);uc(m,v,x+_)<E&&(h+=_)}}return Ef.index=u,Ef.endIndex=h,Ef}function cc(r,e,t,n){const i=r[0],l=r[1];for(let a=0,u=e.length-1;a<u;++a){const h=e[a],f=e[a+1],g=w1(i,l,h,f);if(g.squaredDistance===0){const m=a+g.along;n.push({coordinates:e,ring:t,startIndex:m,endIndex:m});return}}}const Cf={along:0,squaredDistance:0};function w1(r,e,t,n){const i=t[0],l=t[1],a=n[0],u=n[1],h=a-i,f=u-l;let g=0,m=i,_=l;return(h!==0||f!==0)&&(g=rt(((r-i)*h+(e-l)*f)/(h*h+f*f),0,1),m+=h*g,_+=f*g),Cf.along=g,Cf.squaredDistance=Hc(er(r,e,m,_),10),Cf}function Ao(r,e){const t=r.length;let n=Math.floor(e);const i=e-n;n>=t?n-=t:n<0&&(n+=t);let l=n+1;l>=t&&(l-=t);const a=r[n],u=a[0],h=a[1],f=r[l],g=f[0]-u,m=f[1]-h;return[u+g*i,h+m*i]}class EI extends is{constructor(e){const t=e;t.stopDown||(t.stopDown=Jo),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=SI(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:qr,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let n=e.geometryFunction;if(!n){const i=this.mode_;if(i==="Circle")n=(l,a,u)=>{const h=a||new oh([NaN,NaN]),f=it(l[0]),g=Xo(f,it(l[l.length-1]));return h.setCenterAndRadius(f,Math.sqrt(g),this.geometryLayout_),h};else{let l;i==="Point"?l=fi:i==="LineString"?l=ki:i==="Polygon"&&(l=Fi),n=(a,u,h)=>(u?i==="Polygon"?a[0].length?u.setCoordinates([a[0].concat([a[0][0]])],this.geometryLayout_):u.setCoordinates([],this.geometryLayout_):u.setCoordinates(a,this.geometryLayout_):u=new l(a,this.geometryLayout_),u)}}this.geometryFunction_=n,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new zv({source:new Wv({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:CI(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:Kg,this.freehandCondition_,e.freehand?this.freehandCondition_=_a:this.freehandCondition_=e.freehandCondition?e.freehandCondition:Yv,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(Nc.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=_a:t=e:t=vR,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===xe.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===Ae.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Ae.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Ae.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===Ae.POINTERDOWN?n=!1:t&&this.getPointerCount()<2?(n=e.type===Ae.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Ae.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Ae.DBLCLICK&&(n=!1),super.handleEvent(e)&&n}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Si(Ae.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),n=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),i=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),l=Rn([n,i]),a=this.traceSource_.getFeaturesInExtent(l);if(a.length===0)return;const u=xI(e.coordinate,a);u.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:u,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const n=e.startIndex<=e.endIndex,i=e.startIndex<=t;n===i?n&&t>e.endIndex||!n&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(n&&t<e.endIndex||!n&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let n=0;if(e<t){const i=Math.ceil(e);let l=Math.floor(t);l===t&&(l-=1),n=l-i+1}else{const i=Math.floor(e);let l=Math.ceil(t);l===t&&(l+=1),n=i-l+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(e,t,n){if(t===n)return;const i=[];if(t<n){const l=Math.ceil(t);let a=Math.floor(n);a===n&&(a-=1);for(let u=l;u<=a;++u)i.push(Mo(e.coordinates,u))}else{const l=Math.floor(t);let a=Math.ceil(n);a===n&&(a+=1);for(let u=l;u>=a;--u)i.push(Mo(e.coordinates,u))}i.length&&this.appendCoordinates(i)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&Cc(t.startPx,e.pixel)<this.snapTolerance_)return;const n=wI(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==n.index){if(t.targetIndex!==-1){const h=t.targets[t.targetIndex];this.removeTracedCoordinates_(h.startIndex,h.endIndex)}const u=t.targets[n.index];this.addTracedCoordinates_(u,u.startIndex,n.endIndex)}else{const u=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(u,n.endIndex)}t.targetIndex=n.index;const i=t.targets[t.targetIndex];i.endIndex=n.endIndex;const l=Ao(i.coordinates,i.endIndex),a=this.getMap().getPixelFromCoordinate(l);e.coordinate=l,e.pixel=[Math.round(a[0]),Math.round(a[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const n=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const i=!this.finishCoordinate_;i&&this.startDrawing_(e.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_==="Point")&&(this.atFinish_(e.pixel,n)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,n=e.pixel,i=t[0]-n[0],l=t[1]-n[1],a=i*i+l*l;if(this.shouldHandle_=this.freehand_?a>this.squaredClickTolerance_:a<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let n=!1;if(this.sketchFeature_){let i=!1,l=[this.finishCoordinate_];const a=this.mode_;if(a==="Point")n=!0;else if(a==="Circle")n=this.sketchCoords_.length===2;else if(a==="LineString")i=!t&&this.sketchCoords_.length>this.minPoints_;else if(a==="Polygon"){const u=this.sketchCoords_;i=u[0].length>this.minPoints_,l=[u[0][0],u[0][u[0].length-2]],t?l=[u[0][0]]:l=[u[0][0],u[0][u[0].length-2]]}if(i){const u=this.getMap();for(let h=0,f=l.length;h<f;h++){const g=l[h],m=u.getPixelFromCoordinate(g),_=e[0]-m[0],v=e[1]-m[1],x=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(_*_+v*v)<=x,n){this.finishCoordinate_=g;break}}}}return n}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Wn(new fi(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Wn);const t=e.getLinearRing(0);let n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),n.changed()):(n=new ki(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(e){const t=this.getMap().getView().getProjection(),n=Sc(this.geometryLayout_);for(;e.length<n;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Wn(new ki(this.sketchLineCoords_)));const i=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Wn,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new lc(oc.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),n=this.sketchFeature_.getGeometry(),i=t.getView().getProjection(),l=Sc(this.geometryLayout_);let a,u;for(;e.length<l;)e.push(0);this.mode_==="Point"?u=this.sketchCoords_:this.mode_==="Polygon"?(a=this.sketchCoords_[0],u=a[a.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(a=this.sketchCoords_,u=a[a.length-1]),u[0]=e[0],u[1]=e[1],this.geometryFunction_(this.sketchCoords_,n,i),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),n.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(n):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();let i,l;const a=this.mode_;return a==="LineString"||a==="Circle"?(this.finishCoordinate_=e.slice(),l=this.sketchCoords_,l.length>=this.maxPoints_&&(this.freehand_?l.pop():i=!0),l.push(e.slice()),this.geometryFunction_(l,t,n)):a==="Polygon"&&(l=this.sketchCoords_[0],l.length>=this.maxPoints_&&(this.freehand_?l.pop():i=!0),l.push(e.slice()),i&&(this.finishCoordinate_=l[0]),this.geometryFunction_(this.sketchCoords_,t,n)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),i?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),i=this.mode_;for(let l=0;l<e;++l){let a;if(i==="LineString"||i==="Circle"){if(a=this.sketchCoords_,a.splice(-2,1),a.length>=2){this.finishCoordinate_=a[a.length-2].slice();const u=this.finishCoordinate_.slice();a[a.length-1]=u,this.createOrUpdateSketchPoint_(u)}this.geometryFunction_(a,t,n),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(i==="Polygon"){a=this.sketchCoords_[0],a.splice(-2,1);const u=this.sketchLine_.getGeometry();if(a.length>=2){const h=a[a.length-2].slice();a[a.length-1]=h,this.createOrUpdateSketchPoint_(h)}u.setCoordinates(a),this.geometryFunction_(this.sketchCoords_,t,n)}if(a.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const n=e.getGeometry(),i=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,n,i)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,n,i),t=n.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new Aa([t])):this.type_==="MultiLineString"?e.setGeometry(new Zo([t])):this.type_==="MultiPolygon"&&e.setGeometry(new $o([t])),this.dispatchEvent(new lc(oc.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new lc(oc.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,n=!this.sketchFeature_;n&&this.startDrawing_(e[0]);let i;if(t==="LineString"||t==="Circle")i=this.sketchCoords_;else if(t==="Polygon")i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;n&&i.shift(),i.pop();for(let a=0;a<e.length;a++)this.addToDrawing_(e[a]);const l=e[e.length-1];this.sketchFeature_=this.addToDrawing_(l),this.modifyDrawing_(l)}extend(e){const n=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=n.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new Wn(new fi(i)),this.updateSketchFeatures_(),this.dispatchEvent(new lc(oc.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function CI(){const r=gv();return function(e,t){return r[e.getGeometry().getType()]}}function SI(r){switch(r){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+r)}}class ip extends ba{createOL(e){var t;if(!(!((t=this===null||this===void 0?void 0:this.context)===null||t===void 0)&&t.vectorsource))throw new Error("A Draw interaction must be part of a vector layer");return this.classProps=ip.classProps,new EI(Object.assign({type:e.type,source:this.context.vectorsource},Object.keys(e).filter(n=>this.classProps.includes(n)).reduce((n,i)=>Object.assign(Object.assign({},n),{[i]:e[i]}),{})))}}ip.classProps=["condition","finishCondition","freehandCondition","style","stopClick","maxPoints","minPoints","snapTolerance"];const oy=0,na=1,ly=[0,0,0,0],No=[],Sf={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class Tf extends Kn{constructor(e,t,n){super(e),this.features=t,this.mapBrowserEvent=n}}class TI extends is{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:Hv,this.defaultDeleteCondition_=function(n){return mR(n)&&xR(n)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:_a,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new Wf,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new zv({source:new Wv({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:II(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new Jt(this.source_.getFeatures()),this.source_.addEventListener(an.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(an.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(Vt.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(Vt.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const i=this.SEGMENT_WRITERS_[t.getType()];i&&i(e,t)}const n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),e.addEventListener(xe.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Jt;const n=this.featuresBeingModified_.getArray();for(let i=0,l=t.length;i<l;++i){const a=t[i];for(let u=0,h=a.length;u<h;++u){const f=a[u].feature;f&&!n.includes(f)&&this.featuresBeingModified_.push(f)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new Tf(Sf.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(xe.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,n=[];t.forEach(function(i){e===i.feature&&n.push(i)});for(let i=n.length-1;i>=0;--i){const l=n[i];for(let a=this.dragSegments_.length-1;a>=0;--a)this.dragSegments_[a][0]===l&&this.dragSegments_.splice(a,1);t.remove(l)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const n=t.getCoordinates(),i={feature:e,geometry:t,segment:[n,n]};this.rBush_.insert(t.getExtent(),i)}writeMultiPointGeometry_(e,t){const n=t.getCoordinates();for(let i=0,l=n.length;i<l;++i){const a=n[i],u={feature:e,geometry:t,depth:[i],index:i,segment:[a,a]};this.rBush_.insert(t.getExtent(),u)}}writeLineStringGeometry_(e,t){const n=t.getCoordinates();for(let i=0,l=n.length-1;i<l;++i){const a=n.slice(i,i+2),u={feature:e,geometry:t,index:i,segment:a};this.rBush_.insert(Rn(a),u)}}writeMultiLineStringGeometry_(e,t){const n=t.getCoordinates();for(let i=0,l=n.length;i<l;++i){const a=n[i];for(let u=0,h=a.length-1;u<h;++u){const f=a.slice(u,u+2),g={feature:e,geometry:t,depth:[i],index:u,segment:f};this.rBush_.insert(Rn(f),g)}}}writePolygonGeometry_(e,t){const n=t.getCoordinates();for(let i=0,l=n.length;i<l;++i){const a=n[i];for(let u=0,h=a.length-1;u<h;++u){const f=a.slice(u,u+2),g={feature:e,geometry:t,depth:[i],index:u,segment:f};this.rBush_.insert(Rn(f),g)}}}writeMultiPolygonGeometry_(e,t){const n=t.getCoordinates();for(let i=0,l=n.length;i<l;++i){const a=n[i];for(let u=0,h=a.length;u<h;++u){const f=a[u];for(let g=0,m=f.length-1;g<m;++g){const _=f.slice(g,g+2),v={feature:e,geometry:t,depth:[u,i],index:g,segment:_};this.rBush_.insert(Rn(_),v)}}}}writeCircleGeometry_(e,t){const n=t.getCenter(),i={feature:e,geometry:t,index:oy,segment:[n,n]},l={feature:e,geometry:t,index:na,segment:[n,n]},a=[i,l];i.featureSegments=a,l.featureSegments=a,this.rBush_.insert(Jl(n),i);let u=t;this.rBush_.insert(u.getExtent(),l)}writeGeometryCollectionGeometry_(e,t){const n=t.getGeometriesArray();for(let i=0;i<n.length;++i){const l=n[i],a=this.SEGMENT_WRITERS_[l.getType()];a(e,l)}}createOrUpdateVertexFeature_(e,t,n){let i=this.vertexFeature_;return i?i.getGeometry().setCoordinates(e):(i=new Wn(new fi(e)),this.vertexFeature_=i,this.overlay_.getSource().addFeature(i)),i.set("features",t),i.set("geometries",n),i}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==Ae.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=Ae.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==Ae.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],n=[],i=[];for(let l=0,a=this.dragSegments_.length;l<a;++l){const u=this.dragSegments_[l],h=u[0],f=h.feature;n.includes(f)||n.push(f);const g=h.geometry;i.includes(g)||i.push(g);const m=h.depth;let _;const v=h.segment,x=u[1];for(;t.length<g.getStride();)t.push(v[x][t.length]);switch(g.getType()){case"Point":_=t,v[0]=t,v[1]=t;break;case"MultiPoint":_=g.getCoordinates(),_[h.index]=t,v[0]=t,v[1]=t;break;case"LineString":_=g.getCoordinates(),_[h.index+x]=t,v[x]=t;break;case"MultiLineString":_=g.getCoordinates(),_[m[0]][h.index+x]=t,v[x]=t;break;case"Polygon":_=g.getCoordinates(),_[m[0]][h.index+x]=t,v[x]=t;break;case"MultiPolygon":_=g.getCoordinates(),_[m[1]][m[0]][h.index+x]=t,v[x]=t;break;case"Circle":if(v[0]=t,v[1]=t,h.index===oy)this.changingFeature_=!0,g.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let E=Cc(it(g.getCenter()),it(t));g.setRadius(E),this.changingFeature_=!1}break}_&&this.setGeometryCoordinates_(g,_)}this.createOrUpdateVertexFeature_(t,n,i)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const n=this.vertexFeature_;if(n){e.map.getView().getProjection();const i=[],l=n.getGeometry().getCoordinates(),a=Rn([l]),u=this.rBush_.getInExtent(a),h={};u.sort(RI);for(let f=0,g=u.length;f<g;++f){const m=u[f],_=m.segment;let v=Se(m.geometry);const x=m.depth;if(x&&(v+="-"+x.join("-")),h[v]||(h[v]=new Array(2)),m.geometry.getType()==="Circle"&&m.index===na){const E=uy(t,m);hi(E,l)&&!h[v][0]&&(this.dragSegments_.push([m,0]),h[v][0]=m);continue}if(hi(_[0],l)&&!h[v][0]){this.dragSegments_.push([m,0]),h[v][0]=m;continue}if(hi(_[1],l)&&!h[v][1]){if(h[v][0]&&h[v][0].index===0){let E=m.geometry.getCoordinates();switch(m.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":E=E[x[1]];case"Polygon":if(m.index!==E[x[0]].length-2)continue;break}}this.dragSegments_.push([m,1]),h[v][1]=m;continue}Se(_)in this.vertexSegments_&&!h[v][0]&&!h[v][1]&&this.insertVertexCondition_(e)&&i.push(m)}i.length&&this.willModifyFeatures_(e,[i]);for(let f=i.length-1;f>=0;--f)this.insertVertex_(i[f],l)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const n=this.dragSegments_[t][0],i=n.geometry;if(i.getType()==="Circle"){const l=i.getCenter(),a=n.featureSegments[0],u=n.featureSegments[1];a.segment[0]=l,a.segment[1]=l,u.segment[0]=l,u.segment[1]=l,this.rBush_.update(Jl(l),a);let h=i;this.rBush_.update(h.getExtent(),u)}else this.rBush_.update(Rn(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new Tf(Sf.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,n){const i=n||t.getCoordinateFromPixel(e);t.getView().getProjection();const l=function(h,f){return ay(i,h)-ay(i,f)};let a,u;if(this.hitDetection_){const h=typeof this.hitDetection_=="object"?f=>f===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(f,g,m)=>{m&&m.getType()==="Point"&&(m=new fi(Yo(m.getCoordinates())));const _=m||f.getGeometry();if(f instanceof Wn&&this.features_.getArray().includes(f)){u=_;const v=f.getGeometry().getFlatCoordinates().slice(0,2);a=[{feature:f,geometry:u,segment:[v,v]}]}return!0},{layerFilter:h})}if(!a){const h=qi(Jl(i,ly)),f=t.getView().getResolution()*this.pixelTolerance_,g=$c(Ji(h,f,ly));a=this.rBush_.getInExtent(g)}if(a&&a.length>0){const h=a.sort(l)[0],f=h.segment;let g=uy(i,h);const m=t.getPixelFromCoordinate(g);let _=Cc(e,m);if(u||_<=this.pixelTolerance_){const v={};if(v[Se(f)]=!0,this.snapToPointer_||(this.delta_[0]=g[0]-i[0],this.delta_[1]=g[1]-i[1]),h.geometry.getType()==="Circle"&&h.index===na)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(g,[h.feature],[h.geometry]);else{const x=t.getPixelFromCoordinate(f[0]),E=t.getPixelFromCoordinate(f[1]),C=Xo(m,x),S=Xo(m,E);_=Math.sqrt(Math.min(C,S)),this.snappedToVertex_=_<=this.pixelTolerance_,this.snappedToVertex_&&(g=C>S?f[1]:f[0]),this.createOrUpdateVertexFeature_(g,[h.feature],[h.geometry]);const T={};T[Se(h.geometry)]=!0;for(let I=1,L=a.length;I<L;++I){const k=a[I].segment;if(hi(f[0],k[0])&&hi(f[1],k[1])||hi(f[0],k[1])&&hi(f[1],k[0])){const j=Se(a[I].geometry);j in T||(T[j]=!0,v[Se(k)]=!0)}else break}}this.vertexSegments_=v;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const n=e.segment,i=e.feature,l=e.geometry,a=e.depth,u=e.index;let h;for(;t.length<l.getStride();)t.push(0);switch(l.getType()){case"MultiLineString":h=l.getCoordinates(),h[a[0]].splice(u+1,0,t);break;case"Polygon":h=l.getCoordinates(),h[a[0]].splice(u+1,0,t);break;case"MultiPolygon":h=l.getCoordinates(),h[a[1]][a[0]].splice(u+1,0,t);break;case"LineString":h=l.getCoordinates(),h.splice(u+1,0,t);break;default:return}this.setGeometryCoordinates_(l,h);const f=this.rBush_;f.remove(e),this.updateSegmentIndices_(l,u,a,1);const g={segment:[n[0],t],feature:i,geometry:l,depth:a,index:u};f.insert(Rn(g.segment),g),this.dragSegments_.push([g,1]);const m={segment:[t,n[1]],feature:i,geometry:l,depth:a,index:u+1};f.insert(Rn(m.segment),m),this.dragSegments_.push([m,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Ae.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new Tf(Sf.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let n=!1,i,l,a,u,h,f,g,m,_,v,x;for(h=e.length-1;h>=0;--h)a=e[h],v=a[0],x=Se(v.feature),v.depth&&(x+="-"+v.depth.join("-")),x in t||(t[x]={}),a[1]===0?(t[x].right=v,t[x].index=v.index):a[1]==1&&(t[x].left=v,t[x].index=v.index+1);for(x in t){switch(_=t[x].right,g=t[x].left,f=t[x].index,m=f-1,g!==void 0?v=g:v=_,m<0&&(m=0),u=v.geometry,l=u.getCoordinates(),i=l,n=!1,u.getType()){case"MultiLineString":l[v.depth[0]].length>2&&(l[v.depth[0]].splice(f,1),n=!0);break;case"LineString":l.length>2&&(l.splice(f,1),n=!0);break;case"MultiPolygon":i=i[v.depth[1]];case"Polygon":i=i[v.depth[0]],i.length>4&&(f==i.length-1&&(f=0),i.splice(f,1),n=!0,f===0&&(i.pop(),i.push(i[0]),m=i.length-1));break}if(n){this.setGeometryCoordinates_(u,l);const E=[];if(g!==void 0&&(this.rBush_.remove(g),E.push(g.segment[0])),_!==void 0&&(this.rBush_.remove(_),E.push(_.segment[1])),g!==void 0&&_!==void 0){const C={depth:v.depth,feature:v.feature,geometry:v.geometry,index:m,segment:E};this.rBush_.insert(Rn(C.segment),C)}this.updateSegmentIndices_(u,f,v.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return n}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,n,i){this.rBush_.forEachInExtent(e.getExtent(),function(l){l.geometry===e&&(n===void 0||l.depth===void 0||ar(l.depth,n))&&l.index>t&&(l.index+=i)})}}function RI(r,e){return r.index-e.index}function ay(r,e,t){const n=e.geometry;if(n.getType()==="Circle"){let l=n;if(e.index===na){const a=Xo(l.getCenter(),it(r)),u=Math.sqrt(a)-l.getRadius();return u*u}}const i=it(r);return No[0]=it(e.segment[0]),No[1]=it(e.segment[1]),TC(i,No)}function uy(r,e,t){const n=e.geometry;if(n.getType()==="Circle"&&e.index===na)return Yo(n.getClosestPoint(it(r)));const i=it(r);return No[0]=it(e.segment[0]),No[1]=it(e.segment[1]),Yo(Uy(i,No))}function II(){const r=gv();return function(e,t){return r.Point}}class rp extends ba{createOL(e){var t;if(!(!((t=this===null||this===void 0?void 0:this.context)===null||t===void 0)&&t.vectorsource))throw new Error("A Modify interaction must be part of a vector layer");return this.classProps=rp.classProps,new TI(Object.assign({source:this.context.vectorsource},Object.keys(e).filter(n=>this.classProps.includes(n)).reduce((n,i)=>Object.assign(Object.assign({},n),{[i]:e[i]}),{})))}}rp.classProps=["condition","deleteCondition","insertVertexCondition","style","pixelTolerance","hitDetection"];class sp extends pi{createOL(e){return this.classProps=sp.classProps,new Vv(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}sp.classProps=["duration","delta"];class op extends pi{createOL(e){return this.classProps=op.classProps,new Zv(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}op.classProps=["condition","kinetic"];class lp extends pi{createOL(e){return this.classProps=lp.classProps,new $v(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}lp.classProps=["condition","duration"];class ap extends pi{createOL(e){return this.classProps=ap.classProps,new Qv(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}ap.classProps=["className","condition","duration","out","minArea"];class up extends pi{createOL(e){return this.classProps=up.classProps,new t1(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}up.classProps=["condition","maxDelta","duration","useAnchor","constrainResolution"];class cp extends pi{createOL(e){return this.classProps=cp.classProps,new n1(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}cp.classProps=["threshold","duration"];class hp extends pi{createOL(e){return this.classProps=hp.classProps,new i1(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}hp.classProps=["duration"];class dp extends pi{createOL(e){return this.classProps=dp.classProps,new Jv(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}dp.classProps=["condition","duration","pixelDelta"];class fp extends pi{createOL(e){return this.classProps=fp.classProps,new e1(Object.keys(e).filter(t=>this.classProps.includes(t)).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))}}fp.classProps=["condition","duration","delta"];class PI{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Wn,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?At(t.dataProjection):this.readProjection(e);t.extent&&n&&n.getUnits()==="tile-pixels"&&(n=At(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Le()}readFeature(e,t){return Le()}readFeatures(e,t){return Le()}readGeometry(e,t){return Le()}readProjection(e){return Le()}writeFeature(e,t){return Le()}writeFeatures(e,t){return Le()}writeGeometry(e,t){return Le()}}function LI(r,e,t){const n=t?At(t.featureProjection):null,i=t?At(t.dataProjection):null;let l=r;if(n&&i&&!mc(n,i)){const a=i,u=n;a.getUnits()==="tile-pixels"?l.transform(a,u):l.applyTransform(sa(a,u))}return l}const Jf=65536*65536,cy=1/Jf,kI=12,hy=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),Rf=0,hc=1,Xl=2,dc=5;class FI{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,n=this.length){for(;this.pos<n;){const i=this.readVarint(),l=i>>3,a=this.pos;this.type=i&7,e(l,t,this),this.pos===a&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Jf;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Jf;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let n,i;return i=t[this.pos++],n=i&127,i<128||(i=t[this.pos++],n|=(i&127)<<7,i<128)||(i=t[this.pos++],n|=(i&127)<<14,i<128)||(i=t[this.pos++],n|=(i&127)<<21,i<128)?n:(i=t[this.pos],n|=(i&15)<<28,MI(n,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=kI&&hy?hy.decode(this.buf.subarray(t,e)):XI(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===Xl?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===Rf)for(;this.buf[this.pos++]>127;);else if(t===Xl)this.pos=this.readVarint()+this.pos;else if(t===dc)this.pos+=4;else if(t===hc)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.dataView=new DataView(n.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*cy),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*cy),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){AI(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=YI(this.buf,e,this.pos);const n=this.pos-t;n>=128&&dy(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let n=0;n<t;n++)this.buf[this.pos++]=e[n]}writeRawMessage(e,t){this.pos++;const n=this.pos;e(t,this);const i=this.pos-n;i>=128&&dy(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,n){this.writeTag(e,Xl),this.writeRawMessage(t,n)}writePackedVarint(e,t){t.length&&this.writeMessage(e,NI,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,zI,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,jI,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,bI,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,GI,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,WI,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,UI,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,VI,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,BI,t)}writeBytesField(e,t){this.writeTag(e,Xl),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,dc),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,dc),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,hc),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,hc),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,Rf),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,Rf),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,Xl),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,dc),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,hc),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function MI(r,e,t){const n=t.buf;let i,l;if(l=n[t.pos++],i=(l&112)>>4,l<128||(l=n[t.pos++],i|=(l&127)<<3,l<128)||(l=n[t.pos++],i|=(l&127)<<10,l<128)||(l=n[t.pos++],i|=(l&127)<<17,l<128)||(l=n[t.pos++],i|=(l&127)<<24,l<128)||(l=n[t.pos++],i|=(l&1)<<31,l<128))return To(r,i,e);throw new Error("Expected varint not more than 10 bytes")}function To(r,e,t){return t?e*4294967296+(r>>>0):(e>>>0)*4294967296+(r>>>0)}function AI(r,e){let t,n;if(r>=0?(t=r%4294967296|0,n=r/4294967296|0):(t=~(-r%4294967296),n=~(-r/4294967296),t^4294967295?t=t+1|0:(t=0,n=n+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),DI(t,n,e),OI(n,e)}function DI(r,e,t){t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos]=r&127}function OI(r,e){const t=(r&7)<<4;e.buf[e.pos++]|=t|((r>>>=3)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127)))))}function dy(r,e,t){const n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(n);for(let i=t.pos-1;i>=r;i--)t.buf[i+n]=t.buf[i]}function NI(r,e){for(let t=0;t<r.length;t++)e.writeVarint(r[t])}function zI(r,e){for(let t=0;t<r.length;t++)e.writeSVarint(r[t])}function bI(r,e){for(let t=0;t<r.length;t++)e.writeFloat(r[t])}function GI(r,e){for(let t=0;t<r.length;t++)e.writeDouble(r[t])}function jI(r,e){for(let t=0;t<r.length;t++)e.writeBoolean(r[t])}function WI(r,e){for(let t=0;t<r.length;t++)e.writeFixed32(r[t])}function UI(r,e){for(let t=0;t<r.length;t++)e.writeSFixed32(r[t])}function VI(r,e){for(let t=0;t<r.length;t++)e.writeFixed64(r[t])}function BI(r,e){for(let t=0;t<r.length;t++)e.writeSFixed64(r[t])}function XI(r,e,t){let n="",i=e;for(;i<t;){const l=r[i];let a=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>t)break;let h,f,g;u===1?l<128&&(a=l):u===2?(h=r[i+1],(h&192)===128&&(a=(l&31)<<6|h&63,a<=127&&(a=null))):u===3?(h=r[i+1],f=r[i+2],(h&192)===128&&(f&192)===128&&(a=(l&15)<<12|(h&63)<<6|f&63,(a<=2047||a>=55296&&a<=57343)&&(a=null))):u===4&&(h=r[i+1],f=r[i+2],g=r[i+3],(h&192)===128&&(f&192)===128&&(g&192)===128&&(a=(l&15)<<18|(h&63)<<12|(f&63)<<6|g&63,(a<=65535||a>=1114112)&&(a=null))),a===null?(a=65533,u=1):a>65535&&(a-=65536,n+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),n+=String.fromCharCode(a),i+=u}return n}function YI(r,e,t){for(let n=0,i,l;n<e.length;n++){if(i=e.charCodeAt(n),i>55295&&i<57344)if(l)if(i<56320){r[t++]=239,r[t++]=191,r[t++]=189,l=i;continue}else i=l-55296<<10|i-56320|65536,l=null;else{i>56319||n+1===e.length?(r[t++]=239,r[t++]=191,r[t++]=189):l=i;continue}else l&&(r[t++]=239,r[t++]=191,r[t++]=189,l=null);i<128?r[t++]=i:(i<2048?r[t++]=i>>6|192:(i<65536?r[t++]=i>>12|224:(r[t++]=i>>18|240,r[t++]=i>>12&63|128),r[t++]=i>>6&63|128),r[t++]=i&63|128)}return t}class fy extends PI{constructor(e){super(),e=e||{},this.dataProjection=new gg({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:Pn,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,n,i){e.pos=t.geometry;const l=e.readVarint()+e.pos;let a=1,u=0,h=0,f=0,g=0,m=0;for(;e.pos<l;){if(!u){const _=e.readVarint();a=_&7,u=_>>3}if(u--,a===1||a===2)h+=e.readSVarint(),f+=e.readSVarint(),a===1&&g>m&&(i.push(g),m=g),n.push(h,f),g+=2;else if(a===7)g>m&&(n.push(n[m],n[m+1]),g+=2);else throw new Error("Invalid command found in the PBF")}g>m&&(i.push(g),m=g)}createFeature_(e,t,n){const i=t.type;if(i===0)return null;let l;const a=t.properties;let u;this.idProperty_?(u=a[this.idProperty_],delete a[this.idProperty_]):u=t.id,a[this.layerName_]=t.layer.name;const h=[],f=[];this.readRawGeometry_(e,t,h,f);const g=qI(i,f.length);if(this.featureClass===Pn)l=new this.featureClass(g,h,f,2,a,u),l.transform(n.dataProjection);else{let m;if(g=="Polygon"){const x=tv(h,f);m=x.length>1?new $o(h,"XY",x):new Fi(h,"XY",f)}else m=g==="Point"?new fi(h,"XY"):g==="LineString"?new ki(h,"XY"):g==="MultiPoint"?new Aa(h,"XY"):g==="MultiLineString"?new Zo(h,"XY",f):null;const _=this.featureClass;l=new _,this.geometryName_&&l.setGeometryName(this.geometryName_);const v=LI(m,!1,n);l.setGeometry(v),u!==void 0&&l.setId(u),l.setProperties(a,!0)}return l}getType(){return"arraybuffer"}readFeatures(e,t){const n=this.layers_;t=this.adaptOptions(t);const i=At(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;const l=new FI(e),a=l.readFields(KI,{}),u=[];for(const h in a){if(n&&!n.includes(h))continue;const f=a[h],g=f?[0,0,f.extent,f.extent]:null;i.setExtent(g);for(let m=0,_=f.length;m<_;++m){const v=$I(l,f,m),x=this.createFeature_(l,v,t);x!==null&&u.push(x)}}return u}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function KI(r,e,t){if(r===3){const n={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(HI,n,i),n.length=n.features.length,n.length&&(e[n.name]=n)}}function HI(r,e,t){if(r===15)e.version=t.readVarint();else if(r===1)e.name=t.readString();else if(r===5)e.extent=t.readVarint();else if(r===2)e.features.push(t.pos);else if(r===3)e.keys.push(t.readString());else if(r===4){let n=null;const i=t.readVarint()+t.pos;for(;t.pos<i;)r=t.readVarint()>>3,n=r===1?t.readString():r===2?t.readFloat():r===3?t.readDouble():r===4?t.readVarint64():r===5?t.readVarint():r===6?t.readSVarint():r===7?t.readBoolean():null;e.values.push(n)}}function ZI(r,e,t){if(r==1)e.id=t.readVarint();else if(r==2){const n=t.readVarint()+t.pos;for(;t.pos<n;){const i=e.layer.keys[t.readVarint()],l=e.layer.values[t.readVarint()];e.properties[i]=l}}else r==3?e.type=t.readVarint():r==4&&(e.geometry=t.pos)}function $I(r,e,t){r.pos=e.features[t];const n=r.readVarint()+r.pos,i={layer:e,type:0,properties:{}};return r.readFields(ZI,i,n),i}function qI(r,e){let t;return r===1?t=e===1?"Point":"MultiPoint":r===2?t=e===1?"LineString":"MultiLineString":r===3&&(t="Polygon"),t}function QI(){const[r,e]=K.useState({center:[-6.3926773690702375e6,-1.4627907057716285e6],zoom:4.776666666666669,resolution:5711.021571627054});return Ut.jsxs(DR,{initial:r,view:[r,e],className:"w-[100vw] h-[100vh]",children:[Ut.jsx(sy,{url:"http://34.171.229.232:7800/shared.green_areas/{z}/{x}/{y}.pbf",format:new fy,zIndex:100,children:Ut.jsxs(Ns,{children:[Ut.jsx(ya,{color:"green",width:1}),Ut.jsx(va,{color:"rgba(20,200,20,0.6)"})]})}),Ut.jsx(sy,{url:"http://34.171.229.232:7800/shared.municipality_boundaries/{z}/{x}/{y}.pbf",format:new fy,zIndex:100,children:Ut.jsxs(Ns,{children:[Ut.jsx(ya,{color:"red",width:2}),Ut.jsx(va,{color:"rgba(20,20,20,0)"})]})}),Ut.jsx(yI,{})]})}function JI(){return Ut.jsx(jE,{children:Ut.jsx(mE,{children:Ut.jsx(Ly,{path:"/green-areas",element:Ut.jsx(QI,{})})})})}yy.createRoot(document.getElementById("root")).render(Ut.jsx(K.StrictMode,{children:Ut.jsx(JI,{})}));
